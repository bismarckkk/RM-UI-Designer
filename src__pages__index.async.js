(self.webpackChunk=self.webpackChunk||[]).push([[858],{80806:function(E,N,h){"use strict";h.r(N),h.d(N,{default:function(){return At}});var re=h(25298),b=h.n(re),ie=h(17069),C=h.n(ie),se=h(62657),v=h.n(se),ne=h(21742),A=h.n(ne),le=h(83136),w=h.n(le),oe=h(82092),y=h.n(oe),j=h(93236),U=h(34083),ce=h(63867),L=h(89364),R=h(19531),P=h(73376),he=h(26068),T=h.n(he),ue=h(90228),S=h.n(ue),de=h(87999),F=h.n(de),fe=h(15558),me=h.n(fe),Me=h(38994),ge=h(71162),B=h(8867),Q=h(65789),G=h(9645),x=h(43792),ve=h(93017),ye=h(1148),je=h(80065),pe=h(19245),n=h(62086),xe=ye.Z.Dragger,ze=function(o){A()(l,o);var e=w()(l);function l(){var i;b()(this,l);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a)),y()(v()(i),"state",{show:!1,promise:null,title:"",accept:""}),i}return C()(l,[{key:"onCancel",value:function(){this.setState({show:!1}),this.state.promise.reject()}},{key:"onUpload",value:function(t){var a=this.state.promise;a.resolve(t),this.setState({show:!1})}},{key:"upload",value:function(t,a){var r=this;return new Promise(function(s,c){r.setState({show:!0,promise:{resolve:s,reject:c},title:t,accept:a})})}},{key:"render",value:function(){var t=this;return(0,n.jsx)("div",{children:(0,n.jsxs)(L.Z,{title:this.state.title,open:this.state.show,onCancel:function(){return t.onCancel()},footer:null,destroyOnClose:!0,children:[(0,n.jsx)(je.Z,{}),(0,n.jsxs)(xe,{showUploadList:!1,beforeUpload:function(r){return t.onUpload(r)},accept:this.state.accept,children:[(0,n.jsx)("p",{className:"ant-upload-drag-icon",children:(0,n.jsx)(pe.Z,{})}),(0,n.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})]})})}}]),l}(j.Component),Ie=ze,ke=h(27025),be=h(67687),Ce=function(o){A()(l,o);var e=w()(l);function l(){var i;b()(this,l);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a)),y()(v()(i),"state",{open:!1}),y()(v()(i),"initInfo",{okText:"OK",title:"",content:"",type:"warning",onOK:null}),y()(v()(i),"info",T()({},i.initInfo)),i}return C()(l,[{key:"open",value:function(t){this.info=t,this.setState({open:!0})}},{key:"onOK",value:function(){var t=this;this.setState({open:!1},function(){t.info=T()({},t.initInfo)}),this.info.onOK&&this.info.onOK()}},{key:"onCancel",value:function(){var t=this;this.setState({open:!1},function(){t.info=T()({},t.initInfo)})}},{key:"render",value:function(){var t=this,a=(0,n.jsx)(ke.Z,{style:{color:"var(--ant-color-primary)",fontSize:25}});return this.info.type==="warning"?a=(0,n.jsx)(P.Z,{style:{color:"orange",fontSize:25}}):this.info.type==="error"&&(a=(0,n.jsx)(be.Z,{style:{color:"red",fontSize:25}})),(0,n.jsx)(L.Z,{title:(0,n.jsxs)(R.Z,{size:"large",style:{display:"flex",alignItems:"center"},children:[a,(0,n.jsx)("h3",{children:this.info.title})]}),open:this.state.open,onOk:function(){return t.onOK()},onCancel:function(){return t.onCancel()},closeIcon:null,footer:this.props.couldClose||this.info.onOK?(0,n.jsx)(x.ZP,{type:"primary",onClick:function(){return t.onOK()},children:this.info.okText}):null,keyboard:this.props.couldClose,maskClosable:this.props.couldClose,style:{padding:50},zIndex:10,children:(0,n.jsx)("div",{style:{marginLeft:40},children:this.info.content})})}}]),l}(j.Component),Ae=Ce,O=h(81569),we=h(24263),Se=h(93600);function De(o){return o===-1?[]:o===-2?["window"]:["E-".concat(o)]}function H(o){return o[0]==="E"?o.slice(2):o==="window"?-2:-1}var Oe=[{key:"D1-group-layer",label:"layer"},{key:"D1-group-group",label:"group"}],Te=function(o){A()(l,o);var e=w()(l);function l(){var i;b()(this,l);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a)),y()(v()(i),"state",{treeData:[],rightClickMenuOpen:!1,groupKey:"layer"}),i}return C()(l,[{key:"onElementMenuContainerClick",value:function(t){t.target.localName==="div"&&(this.setState({rightClickMenuOpen:!1}),this.props.onSelect(-1))}},{key:"onElementMenuClick",value:function(t){if(this.setState({rightClickMenuOpen:!1}),t.key==="D2-copy"){var a=T()({},this.props.data[this.props.selectedId]);a.id=-1,this.props.onObjectEvent("_update",a)}else t.key==="D2-delete"&&this.props.onObjectEvent("remove",{id:this.props.selectedId})}},{key:"onElementRightClick",value:function(t){this.props.onSelect(H(t.node.key))}},{key:"onSelect",value:function(t){t.length!==0&&this.props.onSelect(H(t[0]))}},{key:"onMenuOpenChange",value:function(t){if(t){var a=this;setTimeout(function(){a.props.selectedId!==-1?a.setState({rightClickMenuOpen:!0}):a.setState({rightClickMenuOpen:!1})},100)}else this.setState({rightClickMenuOpen:!1})}},{key:"elementsMenuOnClick",value:function(t){var a=this;this.setState({groupKey:t.key.slice(9)},function(){return a.updateTree()})}},{key:"updateTree",value:function(){for(var t=this.state.groupKey,a=[],r=Object.keys(this.props.data),s=0;s<r.length;s++){for(var c=this.props.data[r[s]],u=-1,f=0;f<a.length;f++)if(a[f].key==="".concat(t,"-").concat(c[t])){u=f;break}u===-1&&(a.push({title:"".concat(t," ").concat(c[t]),key:"".concat(t,"-").concat(c[t]),children:[],isLeaf:!1}),u=a.length-1),a[u].children.push({title:c.name,key:"E-".concat(r[s])})}return a=a.sort(function(M,m){return M.key.toString().localeCompare(m.key.toString())}),a.unshift({title:"UI Window",key:"window"}),a}},{key:"render",value:function(){var t=this;return(0,n.jsx)(Q.Z,{size:"small",title:"Elements",style:{height:"100%"},extra:(0,n.jsx)(O.Z,{menu:{items:Oe,onClick:function(r){return t.elementsMenuOnClick(r)},selectable:!0,selectedKeys:["D1-group-".concat(this.state.groupKey)]},children:(0,n.jsxs)(R.Z,{style:{fontSize:11},children:["Group by",(0,n.jsx)(Se.Z,{size:"small"})]})}),children:(0,n.jsx)("div",{className:"card-body",onMouseUp:function(r){return t.onElementMenuContainerClick(r)},children:(0,n.jsx)(O.Z,{menu:{items:[{key:"D2-copy",label:"Copy"},{key:"D2-delete",label:"Delete",danger:!0}],onClick:function(r){t.onElementMenuClick(r)}},trigger:["contextMenu"],open:this.state.rightClickMenuOpen,onOpenChange:function(r){t.onMenuOpenChange(r)},children:(0,n.jsx)(we.Z,{className:"full",treeData:this.updateTree(),onSelect:function(r){return t.onSelect(r)},selectedKeys:De(this.props.selectedId),onRightClick:function(r){return t.onElementRightClick(r)},defaultExpandParent:!0})})})})}}]),l}(j.Component),Ee=Te,I=h(138),Y=document.createElement("a"),p={yellow:"rgb(255, 238, 70)",green:"rgb(168, 255, 45)",orange:"rgb(255, 163, 8)",purple:"rgb(240, 41, 246)",pink:"rgb(255, 100, 142)",cyan:"rgb(69, 255, 242)",white:"#fff",black:"#000",blue:"rgb(47, 168, 223)",red:"rgb(255, 69, 70)"};function Ne(o,e,l){var i={version:2,data:o,selected:l},t=JSON.stringify(i);Y.href="data:,".concat(t),Y.download=e,Y.click()}function Le(o){var e=null;return window.createObjcectURL!==void 0?e=window.createOjcectURL(o):window.URL!==void 0?e=window.URL.createObjectURL(o):window.webkitURL!==void 0&&(e=window.webkitURL.createObjectURL(o)),e}var Re=function(o){A()(l,o);var e=w()(l);function l(){return b()(this,l),e.apply(this,arguments)}return C()(l,[{key:"render",value:function(){return this.props.color==="Main"?(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{border:"1px solid #aaa",height:16,width:16,borderRadius:"20%",display:"inline-flex"},children:[(0,n.jsx)("div",{style:{backgroundColor:"red",height:12,width:6,margin:"1px 0 1px 1px",borderTopLeftRadius:"20%",borderBottomLeftRadius:"20%",display:"inline-flex"}}),(0,n.jsx)("div",{style:{backgroundColor:"blue",height:12,width:6,margin:"1px 1px 1px 0",borderTopRightRadius:"20%",borderBottomRightRadius:"20%",display:"inline-flex"}})]}),"\xA0 Main"]}):(0,n.jsx)("div",{children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{border:"1px solid #aaa",height:16,width:16,borderRadius:"20%",display:"inline-flex"},children:(0,n.jsx)("div",{style:{backgroundColor:p[this.props.color.toLowerCase()],height:12,width:12,margin:1,borderRadius:"20%",display:"inline-flex"}})}),"\xA0 ",this.props.color]})})}}]),l}(j.Component),k=Re,K={id:{title:"Id",key:"id",dataIndex:"id",valueType:"digit",editable:!1},name:{title:"Name",key:"name",dataIndex:"name"},group:{title:"Group",key:"group",dataIndex:"group"},kind:{title:"Kind",key:"kind",dataIndex:"kind",editable:!1},lineWidth:{title:"Line Width",key:"lineWidth",dataIndex:"lineWidth",valueType:"digit"},layer:{title:"Layer",key:"layer",dataIndex:"layer",valueType:"digit"},x:{title:"X",key:"x",dataIndex:"x",valueType:"digit"},y:{title:"Y",key:"y",dataIndex:"y",valueType:"digit"},x2:{title:"X2",key:"x2",dataIndex:"x2",valueType:"digit"},y2:{title:"Y2",key:"y2",dataIndex:"y2",valueType:"digit"},width:{title:"Width",key:"width",dataIndex:"width",valueType:"digit"},height:{title:"Height",key:"height",dataIndex:"height",valueType:"digit"},rx:{title:"Rx",key:"rx",dataIndex:"rx",valueType:"digit"},ry:{title:"Ry",key:"ry",dataIndex:"ry",valueType:"digit"},r:{title:"R",key:"r",dataIndex:"r",valueType:"digit"},startAngle:{title:"Start Angle",key:"startAngle",dataIndex:"startAngle",valueType:"digit"},endAngle:{title:"End Angle",key:"endAngle",dataIndex:"endAngle",valueType:"digit"},fontSize:{title:"Font Size",key:"fontSize",dataIndex:"fontSize",valueType:"digit"},decimalPlaces:{title:"Decimal Places",key:"decimalPlaces",dataIndex:"decimalPlaces",valueType:"digit"},number:{title:"Number",key:"number",dataIndex:"number",valueType:"digit"},text:{title:"Text",key:"text",dataIndex:"text"},color:{title:"Color",key:"color",dataIndex:"color",valueType:"select",valueEnum:{main:(0,n.jsx)(k,{color:"Main"}),yellow:(0,n.jsx)(k,{color:"Yellow"}),green:(0,n.jsx)(k,{color:"Green"}),orange:(0,n.jsx)(k,{color:"Orange"}),purple:(0,n.jsx)(k,{color:"Purple"}),pink:(0,n.jsx)(k,{color:"Pink"}),cyan:(0,n.jsx)(k,{color:"Cyan"}),black:(0,n.jsx)(k,{color:"Black"}),white:(0,n.jsx)(k,{color:"White"})}},team:{title:"Team",key:"team",dataIndex:"team",valueType:"select",valueEnum:{red:(0,n.jsx)(k,{color:"Red"}),blue:(0,n.jsx)(k,{color:"Blue"})}},backgroundImage:{title:"Background Image",key:"backgroundImage",dataIndex:"backgroundImage",valueType:"switch"}};function Fe(o){for(var e=Object.keys(o),l=[],i=0;i<e.length;i++)K[e[i]]&&l.push(K[e[i]]);return l}var We=I.fabric.util.createClass(I.fabric.Rect,{type:"UiRect",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(e){e||(e={}),e.color||(e.color="main"),this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.groupName,this.ratio=e.ratio,this._color=e.color,this.team=e.team,e.lockRotation=!0,e.lockScalingFlip=!0,e.hasRotatingPoint=!1,e.width||(e.width=50/this.ratio),e.height||(e.height=50/this.ratio),e.left||(e.left=50/this.ratio),e.top||(e.top=50/this.ratio),e.strokeWidth||(e.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?e.stroke=p[this._color]:(e.stroke=p[e.team],this._color="main"),e.fill=null,this.callSuper("initialize",e),this.moveTo(e.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){this.set("width",Math.round(this.width*this.scaleX*this.ratio)/this.ratio),this.set("height",Math.round(this.height*this.scaleY*this.ratio)/this.ratio),this.set("left",Math.round(this.left*this.ratio)/this.ratio),this.set("top",Math.round(this.top*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,width:this.width*this.ratio,height:this.height*this.ratio,x:this.left*this.ratio,y:this.top*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(e){this._color=e.color,this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.group,this.set("width",e.width/this.ratio),this.set("height",e.height/this.ratio),this.set("left",e.x/this.ratio),this.set("top",e.y/this.ratio),this.set("strokeWidth",e.lineWidth/this.ratio),this._color==="main"?this.set("stroke",p[this.team]):this.set("stroke",p[this._color]),this.moveTo(e.layer)},setRatio:function(e){this.set("width",this.width*this.ratio/e),this.set("height",this.height*this.ratio/e),this.set("left",this.left*this.ratio/e),this.set("top",this.top*this.ratio/e),this.set("strokeWidth",this.strokeWidth*this.ratio/e),this.ratio=e},setTeam:function(e){this.team=e,this._color==="main"&&this.set("stroke",p[this.team])}}),Ye=I.fabric.util.createClass(I.fabric.Line,{type:"UiLine",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(e){e||(e={}),e.color||(e.color="main"),this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.groupName,this.ratio=e.ratio,this._color=e.color,this.team=e.team,e.lockRotation=!0,e.lockScalingFlip=!0,e.hasRotatingPoint=!1,e.x1||(e.x1=50/this.ratio),e.y1||(e.y1=50/this.ratio),e.x2||(e.x2=100/this.ratio),e.y2||(e.y2=100/this.ratio),e.strokeWidth||(e.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?e.stroke=p[this._color]:(e.stroke=p[e.team],this._color="main"),e.fill=null,this.callSuper("initialize",[e.x1,e.y1,e.x2,e.y2],e),this.moveTo(e.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){var e=this.left,l=this.top,i=Math.round((this.x2-this.x1)*this.scaleX),t=Math.round((this.y2-this.y1)*this.scaleY);this.set("x1",Math.round(e*this.ratio)/this.ratio),this.set("y1",Math.round(l*this.ratio)/this.ratio),this.set("x2",Math.round((e+i)*this.ratio)/this.ratio),this.set("y2",Math.round((l+t)*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,x:this.x1*this.ratio,y:this.y1*this.ratio,x2:this.x2*this.ratio,y2:this.y2*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(e){this._color=e.color,this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.group,this.set("x2",e.x2/this.ratio),this.set("y2",e.y2/this.ratio),this.set("x1",e.x/this.ratio),this.set("y1",e.y/this.ratio),this.set("strokeWidth",e.lineWidth/this.ratio),this._color==="main"?this.set("stroke",p[this.team]):this.set("stroke",p[this._color]),this.moveTo(e.layer)},setRatio:function(e){this.set("x1",this.x1*this.ratio/e),this.set("y1",this.y1*this.ratio/e),this.set("x2",this.x2*this.ratio/e),this.set("y2",this.y2*this.ratio/e),this.set("strokeWidth",this.strokeWidth*this.ratio/e),this.ratio=e},setTeam:function(e){this.team=e,this._color==="main"&&this.set("stroke",p[this.team])}}),Z=I.fabric.util.createClass(I.fabric.Ellipse,{type:"UiEllipse",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(e){e||(e={}),e.color||(e.color="main"),this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.groupName,this.ratio=e.ratio,this._color=e.color,this.team=e.team,e.lockRotation=!0,e.lockScalingFlip=!0,e.hasRotatingPoint=!1,e.rx||(e.rx=50/this.ratio),e.ry||(e.ry=50/this.ratio),e.left||(e.left=50/this.ratio),e.top||(e.top=50/this.ratio),e.strokeWidth||(e.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?e.stroke=p[this._color]:(e.stroke=p[e.team],this._color="main"),e.fill=null,this.callSuper("initialize",e),this.moveTo(e.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){this.set("rx",Math.round(this.rx*this.scaleX*this.ratio)/this.ratio),this.set("ry",Math.round(this.ry*this.scaleY*this.ratio)/this.ratio),this.set("left",Math.round(this.left*this.ratio)/this.ratio),this.set("top",Math.round(this.top*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,rx:this.rx*this.ratio,ry:this.ry*this.ratio,x:(this.left+this.rx)*this.ratio,y:(this.top+this.ry)*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(e){this._color=e.color,this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.group,this.set("rx",e.rx/this.ratio),this.set("ry",e.ry/this.ratio),this.set("left",(e.x-e.rx)/this.ratio),this.set("top",(e.y-e.ry)/this.ratio),this.set("strokeWidth",e.lineWidth/this.ratio),this._color==="main"?this.set("stroke",p[this.team]):this.set("stroke",p[this._color]),this.moveTo(e.layer)},setRatio:function(e){this.set("rx",this.rx*this.ratio/e),this.set("ry",this.ry*this.ratio/e),this.set("left",this.left*this.ratio/e),this.set("top",this.top*this.ratio/e),this.set("strokeWidth",this.strokeWidth*this.ratio/e),this.ratio=e},setTeam:function(e){this.team=e,this._color==="main"&&this.set("stroke",p[this.team])}}),Ze=I.fabric.util.createClass(Z,{type:"UiRound",r:50,initialize:function(e){e||(e={}),e.r||(e.r=50/this.ratio),e.rx=e.r,e.ry=e.r,this.callSuper("initialize",e),this.setControlVisible("ml",!1),this.setControlVisible("mb",!1),this.setControlVisible("mr",!1),this.setControlVisible("mt",!1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,r:this.rx*this.ratio,x:(this.left+this.rx)*this.ratio,y:(this.top+this.ry)*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(e){e.rx=e.r,e.ry=e.r,this.callSuper("fromObject",e)}}),Ue=I.fabric.util.createClass(Z,{type:"UiArc",startAngle:0,endAngle:90,initialize:function(e){e||(e={}),e.startAngle||(e.startAngle=0),e.endAngle||(e.endAngle=90),this.callSuper("initialize",e),this.startAngle=e.startAngle,this.endAngle=e.endAngle,this.set("dirty",!0)},toObject:function(){return I.fabric.util.object.extend(this.callSuper("toObject"),{startAngle:this.startAngle,endAngle:this.endAngle})},_render:function(e){var l=(this.startAngle-90)*(Math.PI/180),i=(this.endAngle-90)*(Math.PI/180);e.beginPath(),e.ellipse(0,0,this.rx,this.ry,0,l,i,!1),e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke()},fromObject:function(e){this.set("startAngle",e.startAngle),this.set("endAngle",e.endAngle),this.set("ry",1),this.callSuper("fromObject",e)}}),V={Rect:We,Line:Ye,Round:Ze,Ellipse:Z,Arc:Ue};function Pe(o){var e={id:o.id,name:o.name,layer:o.layer,groupName:o.group,ratio:o.ratio,team:o.team};return new V[o.type.slice(2)](e)}function Be(){for(var o=[],e=0,l=Object.keys(V);e<l.length;e++){var i=l[e];o.push({key:"Insert-".concat(i),label:i})}return o}var Qe=h(60765),Ge=function(o){A()(l,o);var e=w()(l);function l(){var i;b()(this,l);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a)),y()(v()(i),"state",{show:!1}),y()(v()(i),"data",{}),i}return C()(l,[{key:"gen",value:function(t){this.data=t,this.setState({show:!0})}},{key:"onClose",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var t=this;return(0,n.jsx)("div",{children:(0,n.jsxs)(Qe.Z,{title:"C Code Generator",placement:"right",onClose:function(){return t.onClose()},open:this.state.show,size:"large",children:[(0,n.jsx)("h1",{children:"Not yet completed"}),(0,n.jsx)("p",{children:JSON.stringify(this.data)})]})})}}]),l}(j.Component),He=Ge;function J(o,e,l,i){var t=JSON.parse(o);if(t){var a=1;if(t.version&&(a=t.version),a===1){l("default");for(var r=0,s=Object.keys(t);r<s.length;r++){var c=s[r];e("_update",t[c])}}else if(a===2){for(var u=0,f=Object.keys(t.data);u<f.length;u++){var M=f[u];l(M);for(var m=0,g=Object.keys(t.data[M]);m<g.length;m++){var d=g[m];e("_update",t.data[M][d])}}l(t.selected)}i()}}var Ke=function(o){A()(l,o);var e=w()(l);function l(){var i;b()(this,l);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a)),y()(v()(i),"objects",{default:{}}),y()(v()(i),"state",{properties:null,selectedId:-1,frame:"default",uiWindow:{height:1080,width:1920,ratio:1,team:"red",backgroundImage:!0},infoModalShow:!1,data:{}}),y()(v()(i),"canvas",null),y()(v()(i),"canvasRef",(0,j.createRef)()),y()(v()(i),"uploadRef",(0,j.createRef)()),y()(v()(i),"generatorRef",(0,j.createRef)()),y()(v()(i),"propertiesRef",(0,j.createRef)()),y()(v()(i),"modalRef",(0,j.createRef)()),y()(v()(i),"background",null),i}return C()(l,[{key:"getNewDataId",value:function(){return Object.keys(this.state.data).length===0?0:Math.max.apply(Math,me()(Object.keys(this.state.data)))+1}},{key:"save",value:function(){Ne(this.state.data,"ui.rmui",this.state.frame)}},{key:"generate",value:function(){this.generatorRef.current.gen(this.state.data)}},{key:"select",value:function(t){typeof t=="undefined"||t===-1?(this.setState({properties:null,selectedId:-1}),this.canvas.discardActiveObject(),this.canvas.renderAll()):t===-2?(this.setState({properties:this.state.uiWindow,selectedId:-2}),this.canvas.discardActiveObject(),this.canvas.renderAll()):(this.setState({properties:this.state.data[t],selectedId:t}),this.canvas.setActiveObject(this.objects[this.state.frame][t]),this.canvas.renderAll())}},{key:"reset",value:function(){var i=F()(S()().mark(function a(){return S()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(this.canvas.clear(),this.canvas.backgroundColor="#fff",this.setBackground(h(25665)),Object.keys(this.objects).includes("default")){s.next=6;break}return s.next=6,this.onFrameEvent("add","default");case 6:return this.objects.default={},s.next=9,this.onFrameEvent("change","default");case 9:this.objects={default:{}},this.select(-1),this.resetCanvasSize(),this.objectsToData(),localStorage.setItem("data",JSON.stringify({version:2,data:{default:{}},selected:"default"}));case 14:case"end":return s.stop()}},a,this)}));function t(){return i.apply(this,arguments)}return t}()},{key:"resetCanvasSize",value:function(){var t,a=this.canvasRef.current.clientWidth-14,r=this.canvasRef.current.clientHeight,s=T()({},this.state.uiWindow);a/r<s.width/s.height?(r=a*s.height/s.width,s.ratio=s.width/a):(a=r*s.width/s.height,s.ratio=s.height/r),this.setState({uiWindow:s}),this.canvas.setHeight(r),this.canvas.setWidth(a);var c=this.canvasRef.current.clientWidth,u=this.canvasRef.current.clientHeight,f=c-a,M=u-r,m=document.getElementById("coordinateDisplay");m.style.right="".concat(f,"px"),m.style.bottom="".concat(M,"px");for(var g=0,d=Object.keys(this.objects[this.state.frame]);g<d.length;g++){var z=d[g];this.objects[this.state.frame][z].setRatio(s.ratio)}(t=this.background)===null||t===void 0||t.set({scaleX:1/s.ratio,scaleY:1/s.ratio}),this.canvas.renderAll(),this.objectsToData(),this.setState({infoModalShow:!1})}},{key:"onReSize",value:function(){var t=this;this.state.infoModalShow||(this.canvas.setHeight(10),this.canvas.setWidth(10),this.canvas.renderAll(),this.setState({infoModalShow:!0},function(){t.modalRef.current.open({title:"Reset UI Window Size",content:"Must reset UI window size after resize browser window.",onOK:function(){return t.resetCanvasSize()},okText:"Reset",type:"info"})}))}},{key:"onPropertiesChange",value:function(t,a){var r=this;if(this.state.selectedId===-2){if(a.team!==this.state.uiWindow.team){for(var s=0,c=Object.keys(this.objects[this.state.frame]);s<c.length;s++){var u=c[s];this.objects[this.state.frame][u].setTeam(a.team)}this.canvas.renderAll(),this.objectsToData()}if(this.setState({uiWindow:a,properties:a},function(){r.resetCanvasSize()}),a.backgroundImage!==this.state.uiWindow.backgroundImage)if(a.backgroundImage){var f,M=this.state.uiWindow.ratio;(f=this.background)===null||f===void 0||f.set({scaleX:1/M,scaleY:1/M}),this.canvas.setBackgroundImage(this.background),this.canvas.renderAll()}else this.canvas.setBackgroundImage(null),this.canvas.renderAll();(a.width!==this.state.uiWindow.width||a.height!==this.state.uiWindow.height)&&this.modalRef.current.open({title:"Warning",content:"Modify UI window width and height may cause unknown error.",type:"warning"})}else this.state.selectedId!==-1&&(this.objects[this.state.frame][this.state.selectedId].fromObject(a),this.canvas.renderAll(),this.objectsToData())}},{key:"setBackground",value:function(t){var a=this;I.fabric.Image.fromURL(t,function(r,s){var c;a.background=r;var u=a.state.uiWindow.ratio;(c=a.background)===null||c===void 0||c.set({scaleX:1/u,scaleY:1/u}),a.state.uiWindow.backgroundImage&&(a.canvas.setBackgroundImage(a.background),a.canvas.renderAll())})}},{key:"componentDidMount",value:function(){var t=this,a=this;this.canvas=new I.fabric.Canvas("ui"),this.setBackground(h(25665)),this.canvas.backgroundColor="#fff",window.addEventListener("resize",function(){t.onReSize()},!1),window.addEventListener("copy",function(r){r.preventDefault();var s=null;r.target.localName==="input"?s=r.target.ariaValueNow:a.state.selectedId!==-1&&a.state.selectedId!==-2&&(s=JSON.stringify(a.state.data[a.state.selectedId])),r.clipboardData.setData("text",s)}),window.addEventListener("paste",function(r){if(r.preventDefault(),r.clipboardData.items.length===0)if(r.target.localName==="input")r.target.value=r.clipboardData.getData("text");else try{var s=r.clipboardData.getData("text"),c=JSON.parse(s);c.id=a.getNewDataId(),a.onObjectEvent("_update",c),a.select(c.id)}catch(g){}else for(var u=r.clipboardData.items,f=0;f<u.length;f++)if(u[f].type.indexOf("image")===0){var M=u[f].getAsFile(),m=new FileReader;m.onload=function(g){console.log(g),a.setBackground(g.target.result)},m.readAsDataURL(M)}}),window.addEventListener("keyup",function(r){r.key==="Delete"&&a.state.selectedId!==-1&&a.onObjectEvent("remove",{id:t.state.selectedId})}),this.canvas.on({"mouse:up":function(){for(var s=0,c=Object.keys(a.objects[a.state.frame]);s<c.length;s++){var u=c[s];a.objects[a.state.frame][u].resizeScale()}a.canvas.renderAll(),a.objectsToData();var f=a.canvas.getActiveObject();setTimeout(function(){f?a.select(f.id):a.select(-1)},100)},"mouse:move":function(s){var c=t.canvas.getPointer(s.e),u=t.state.uiWindow.ratio,f=Math.round(c.x*u),M=Math.round(c.y*u),m=document.getElementById("coordinateDisplay");m.style.display="block",m.textContent="x: ".concat(f,", y: ").concat(M)},"mouse:out":function(){var s=document.getElementById("coordinateDisplay");s.style.display="none"}}),this.canvas.selection=!1,J(localStorage.getItem("data"),function(r,s){return t.onObjectEvent(r,s)},function(r){return a.onFrameEvent("change",r)},function(){return t.canvas.renderAll()}),this.resetCanvasSize()}},{key:"upload",value:function(){var t=this;this.uploadRef.current.upload("Upload Your .rmui File",".rmui").then(function(a){var r=new FileReader;r.onload=function(s){t.reset(),J(s.target.result,function(c,u){return t.onObjectEvent(c,u)},function(c){return t.onFrameEvent("change",c)},function(){return t.canvas.renderAll()})},r.readAsText(a)}).catch(function(a){})}},{key:"objectsToData",value:function(){for(var t=this,a={},r=0,s=Object.keys(this.objects);r<s.length;r++){var c=s[r];a[c]={};for(var u=0,f=Object.keys(this.objects[c]);u<f.length;u++){var M=f[u],m=this.objects[c][M].toObject();a[c][m.id]=m}}if(this.setState({data:a[this.state.frame]}),this.state.selectedId!==-1){var g=a[this.state.frame][this.state.selectedId];this.state.selectedId===-2&&(g=this.state.uiWindow),this.setState({properties:T()({},g)},function(){var z;(z=t.propertiesRef.current)===null||z===void 0||z.reload()})}if(Object.keys(a).length!==0){var d={version:2,data:a,selected:this.state.frame};localStorage.setItem("data",JSON.stringify(d))}}},{key:"onObjectEvent",value:function(t,a){var r=this;function s(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,M={id:u.id,name:u.name,layer:u.layer,group:u.group,type:u.type,ratio:r.state.uiWindow.ratio,team:r.state.uiWindow.team},m=Pe(M);r.objects[r.state.frame][u.id]=m,f&&m.fromObject(u),m.setRatio(r.state.uiWindow.ratio);for(var g=r.canvas.getObjects(),d=!0,z=0,D=Object.keys(g);z<D.length;z++){var W=D[z];if(g[W].id===m.id){d=!1;break}}r.canvas.add(m)}if(t==="add")(!a.id||this.objects[this.state.frame][a.id])&&(a.id=this.getNewDataId(),s(a));else if(t==="_add")a.id=this.getNewDataId(),a.ratio=this.state.uiWindow.ratio,a.team=this.state.uiWindow.team,s(a,!1);else if(t==="update")this.objects[this.state.frame][a.id]&&this.objects[this.state.frame][a.id].fromObject(a);else if(t==="_update")a.id>=0&&this.objects[this.state.frame][a.id]?this.objects[this.state.frame][a.id].fromObject(a):s(a);else if(t==="remove"){var c=a.id;this.objects[this.state.frame][c]&&(this.select(-1),this.canvas.remove(this.objects[this.state.frame][c]),this.canvas.renderAll(),delete this.objects[this.state.frame][c],this.objectsToData())}this.objectsToData(),this.canvas.renderAll()}},{key:"setFrame",value:function(t){this.objects[t]||(this.objects[t]={});for(var a=0,r=Object.keys(this.objects[this.state.frame]);a<r.length;a++){var s=r[a];this.canvas.remove(this.objects[this.state.frame][s])}this.canvas.renderAll();var c=this;return new Promise(function(u,f){c.setState({frame:t},function(){for(var M=c.canvas.getObjects(),m=0,g=Object.keys(c.objects[c.state.frame]);m<g.length;m++){for(var d=g[m],z=!0,D=0,W=Object.keys(M);D<W.length;D++){var wt=W[D];if(M[wt].id===c.objects[c.state.frame][d].id){z=!1;break}}z&&c.canvas.add(c.objects[c.state.frame][d])}c.objectsToData(),c.select(-1),c.canvas.renderAll(),u()})})}},{key:"onFrameEvent",value:function(){var i=F()(S()().mark(function a(r,s){var c,u,f,M,m;return S()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(r!=="add"){d.next=6;break}return this.objects[s]={},d.next=4,this.setFrame(s);case 4:d.next=34;break;case 6:if(r!=="remove"){d.next=18;break}if(Object.keys(this.objects).length!==1){d.next=10;break}return Me.ZP.error("Cannot remove last frame!"),d.abrupt("return");case 10:return c=s,s=Object.keys(this.objects)[0],s===c&&(s=Object.keys(this.objects)[1]),d.next=15,this.setFrame(s);case 15:delete this.objects[c],d.next=34;break;case 18:if(r!=="change"){d.next=23;break}return d.next=21,this.setFrame(s);case 21:d.next=34;break;case 23:if(r!=="copy"){d.next=33;break}return this.objects[s]={},u=this.objects[this.state.frame],d.next=28,this.setFrame(s);case 28:for(f=0,M=Object.keys(u);f<M.length;f++)m=M[f],this.onObjectEvent("_update",u[m].toObject());this.objectsToData(),this.canvas.renderAll(),d.next=34;break;case 33:r==="rename"&&(this.objects[s]=this.objects[this.state.frame],delete this.objects[this.state.frame],this.setState({frame:s}));case 34:this.props.onFrameChange({frames:Object.keys(this.objects),selected:s}),this.objectsToData();case 36:case"end":return d.stop()}},a,this)}));function t(a,r){return i.apply(this,arguments)}return t}()},{key:"render",value:function(){var t,a=this;return(t=this.canvas)===null||t===void 0||t.renderAll(),(0,n.jsxs)("div",{className:"full",children:[(0,n.jsxs)(ge.Z,{warp:!1,className:"container",gutter:12,style:{paddingTop:12,paddingLeft:12,paddingBottom:12},children:[(0,n.jsxs)(B.Z,{flex:"300px",children:[(0,n.jsx)("div",{style:{height:"50%",paddingBottom:12},children:(0,n.jsx)(Ee,{onSelect:function(s){return a.select(s)},onObjectEvent:function(s,c){return a.onObjectEvent(s,c)},onReset:function(){return a.reset()},data:this.state.data,editable:this.props.editable,selectedId:this.state.selectedId})}),(0,n.jsx)(Q.Z,{size:"small",title:"Properties",style:{height:"50%"},children:(0,n.jsxs)("div",{className:"card-body",children:[this.state.properties?(0,n.jsx)(ve.vY,{dataSource:this.state.properties,columns:Fe(this.state.properties),ref:this.propertiesRef,editable:this.props.editable?{onSave:function(s,c){return a.onPropertiesChange(s,c)}}:null,column:1,style:{marginTop:4}},this.state.selectedId):(0,n.jsx)(G.Z,{image:G.Z.PRESENTED_IMAGE_SIMPLE}),this.state.selectedId===-2?(0,n.jsxs)(R.Z,{direction:"vertical",size:"middle",style:{display:"flex"},children:[(0,n.jsx)(x.ZP,{onClick:function(){return a.uploadRef.current.upload("Upload Your Background Image","image/*").then(function(s){a.setState({imageUploadShow:!1}),a.setBackground(Le(s))}).catch(function(s){})},children:"Upload Background"}),(0,n.jsx)(x.ZP,{onClick:function(){return a.setBackground(h(25665))},children:"Reset Background"})]}):(0,n.jsx)("div",{})]})})]}),(0,n.jsxs)(B.Z,{flex:"auto",ref:this.canvasRef,children:[(0,n.jsx)("canvas",{className:"full",id:"ui"}),(0,n.jsx)("div",{id:"coordinateDisplay",style:{bottom:0,right:0,display:"none"}})]})]}),(0,n.jsx)(Ie,{ref:this.uploadRef}),(0,n.jsx)(He,{ref:this.generatorRef}),(0,n.jsx)(Ae,{ref:this.modalRef,couldClose:!1})]})}}]),l}(j.Component),Ve=Ke,Je=h(335),X=h.n(Je),Xe=h(33978),$e=h(40533),qe=h(75931),_e=h(76165),et=h(71737),$=h(24018),tt=h(32193),at=h(62754),rt=function(o){A()(l,o);var e=w()(l);function l(){var i;b()(this,l);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a)),y()(v()(i),"state",{title:"",open:!1,frames:[]}),y()(v()(i),"promise",null),i}return C()(l,[{key:"open",value:function(t,a){var r=this;return new Promise(function(s,c){r.setState({title:t,open:!0,frames:a}),r.promise={resolve:s,reject:c}})}},{key:"render",value:function(){var t=this;return(0,n.jsx)(tt.Y,{title:this.state.title,autoFocusFirstInput:!0,width:240,open:this.state.open,onOpenChange:function(r){t.promise&&!r&&t.state.open&&t.promise.reject(),t.setState({open:r})},onFinish:function(){var a=F()(S()().mark(function r(s){return S()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t.promise.resolve(s.frame),t.promise=null,u.abrupt("return",!0);case 3:case"end":return u.stop()}},r)}));return function(r){return a.apply(this,arguments)}}(),children:(0,n.jsx)(at.Z,{name:"frame",label:"New Frame Name",width:"sm",rules:[{required:!0,message:"Please input frame name!"},function(a){var r=a.getFieldValue,s=t;return{validator:function(u,f){{var M=!0,m=r("frame"),g=X()(s.state.frames),d;try{for(g.s();!(d=g.n()).done;){var z=d.value;if(z===m){M=!1;break}}}catch(D){g.e(D)}finally{g.f()}return M?Promise.resolve():Promise.reject(new Error("Cannot create same name frame!"))}}}}]})})}}]),l}(j.Component),it=rt,st=h(82390),nt=h(33155),lt=function(o){A()(l,o);var e=w()(l);function l(){var i;b()(this,l);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a)),y()(v()(i),"state",{open:!1,content:null}),i}return C()(l,[{key:"show",value:function(){this.setState({open:!0})}},{key:"componentDidMount",value:function(){var t=this;fetch(h(99734)).then(function(a){return a.text()}).then(function(a){t.setState({content:a})})}},{key:"render",value:function(){var t=this;return(0,n.jsx)(L.Z,{title:"About",onOk:function(){return t.setState({open:!1})},onCancel:function(){return t.setState({open:!1})},footer:null,open:this.state.open,children:this.state.content?(0,n.jsx)(nt.U,{children:this.state.content}):(0,n.jsx)(st.Z,{})})}}]),l}(j.Component),ot=lt,ct=Object.defineProperty,q=Object.getOwnPropertySymbols,ht=Object.prototype.hasOwnProperty,ut=Object.prototype.propertyIsEnumerable,_=(o,e,l)=>e in o?ct(o,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[e]=l,dt=(o,e)=>{for(var l in e||(e={}))ht.call(e,l)&&_(o,l,e[l]);if(q)for(var l of q(e))ut.call(e,l)&&_(o,l,e[l]);return o};const ft=o=>j.createElement("svg",dt({className:"moon_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:200,height:200},o),j.createElement("path",{d:"M472 991.6c-157 0-304.4-77.2-394.3-206.6-6.9-9.9-7.6-22.9-1.8-33.6 5.8-10.7 17.1-17.8 29.2-16.7l7.7.4c2.4.2 4.8.3 7.2.3 229.4 0 416-186.6 416-416 0-85-25.7-167-74.3-236.9-6.9-9.9-7.6-22.9-1.8-33.6 5.8-10.7 17.2-17.6 29.2-16.7C748.7 41.6 952 252.1 952 511.6c0 264.7-215.3 480-480 480zM169.7 797.1c78.1 82.7 187.2 130.6 302.3 130.6 229.4 0 416-186.6 416-416 0-204-144.9-373-339.7-408.6 34 66.9 51.7 140.7 51.7 216.6 0 247.8-188.9 452.4-430.3 477.4z",fill:"#2c2c2c"}));var St="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTQ3MiA5OTEuNmMtMTU3IDAtMzA0LjQtNzcuMi0zOTQuMy0yMDYuNi02LjktOS45LTcuNi0yMi45LTEuOC0zMy42IDUuOC0xMC43IDE3LjEtMTcuOCAyOS4yLTE2LjdsNy43LjRjMi40LjIgNC44LjMgNy4yLjMgMjI5LjQgMCA0MTYtMTg2LjYgNDE2LTQxNiAwLTg1LTI1LjctMTY3LTc0LjMtMjM2LjktNi45LTkuOS03LjYtMjIuOS0xLjgtMzMuNiA1LjgtMTAuNyAxNy4yLTE3LjYgMjkuMi0xNi43Qzc0OC43IDQxLjYgOTUyIDI1Mi4xIDk1MiA1MTEuNmMwIDI2NC43LTIxNS4zIDQ4MC00ODAgNDgwek0xNjkuNyA3OTcuMWM3OC4xIDgyLjcgMTg3LjIgMTMwLjYgMzAyLjMgMTMwLjYgMjI5LjQgMCA0MTYtMTg2LjYgNDE2LTQxNiAwLTIwNC0xNDQuOS0zNzMtMzM5LjctNDA4LjYgMzQgNjYuOSA1MS43IDE0MC43IDUxLjcgMjE2LjYgMCAyNDcuOC0xODguOSA0NTIuNC00MzAuMyA0NzcuNHoiIGZpbGw9IiMyYzJjMmMiLz48L3N2Zz4=",mt=Object.defineProperty,ee=Object.getOwnPropertySymbols,Mt=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable,te=(o,e,l)=>e in o?mt(o,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[e]=l,vt=(o,e)=>{for(var l in e||(e={}))Mt.call(e,l)&&te(o,l,e[l]);if(ee)for(var l of ee(e))gt.call(e,l)&&te(o,l,e[l]);return o};const yt=o=>j.createElement("svg",vt({className:"sun_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:200,height:200},o),j.createElement("path",{d:"M522.88 874.667A21.333 21.333 0 0 1 544.213 896v85.333a21.333 21.333 0 0 1-21.333 21.334h-21.333a21.333 21.333 0 0 1-21.334-21.334V896a21.333 21.333 0 0 1 21.334-21.333h21.333zm268.416-107.52 60.352 60.352a21.333 21.333 0 0 1 0 30.165l-15.083 15.083a21.333 21.333 0 0 1-30.186 0l-60.331-60.352a21.333 21.333 0 0 1 0-30.166l15.083-15.082a21.333 21.333 0 0 1 30.165 0zm-527.957 0 15.082 15.082a21.333 21.333 0 0 1 0 30.166l-60.352 60.352a21.333 21.333 0 0 1-30.165 0l-15.083-15.083a21.333 21.333 0 0 1 0-30.165l60.331-60.352a21.333 21.333 0 0 1 30.187 0zM512 277.333c141.376 0 256 114.624 256 256s-114.624 256-256 256-256-114.624-256-256 114.624-256 256-256zm0 64a192 192 0 1 0 0 384 192 192 0 0 0 0-384zm448.213 160a21.333 21.333 0 0 1 21.334 21.334V544a21.333 21.333 0 0 1-21.334 21.333H874.88A21.333 21.333 0 0 1 853.547 544v-21.333a21.333 21.333 0 0 1 21.333-21.334h85.333zm-810.666 0a21.333 21.333 0 0 1 21.333 21.334V544a21.333 21.333 0 0 1-21.333 21.333H64.213A21.333 21.333 0 0 1 42.88 544v-21.333a21.333 21.333 0 0 1 21.333-21.334h85.334zm687.04-307.413 15.082 15.083a21.333 21.333 0 0 1 0 30.165l-60.352 60.352a21.333 21.333 0 0 1-30.165 0l-15.083-15.083a21.333 21.333 0 0 1 0-30.165L806.4 193.92a21.333 21.333 0 0 1 30.187 0zm-618.496 0 60.352 60.352a21.333 21.333 0 0 1 0 30.165L263.36 299.52a21.333 21.333 0 0 1-30.187 0l-60.352-60.373a21.333 21.333 0 0 1 0-30.166l15.083-15.082a21.333 21.333 0 0 1 30.165 0zM522.9 64a21.333 21.333 0 0 1 21.334 21.333v85.334A21.333 21.333 0 0 1 522.9 192h-21.333a21.333 21.333 0 0 1-21.333-21.333V85.333A21.333 21.333 0 0 1 501.568 64h21.333z",fill:"#ebebeb"}));var Dt="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTUyMi44OCA4NzQuNjY3QTIxLjMzMyAyMS4zMzMgMCAwIDEgNTQ0LjIxMyA4OTZ2ODUuMzMzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzMzIDIxLjMzNGgtMjEuMzMzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzM0LTIxLjMzNFY4OTZhMjEuMzMzIDIxLjMzMyAwIDAgMSAyMS4zMzQtMjEuMzMzaDIxLjMzM3ptMjY4LjQxNi0xMDcuNTIgNjAuMzUyIDYwLjM1MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDAgMzAuMTY1bC0xNS4wODMgMTUuMDgzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTg2IDBsLTYwLjMzMS02MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NmwxNS4wODMtMTUuMDgyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTY1IDB6bS01MjcuOTU3IDAgMTUuMDgyIDE1LjA4MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDAgMzAuMTY2bC02MC4zNTIgNjAuMzUyYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTY1IDBsLTE1LjA4My0xNS4wODNhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NWw2MC4zMzEtNjAuMzUyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTg3IDB6TTUxMiAyNzcuMzMzYzE0MS4zNzYgMCAyNTYgMTE0LjYyNCAyNTYgMjU2cy0xMTQuNjI0IDI1Ni0yNTYgMjU2LTI1Ni0xMTQuNjI0LTI1Ni0yNTYgMTE0LjYyNC0yNTYgMjU2LTI1NnptMCA2NGExOTIgMTkyIDAgMSAwIDAgMzg0IDE5MiAxOTIgMCAwIDAgMC0zODR6bTQ0OC4yMTMgMTYwYTIxLjMzMyAyMS4zMzMgMCAwIDEgMjEuMzM0IDIxLjMzNFY1NDRhMjEuMzMzIDIxLjMzMyAwIDAgMS0yMS4zMzQgMjEuMzMzSDg3NC44OEEyMS4zMzMgMjEuMzMzIDAgMCAxIDg1My41NDcgNTQ0di0yMS4zMzNhMjEuMzMzIDIxLjMzMyAwIDAgMSAyMS4zMzMtMjEuMzM0aDg1LjMzM3ptLTgxMC42NjYgMGEyMS4zMzMgMjEuMzMzIDAgMCAxIDIxLjMzMyAyMS4zMzRWNTQ0YTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzMzIDIxLjMzM0g2NC4yMTNBMjEuMzMzIDIxLjMzMyAwIDAgMSA0Mi44OCA1NDR2LTIxLjMzM2EyMS4zMzMgMjEuMzMzIDAgMCAxIDIxLjMzMy0yMS4zMzRoODUuMzM0em02ODcuMDQtMzA3LjQxMyAxNS4wODIgMTUuMDgzYTIxLjMzMyAyMS4zMzMgMCAwIDEgMCAzMC4xNjVsLTYwLjM1MiA2MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMS0zMC4xNjUgMGwtMTUuMDgzLTE1LjA4M2EyMS4zMzMgMjEuMzMzIDAgMCAxIDAtMzAuMTY1TDgwNi40IDE5My45MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDMwLjE4NyAwem0tNjE4LjQ5NiAwIDYwLjM1MiA2MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMSAwIDMwLjE2NUwyNjMuMzYgMjk5LjUyYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTg3IDBsLTYwLjM1Mi02MC4zNzNhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NmwxNS4wODMtMTUuMDgyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTY1IDB6TTUyMi45IDY0YTIxLjMzMyAyMS4zMzMgMCAwIDEgMjEuMzM0IDIxLjMzM3Y4NS4zMzRBMjEuMzMzIDIxLjMzMyAwIDAgMSA1MjIuOSAxOTJoLTIxLjMzM2EyMS4zMzMgMjEuMzMzIDAgMCAxLTIxLjMzMy0yMS4zMzNWODUuMzMzQTIxLjMzMyAyMS4zMzMgMCAwIDEgNTAxLjU2OCA2NGgyMS4zMzN6IiBmaWxsPSIjZWJlYmViIi8+PC9zdmc+",jt=[{key:"File-open",label:"Open .rmui"},{key:"File-save",label:"Save as .rmui"},{type:"divider"},{key:"File-generate",label:"Generate Code",icon:(0,n.jsx)($e.Z,{})}],pt=[{key:"Edit-reset",label:"Reset Designer"},{key:"Edit-undo",label:"Undo \u{1F6A7}"},{key:"Edit-redo",label:"Redo \u{1F6A7}"}],xt=[{key:"Simulate-start",label:"Start"},{key:"Simulate-settings",label:"Settings"}],zt=function(o){A()(l,o);var e=w()(l);function l(){var i;b()(this,l);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a)),y()(v()(i),"state",{fullscreen:!1,frames:["default"],selectedFrame:"default",darkMode:!1}),y()(v()(i),"formRef",(0,j.createRef)()),y()(v()(i),"aboutRef",(0,j.createRef)()),i}return C()(l,[{key:"fullScreen",value:function(){var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen(),this.setState({fullscreen:!0})}},{key:"exitFullscreen",value:function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),this.setState({fullscreen:!1})}},{key:"setFrames",value:function(t){this.setState({frames:t.frames,selectedFrame:t.selected})}},{key:"onMenuClick",value:function(){var i=F()(S()().mark(function a(r){var s,c,u,f,M,m;return S()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(s=r.keyPath[r.keyPath.length-1],s.slice(0,6)!=="Insert"){d.next=7;break}c=r.key.slice(7),u={id:-1,name:"New".concat(c),layer:0,group:"Ungroup",type:"Ui".concat(c)},this.props.onObjectEvent("_add",u),d.next=42;break;case 7:if(s!=="Edit-reset"){d.next=11;break}this.props.reset(),d.next=42;break;case 11:if(s!=="File-save"){d.next=15;break}this.props.save(),d.next=42;break;case 15:if(s!=="File-open"){d.next=19;break}this.props.upload(),d.next=42;break;case 19:if(s!=="File-generate"){d.next=23;break}this.props.generate(this.data),d.next=42;break;case 23:if(s!=="FrameOp-add"){d.next=30;break}return d.next=26,this.formRef.current.open("New Frame",this.state.frames);case 26:f=d.sent,this.props.setFrame("add",f),d.next=42;break;case 30:if(s!=="FrameOp-remove"){d.next=34;break}this.props.setFrame("remove",this.state.selectedFrame),d.next=42;break;case 34:if(s!=="FrameOp-copy"){d.next=41;break}return d.next=37,this.formRef.current.open("Copy Frame To",this.state.frames);case 37:M=d.sent,this.props.setFrame("copy",M),d.next=42;break;case 41:s==="FrameOp-change"&&(m=r.key.slice(7),this.props.setFrame("change",m));case 42:case"end":return d.stop()}},a,this)}));function t(a){return i.apply(this,arguments)}return t}()},{key:"getFramesMenu",value:function(){var t=[{key:"FrameOp-add",label:"New Frame"},{key:"FrameOp-remove",label:"Remove This Frame"},{key:"FrameOp-copy",label:"Copy This Frame"},{key:"FrameOp-change",label:"Change to",selectable:"true",children:[]}],a=X()(this.state.frames),r;try{for(a.s();!(r=a.n()).done;){var s=r.value;t[3].children.push({key:"Frames-".concat(s),label:s})}}catch(c){a.e(c)}finally{a.f()}return t}},{key:"render",value:function(){var t=this,a=(0,n.jsx)(x.ZP,{type:"text",onClick:function(){return t.fullScreen()},size:"small",children:(0,n.jsx)(qe.Z,{style:{color:"var(--ant-color-text)"}})}),r=(0,n.jsx)(x.ZP,{type:"text",onClick:function(){return t.exitFullscreen()},size:"small",children:(0,n.jsx)(_e.Z,{style:{color:"var(--ant-color-text)"}})}),s=(0,n.jsx)(x.ZP,{type:"text",onClick:function(){return t.props.setDarkMode(!0)},size:"small",children:(0,n.jsx)($.Z,{component:ft})}),c=(0,n.jsx)(x.ZP,{type:"text",onClick:function(){return t.props.setDarkMode(!1)},size:"small",children:(0,n.jsx)($.Z,{component:yt})});return(0,n.jsxs)("div",{style:{width:"100%",height:30},className:"solid-color",children:[(0,n.jsxs)(Xe.Z,{style:{width:"100vw",display:"flex",paddingTop:-5},justify:"flex-start",align:"center",children:[(0,n.jsx)("div",{style:{fontFamily:"YouSheBiaoTiHei",fontSize:20,paddingLeft:6,paddingRight:6,paddingTop:3,display:"flex",color:"var(--ant-color-text)"},children:"RoboMaster UI Designer"}),(0,n.jsx)(O.Z,{menu:{items:jt,onClick:function(f){return t.onMenuClick(f)}},children:(0,n.jsx)(x.ZP,{type:"text",size:"small",children:"File"})}),(0,n.jsx)(O.Z,{menu:{items:pt,onClick:function(f){return t.onMenuClick(f)}},children:(0,n.jsx)(x.ZP,{type:"text",size:"small",children:"Edit"})}),(0,n.jsx)(O.Z,{menu:{items:Be(),onClick:function(f){return t.onMenuClick(f)}},children:(0,n.jsx)(x.ZP,{type:"text",size:"small",children:"Insert"})}),(0,n.jsx)(O.Z,{menu:{items:this.getFramesMenu(),onClick:function(f){return t.onMenuClick(f)},selectedKeys:["Frames-".concat(this.state.selectedFrame)]},children:(0,n.jsx)(x.ZP,{type:"text",size:"small",children:"Frames"})}),(0,n.jsx)(O.Z,{menu:{items:xt,onClick:function(f){return t.onMenuClick(f)}},children:(0,n.jsx)(x.ZP,{type:"text",size:"small",children:"Simulate\u{1F6A7}"})}),(0,n.jsx)(x.ZP,{type:"text",size:"small",onClick:function(){var f;(f=t.aboutRef.current)===null||f===void 0||f.show()},children:"About"}),(0,n.jsxs)("div",{style:{marginRight:5,justifyContent:"flex-end",marginLeft:"auto",marginTop:4},children:[(0,n.jsxs)("div",{style:{display:"inline",marginRight:15,fontSize:10,color:"var(--ant-color-text)"},children:["Created by\xA0",(0,n.jsx)("a",{href:"https://github.com/bismarckkk",children:(0,n.jsx)(x.ZP,{type:"link",style:{padding:0},size:"small",children:"Bismarckkk"})})]}),this.props.darkMode?c:s,(0,n.jsx)("a",{href:"https://github.com/bismarckkk/RM-UI-Designer",children:(0,n.jsx)(x.ZP,{type:"text",size:"small",children:(0,n.jsx)(et.Z,{style:{color:"var(--ant-color-text)"}})})}),this.state.fullscreen?r:a]})]}),(0,n.jsx)(it,{ref:this.formRef}),(0,n.jsx)(ot,{ref:this.aboutRef})]})}}]),l}(j.Component),It=zt,kt=h(93384),bt=U.Z.darkAlgorithm,ae=U.Z.compactAlgorithm,Ct=function(o){A()(l,o);var e=w()(l);function l(){var i;b()(this,l);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a)),y()(v()(i),"state",{simulate:!1,darkMode:i.isBrowserDarkMode(),tooSmall:!1}),y()(v()(i),"renderRef",j.createRef()),y()(v()(i),"menuRef",j.createRef()),i}return C()(l,[{key:"isBrowserDarkMode",value:function(){try{return window.matchMedia("(prefers-color-scheme: dark)").matches}catch(t){return!1}}},{key:"componentDidMount",value:function(){var t=this,a=0;function r(c){!t.state.tooSmall&&c<792&&c!==a&&(a=c,t.setState({tooSmall:!0})),t.state.tooSmall&&c>=792&&t.setState({tooSmall:!1})}r(window.innerWidth),window.addEventListener("resize",function(){r(window.innerWidth)},!1);var s=window.matchMedia("(prefers-color-scheme: dark)");s.addEventListener("change",function(c){t.setState({darkMode:c.matches})})}},{key:"setDarkMode",value:function(t){this.setState({darkMode:t})}},{key:"render",value:function(){var t=this;return(0,n.jsxs)(ce.ZP,{locale:kt.Z,theme:{cssVar:{key:"rmui"},hashed:!1,algorithm:this.state.darkMode?[bt,ae]:ae},children:[(0,n.jsx)("div",{className:"rmui",children:(0,n.jsxs)("div",{className:"container background-color",style:{height:"100vh",paddingBottom:12,overflow:"hidden"},children:[(0,n.jsx)(It,{save:function(){return t.renderRef.current.save()},onObjectEvent:function(r,s){return t.renderRef.current.onObjectEvent(r,s)},generate:function(){return t.renderRef.current.generate()},reset:function(){return t.renderRef.current.reset()},setFrame:function(r,s){return t.renderRef.current.onFrameEvent(r,s)},upload:function(r){return t.renderRef.current.upload(r)},ref:this.menuRef,setDarkMode:function(r){return t.setDarkMode(r)},darkMode:this.state.darkMode}),(0,n.jsx)(Ve,{className:"full",editable:!0,ref:this.renderRef,onFrameChange:function(r){return t.menuRef.current.setFrames(r)}})]})}),(0,n.jsx)(L.Z,{title:(0,n.jsxs)(R.Z,{size:"large",style:{display:"flex",alignItems:"center"},children:[(0,n.jsx)(P.Z,{style:{color:"orange",fontSize:25}}),(0,n.jsx)("h3",{children:"Display Aera too Small"})]}),open:this.state.tooSmall,closeIcon:null,footer:null,keyboard:!1,maskClosable:!1,style:{padding:50},zIndex:20,children:(0,n.jsx)("div",{style:{marginLeft:40},children:"Cannot show all contents on this window. Please resize this window or rotate your phone."})})]})}}]),l}(j.Component),At=Ct},99734:function(E,N,h){"use strict";E.exports=h.p+"static/about.93caff1b.md"},25665:function(E,N,h){"use strict";E.exports=h.p+"static/background.d741a18b.png"},41001:function(){},35287:function(){},7396:function(){}}]);
