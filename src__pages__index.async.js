"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[858],{85573:function(R,P,d){d.r(P),d.d(P,{default:function(){return $a}});var Fe=d(12444),C=d.n(Fe),Pe=d(72004),A=d.n(Pe),Ze=d(25098),j=d.n(Ze),Be=d(31996),T=d.n(Be),Ye=d(26037),O=d.n(Ye),We=d(9783),k=d.n(We),w=d(67294),ne=d(9361),Ge=d(28459),ie=d(62338),He=d(65848),Qe=d(64599),D=d.n(Qe),Je=d(97857),L=d.n(Je),Ve=d(15009),x=d.n(Ve),$e=d(99289),b=d.n($e),Ke=d(19632),se=d.n(Ke),ce=d(63084),le=d(32983),U=d(42075),z=d(14726),Q,Xe,J,qe=function(){var l=ie.Z.useApp();return Q=l.message,J=l.modal,Xe=l.notification,null},F=d(3909),_e=d(56680),oe=d(86250),Z=d(83159),et=d(27847),tt=d(90420),at=d(99611),rt=d(94149),nt=d(3355),it=d(80882),o=d(85893),st=function(l){T()(c,l);var e=O()(c);function c(){var i;C()(this,c);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a)),k()(j()(i),"state",{status:i.props.defaultStatus||!1}),i}return A()(c,[{key:"render",value:function(){var t=this;return(0,o.jsx)(z.ZP,{size:"small",type:"text",onClick:function(){t.props.onChange&&t.props.onChange(!t.state.status),t.setState({status:!t.state.status})},children:this.state.status?this.props.onNode||"ON":this.props.offNode||"OFF"})}}]),c}(w.Component),ue=st;function ct(l){return l===-1?[]:l===-2?["window"]:["E-".concat(l)]}function he(l){return l[0]==="E"?l.slice(2):l==="window"?-2:-1}var lt=[{key:"D1-group-layer",label:"layer"},{key:"D1-group-group",label:"group"}],ot=function(l){T()(c,l);var e=O()(c);function c(){var i;C()(this,c);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a)),k()(j()(i),"state",{treeData:[],rightClickMenuOpen:!1,groupKey:"layer"}),i}return A()(c,[{key:"onElementMenuContainerClick",value:function(t){t.target.localName==="div"&&(this.setState({rightClickMenuOpen:!1}),this.props.onSelect(-1))}},{key:"onElementMenuClick",value:function(t){if(this.setState({rightClickMenuOpen:!1}),t.key==="D2-copy"){var a=L()({},this.props.data[this.props.selectedId]);a.id=-1,this.props.onObjectEvent("_update",a)}else t.key==="D2-delete"&&this.props.onObjectEvent("remove",{id:this.props.selectedId})}},{key:"onElementRightClick",value:function(t){this.props.onSelect(he(t.node.key))}},{key:"onSelect",value:function(t){t.length!==0&&this.props.onSelect(he(t[0]))}},{key:"onMenuOpenChange",value:function(t){if(t){var a=this;setTimeout(function(){a.props.selectedId!==-1?a.setState({rightClickMenuOpen:!0}):a.setState({rightClickMenuOpen:!1})},100)}else this.setState({rightClickMenuOpen:!1})}},{key:"elementsMenuOnClick",value:function(t){var a=this;this.setState({groupKey:t.key.slice(9)},function(){return a.updateTree()})}},{key:"updateTree",value:function(){for(var t=this,a=this.state.groupKey,r=[],n=Object.keys(this.props.data),s=function(){for(var m=t.props.data[n[u]],v=-1,p=0;p<r.length;p++)if(r[p].key==="".concat(a,"-").concat(m[a])){v=p;break}v===-1&&(r.push({title:"".concat(a," ").concat(m[a]),key:"".concat(a,"-").concat(m[a]),children:[],isLeaf:!1}),v=r.length-1),r[v].children.push({title:(0,o.jsxs)(oe.Z,{justify:"space-between",style:{width:"100%"},children:[m.name,(0,o.jsxs)(U.Z,{children:[(0,o.jsx)(ue,{onChange:function(g){return t.props.onObjectEvent("setAttr",{id:m.id,payload:{visible:g}})},defaultStatus:!0,onNode:(0,o.jsx)(tt.Z,{}),offNode:(0,o.jsx)(at.Z,{})}),(0,o.jsx)(ue,{onChange:function(g){return t.props.onObjectEvent("setAttr",{id:m.id,payload:{selectable:g}})},defaultStatus:!0,onNode:(0,o.jsx)(rt.Z,{}),offNode:(0,o.jsx)(nt.Z,{style:{transform:"scaleX(-1)"}})})]})]}),key:"E-".concat(n[u])})},u=0;u<n.length;u++)s();return r=r.sort(function(f,m){return f.key.toString().localeCompare(m.key.toString())}),r.unshift({title:"UI Window",key:"window"}),r}},{key:"render",value:function(){var t=this;return(0,o.jsx)(ce.Z,{size:"small",title:"Elements",style:{height:"100%"},extra:(0,o.jsx)(Z.Z,{menu:{items:lt,onClick:function(r){return t.elementsMenuOnClick(r)},selectable:!0,selectedKeys:["D1-group-".concat(this.state.groupKey)]},children:(0,o.jsxs)(U.Z,{style:{fontSize:11},children:["Group by",(0,o.jsx)(it.Z,{size:"small"})]})}),children:(0,o.jsx)("div",{className:"card-body",onMouseUp:function(r){return t.onElementMenuContainerClick(r)},children:(0,o.jsx)(Z.Z,{menu:{items:[{key:"D2-copy",label:"Copy"},{key:"D2-delete",label:"Delete",danger:!0}],onClick:function(r){t.onElementMenuClick(r)}},trigger:["contextMenu"],open:this.state.rightClickMenuOpen,onOpenChange:function(r){t.onMenuOpenChange(r)},children:(0,o.jsx)(et.Z,{className:"full",treeData:this.updateTree(),onSelect:function(r){return t.onSelect(r)},selectedKeys:ct(this.props.selectedId),onRightClick:function(r){return t.onElementRightClick(r)},treeDefaultExpandAll:!0,showLine:!0,blockNode:!0})})})})}}]),c}(w.Component),ut=ot,E=d(32777),Y=d(17990),ht=d(55733),dt=d.n(ht),W=document.createElement("a"),B=document.createElement("input");B.type="file";var S={yellow:"rgb(255, 238, 70)",green:"rgb(168, 255, 45)",orange:"rgb(255, 163, 8)",purple:"rgb(240, 41, 246)",pink:"rgb(255, 100, 142)",cyan:"rgb(69, 255, 242)",white:"#fff",black:"#000",blue:"rgb(47, 168, 223)",red:"rgb(255, 69, 70)"};function de(l){var e=l.split(".").pop();return{name:e+" file",extensions:[e]}}function fe(l,e){if(G())b()(x()().mark(function t(){var a;return x()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Y.WZ.save({filters:[de(e)],defaultPath:e});case 2:if(a=n.sent,!(a!==null&&a.length>0)){n.next=6;break}return n.next=6,Y.fs.writeTextFile(a,l);case 6:case"end":return n.stop()}},t)}))();else{var c=new Blob([l],{type:"text/plain;charset=utf-8"}),i=URL.createObjectURL(c);W.href=i,W.download=e,W.click(),URL.revokeObjectURL(i)}}function ve(l,e){if(G())b()(x()().mark(function i(){var t,a;return x()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Y.WZ.save({filters:[de(e)],defaultPath:e});case 2:if(t=n.sent,!(t!==null&&t.length>0)){n.next=9;break}return n.next=6,l.arrayBuffer();case 6:return a=n.sent,n.next=9,Y.fs.writeBinaryFile(t,a);case 9:case"end":return n.stop()}},i)}))();else{var c=URL.createObjectURL(l);W.href=c,W.download=e,W.click(),URL.revokeObjectURL(c)}}function ft(l,e,c){var i={version:2,data:l,selected:c},t=JSON.stringify(i);fe(t,e)}function vt(l){var e=null;return window.createObjcectURL!==void 0?e=window.createOjcectURL(l):window.URL!==void 0?e=window.URL.createObjectURL(l):window.webkitURL!==void 0&&(e=window.webkitURL.createObjectURL(l)),e}function G(){return window!==void 0&&window.__TAURI__!==void 0}function mt(l){return V.apply(this,arguments)}function V(){return V=b()(x()().mark(function l(e){var c;return x()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=new(dt()),e.forEach(function(a){c.file(a.fileName,a.content)}),t.next=4,c.generateAsync({type:"blob"});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},l)})),V.apply(this,arguments)}function me(l){return $.apply(this,arguments)}function $(){return $=b()(x()().mark(function l(e){var c,i,t;return x()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:c=[];for(i in e)for(t in e[i])c.push({fileName:"".concat(i,".").concat(t),content:e[i][t]});return r.next=4,mt(c);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}},l)})),$.apply(this,arguments)}function pe(l){return new Promise(function(e,c){if(G()){var i=[l.slice(1)],t="".concat(i," file");l==="image/*"&&(i=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],t="image"),b()(x()().mark(function a(){var r,n,s,u,f;return x()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,Y.WZ.open({multiple:!1,directory:!1,filters:[{name:t,extensions:i}]});case 2:if(r=v.sent,!(r!==null&&r.length>0)){v.next=16;break}return n=r.replace(/\\/g,"/"),s=n.split("/").pop(),v.t0=Blob,v.next=9,Y.fs.readBinaryFile(r);case 9:v.t1=v.sent,v.t2=[v.t1],u=new v.t0(v.t2),f=new File([u],s),e(f),v.next=17;break;case 16:c();case 17:case"end":return v.stop()}},a)}))()}else B.accept=l,B.value="",B.onchange=function(){if(B.files.length>0){var a=B.files[0];e(a)}else c(new Error("No file selected"))},B.click()})}var pt=function(l){T()(c,l);var e=O()(c);function c(){return C()(this,c),e.apply(this,arguments)}return A()(c,[{key:"render",value:function(){return this.props.color==="Main"?(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{border:"1px solid #aaa",height:16,width:16,borderRadius:"20%",display:"inline-flex"},children:[(0,o.jsx)("div",{style:{backgroundColor:"red",height:12,width:6,margin:"1px 0 1px 1px",borderTopLeftRadius:"20%",borderBottomLeftRadius:"20%",display:"inline-flex"}}),(0,o.jsx)("div",{style:{backgroundColor:"blue",height:12,width:6,margin:"1px 1px 1px 0",borderTopRightRadius:"20%",borderBottomRightRadius:"20%",display:"inline-flex"}})]}),"\xA0 Main"]}):(0,o.jsx)("div",{children:(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{border:"1px solid #aaa",height:16,width:16,borderRadius:"20%",display:"inline-flex"},children:(0,o.jsx)("div",{style:{backgroundColor:S[this.props.color.toLowerCase()],height:12,width:12,margin:1,borderRadius:"20%",display:"inline-flex"}})}),"\xA0 ",this.props.color]})})}}]),c}(w.Component),N=pt,ge={id:{title:"Id",key:"id",dataIndex:"id",valueType:"digit",editable:!1},name:{title:"Name",key:"name",dataIndex:"name"},group:{title:"Group",key:"group",dataIndex:"group"},kind:{title:"Kind",key:"kind",dataIndex:"kind",editable:!1},lineWidth:{title:"Line Width",key:"lineWidth",dataIndex:"lineWidth",valueType:"digit"},layer:{title:"Layer",key:"layer",dataIndex:"layer",valueType:"digit"},x:{title:"X",key:"x",dataIndex:"x",valueType:"digit"},y:{title:"Y",key:"y",dataIndex:"y",valueType:"digit"},x2:{title:"X2",key:"x2",dataIndex:"x2",valueType:"digit"},y2:{title:"Y2",key:"y2",dataIndex:"y2",valueType:"digit"},width:{title:"Width",key:"width",dataIndex:"width",valueType:"digit"},height:{title:"Height",key:"height",dataIndex:"height",valueType:"digit"},rx:{title:"Rx",key:"rx",dataIndex:"rx",valueType:"digit"},ry:{title:"Ry",key:"ry",dataIndex:"ry",valueType:"digit"},r:{title:"R",key:"r",dataIndex:"r",valueType:"digit"},startAngle:{title:"Start Angle",key:"startAngle",dataIndex:"startAngle",valueType:"digit"},endAngle:{title:"End Angle",key:"endAngle",dataIndex:"endAngle",valueType:"digit"},fontSize:{title:"Font Size",key:"fontSize",dataIndex:"fontSize",valueType:"digit"},decimalPlaces:{title:"Decimal Places",key:"decimalPlaces",dataIndex:"decimalPlaces",valueType:"digit"},number:{title:"Number",key:"number",dataIndex:"number",valueType:"digit"},text:{title:"Text",key:"text",dataIndex:"text"},color:{title:"Color",key:"color",dataIndex:"color",valueType:"select",valueEnum:{main:(0,o.jsx)(N,{color:"Main"}),yellow:(0,o.jsx)(N,{color:"Yellow"}),green:(0,o.jsx)(N,{color:"Green"}),orange:(0,o.jsx)(N,{color:"Orange"}),purple:(0,o.jsx)(N,{color:"Purple"}),pink:(0,o.jsx)(N,{color:"Pink"}),cyan:(0,o.jsx)(N,{color:"Cyan"}),black:(0,o.jsx)(N,{color:"Black"}),white:(0,o.jsx)(N,{color:"White"})}},team:{title:"Team",key:"team",dataIndex:"team",valueType:"select",valueEnum:{red:(0,o.jsx)(N,{color:"Red"}),blue:(0,o.jsx)(N,{color:"Blue"})}},backgroundImage:{title:"Background Image",key:"backgroundImage",dataIndex:"backgroundImage",valueType:"switch"}};function gt(l){for(var e=Object.keys(l),c=[],i=0;i<e.length;i++)ge[e[i]]&&c.push(ge[e[i]]);return c}var yt=E.fabric.util.createClass(E.fabric.Rect,{type:"UiRect",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(e){e||(e={}),e.color||(e.color="main"),this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.groupName,this.ratio=e.ratio,this._color=e.color,this.team=e.team,e.lockRotation=!0,e.lockScalingFlip=!0,e.hasRotatingPoint=!1,e.width||(e.width=50/this.ratio),e.height||(e.height=50/this.ratio),e.left||(e.left=50/this.ratio),e.top||(e.top=50/this.ratio),e.strokeWidth||(e.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?e.stroke=S[this._color]:(e.stroke=S[e.team],this._color="main"),e.fill=null,this.callSuper("initialize",e),this.moveTo(e.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){this.set("width",Math.round(this.width*this.scaleX*this.ratio)/this.ratio),this.set("height",Math.round(this.height*this.scaleY*this.ratio)/this.ratio),this.set("left",Math.round(this.left*this.ratio)/this.ratio),this.set("top",Math.round(this.top*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,width:this.width*this.ratio,height:this.height*this.ratio,x:this.left*this.ratio,y:this.top*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(e){this._color=e.color,this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.group,this.set("width",e.width/this.ratio),this.set("height",e.height/this.ratio),this.set("left",e.x/this.ratio),this.set("top",e.y/this.ratio),this.set("strokeWidth",e.lineWidth/this.ratio),this._color==="main"?this.set("stroke",S[this.team]):this.set("stroke",S[this._color]),this.moveTo(e.layer)},setRatio:function(e){this.set("width",this.width*this.ratio/e),this.set("height",this.height*this.ratio/e),this.set("left",this.left*this.ratio/e),this.set("top",this.top*this.ratio/e),this.set("strokeWidth",this.strokeWidth*this.ratio/e),this.ratio=e},setTeam:function(e){this.team=e,this._color==="main"&&this.set("stroke",S[this.team])}}),Mt=E.fabric.util.createClass(E.fabric.Line,{type:"UiLine",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(e){e||(e={}),e.color||(e.color="main"),this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.groupName,this.ratio=e.ratio,this._color=e.color,this.team=e.team,e.lockRotation=!0,e.lockScalingFlip=!0,e.hasRotatingPoint=!1,e.x1||(e.x1=50/this.ratio),e.y1||(e.y1=50/this.ratio),e.x2||(e.x2=100/this.ratio),e.y2||(e.y2=100/this.ratio),e.strokeWidth||(e.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?e.stroke=S[this._color]:(e.stroke=S[e.team],this._color="main"),e.fill=null,this.callSuper("initialize",[e.x1,e.y1,e.x2,e.y2],e),this.moveTo(e.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){var e=this.left,c=this.top,i=Math.round((this.x2-this.x1)*this.scaleX),t=Math.round((this.y2-this.y1)*this.scaleY);this.set("x1",Math.round(e*this.ratio)/this.ratio),this.set("y1",Math.round(c*this.ratio)/this.ratio),this.set("x2",Math.round((e+i)*this.ratio)/this.ratio),this.set("y2",Math.round((c+t)*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,x:this.x1*this.ratio,y:this.y1*this.ratio,x2:this.x2*this.ratio,y2:this.y2*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(e){this._color=e.color,this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.group,this.set("x2",e.x2/this.ratio),this.set("y2",e.y2/this.ratio),this.set("x1",e.x/this.ratio),this.set("y1",e.y/this.ratio),this.set("strokeWidth",e.lineWidth/this.ratio),this._color==="main"?this.set("stroke",S[this.team]):this.set("stroke",S[this._color]),this.moveTo(e.layer)},setRatio:function(e){this.set("x1",this.x1*this.ratio/e),this.set("y1",this.y1*this.ratio/e),this.set("x2",this.x2*this.ratio/e),this.set("y2",this.y2*this.ratio/e),this.set("strokeWidth",this.strokeWidth*this.ratio/e),this.ratio=e},setTeam:function(e){this.team=e,this._color==="main"&&this.set("stroke",S[this.team])}}),K=E.fabric.util.createClass(E.fabric.Ellipse,{type:"UiEllipse",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(e){e||(e={}),e.color||(e.color="main"),this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.groupName,this.ratio=e.ratio,this._color=e.color,this.team=e.team,e.lockRotation=!0,e.lockScalingFlip=!0,e.hasRotatingPoint=!1,e.rx||(e.rx=50/this.ratio),e.ry||(e.ry=50/this.ratio),e.left||(e.left=50/this.ratio),e.top||(e.top=50/this.ratio),e.strokeWidth||(e.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?e.stroke=S[this._color]:(e.stroke=S[e.team],this._color="main"),e.fill=null,this.callSuper("initialize",e),this.moveTo(e.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){this.set("rx",Math.round(this.rx*this.scaleX*this.ratio)/this.ratio),this.set("ry",Math.round(this.ry*this.scaleY*this.ratio)/this.ratio),this.set("left",Math.round(this.left*this.ratio)/this.ratio),this.set("top",Math.round(this.top*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,rx:this.rx*this.ratio,ry:this.ry*this.ratio,x:(this.left+this.rx)*this.ratio,y:(this.top+this.ry)*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(e){this._color=e.color,this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.group,this.set("rx",e.rx/this.ratio),this.set("ry",e.ry/this.ratio),this.set("left",(e.x-e.rx)/this.ratio),this.set("top",(e.y-e.ry)/this.ratio),this.set("strokeWidth",e.lineWidth/this.ratio),this._color==="main"?this.set("stroke",S[this.team]):this.set("stroke",S[this._color]),this.moveTo(e.layer)},setRatio:function(e){this.set("rx",this.rx*this.ratio/e),this.set("ry",this.ry*this.ratio/e),this.set("left",this.left*this.ratio/e),this.set("top",this.top*this.ratio/e),this.set("strokeWidth",this.strokeWidth*this.ratio/e),this.ratio=e},setTeam:function(e){this.team=e,this._color==="main"&&this.set("stroke",S[this.team])}}),xt=E.fabric.util.createClass(K,{type:"UiRound",r:50,initialize:function(e){e||(e={}),e.r||(e.r=50/this.ratio),e.rx=e.r,e.ry=e.r,this.callSuper("initialize",e),this.setControlVisible("ml",!1),this.setControlVisible("mb",!1),this.setControlVisible("mr",!1),this.setControlVisible("mt",!1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,r:this.rx*this.ratio,x:(this.left+this.rx)*this.ratio,y:(this.top+this.ry)*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(e){e.rx=e.r,e.ry=e.r,this.callSuper("fromObject",e)}}),jt=E.fabric.util.createClass(K,{type:"UiArc",startAngle:0,endAngle:90,initialize:function(e){e||(e={}),e.startAngle||(e.startAngle=0),e.endAngle||(e.endAngle=90),this.callSuper("initialize",e),this.startAngle=e.startAngle,this.endAngle=e.endAngle,this.set("dirty",!0)},toObject:function(){return E.fabric.util.object.extend(this.callSuper("toObject"),{startAngle:this.startAngle,endAngle:this.endAngle})},_render:function(e){var c=(this.startAngle-90)*(Math.PI/180),i=(this.endAngle-90)*(Math.PI/180);e.beginPath(),e.ellipse(0,0,this.rx,this.ry,0,c,i,!1),e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke()},fromObject:function(e){this.set("startAngle",e.startAngle),this.set("endAngle",e.endAngle),this.set("ry",1),this.callSuper("fromObject",e)}}),ye={Rect:yt,Line:Mt,Round:xt,Ellipse:K,Arc:jt};function kt(l){var e={id:l.id,name:l.name,layer:l.layer,groupName:l.group,ratio:l.ratio,team:l.team};return new ye[l.type.slice(2)](e)}function zt(){for(var l=[],e=0,c=Object.keys(ye);e<c.length;e++){var i=c[e];l.push({key:"Insert-".concat(i),label:i})}return l}function Me(l,e,c,i){return X.apply(this,arguments)}function X(){return X=b()(x()().mark(function l(e,c,i,t){var a,r,n,s,u,f,m,v,p,y,g;return x()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(a=JSON.parse(e),a){I.next=3;break}return I.abrupt("return");case 3:if(r=1,a.version&&(r=a.version),r!==1){I.next=11;break}return I.next=8,i("default");case 8:for(n=0,s=Object.keys(a);n<s.length;n++)u=s[n],c("_update",a[u]);I.next=23;break;case 11:if(r!==2){I.next=23;break}f=0,m=Object.keys(a.data);case 13:if(!(f<m.length)){I.next=21;break}return v=m[f],I.next=17,i(v);case 17:for(p=0,y=Object.keys(a.data[v]);p<y.length;p++)g=y[p],c("_update",a.data[v][g]);case 18:f++,I.next=13;break;case 21:return I.next=23,i(a.selected);case 23:t();case 24:case"end":return I.stop()}},l)})),X.apply(this,arguments)}var wt=function(l){T()(c,l);var e=O()(c);function c(){var i;C()(this,c);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a)),k()(j()(i),"objects",{default:{}}),k()(j()(i),"data",{}),k()(j()(i),"state",{properties:null,selectedId:-1,frame:"default",uiWindow:{height:1080,width:1920,ratio:1,team:"red",backgroundImage:!0},infoModalShow:!1,data:{}}),k()(j()(i),"canvas",null),k()(j()(i),"canvasRef",(0,w.createRef)()),k()(j()(i),"propertiesRef",(0,w.createRef)()),k()(j()(i),"background",null),i}return A()(c,[{key:"getNewDataId",value:function(){return Object.keys(this.state.data).length===0?0:Math.max.apply(Math,se()(Object.keys(this.state.data)))+1}},{key:"save",value:function(){ft(this.data,"ui.rmui",this.state.frame)}},{key:"select",value:function(t){typeof t=="undefined"||t===-1?(this.setState({properties:null,selectedId:-1}),this.canvas.discardActiveObject(),this.canvas.renderAll()):t===-2?(this.setState({properties:this.state.uiWindow,selectedId:-2}),this.canvas.discardActiveObject(),this.canvas.renderAll()):(this.setState({properties:this.state.data[t],selectedId:t}),this.canvas.setActiveObject(this.objects[this.state.frame][t]),this.canvas.renderAll())}},{key:"reset",value:function(){var i=b()(x()().mark(function a(){return x()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.canvas.clear(),this.canvas.backgroundColor="#fff",this.setBackground(d(25665)),Object.keys(this.objects).includes("default")){n.next=6;break}return n.next=6,this.onFrameEvent("add","default");case 6:return this.objects.default={},n.next=9,this.onFrameEvent("change","default");case 9:this.objects={default:{}},this.props.onFrameChange({frames:["default"],selected:"default"}),this.select(-1),this.resetCanvasSize(),this.objectsToData(),localStorage.setItem("data",JSON.stringify({version:2,data:{default:{}},selected:"default"}));case 15:case"end":return n.stop()}},a,this)}));function t(){return i.apply(this,arguments)}return t}()},{key:"resetCanvasSize",value:function(){if(this.canvas){var t,a=this.canvasRef.current.clientWidth,r=this.canvasRef.current.clientHeight,n=L()({},this.state.uiWindow);a/r<n.width/n.height?(r=a*n.height/n.width,n.ratio=n.width/a):(a=r*n.width/n.height,n.ratio=n.height/r),this.setState({uiWindow:n}),this.canvas.setHeight(r),this.canvas.setWidth(a),this.canvas.viewportTransform[5]=r,this.canvas.viewportTransform[3]=-1;var s=this.canvasRef.current.clientWidth,u=this.canvasRef.current.clientHeight,f=s-a,m=u-r,v=document.getElementById("coordinateDisplay");v.style.right="".concat(f+12,"px"),v.style.bottom="".concat(m+25,"px");for(var p=0,y=Object.keys(this.objects[this.state.frame]);p<y.length;p++){var g=y[p];this.objects[this.state.frame][g].setRatio(n.ratio)}(t=this.background)===null||t===void 0||t.set({scaleX:1/n.ratio,scaleY:1/n.ratio}),this.canvas.renderAll(),this.objectsToData(),this.setState({infoModalShow:!1})}}},{key:"onPropertiesChange",value:function(t,a){var r=this;if(this.state.selectedId===-2){if(a.team!==this.state.uiWindow.team){for(var n=0,s=Object.keys(this.objects[this.state.frame]);n<s.length;n++){var u=s[n];this.objects[this.state.frame][u].setTeam(a.team)}this.canvas.renderAll(),this.objectsToData()}if(this.setState({uiWindow:a,properties:a},function(){r.resetCanvasSize()}),a.backgroundImage!==this.state.uiWindow.backgroundImage)if(a.backgroundImage){var f,m=this.state.uiWindow.ratio;(f=this.background)===null||f===void 0||f.set({scaleX:1/m,scaleY:1/m}),this.canvas.setBackgroundImage(this.background),this.canvas.renderAll()}else this.canvas.setBackgroundImage(null),this.canvas.renderAll();(a.width!==this.state.uiWindow.width||a.height!==this.state.uiWindow.height)&&J.warning({title:"Warning",content:"Modify UI window width and height may cause unknown error."})}else this.state.selectedId!==-1&&(this.objects[this.state.frame][this.state.selectedId].fromObject(a),this.canvas.renderAll(),this.objectsToData())}},{key:"setBackground",value:function(t){var a=this;E.fabric.Image.fromURL(t,function(r,n){var s;a.background=r;var u=a.state.uiWindow.ratio;(s=a.background)===null||s===void 0||s.set({scaleX:1/u,scaleY:-1/u}),a.state.uiWindow.backgroundImage&&(a.canvas.setBackgroundImage(a.background),a.canvas.renderAll())})}},{key:"componentDidMount",value:function(){var t=this,a=this;this.canvas=new E.fabric.Canvas("ui"),this.setBackground(d(25665)),this.canvas.backgroundColor="#fff",window.addEventListener("resize",function(){t.resetCanvasSize()},!1),window.addEventListener("copy",function(r){var n=null;r.target.localName!=="input"&&a.state.selectedId>=0&&(r.preventDefault(),n=JSON.stringify(a.state.data[a.state.selectedId]),r.clipboardData.setData("text",n))}),window.addEventListener("paste",function(r){for(var n=!1,s=r.clipboardData.items,u=0;u<s.length;u++)if(s[u].type.indexOf("image")===0){r.preventDefault(),n=!0;var f=s[u].getAsFile(),m=new FileReader;m.onload=function(I){a.setBackground(I.target.result)},m.readAsDataURL(f)}if(!n&&r.target.localName!=="input")try{r.preventDefault();var v=r.clipboardData.getData("text"),p=JSON.parse(v);Array.isArray(p)||(p=[p]);var y=D()(p),g;try{for(y.s();!(g=y.n()).done;){var M=g.value;M.id=a.getNewDataId(),a.onObjectEvent("_update",M),a.select(M.id)}}catch(I){y.e(I)}finally{y.f()}}catch(I){}}),window.addEventListener("keyup",function(r){r.key==="Delete"&&a.state.selectedId!==-1&&a.onObjectEvent("remove",{id:t.state.selectedId})}),this.canvas.on({"mouse:up":function(){for(var n=0,s=Object.keys(a.objects[a.state.frame]);n<s.length;n++){var u=s[n];a.objects[a.state.frame][u].resizeScale()}a.canvas.renderAll(),a.objectsToData();var f=a.canvas.getActiveObject();setTimeout(function(){f?a.select(f.id):a.select(-1)},100)},"mouse:move":function(n){var s=t.canvas.getPointer(n.e),u=t.state.uiWindow.ratio,f=Math.round(s.x*u),m=Math.round(s.y*u),v=document.getElementById("coordinateDisplay");v.style.display="block",v.textContent="x: ".concat(f,", y: ").concat(m)},"mouse:out":function(){var n=document.getElementById("coordinateDisplay");n.style.display="none"}}),this.canvas.selection=!1,Me(localStorage.getItem("data"),function(r,n){return t.onObjectEvent(r,n)},function(r){return a.onFrameEvent("change",r)},function(){return t.canvas.renderAll()}),this.resetCanvasSize()}},{key:"upload",value:function(){var t=this;pe(".rmui").then(function(a){var r=new FileReader;r.onload=function(){var n=b()(x()().mark(function s(u){return x()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,t.reset();case 2:return m.next=4,Me(u.target.result,function(v,p){return t.onObjectEvent(v,p)},function(v){return t.onFrameEvent("change",v)},function(){return t.canvas.renderAll()});case 4:case"end":return m.stop()}},s)}));return function(s){return n.apply(this,arguments)}}(),r.readAsText(a)}).catch(function(a){})}},{key:"objectsToData",value:function(){for(var t=this,a={},r=0,n=Object.keys(this.objects);r<n.length;r++){var s=n[r];a[s]={};for(var u=0,f=Object.keys(this.objects[s]);u<f.length;u++){var m=f[u],v=this.objects[s][m].toObject();a[s][v.id]=v}}if(this.data=a,this.setState({data:a[this.state.frame]}),this.state.selectedId!==-1){var p=a[this.state.frame][this.state.selectedId];this.state.selectedId===-2&&(p=this.state.uiWindow),this.setState({properties:L()({},p)},function(){var g;(g=t.propertiesRef.current)===null||g===void 0||g.reload()})}if(Object.keys(a).length!==0){var y={version:2,data:a,selected:this.state.frame};localStorage.setItem("data",JSON.stringify(y))}}},{key:"onObjectEvent",value:function(t,a){var r=this;function n(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,m={id:u.id,name:u.name,layer:u.layer,group:u.group,type:u.type,ratio:r.state.uiWindow.ratio,team:r.state.uiWindow.team},v=kt(m);r.objects[r.state.frame][u.id]=v,f&&v.fromObject(u),v.setRatio(r.state.uiWindow.ratio);for(var p=r.canvas.getObjects(),y=!0,g=0,M=Object.keys(p);g<M.length;g++){var I=M[g];if(p[I].id===v.id){y=!1;break}}r.canvas.add(v)}if(t==="add")(!a.id||this.objects[this.state.frame][a.id])&&(a.id=this.getNewDataId(),n(a));else if(t==="_add")a.id=this.getNewDataId(),a.ratio=this.state.uiWindow.ratio,a.team=this.state.uiWindow.team,n(a,!1);else if(t==="update")this.objects[this.state.frame][a.id]&&this.objects[this.state.frame][a.id].fromObject(a);else if(t==="_update")a.id>=0&&this.objects[this.state.frame][a.id]?this.objects[this.state.frame][a.id].fromObject(a):n(a);else if(t==="remove"){var s=a.id;this.objects[this.state.frame][s]&&(this.select(-1),this.canvas.remove(this.objects[this.state.frame][s]),this.canvas.renderAll(),delete this.objects[this.state.frame][s],this.objectsToData())}else t==="setAttr"&&this.objects[this.state.frame][a.id]&&this.objects[this.state.frame][a.id].set(a.payload);this.objectsToData(),this.canvas.renderAll()}},{key:"setFrame",value:function(t){this.objects[t]||(this.objects[t]={});for(var a=0,r=Object.keys(this.objects[this.state.frame]);a<r.length;a++){var n=r[a];this.canvas.remove(this.objects[this.state.frame][n])}this.canvas.renderAll();var s=this;return new Promise(function(u,f){s.setState({frame:t},function(){for(var m=s.canvas.getObjects(),v=0,p=Object.keys(s.objects[s.state.frame]);v<p.length;v++){for(var y=p[v],g=!0,M=0,I=Object.keys(m);M<I.length;M++){var Ka=I[M];if(m[Ka].id===s.objects[s.state.frame][y].id){g=!1;break}}g&&s.canvas.add(s.objects[s.state.frame][y])}s.objectsToData(),s.select(-1),s.canvas.renderAll(),u()})})}},{key:"onFrameEvent",value:function(){var i=b()(x()().mark(function a(r,n){var s,u,f,m,v,p;return x()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(r!=="add"){g.next=6;break}return this.objects[n]={},g.next=4,this.setFrame(n);case 4:g.next=40;break;case 6:if(r!=="remove"){g.next=19;break}if(Object.keys(this.objects).length!==1){g.next=10;break}return Q.error("Cannot remove last frame!"),g.abrupt("return");case 10:if(s=n,this.state.frame!==n){g.next=16;break}return n=Object.keys(this.objects)[0],n===s&&(n=Object.keys(this.objects)[1]),g.next=16,this.setFrame(n);case 16:delete this.objects[s],g.next=40;break;case 19:if(r!=="change"){g.next=24;break}return g.next=22,this.setFrame(n);case 22:g.next=40;break;case 24:if(r!=="copy"){g.next=34;break}return this.objects[n]={},u=this.objects[this.state.frame],g.next=29,this.setFrame(n);case 29:for(f=0,m=Object.keys(u);f<m.length;f++)v=m[f],this.onObjectEvent("_update",u[v].toObject());this.objectsToData(),this.canvas.renderAll(),g.next=40;break;case 34:if(r!=="rename"){g.next=40;break}return p=this.state.frame,g.next=38,this.onFrameEvent("copy",n);case 38:return g.next=40,this.onFrameEvent("remove",p);case 40:this.props.onFrameChange({frames:Object.keys(this.objects),selected:n}),this.objectsToData();case 42:case"end":return g.stop()}},a,this)}));function t(a,r){return i.apply(this,arguments)}return t}()},{key:"render",value:function(){var t,a=this;return(t=this.canvas)===null||t===void 0||t.renderAll(),(0,o.jsx)("div",{style:{width:"100vw",height:"calc(100% - 20px)",padding:10},children:(0,o.jsxs)(F.eh,{autoSaveId:"container_h",className:"container",direction:"horizontal",children:[(0,o.jsx)(F.s_,{defaultSize:25,minSize:15,maxSize:45,order:1,children:(0,o.jsxs)(F.eh,{autoSaveId:"card_v",className:"full",direction:"vertical",children:[(0,o.jsx)(F.s_,{defaultSize:50,minSize:25,maxSize:75,children:(0,o.jsx)(ut,{onSelect:function(n){return a.select(n)},onObjectEvent:function(n,s){return a.onObjectEvent(n,s)},onReset:function(){return a.reset()},data:this.state.data,editable:this.props.editable,selectedId:this.state.selectedId})}),(0,o.jsx)(F.OT,{className:"panel-resize-handle",style:{height:6}}),(0,o.jsx)(F.s_,{defaultSize:50,children:(0,o.jsx)(ce.Z,{size:"small",title:"Properties",style:{height:"100%"},children:(0,o.jsxs)("div",{className:"card-body",children:[this.state.properties?(0,o.jsx)(_e.vY,{dataSource:this.state.properties,columns:gt(this.state.properties),ref:this.propertiesRef,editable:this.props.editable?{onSave:function(n,s){return a.onPropertiesChange(n,s)}}:null,column:1,style:{marginTop:4}},this.state.selectedId):(0,o.jsx)(le.Z,{image:le.Z.PRESENTED_IMAGE_SIMPLE}),this.state.selectedId===-2?(0,o.jsxs)(U.Z,{direction:"vertical",size:"middle",style:{display:"flex"},children:[(0,o.jsx)(z.ZP,{onClick:function(){return pe("image/*").then(function(n){console.log(n),a.setState({imageUploadShow:!1}),a.setBackground(vt(n))}).catch(function(n){})},children:"Upload Background"}),(0,o.jsx)(z.ZP,{onClick:function(){return a.setBackground(d(25665))},children:"Reset Background"})]}):(0,o.jsx)("div",{})]})})})]})}),(0,o.jsx)(F.OT,{className:"panel-resize-handle",style:{width:6}}),(0,o.jsx)(F.s_,{defaultSize:75,order:2,onResize:function(n){return setTimeout(function(){return a.resetCanvasSize()},100)},children:(0,o.jsxs)("div",{className:"full",ref:this.canvasRef,children:[(0,o.jsx)("canvas",{className:"full",id:"ui"}),(0,o.jsx)("div",{id:"coordinateDisplay",style:{bottom:0,right:0,display:"none",padding:"1px 6px 1px 6px"}})]})})]})})}}]),c}(w.Component),It=wt,bt=d(13769),xe=d.n(bt),Ct=d(75081),je=d(21797),ke=d(85576),ze=d(92462),we=d(553);function At(){return q.apply(this,arguments)}function q(){return q=b()(x()().mark(function l(){var e,c,i,t,a,r,n;return x()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!G()){u.next=6;break}return u.next=3,(0,ze.Py)();case 3:return u.abrupt("return",u.sent);case 6:return e=Date.now(),u.next=9,fetch("https://ui.bismarck.xyz/update.json?".concat(e));case 9:return c=u.sent,u.next=12,c.json();case 12:return i=u.sent,t=i.notes,a=i.version.slice(1).split(".").map(Number),r="v0.3.4".slice(1).split(".").map(Number),n=a[0]>r[0]||a[1]>r[1]||a[2]>r[2],u.abrupt("return",{shouldUpdate:n,manifest:{body:t}});case 18:case"end":return u.stop()}},l)})),q.apply(this,arguments)}function St(){return _.apply(this,arguments)}function _(){return _=b()(x()().mark(function l(){return x()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!G()){c.next=6;break}return c.next=3,(0,ze.F_)();case 3:return c.abrupt("return",c.sent);case 6:window.location.reload();case 7:case"end":return c.stop()}},l)})),_.apply(this,arguments)}var ee={checkUpdate:At,installUpdate:St,relaunch:we.R},Ie=d(21798),Dt=["node"],Tt=ee.checkUpdate,Ot=ee.installUpdate,Et=ee.relaunch,Nt=function(l){T()(c,l);var e=O()(c);function c(){var i;C()(this,c);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a)),k()(j()(i),"state",{step:0,content:""}),i}return A()(c,[{key:"handleClose",value:function(){this.setState({step:0})}},{key:"handleOk",value:function(){var i=b()(x()().mark(function a(){return x()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.setState({step:2}),n.next=3,Ot();case 3:return n.next=5,Et();case 5:if(n.sent){n.next=7;break}this.setState({step:3});case 7:case"end":return n.stop()}},a,this)}));function t(){return i.apply(this,arguments)}return t}()},{key:"check",value:function(){var t=this,a=/(https:\/\/github\.com\/bismarckkk\/RM-UI-Designer\/pull\/)(\d+)/g,r=/(https:\/\/github\.com\/bismarckkk\/RM-UI-Designer\/compare\/)(v\d+\.\d+\.\d+\.\.\.v\d+\.\d+\.\d+)/g;b()(x()().mark(function n(){var s,u,f;return x()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,Tt();case 2:s=v.sent,u=s.shouldUpdate,f=s.manifest.body,u&&t.setState({step:1,content:f.replace(a,function(p,y,g){return"[#".concat(g,"](").concat(y).concat(g,")")}).replace(r,function(p,y,g){return"[#".concat(g,"](").concat(y).concat(g,")")})});case 6:case"end":return v.stop()}},n)}))()}},{key:"componentDidMount",value:function(){this.check()}},{key:"render",value:function(){var t=(0,o.jsx)("div",{});return this.state.step===1?t=(0,o.jsx)(Ie.U,{components:{a:function(r){var n=r.node,s=xe()(r,Dt);return(0,o.jsx)("a",L()(L()({},s),{},{target:"_blank"}))}},children:this.state.content}):this.state.step===2?t=(0,o.jsx)("div",{style:{padding:40,textAlign:"center",color:"var(--ant-color-text)"},children:(0,o.jsxs)(U.Z,{direction:"vertical",children:[(0,o.jsx)(Ct.Z,{size:"large"}),(0,o.jsx)("h3",{children:"Updating..."})]})}):this.state.step===3&&(t=(0,o.jsx)(je.ZP,{status:"success",title:"Update Success",subTitle:"Please restart the app to apply the update."})),(0,o.jsx)(ke.Z,{title:"Auto Update",open:this.state.step,closable:this.state.step>1,maskClosable:this.state.step>1,footer:this.state.step>1?null:(0,o.jsxs)(U.Z,{children:[(0,o.jsx)(z.ZP,{onClick:this.handleClose.bind(this),children:"Cancel"}),(0,o.jsx)(z.ZP,{type:"primary",onClick:this.handleOk.bind(this),children:"Update"})]}),children:t})}}]),c}(w.Component),Rt=Nt,Lt=d(73711),Ut=d(27732),Ft=d(11713),Pt=d(1210),Zt=d(52745),Bt=d(97937),be=d(16165),Yt=d(37476),Wt=d(5966),Gt=function(l){T()(c,l);var e=O()(c);function c(){var i;C()(this,c);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a)),k()(j()(i),"state",{title:"",open:!1,frames:[]}),k()(j()(i),"promise",null),i}return A()(c,[{key:"open",value:function(t,a){var r=this;return new Promise(function(n,s){r.setState({title:t,open:!0,frames:a}),r.promise={resolve:n,reject:s}})}},{key:"render",value:function(){var t=this;return(0,o.jsx)(Yt.Y,{title:this.state.title,autoFocusFirstInput:!0,width:240,open:this.state.open,onOpenChange:function(r){t.promise&&!r&&t.state.open&&t.promise.reject(),t.setState({open:r})},onFinish:function(){var a=b()(x()().mark(function r(n){return x()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t.promise.resolve(n.frame),t.promise=null,u.abrupt("return",!0);case 3:case"end":return u.stop()}},r)}));return function(r){return a.apply(this,arguments)}}(),children:(0,o.jsx)(Wt.Z,{name:"frame",label:"New Frame Name",width:"sm",rules:[{required:!0,message:"Please input frame name!"},function(a){var r=a.getFieldValue,n=t;return{validator:function(u,f){{var m=!0,v=r("frame"),p=D()(n.state.frames),y;try{for(p.s();!(y=p.n()).done;){var g=y.value;if(g===v){m=!1;break}}}catch(M){p.e(M)}finally{p.f()}return m?Promise.resolve():Promise.reject(new Error("Cannot create same name frame!"))}}}}]})})}}]),c}(w.Component),Ht=Gt,Qt=d(40249),Jt=["node"],Vt=function(l){T()(c,l);var e=O()(c);function c(){var i;C()(this,c);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a)),k()(j()(i),"state",{open:!1,content:null}),i}return A()(c,[{key:"show",value:function(){this.setState({open:!0})}},{key:"componentDidMount",value:function(){var t=this;fetch(d(99734)).then(function(a){return a.text()}).then(function(a){t.setState({content:a})})}},{key:"render",value:function(){var t=this;return(0,o.jsx)(ke.Z,{title:"About",onOk:function(){return t.setState({open:!1})},onCancel:function(){return t.setState({open:!1})},footer:null,open:this.state.open,children:this.state.content?(0,o.jsx)(Ie.U,{components:{a:function(r){var n=r.node,s=xe()(r,Jt);return(0,o.jsx)("a",L()(L()({},s),{},{target:"_blank"}))}},children:this.state.content}):(0,o.jsx)(Qt.Z,{})})}}]),c}(w.Component),$t=Vt,Kt=Object.defineProperty,Ce=Object.getOwnPropertySymbols,Xt=Object.prototype.hasOwnProperty,qt=Object.prototype.propertyIsEnumerable,Ae=(l,e,c)=>e in l?Kt(l,e,{enumerable:!0,configurable:!0,writable:!0,value:c}):l[e]=c,_t=(l,e)=>{for(var c in e||(e={}))Xt.call(e,c)&&Ae(l,c,e[c]);if(Ce)for(var c of Ce(e))qt.call(e,c)&&Ae(l,c,e[c]);return l};const ea=l=>w.createElement("svg",_t({className:"moon_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:200,height:200},l),w.createElement("path",{d:"M472 991.6c-157 0-304.4-77.2-394.3-206.6-6.9-9.9-7.6-22.9-1.8-33.6 5.8-10.7 17.1-17.8 29.2-16.7l7.7.4c2.4.2 4.8.3 7.2.3 229.4 0 416-186.6 416-416 0-85-25.7-167-74.3-236.9-6.9-9.9-7.6-22.9-1.8-33.6 5.8-10.7 17.2-17.6 29.2-16.7C748.7 41.6 952 252.1 952 511.6c0 264.7-215.3 480-480 480zM169.7 797.1c78.1 82.7 187.2 130.6 302.3 130.6 229.4 0 416-186.6 416-416 0-204-144.9-373-339.7-408.6 34 66.9 51.7 140.7 51.7 216.6 0 247.8-188.9 452.4-430.3 477.4z",fill:"#2c2c2c"}));var Xa="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTQ3MiA5OTEuNmMtMTU3IDAtMzA0LjQtNzcuMi0zOTQuMy0yMDYuNi02LjktOS45LTcuNi0yMi45LTEuOC0zMy42IDUuOC0xMC43IDE3LjEtMTcuOCAyOS4yLTE2LjdsNy43LjRjMi40LjIgNC44LjMgNy4yLjMgMjI5LjQgMCA0MTYtMTg2LjYgNDE2LTQxNiAwLTg1LTI1LjctMTY3LTc0LjMtMjM2LjktNi45LTkuOS03LjYtMjIuOS0xLjgtMzMuNiA1LjgtMTAuNyAxNy4yLTE3LjYgMjkuMi0xNi43Qzc0OC43IDQxLjYgOTUyIDI1Mi4xIDk1MiA1MTEuNmMwIDI2NC43LTIxNS4zIDQ4MC00ODAgNDgwek0xNjkuNyA3OTcuMWM3OC4xIDgyLjcgMTg3LjIgMTMwLjYgMzAyLjMgMTMwLjYgMjI5LjQgMCA0MTYtMTg2LjYgNDE2LTQxNiAwLTIwNC0xNDQuOS0zNzMtMzM5LjctNDA4LjYgMzQgNjYuOSA1MS43IDE0MC43IDUxLjcgMjE2LjYgMCAyNDcuOC0xODguOSA0NTIuNC00MzAuMyA0NzcuNHoiIGZpbGw9IiMyYzJjMmMiLz48L3N2Zz4=",ta=Object.defineProperty,Se=Object.getOwnPropertySymbols,aa=Object.prototype.hasOwnProperty,ra=Object.prototype.propertyIsEnumerable,De=(l,e,c)=>e in l?ta(l,e,{enumerable:!0,configurable:!0,writable:!0,value:c}):l[e]=c,na=(l,e)=>{for(var c in e||(e={}))aa.call(e,c)&&De(l,c,e[c]);if(Se)for(var c of Se(e))ra.call(e,c)&&De(l,c,e[c]);return l};const ia=l=>w.createElement("svg",na({className:"sun_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:200,height:200},l),w.createElement("path",{d:"M522.88 874.667A21.333 21.333 0 0 1 544.213 896v85.333a21.333 21.333 0 0 1-21.333 21.334h-21.333a21.333 21.333 0 0 1-21.334-21.334V896a21.333 21.333 0 0 1 21.334-21.333h21.333zm268.416-107.52 60.352 60.352a21.333 21.333 0 0 1 0 30.165l-15.083 15.083a21.333 21.333 0 0 1-30.186 0l-60.331-60.352a21.333 21.333 0 0 1 0-30.166l15.083-15.082a21.333 21.333 0 0 1 30.165 0zm-527.957 0 15.082 15.082a21.333 21.333 0 0 1 0 30.166l-60.352 60.352a21.333 21.333 0 0 1-30.165 0l-15.083-15.083a21.333 21.333 0 0 1 0-30.165l60.331-60.352a21.333 21.333 0 0 1 30.187 0zM512 277.333c141.376 0 256 114.624 256 256s-114.624 256-256 256-256-114.624-256-256 114.624-256 256-256zm0 64a192 192 0 1 0 0 384 192 192 0 0 0 0-384zm448.213 160a21.333 21.333 0 0 1 21.334 21.334V544a21.333 21.333 0 0 1-21.334 21.333H874.88A21.333 21.333 0 0 1 853.547 544v-21.333a21.333 21.333 0 0 1 21.333-21.334h85.333zm-810.666 0a21.333 21.333 0 0 1 21.333 21.334V544a21.333 21.333 0 0 1-21.333 21.333H64.213A21.333 21.333 0 0 1 42.88 544v-21.333a21.333 21.333 0 0 1 21.333-21.334h85.334zm687.04-307.413 15.082 15.083a21.333 21.333 0 0 1 0 30.165l-60.352 60.352a21.333 21.333 0 0 1-30.165 0l-15.083-15.083a21.333 21.333 0 0 1 0-30.165L806.4 193.92a21.333 21.333 0 0 1 30.187 0zm-618.496 0 60.352 60.352a21.333 21.333 0 0 1 0 30.165L263.36 299.52a21.333 21.333 0 0 1-30.187 0l-60.352-60.373a21.333 21.333 0 0 1 0-30.166l15.083-15.082a21.333 21.333 0 0 1 30.165 0zM522.9 64a21.333 21.333 0 0 1 21.334 21.333v85.334A21.333 21.333 0 0 1 522.9 192h-21.333a21.333 21.333 0 0 1-21.333-21.333V85.333A21.333 21.333 0 0 1 501.568 64h21.333z",fill:"#ebebeb"}));var qa="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTUyMi44OCA4NzQuNjY3QTIxLjMzMyAyMS4zMzMgMCAwIDEgNTQ0LjIxMyA4OTZ2ODUuMzMzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzMzIDIxLjMzNGgtMjEuMzMzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzM0LTIxLjMzNFY4OTZhMjEuMzMzIDIxLjMzMyAwIDAgMSAyMS4zMzQtMjEuMzMzaDIxLjMzM3ptMjY4LjQxNi0xMDcuNTIgNjAuMzUyIDYwLjM1MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDAgMzAuMTY1bC0xNS4wODMgMTUuMDgzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTg2IDBsLTYwLjMzMS02MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NmwxNS4wODMtMTUuMDgyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTY1IDB6bS01MjcuOTU3IDAgMTUuMDgyIDE1LjA4MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDAgMzAuMTY2bC02MC4zNTIgNjAuMzUyYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTY1IDBsLTE1LjA4My0xNS4wODNhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NWw2MC4zMzEtNjAuMzUyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTg3IDB6TTUxMiAyNzcuMzMzYzE0MS4zNzYgMCAyNTYgMTE0LjYyNCAyNTYgMjU2cy0xMTQuNjI0IDI1Ni0yNTYgMjU2LTI1Ni0xMTQuNjI0LTI1Ni0yNTYgMTE0LjYyNC0yNTYgMjU2LTI1NnptMCA2NGExOTIgMTkyIDAgMSAwIDAgMzg0IDE5MiAxOTIgMCAwIDAgMC0zODR6bTQ0OC4yMTMgMTYwYTIxLjMzMyAyMS4zMzMgMCAwIDEgMjEuMzM0IDIxLjMzNFY1NDRhMjEuMzMzIDIxLjMzMyAwIDAgMS0yMS4zMzQgMjEuMzMzSDg3NC44OEEyMS4zMzMgMjEuMzMzIDAgMCAxIDg1My41NDcgNTQ0di0yMS4zMzNhMjEuMzMzIDIxLjMzMyAwIDAgMSAyMS4zMzMtMjEuMzM0aDg1LjMzM3ptLTgxMC42NjYgMGEyMS4zMzMgMjEuMzMzIDAgMCAxIDIxLjMzMyAyMS4zMzRWNTQ0YTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzMzIDIxLjMzM0g2NC4yMTNBMjEuMzMzIDIxLjMzMyAwIDAgMSA0Mi44OCA1NDR2LTIxLjMzM2EyMS4zMzMgMjEuMzMzIDAgMCAxIDIxLjMzMy0yMS4zMzRoODUuMzM0em02ODcuMDQtMzA3LjQxMyAxNS4wODIgMTUuMDgzYTIxLjMzMyAyMS4zMzMgMCAwIDEgMCAzMC4xNjVsLTYwLjM1MiA2MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMS0zMC4xNjUgMGwtMTUuMDgzLTE1LjA4M2EyMS4zMzMgMjEuMzMzIDAgMCAxIDAtMzAuMTY1TDgwNi40IDE5My45MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDMwLjE4NyAwem0tNjE4LjQ5NiAwIDYwLjM1MiA2MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMSAwIDMwLjE2NUwyNjMuMzYgMjk5LjUyYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTg3IDBsLTYwLjM1Mi02MC4zNzNhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NmwxNS4wODMtMTUuMDgyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTY1IDB6TTUyMi45IDY0YTIxLjMzMyAyMS4zMzMgMCAwIDEgMjEuMzM0IDIxLjMzM3Y4NS4zMzRBMjEuMzMzIDIxLjMzMyAwIDAgMSA1MjIuOSAxOTJoLTIxLjMzM2EyMS4zMzMgMjEuMzMzIDAgMCAxLTIxLjMzMy0yMS4zMzNWODUuMzMzQTIxLjMzMyAyMS4zMzMgMCAwIDEgNTAxLjU2OCA2NGgyMS4zMzN6IiBmaWxsPSIjZWJlYmViIi8+PC9zdmc+",H=d(73344),Te=d(85265),Oe=d(2487),sa=d(28058),ca=d(18429),la=function(l){T()(c,l);var e=O()(c);function c(){return C()(this,c),e.apply(this,arguments)}return A()(c,[{key:"render",value:function(){var t=this.props.errors.filter(function(n){return n.level==="warning"}),a=this.props.errors.filter(function(n){return n.level==="error"}),r=(0,o.jsx)(je.ZP,{status:"success",title:"Check Passed!",subTitle:"0 error, 0 warning!",style:{marginTop:"50px"}});return a.length+t.length>0&&(r=(0,o.jsxs)("div",{style:{color:"var(--ant-color-text)",height:"100%"},children:[(0,o.jsxs)("p",{children:["Found ",a.length," errors, ",t.length," warnings."]}),(0,o.jsx)("div",{style:{paddingBottom:10},className:"card-body",children:(0,o.jsx)(Oe.Z,{bordered:!0,dataSource:this.props.errors,renderItem:function(s){return(0,o.jsx)(Oe.Z.Item,{children:(0,o.jsxs)(U.Z,{size:"middle",children:[s.level==="warning"?(0,o.jsx)(sa.Z,{}):(0,o.jsx)(ca.Z,{}),s.info]})})}})})]})),(0,o.jsxs)("div",{style:{width:"100%",height:"calc(100% - 50px)"},children:[(0,o.jsx)("h3",{style:{color:"var(--ant-color-text)"},children:"Check Data"}),r]})}}]),c}(w.Component),oa=la,ua=d(49107),ha=d(42308),Ee=d(24389),da=d(51376),h=`
`,Ne={UiArc:"arc",UiRound:"round",UiRect:"rect",UiLine:"line",UiEllipse:"ellipse",UiText:"string",UiInt:"number",UiFloat:"number"},fa={UiLine:0,UiRect:1,UiRound:2,UiEllipse:3,UiArc:4,UiFloat:5,UiInt:6,UiText:7},va={lineWidth:"width",layer:"layer",x:"start_x",y:"start_y",x2:"end_x",y2:"end_y",rx:"rx",ry:"ry",startAngle:"start_angle",endAngle:"end_angle",number:"number",color:"color"},ma={main:0,yellow:1,green:2,orange:3,purple:4,pink:5,cyan:6,black:7,white:8};function pa(l,e,c){for(var i="",t=0;t<c;t++)i=i+`
#include "ui_`.concat(l,"_").concat(e,"_").concat(t,'.h"');for(var a=`
#define ui_init_`.concat(l,"_").concat(e,`() \\
`),r=`
#define ui_update_`.concat(l,"_").concat(e,`() \\
`),n=`
#define ui_remove_`.concat(l,"_").concat(e,`() \\
`),s=0;s<c;s++)a+="_ui_init_".concat(l,"_").concat(e,"_").concat(s,`(); \\
`),r+="_ui_update_".concat(l,"_").concat(e,"_").concat(s,`(); \\
`),n+="_ui_remove_".concat(l,"_").concat(e,"_").concat(s,`(); \\
`);return i+="".concat(h).concat(a.slice(0,-4)).concat(h).concat(r.slice(0,-4)).concat(h).concat(n.slice(0,-4),`
    `),"".concat(i,`
`)}function ga(l,e){var c="",i=D()(e),t;try{for(i.s();!(t=i.n()).done;){var a=t.value;c+=pa(l,a.group_name,a.splits.length)}}catch(r){i.e(r)}finally{i.f()}return c}function ya(l){var e="//".concat(h,"// Created by RM UI Designer").concat(h,"//").concat(h).concat(h,"#ifndef UI_H").concat(h,"#define UI_H").concat(h).concat(h,'#include "ui_interface.h"').concat(h),c=D()(l),i;try{for(c.s();!(i=c.n()).done;){var t=i.value;e+=ga(t.name,t.groups)}}catch(a){c.e(a)}finally{c.f()}return"".concat(e,`
#endif //UI_H
`)}function Ma(l,e,c,i){var t="//".concat(h,"// Created by RM UI Designer").concat(h,"//").concat(h).concat(h,"#ifndef UI_").concat(l,"_").concat(e,"_").concat(c,"_H").concat(h,"#define UI_").concat(l,"_").concat(e,"_").concat(c,"_H").concat(h).concat(h,'#include "ui_interface.h"').concat(h).concat(h),a=D()(i),r;try{for(a.s();!(r=a.n()).done;){var n=r.value;t+="extern ui_interface_".concat(Ne[n.type],"_t *ui_").concat(l,"_").concat(e,"_").concat(n.name,`;
`)}}catch(s){a.e(s)}finally{a.f()}return t+="".concat(h,"void _ui_init_").concat(l,"_").concat(e,"_").concat(c,"();").concat(h,"void _ui_update_").concat(l,"_").concat(e,"_").concat(c,"();").concat(h,"void _ui_remove_").concat(l,"_").concat(e,"_").concat(c,"();").concat(h).concat(h,"#endif //UI_").concat(l,"_").concat(e,"_").concat(c,"_H").concat(h),t}function xa(l,e,c){var i=L()({},c),t=fa[i.type],a=i.name;i.type==="UiFloat"&&(i.number=Math.round(i.number*1e3)),i.type==="UiRect"&&(i.x2=i.x+i.width,i.y2=i.y+i.height,delete i.width,delete i.height),i.color=ma[i.color],delete i.type,delete i.id,delete i.name,delete i.group;var r="ui_".concat(l,"_").concat(e,"_").concat(a),n="    ".concat(r,"->figure_tpye = ").concat(t,`;
`);for(var s in i){var u=i[s];typeof u=="number"&&(u=Math.round(u)),n+="    ".concat(r,"->").concat(va[s]," = ").concat(u,`;
`)}return"".concat(n,`
`)}function ja(l,e,c,i,t,a,r,n){for(var s="".concat(l,"_").concat(c,"_").concat(t),u="//".concat(h,"// Created by RM UI Designer").concat(h,"//").concat(h).concat(h,'#include "ui_').concat(s,'.h"').concat(h).concat(h,"#define FRAME_ID ").concat(e).concat(h,"#define GROUP_ID ").concat(i).concat(h,"#define START_ID ").concat(a).concat(h,"#define OBJ_NUM ").concat(r.length).concat(h,"#define FRAME_OBJ_NUM ").concat(n).concat(h).concat(h,"CAT(ui_, CAT(FRAME_OBJ_NUM, _frame_t)) ui_").concat(s,";").concat(h),f=0;f<r.length;f++){var m=Ne[r[f].type],v=r[f].name;u+="ui_interface_".concat(m,"_t *ui_").concat(l,"_").concat(c,"_").concat(v," = ")+"(ui_interface_".concat(m,"_t *)&(ui_").concat(s,".data[").concat(f,`]);
`)}u+="".concat(h,"void _ui_init_").concat(s,"() {").concat(h,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(h,"        ui_").concat(s,".data[i].figure_name[0] = FRAME_ID;").concat(h,"        ui_").concat(s,".data[i].figure_name[1] = GROUP_ID;").concat(h,"        ui_").concat(s,".data[i].figure_name[2] = i + START_ID;").concat(h,"        ui_").concat(s,".data[i].operate_tpyel = 1;").concat(h,"    }").concat(h,"    for (int i = OBJ_NUM; i < FRAME_OBJ_NUM; i++) {").concat(h,"        ui_").concat(s,".data[i].operate_tpyel = 0;").concat(h,"    }").concat(h).concat(h);var p=D()(r),y;try{for(p.s();!(y=p.n()).done;){var g=y.value;u+=xa(l,c,g)}}catch(M){p.e(M)}finally{p.f()}return u+="".concat(h,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(s,");").concat(h,"    SEND_MESSAGE((uint8_t *) &ui_").concat(s,", sizeof(ui_").concat(s,"));").concat(h,"}").concat(h).concat(h,"void _ui_update_").concat(s,"() {").concat(h,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(h,"        ui_").concat(s,".data[i].operate_tpyel = 2;").concat(h,"    }").concat(h).concat(h,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(s,");").concat(h,"    SEND_MESSAGE((uint8_t *) &ui_").concat(s,", sizeof(ui_").concat(s,"));").concat(h,"}").concat(h).concat(h,"void _ui_remove_").concat(s,"() {").concat(h,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(h,"        ui_").concat(s,".data[i].operate_tpyel = 3;").concat(h,"    }").concat(h).concat(h,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(s,");").concat(h,"    SEND_MESSAGE((uint8_t *) &ui_").concat(s,", sizeof(ui_").concat(s,"));").concat(h,"}").concat(h),u}function ka(l,e,c,i,t,a,r){var n="".concat(l,"_").concat(c,"_").concat(t),s=r[0].name;return"//".concat(h,"// Created by RM UI Designer").concat(h,"//").concat(h).concat(h,'#include "ui_').concat(n,'.h"').concat(h).concat(h,"#define FRAME_ID ").concat(e).concat(h,"#define GROUP_ID ").concat(i).concat(h,"#define START_ID ").concat(a).concat(h,"#define OBJ_NUM ").concat(r.length).concat(h).concat(h,"CAT(ui_, CAT(FRAME_OBJ_NUM, _frame_t)) ui_").concat(n,";").concat(h).concat(h,"char* ui_").concat(l,"_").concat(c,"_").concat(s," = ui_").concat(n,".string;").concat(h).concat(h,"void _ui_init_").concat(n,"() {").concat(h,"    ui_").concat(n,".option.figure_name[0] = FRAME_ID;").concat(h,"    ui_").concat(n,".option.figure_name[1] = GROUP_ID;").concat(h,"    ui_").concat(n,".option.figure_name[2] = START_ID;").concat(h,"    ui_").concat(n,".option.operate_tpyel = 1;").concat(h).concat(h,"    strcpy(ui_").concat(l,"_").concat(c,"_").concat(s,', "Hello, World!");').concat(h).concat(h,"    ui_proc_string_frame(&ui_").concat(n,");").concat(h,"    SEND_MESSAGE((uint8_t *) &ui_").concat(n,", sizeof(ui_").concat(n,"));").concat(h,"}").concat(h).concat(h,"void _ui_update_").concat(n,"() {").concat(h,"    ui_").concat(n,".option.operate_tpyel = 2;").concat(h).concat(h,"    ui_proc_string_frame(&ui_").concat(n,");").concat(h,"    SEND_MESSAGE((uint8_t *) &ui_").concat(n,", sizeof(ui_").concat(n,"));").concat(h,"}").concat(h).concat(h,"void _ui_remove_").concat(n,"() {").concat(h,"    ui_").concat(n,".option.operate_tpyel = 2;").concat(h).concat(h,"    ui_proc_string_frame(&ui_").concat(n,");").concat(h,"    SEND_MESSAGE((uint8_t *) &ui_").concat(n,", sizeof(ui_").concat(n,"));").concat(h,"}")}var za=d(75112),wa=d(8938),Ia=d(33562),te=null,ae=null,re=null;function Re(){return te===null&&fetch(za).then(function(l){l.text().then(function(e){te=e})}),ae===null&&fetch(wa).then(function(l){l.text().then(function(e){ae=e})}),re===null&&fetch(Ia).then(function(l){l.text().then(function(e){re=e})}),{ui_interface:{h:te,c:ae},ui_types:{h:re}}}function ba(l){var e="";return l.h&&(e+=".h"),l.h&&l.c&&(e+=" and "),l.c&&(e+=".c"),e}function Ca(){var l=document.querySelector(".rmui"),e=getComputedStyle(l),c=e.getPropertyValue("--ant-color-text-base");return c==="#fff"}var Aa=function(l){T()(c,l);var e=O()(c);function c(){var i;C()(this,c);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a)),k()(j()(i),"state",{preview:null,fileName:""}),k()(j()(i),"checked",[]),i}return A()(c,[{key:"review",value:function(t,a){this.setState({preview:this.props.code[t][a],fileName:"".concat(t,".").concat(a)})}},{key:"download",value:function(t,a){fe(this.props.code[t][a],"".concat(t,".").concat(a)),console.log(this.props.code[t][a])}},{key:"downloadChecked",value:function(){if(this.checked.length===0){Q.error("Please select at least one file.");return}var t={},a=L()(L()({},this.props.code),Re()),r=D()(this.checked),n;try{for(r.s();!(n=r.n()).done;){var s=n.value;t[s]=a[s]}}catch(u){r.e(u)}finally{r.f()}me(t).then(function(u){ve(u,"codes.zip")})}},{key:"render",value:function(){var t=this,a=[{file:"ui base .h and .c",key:"_base"}];for(var r in this.props.code)a.push({file:"".concat(r," ").concat(ba(this.props.code[r])),key:r,h:this.props.code[r].h!==void 0,c:this.props.code[r].c!==void 0});return(0,o.jsxs)("div",{className:"full",style:{overflow:"hidden"},children:[(0,o.jsx)("h3",{style:{color:"var(--ant-color-text)",marginBottom:20},children:"Download Data"}),(0,o.jsx)("div",{style:{paddingBottom:36},className:"card-body",children:(0,o.jsx)(ua.Z,{columns:[{title:"File",dataIndex:"file",key:"file"},{title:"Preview",dataIndex:"key",key:"preview",render:function(s,u){return(0,o.jsxs)(U.Z,{children:[u.h&&(0,o.jsx)(z.ZP,{type:"link",onClick:function(){t.review(s,"h")},children:"Preview .h"}),u.c&&(0,o.jsx)(z.ZP,{type:"link",onClick:function(){t.review(s,"c")},children:"Preview .c"})]})}},{title:"Download",dataIndex:"key",key:"download",render:function(s,u){return s!=="_base"?(0,o.jsxs)(U.Z,{children:[u.h&&(0,o.jsx)(z.ZP,{type:"link",onClick:function(){t.download(s,"h")},children:"Download .h"}),u.c&&(0,o.jsx)(z.ZP,{type:"link",onClick:function(){t.download(s,"c")},children:"Download .c"})]}):(0,o.jsx)(z.ZP,{type:"link",onClick:b()(x()().mark(function f(){var m,v;return x()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,Re();case 2:return m=y.sent,y.next=5,me(m);case 5:v=y.sent,ve(v,"ui_base.zip");case 7:case"end":return y.stop()}},f)})),children:"Download .zip"})}}],dataSource:a,rowSelection:{type:"checkbox",onChange:function(s){var u=se()(s);u.includes("_base")&&(u=u.filter(function(f){return f!=="_base"}),u.push("ui_types"),u.push("ui_interface")),t.checked=u},getCheckboxProps:function(s){return{name:s.key}}},pagination:!1})}),(0,o.jsx)(Te.Z,{onClose:function(){return t.setState({preview:null})},open:this.state.preview!==null,title:this.state.fileName,size:"large",getContainer:document.getElementById("content-in"),rootStyle:{inset:"25px 0 0 0"},children:(0,o.jsx)("div",{style:{height:"100%",overflow:"auto"},children:(0,o.jsx)(ha.ZP,{value:this.state.preview||"",theme:Ca()?Ee.ub:Ee.tR,extensions:[(0,da.N)()],onContextMenu:function(s){s.stopPropagation()}})})})]})}}]),c}(w.Component),Sa=Aa,Da=function(){function l(e,c,i,t,a,r,n){var s=this;if(C()(this,l),this.frame_name=e,this.frame_id=c,this.group_name=i,this.group_id=t,this.split_id=a,this.start_id=r,this.objs=n,n[0].type==="UiText")this.toSplitC=function(){return ka(s.frame_name,s.frame_id,s.group_name,s.group_id,s.split_id,s.start_id,s.objs)};else{var u=7;n.length===1?u=1:n.length<=2?u=2:n.length<=5&&(u=5),this.toSplitC=function(){return ja(s.frame_name,s.frame_id,s.group_name,s.group_id,s.split_id,s.start_id,s.objs,u)}}this.toSplitH=function(){return Ma(s.frame_name,s.group_name,s.split_id,s.objs)}}return A()(l,[{key:"check",value:function(){return this.objs.length!==1&&this.objs.length!==2&&this.objs.length!==5&&this.objs.length!==7?[{level:"warning",info:'Length of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Split "').concat(this.split_id,'" is not 1 or 2 or 5 or 7.')}]:[]}}]),l}(),Le=Da,Ta=function(){function l(e,c,i,t,a){C()(this,l),this.frame_name=e,this.frame_id=c,this.group_name=i,this.group_id=t,this.splits=[],this.errors=[];var r=0,n=new Set,s=D()(a),u;try{for(s.s();!(u=s.n()).done;){var f=u.value;/^[a-zA-Z_]+\w+$/.test(f.name)||this.errors.push({level:"error",info:'Name of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Object "').concat(f.name,'" does not compliant.')}),n.has(f.name)?this.errors.push({level:"error",info:'Name of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Object "').concat(f.name,'" is duplicate.')}):n.add(f.name),f.type==="UiText"&&(this.splits.push(new Le(this.frame_name,this.frame_id,this.group_name,this.group_id,this.splits.length,r,f)),r+=1)}}catch(y){s.e(y)}finally{s.f()}for(var m=a.filter(function(y){return y.type!=="UiText"}),v=Math.ceil(m.length/7),p=0;p<v;p++)this.splits.push(new Le(this.frame_name,this.frame_id,this.group_name,this.group_id,this.splits.length,r,m.slice(p*7,(p+1)*7))),r+=7}return A()(l,[{key:"check",value:function(){var c=this.errors,i=D()(this.splits),t;try{for(i.s();!(t=i.n()).done;){var a=t.value;c=c.concat(a.check())}}catch(r){i.e(r)}finally{i.f()}return c}}]),l}(),Oa=Ta,Ea=function(){function l(e,c,i){C()(this,l),this.name=e,this.id=c,this.groups=[];var t={};for(var a in i){var r=i[a];r.group in t?t[r.group].push(r):t[r.group]=[r]}for(var n in t)this.groups.push(new Oa(this.name,this.id,n,this.groups.length,t[n]))}return A()(l,[{key:"check",value:function(){var c=[],i=D()(this.groups),t;try{for(i.s();!(t=i.n()).done;){var a=t.value;c=c.concat(a.check())}}catch(r){i.e(r)}finally{i.f()}return c}}]),l}(),Na=Ea,Ra=function(){function l(e){C()(this,l),this.frames=[];for(var c in e)this.frames.push(new Na(c,this.frames.length,e[c]))}return A()(l,[{key:"toUiH",value:function(){return ya(this.frames)}},{key:"check",value:function(){var c=[],i=D()(this.frames),t;try{for(i.s();!(t=i.n()).done;){var a=t.value;c=c.concat(a.check())}}catch(r){i.e(r)}finally{i.f()}return c}}]),l}(),La=Ra,Ua=function(l){T()(c,l);var e=O()(c);function c(){var i;C()(this,c);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a)),k()(j()(i),"state",{show:!1,step:"check"}),k()(j()(i),"downloadRef",(0,w.createRef)()),k()(j()(i),"data",{}),k()(j()(i),"errors",[]),i}return A()(c,[{key:"gen",value:function(t){this.helper=new La(t),this.data=t,this.code={ui:{h:this.helper.toUiH()}};var a=D()(this.helper.frames),r;try{for(a.s();!(r=a.n()).done;){var n=r.value,s=D()(n.groups),u;try{for(s.s();!(u=s.n()).done;){var f=u.value,m=D()(f.splits),v;try{for(m.s();!(v=m.n()).done;){var p=v.value;this.code["ui_".concat(n.name,"_").concat(f.group_name,"_").concat(p.split_id)]={c:p.toSplitC(),h:p.toSplitH()}}}catch(y){m.e(y)}finally{m.f()}}}catch(y){s.e(y)}finally{s.f()}}}catch(y){a.e(y)}finally{a.f()}this.errors=this.helper.check(),this.setState({show:!0,step:"check"})}},{key:"onClose",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var t=this,a=(0,o.jsx)(z.ZP,{type:"primary",onClick:function(){return t.setState({step:"generate"})},disabled:this.errors.filter(function(n){return n.level==="error"}).length>0,children:"Generate"}),r=(0,o.jsx)(z.ZP,{type:"primary",onClick:function(){var s;return(s=t.downloadRef)===null||s===void 0||(s=s.current)===null||s===void 0?void 0:s.downloadChecked()},children:"Download"});return(0,o.jsx)("div",{children:(0,o.jsx)(Te.Z,{title:"C Code Generator",placement:"right",onClose:function(){return t.onClose()},open:this.state.show,size:"large",getContainer:document.getElementById("content-in"),rootStyle:{inset:"25px 0 0 0"},footer:(0,o.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",padding:5},children:this.state.step==="check"?a:r}),children:this.state.step==="check"?(0,o.jsx)(oa,{errors:this.errors}):(0,o.jsx)(Sa,{code:this.code,ref:this.downloadRef})})})}}]),c}(w.Component),Fa=Ua,Pa=[{key:"File-open",label:"Open .rmui"},{key:"File-save",label:"Save as .rmui"},{type:"divider"},{key:"File-generate",label:"Generate Code",icon:(0,o.jsx)(Lt.Z,{})}],Za=[{key:"Edit-reset",label:"Reset Designer"},{key:"Edit-undo",label:"Undo \u{1F6A7}"},{key:"Edit-redo",label:"Redo \u{1F6A7}"}],Ba=[{key:"Simulate-start",label:"Start"},{key:"Simulate-settings",label:"Settings"}],Ya=function(l){T()(c,l);var e=O()(c);function c(){var i;C()(this,c);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a)),k()(j()(i),"state",{fullscreen:!1,frames:["default"],selectedFrame:"default",darkMode:!1}),k()(j()(i),"formRef",(0,w.createRef)()),k()(j()(i),"aboutRef",(0,w.createRef)()),k()(j()(i),"generatorRef",(0,w.createRef)()),k()(j()(i),"tauri",G()),i}return A()(c,[{key:"componentDidMount",value:function(){var i=b()(x()().mark(function a(){var r;return x()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!this.tauri){s.next=5;break}return s.next=3,H.G.isMaximized();case 3:r=s.sent,this.setState({fullscreen:r});case 5:case"end":return s.stop()}},a,this)}));function t(){return i.apply(this,arguments)}return t}()},{key:"fullScreen",value:function(){if(this.tauri)H.G.maximize();else{var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}this.setState({fullscreen:!0})}},{key:"exitFullscreen",value:function(){this.tauri?H.G.unmaximize():document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),this.setState({fullscreen:!1})}},{key:"setFrames",value:function(t){this.setState({frames:t.frames,selectedFrame:t.selected})}},{key:"onMenuClick",value:function(){var i=b()(x()().mark(function a(r){var n,s,u,f,m,v,p,y;return x()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(n=r.keyPath[r.keyPath.length-1],n.slice(0,6)!=="Insert"){M.next=7;break}s=r.key.slice(7),u={id:-1,name:"New".concat(s),layer:0,group:"Ungroup",type:"Ui".concat(s)},this.props.onObjectEvent("_add",u),M.next=49;break;case 7:if(n!=="Edit-reset"){M.next=11;break}this.props.reset(),M.next=49;break;case 11:if(n!=="File-save"){M.next=15;break}this.props.save(),M.next=49;break;case 15:if(n!=="File-open"){M.next=19;break}this.props.upload(),M.next=49;break;case 19:if(n!=="File-generate"){M.next=23;break}(f=this.generatorRef.current)===null||f===void 0||f.gen(this.data),M.next=49;break;case 23:if(n!=="FrameOp-add"){M.next=30;break}return M.next=26,this.formRef.current.open("New Frame",this.state.frames);case 26:m=M.sent,this.props.setFrame("add",m),M.next=49;break;case 30:if(n!=="FrameOp-remove"){M.next=34;break}this.props.setFrame("remove",this.state.selectedFrame),M.next=49;break;case 34:if(n!=="FrameOp-copy"){M.next=41;break}return M.next=37,this.formRef.current.open("Copy Frame To",this.state.frames);case 37:v=M.sent,this.props.setFrame("copy",v),M.next=49;break;case 41:if(n!=="FrameOp-rename"){M.next=48;break}return M.next=44,this.formRef.current.open("Rename Frame To",this.state.frames);case 44:p=M.sent,this.props.setFrame("rename",p),M.next=49;break;case 48:n==="FrameOp-change"&&(y=r.key.slice(7),this.props.setFrame("change",y));case 49:case"end":return M.stop()}},a,this)}));function t(a){return i.apply(this,arguments)}return t}()},{key:"getFramesMenu",value:function(){var t=[{key:"FrameOp-add",label:"New Frame"},{key:"FrameOp-copy",label:"Copy This Frame"},{key:"FrameOp-rename",label:"Rename This Frame"},{key:"FrameOp-remove",label:"Remove This Frame"},{key:"FrameOp-change",label:"Change to",selectable:"true",children:[]}],a=D()(this.state.frames),r;try{for(a.s();!(r=a.n()).done;){var n=r.value;t[4].children.push({key:"Frames-".concat(n),label:n})}}catch(s){a.e(s)}finally{a.f()}return t}},{key:"render",value:function(){var t=this,a=(0,o.jsx)(z.ZP,{type:"text",onClick:function(){return t.fullScreen()},size:"small",children:(0,o.jsx)(Ut.Z,{style:{color:"var(--ant-color-text)"}})}),r=(0,o.jsx)(z.ZP,{type:"text",onClick:function(){return t.exitFullscreen()},size:"small",children:(0,o.jsx)(Ft.Z,{style:{color:"var(--ant-color-text)"}})}),n=(0,o.jsx)(z.ZP,{type:"text",onClick:function(){return t.props.setDarkMode(!0)},size:"small",children:(0,o.jsx)(be.Z,{component:ea})}),s=(0,o.jsx)(z.ZP,{type:"text",onClick:function(){return t.props.setDarkMode(!1)},size:"small",children:(0,o.jsx)(be.Z,{component:ia})});return(0,o.jsxs)("div",{style:{width:"100%",height:32,marginTop:-5},className:"solid-color","data-tauri-drag-region":!0,children:[(0,o.jsxs)(oe.Z,{style:{width:"100vw",display:"flex",paddingTop:-5},justify:"flex-start",align:"center","data-tauri-drag-region":!0,children:[(0,o.jsx)("div",{style:{fontFamily:"YouSheBiaoTiHei",fontSize:20,paddingLeft:6,paddingRight:6,paddingTop:3,display:"flex",color:"var(--ant-color-text)",cursor:"default"},"data-tauri-drag-region":!0,children:"RoboMaster UI Designer"}),(0,o.jsx)(Z.Z,{menu:{items:Pa,onClick:function(f){return t.onMenuClick(f)}},children:(0,o.jsx)(z.ZP,{type:"text",size:"small",children:"File"})}),(0,o.jsx)(Z.Z,{menu:{items:Za,onClick:function(f){return t.onMenuClick(f)}},children:(0,o.jsx)(z.ZP,{type:"text",size:"small",children:"Edit"})}),(0,o.jsx)(Z.Z,{menu:{items:zt(),onClick:function(f){return t.onMenuClick(f)}},children:(0,o.jsx)(z.ZP,{type:"text",size:"small",children:"Insert"})}),(0,o.jsx)(Z.Z,{menu:{items:this.getFramesMenu(),onClick:function(f){return t.onMenuClick(f)},selectedKeys:["Frames-".concat(this.state.selectedFrame)]},children:(0,o.jsx)(z.ZP,{type:"text",size:"small",children:"Frames"})}),(0,o.jsx)(Z.Z,{menu:{items:Ba,onClick:function(f){return t.onMenuClick(f)}},children:(0,o.jsx)(z.ZP,{type:"text",size:"small",children:"Simulate\u{1F6A7}"})}),(0,o.jsx)(z.ZP,{type:"text",size:"small",onClick:function(){var f;(f=t.aboutRef.current)===null||f===void 0||f.show()},children:"About"}),(0,o.jsxs)("div",{style:{marginRight:5,justifyContent:"flex-end",marginLeft:"auto",marginTop:2},"data-tauri-drag-region":!0,children:[(0,o.jsxs)("div",{style:{display:"inline",marginRight:15,fontSize:10,cursor:"default",color:"var(--ant-color-text)"},"data-tauri-drag-region":!0,children:["Created by\xA0",(0,o.jsx)("a",{href:"https://github.com/bismarckkk",target:"_blank",children:(0,o.jsx)(z.ZP,{type:"link",style:{padding:0},size:"small","data-tauri-drag-region":!0,children:"Bismarckkk"})})]}),this.props.darkMode?s:n,(0,o.jsx)("a",{href:"https://github.com/bismarckkk/RM-UI-Designer",target:"_blank",children:(0,o.jsx)(z.ZP,{type:"text",size:"small",children:(0,o.jsx)(Pt.Z,{style:{color:"var(--ant-color-text)"}})})}),(0,o.jsx)(z.ZP,{type:"text",size:"small",onClick:function(){return H.G.minimize()},style:{display:this.tauri?"inline":"none"},children:(0,o.jsx)(Zt.Z,{style:{color:"var(--ant-color-text)"}})}),this.state.fullscreen?r:a,(0,o.jsx)(z.ZP,{type:"text",size:"small",onClick:function(){return(0,we.J)()},style:{display:this.tauri?"inline":"none"},children:(0,o.jsx)(Bt.Z,{style:{color:"var(--ant-color-text)"}})})]})]}),(0,o.jsx)(Ht,{ref:this.formRef}),(0,o.jsx)($t,{ref:this.aboutRef}),(0,o.jsx)(Fa,{ref:this.generatorRef})]})}}]),c}(w.Component),Wa=Ya;function Ga(l){return qe(),(0,o.jsx)("div",{})}var Ha=Ga,Qa=d(18253),Ja=ne.Z.darkAlgorithm,Ue=ne.Z.compactAlgorithm,Va=function(l){T()(c,l);var e=O()(c);function c(){var i;C()(this,c);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return i=e.call.apply(e,[this].concat(a)),k()(j()(i),"state",{simulate:!1,darkMode:i.isBrowserDarkMode()}),k()(j()(i),"modal",null),k()(j()(i),"renderRef",w.createRef()),k()(j()(i),"menuRef",w.createRef()),i}return A()(c,[{key:"isBrowserDarkMode",value:function(){try{return window.matchMedia("(prefers-color-scheme: dark)").matches}catch(t){return!1}}},{key:"componentDidMount",value:function(){var t=this,a=0;window.addEventListener("drop",function(s){return s.preventDefault()},!1),window.addEventListener("dragover",function(s){return s.preventDefault()},!1),window.addEventListener("contextmenu",function(s){s.target.tagName.toLowerCase()!=="input"&&s.preventDefault()},!1);function r(s){!t.modal&&s<880&&s!==a&&(a=s,t.modal=J.warning({title:"Display Aera too Small",content:"Cannot show all contents on this window. Please resize this window or rotate your phone.",footer:null})),t.modal&&s>=880&&(t.modal.destroy(),t.modal=null)}setTimeout(function(){return r(window.innerWidth)},500),window.addEventListener("resize",function(){r(window.innerWidth)},!1);var n=window.matchMedia("(prefers-color-scheme: dark)");n.addEventListener("change",function(s){t.setState({darkMode:s.matches})})}},{key:"setDarkMode",value:function(t){this.setState({darkMode:t})}},{key:"render",value:function(){var t=this;return(0,o.jsx)(Ge.ZP,{locale:Qa.Z,theme:{cssVar:{key:"rmui"},hashed:!1,algorithm:this.state.darkMode?[Ja,Ue]:Ue},children:(0,o.jsxs)(ie.Z,{children:[(0,o.jsx)("div",{className:"rmui",children:(0,o.jsxs)("div",{className:"container background-color",style:{height:"100vh",paddingBottom:12,overflow:"hidden"},children:[(0,o.jsx)(Wa,{save:function(){return t.renderRef.current.save()},onObjectEvent:function(r,n){return t.renderRef.current.onObjectEvent(r,n)},reset:function(){return t.renderRef.current.reset()},setFrame:function(r,n){return t.renderRef.current.onFrameEvent(r,n)},upload:function(r){return t.renderRef.current.upload(r)},ref:this.menuRef,setDarkMode:function(r){return t.setDarkMode(r)},darkMode:this.state.darkMode}),(0,o.jsx)(He.Z,{content:["RM Ui Designer","v0.3.4"],zIndex:0,style:{height:"100%"},gap:[30,30],children:(0,o.jsx)("div",{id:"content-in",style:{width:"100vw",height:"100%",zIndex:2,position:"relative"},children:(0,o.jsx)(It,{style:{width:"100vw",height:"100%"},editable:!0,ref:this.renderRef,onFrameChange:function(r){return t.menuRef.current.setFrames(r)}})})})]})}),(0,o.jsx)(Ha,{}),(0,o.jsx)(Rt,{})]})})}}]),c}(w.Component),$a=Va},99734:function(R,P,d){R.exports=d.p+"static/about.6af660a8.md"},8938:function(R,P,d){R.exports=d.p+"static/ui_interface.c852ade8.c"},75112:function(R,P,d){R.exports=d.p+"static/ui_interface.6e21894b.h"},33562:function(R,P,d){R.exports=d.p+"static/ui_types.139d40de.h"},25665:function(R,P,d){R.exports=d.p+"static/background.d741a18b.png"}}]);
