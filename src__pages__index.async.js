"use strict";var Te=(le,K,e)=>new Promise((X,d)=>{var ee=F=>{try{W(e.next(F))}catch(te){d(te)}},R=F=>{try{W(e.throw(F))}catch(te){d(te)}},W=F=>F.done?X(F.value):Promise.resolve(F.value).then(ee,R);W((e=e.apply(le,K)).next())});(self.webpackChunk=self.webpackChunk||[]).push([[858],{97318:function(le,K,e){e.d(K,{oC:function(){return R},yw:function(){return d}});var X=e(62338),d,ee,R;K.ZP=function(){var W=X.Z.useApp();return d=W.message,R=W.modal,ee=W.notification,null}},62388:function(le,K,e){e.d(K,{R:function(){return N},t:function(){return L}});var X=e(32777),d=e(30789),ee=X.fabric.util.createClass(X.fabric.Rect,{type:"UiRect",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(t){t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.lockRotation=!0,t.lockScalingFlip=!0,t.hasRotatingPoint=!1,t.width||(t.width=50/this.ratio),t.height||(t.height=50/this.ratio),t.left||(t.left=50/this.ratio),t.top||(t.top=50/this.ratio),t.strokeWidth||(t.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?t.stroke=d.E[this._color]:(t.stroke=d.E[t.team],this._color="main"),t.fill=null,this.callSuper("initialize",t),this.moveTo(t.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){this.set("width",Math.round(this.width*this.scaleX*this.ratio)/this.ratio),this.set("height",Math.round(this.height*this.scaleY*this.ratio)/this.ratio),this.set("left",Math.round(this.left*this.ratio)/this.ratio),this.set("top",Math.round(this.top*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,width:this.width*this.ratio,height:this.height*this.ratio,x:this.left*this.ratio,y:this.top*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("width",t.width/this.ratio),this.set("height",t.height/this.ratio),this.set("left",t.x/this.ratio),this.set("top",t.y/this.ratio),this.set("strokeWidth",t.lineWidth/this.ratio),this._color==="main"?this.set("stroke",d.E[this.team]):this.set("stroke",d.E[this._color]),this.moveTo(t.layer)},setRatio:function(t){this.set("width",this.width*this.ratio/t),this.set("height",this.height*this.ratio/t),this.set("left",this.left*this.ratio/t),this.set("top",this.top*this.ratio/t),this.set("strokeWidth",this.strokeWidth*this.ratio/t),this.ratio=t},setTeam:function(t){this.team=t,this._color==="main"&&this.set("stroke",d.E[this.team])}}),R=X.fabric.util.createClass(X.fabric.Line,{type:"UiLine",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(t){t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.lockRotation=!0,t.lockScalingFlip=!0,t.hasRotatingPoint=!1,t.x1||(t.x1=50/this.ratio),t.y1||(t.y1=50/this.ratio),t.x2||(t.x2=100/this.ratio),t.y2||(t.y2=100/this.ratio),t.strokeWidth||(t.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?t.stroke=d.E[this._color]:(t.stroke=d.E[t.team],this._color="main"),t.fill=null,this.callSuper("initialize",[t.x1,t.y1,t.x2,t.y2],t),this.moveTo(t.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){var t=this.left,p=this.top,D=Math.abs(Math.round((this.x2-this.x1)*this.scaleX)),H=Math.abs(Math.round((this.y2-this.y1)*this.scaleY));this.set("x1",Math.round(t*this.ratio)/this.ratio),this.set("y1",Math.round(p*this.ratio)/this.ratio),this.set("x2",Math.round((t+D)*this.ratio)/this.ratio),this.set("y2",Math.round((p+H)*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,x:this.x1*this.ratio,y:this.y1*this.ratio,x2:this.x2*this.ratio,y2:this.y2*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("x2",t.x2/this.ratio),this.set("y2",t.y2/this.ratio),this.set("x1",t.x/this.ratio),this.set("y1",t.y/this.ratio),this.set("strokeWidth",t.lineWidth/this.ratio),this._color==="main"?this.set("stroke",d.E[this.team]):this.set("stroke",d.E[this._color]),this.moveTo(t.layer)},setRatio:function(t){this.set("x1",this.x1*this.ratio/t),this.set("y1",this.y1*this.ratio/t),this.set("x2",this.x2*this.ratio/t),this.set("y2",this.y2*this.ratio/t),this.set("strokeWidth",this.strokeWidth*this.ratio/t),this.ratio=t},setTeam:function(t){this.team=t,this._color==="main"&&this.set("stroke",d.E[this.team])}}),W=X.fabric.util.createClass(X.fabric.Ellipse,{type:"UiEllipse",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(t){t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.lockRotation=!0,t.lockScalingFlip=!0,t.hasRotatingPoint=!1,t.rx||(t.rx=50/this.ratio),t.ry||(t.ry=50/this.ratio),t.left||(t.left=50/this.ratio),t.top||(t.top=50/this.ratio),t.strokeWidth||(t.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?t.stroke=d.E[this._color]:(t.stroke=d.E[t.team],this._color="main"),t.fill=null,this.callSuper("initialize",t),this.moveTo(t.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){this.set("rx",Math.round(this.rx*this.scaleX*this.ratio)/this.ratio),this.set("ry",Math.round(this.ry*this.scaleY*this.ratio)/this.ratio),this.set("left",Math.round(this.left*this.ratio)/this.ratio),this.set("top",Math.round(this.top*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,rx:this.rx*this.ratio,ry:this.ry*this.ratio,x:(this.left+this.rx)*this.ratio,y:(this.top+this.ry)*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("rx",t.rx/this.ratio),this.set("ry",t.ry/this.ratio),this.set("left",(t.x-t.rx)/this.ratio),this.set("top",(t.y-t.ry)/this.ratio),this.set("strokeWidth",t.lineWidth/this.ratio),this._color==="main"?this.set("stroke",d.E[this.team]):this.set("stroke",d.E[this._color]),this.moveTo(t.layer)},setRatio:function(t){this.set("rx",this.rx*this.ratio/t),this.set("ry",this.ry*this.ratio/t),this.set("left",this.left*this.ratio/t),this.set("top",this.top*this.ratio/t),this.set("strokeWidth",this.strokeWidth*this.ratio/t),this.ratio=t},setTeam:function(t){this.team=t,this._color==="main"&&this.set("stroke",d.E[this.team])}}),F=X.fabric.util.createClass(W,{type:"UiRound",r:50,initialize:function(t){t||(t={}),t.r||(t.r=50/this.ratio),t.rx=t.r,t.ry=t.r,this.callSuper("initialize",t),this.setControlVisible("ml",!1),this.setControlVisible("mb",!1),this.setControlVisible("mr",!1),this.setControlVisible("mt",!1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,r:this.rx*this.ratio,x:(this.left+this.rx)*this.ratio,y:(this.top+this.ry)*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){t.rx=t.r,t.ry=t.r,this.callSuper("fromObject",t)}}),te=X.fabric.util.createClass(W,{type:"UiArc",startAngle:0,endAngle:90,initialize:function(t){t||(t={}),t.startAngle||(t.startAngle=0),t.endAngle||(t.endAngle=90),this.callSuper("initialize",t),this.startAngle=t.startAngle,this.endAngle=t.endAngle,this.set("dirty",!0)},toObject:function(){return X.fabric.util.object.extend(this.callSuper("toObject"),{startAngle:this.startAngle,endAngle:this.endAngle})},_render:function(t){var p=(this.startAngle-90)*(Math.PI/180),D=(this.endAngle-90)*(Math.PI/180);t.beginPath(),t.ellipse(0,0,this.rx,this.ry,0,p,D,!1),t.strokeStyle=this.stroke,t.lineWidth=this.strokeWidth,t.stroke()},fromObject:function(t){this.set("startAngle",t.startAngle),this.set("endAngle",t.endAngle),this.set("ry",1),this.callSuper("fromObject",t)}});function Z(o,t){var p=Z.canvas||(Z.canvas=document.createElement("canvas")),D=p.getContext("2d");D.font=t;var H=D.measureText(o);return H.width}var q=X.fabric.util.createClass(X.fabric.Text,{type:"UiText",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(t){t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.flipY=!0,t.fontSize||(t.fontSize=20/this.ratio),t.fontFamily||(t.fontFamily="ds-digitalnormal"),t.text||(t.text="Text"),t.left||(t.left=50/this.ratio),t.top||(t.top=50/this.ratio),t.width||(t.width=Z(t.text,t.fontSize+"px "+t.fontFamily)/this.ratio),this._color&&this._color!=="main"?t.fill=d.E[this._color]:(t.fill=d.E[t.team],this._color="main"),this.callSuper("initialize",t.text,t),this.moveTo(t.layer),this.setControlsVisibility({tl:!1,tr:!1,bl:!1,br:!1,ml:!1,mt:!1,mr:!1,mb:!1,mtr:!1})},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,fontSize:this.fontSize*this.ratio,x:this.left*this.ratio,y:this.top*this.ratio,text:this.text,color:this._color}},fromObject:function(t){this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("left",t.x/this.ratio),this.set("top",t.y/this.ratio),this.set("fontSize",t.fontSize/this.ratio),this.text=t.text,this.set("width",Z(t.text,t.fontSize+"px "+this.fontFamily)/this.ratio),this._color==="main"?this.set("fill",d.E[this.team]):this.set("fill",d.E[this._color]),this.moveTo(t.layer),this.set("fontFamily","ds-digitalnormal")},setRatio:function(t){this.set("width",this.width*this.ratio/t),this.set("left",this.left*this.ratio/t),this.set("top",this.top*this.ratio/t),this.set("fontSize",this.fontSize*this.ratio/t),this.ratio=t},resizeScale:function(){},setTeam:function(t){this.team=t,this._color==="main"&&this.set("fill",d.E[this.team])}}),S=X.fabric.util.createClass(q,{type:"UiNumber",number:12345,initialize:function(t){t||(t={}),this.number=t.number||12345,t.text=this.number.toString(),this.callSuper("initialize",t)},toObject:function(){var t=this.callSuper("toObject");return t.number=this.number,delete t.text,t},fromObject:function(t){this.number=parseInt(t.number),t.text=this.number.toString(),this.callSuper("fromObject",t)}}),a=X.fabric.util.createClass(q,{type:"UiFloat",float:12.345,initialize:function(t){t||(t={}),this.float=t.float||12.345,t.text=this.float.toString(),this.callSuper("initialize",t)},toObject:function(){var t=this.callSuper("toObject");return t.float=this.float,delete t.text,t},fromObject:function(t){this.float=parseFloat(t.float),t.text=this.float.toString(),this.callSuper("fromObject",t)}}),I=e(97318),se={Rect:ee,Line:R,Round:F,Ellipse:W,Arc:te,Text:q,Number:S,Float:a};function N(o){var t={id:o.id,name:o.name,layer:o.layer,groupName:o.group,ratio:o.ratio,team:o.team},p=o.type.slice(2);return p==="Text"&&I.yw.warning("Text object is beta now, maybe not same with client!"),new se[p](t)}function L(){for(var o=[],t=0,p=Object.keys(se);t<p.length;t++){var D=p[t];o.push({key:"Insert-".concat(D),label:D})}return o}},83885:function(le,K,e){e.a(le,function(X,d){return Te(this,null,function*(){try{var ee=e(64599),R=e.n(ee),W=e(12444),F=e.n(W),te=e(72004),Z=e.n(te),q=e(73070),S=X([q]);q=(S.then?(yield S)():S)[0];var a=function(){function I(se,N,L){F()(this,I),this.name=se,this.id=N,this.groups=[];var o={};for(var t in L){var p=L[t];p.group in o?o[p.group].push(p):o[p.group]=[p]}for(var D in o)this.groups.push(new q.Z(this.name,this.id,D,this.groups.length,o[D]))}return Z()(I,[{key:"check",value:function(){var N=[],L=R()(this.groups),o;try{for(L.s();!(o=L.n()).done;){var t=o.value;N=N.concat(t.check())}}catch(p){L.e(p)}finally{L.f()}return N}}]),I}();K.Z=a,d()}catch(I){d(I)}})})},10622:function(le,K,e){e.a(le,function(X,d){return Te(this,null,function*(){try{var ee=e(64599),R=e.n(ee),W=e(12444),F=e.n(W),te=e(72004),Z=e.n(te),q=e(5970),S=e(83885),a=X([q,S]);[q,S]=a.then?(yield a)():a;var I=function(){function se(N){F()(this,se),this.frames=[];for(var L in N)this.frames.push(new S.Z(L,this.frames.length,N[L]))}return Z()(se,[{key:"toUiH",value:function(){return(0,q.LI)(this.frames)}},{key:"check",value:function(){var L=[],o=R()(this.frames),t;try{for(o.s();!(t=o.n()).done;){var p=t.value;L=L.concat(p.check())}}catch(D){o.e(D)}finally{o.f()}return L}}]),se}();K.Z=I,d()}catch(se){d(se)}})})},73070:function(le,K,e){e.a(le,function(X,d){return Te(this,null,function*(){try{var ee=e(64599),R=e.n(ee),W=e(12444),F=e.n(W),te=e(72004),Z=e.n(te),q=e(66978),S=X([q]);q=(S.then?(yield S)():S)[0];var a=function(){function I(se,N,L,o,t){F()(this,I),this.frame_name=se,this.frame_id=N,this.group_name=L,this.group_id=o,this.splits=[],this.errors=[];var p=0,D=new Set,H=R()(t),ce;try{for(H.s();!(ce=H.n()).done;){var C=ce.value;/^[a-zA-Z_]+\w+$/.test(C.name)||this.errors.push({level:"error",info:'Name of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Object "').concat(C.name,'" does not compliant.')}),D.has(C.name)?this.errors.push({level:"error",info:'Name of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Object "').concat(C.name,'" is duplicate.')}):D.add(C.name),C.type==="UiText"&&(this.splits.push(new q.Z(this.frame_name,this.frame_id,this.group_name,this.group_id,this.splits.length,p,[C])),p+=1)}}catch(z){H.e(z)}finally{H.f()}for(var k=t.filter(function(z){return z.type!=="UiText"}),w=Math.ceil(k.length/7),G=0;G<w;G++)this.splits.push(new q.Z(this.frame_name,this.frame_id,this.group_name,this.group_id,this.splits.length,p,k.slice(G*7,(G+1)*7))),p+=7}return Z()(I,[{key:"check",value:function(){var N=this.errors,L=R()(this.splits),o;try{for(L.s();!(o=L.n()).done;){var t=o.value;N=N.concat(t.check())}}catch(p){L.e(p)}finally{L.f()}return N}}]),I}();K.Z=a,d()}catch(I){d(I)}})})},66978:function(le,K,e){e.a(le,function(X,d){return Te(this,null,function*(){try{var ee=e(12444),R=e.n(ee),W=e(72004),F=e.n(W),te=e(5970),Z=X([te]);te=(Z.then?(yield Z)():Z)[0];var q=function(){function S(a,I,se,N,L,o,t){var p=this;if(R()(this,S),this.frame_name=a,this.frame_id=I,this.group_name=se,this.group_id=N,this.split_id=L,this.start_id=o,this.objs=t,t[0].type==="UiText")this.toSplitC=function(){return(0,te.c0)(p.frame_name,p.frame_id,p.group_name,p.group_id,p.split_id,p.start_id,p.objs)};else{var D=7;t.length===1?D=1:t.length<=2?D=2:t.length<=5&&(D=5),this.toSplitC=function(){return(0,te.JP)(p.frame_name,p.frame_id,p.group_name,p.group_id,p.split_id,p.start_id,p.objs,D)}}this.toSplitH=function(){return(0,te.pj)(p.frame_name,p.group_name,p.split_id,p.objs)}}return F()(S,[{key:"check",value:function(){return this.objs.length!==1&&this.objs.length!==2&&this.objs.length!==5&&this.objs.length!==7?[{level:"warning",info:'Length of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Split "').concat(this.split_id,'" is not 1 or 2 or 5 or 7.')}]:[]}}]),S}();K.Z=q,d()}catch(S){d(S)}})})},5970:function(le,K,e){e.a(le,function(X,d){return Te(this,null,function*(){try{let C=function(A,U,O){for(var x="",l=0;l<O;l++)x=x+`
#include "ui_`.concat(A,"_").concat(U,"_").concat(l,'.h"');for(var u=`
#define ui_init_`.concat(A,"_").concat(U,`() \\
`),h=`
#define ui_update_`.concat(A,"_").concat(U,`() \\
`),j=`
#define ui_remove_`.concat(A,"_").concat(U,`() \\
`),s=0;s<O;s++)u+="_ui_init_".concat(A,"_").concat(U,"_").concat(s,`(); \\
`),h+="_ui_update_".concat(A,"_").concat(U,"_").concat(s,`(); \\
`),j+="_ui_remove_".concat(A,"_").concat(U,"_").concat(s,`(); \\
`);return x+="".concat(a).concat(u.slice(0,-4)).concat(a).concat(h.slice(0,-4)).concat(a).concat(j.slice(0,-4),`
    `),"".concat(x,`
`)},k=function(A,U){var O="",x=S()(U),l;try{for(x.s();!(l=x.n()).done;){var u=l.value;O+=C(A,u.group_name,u.splits.length)}}catch(h){x.e(h)}finally{x.f()}return O},w=function(A){var U="//".concat(a,"// Created by RM UI Designer").concat(a,"//").concat(a).concat(a,"#ifndef UI_H").concat(a,"#define UI_H").concat(a,"#ifdef __cplusplus").concat(a,'extern "C" {').concat(a,"#endif").concat(a).concat(a,'#include "ui_interface.h"').concat(a),O=S()(A),x;try{for(O.s();!(x=O.n()).done;){var l=x.value;U+=k(l.name,l.groups)}}catch(u){O.e(u)}finally{O.f()}return"".concat(U).concat(a).concat(a,"#ifdef __cplusplus").concat(a,"}").concat(a,"#endif").concat(a).concat(a,`#endif //UI_H
`)},G=function(A,U,O,x){var l="//".concat(a,"// Created by RM UI Designer").concat(a,"//").concat(a).concat(a,"#ifndef UI_").concat(A,"_").concat(U,"_").concat(O,"_H").concat(a,"#define UI_").concat(A,"_").concat(U,"_").concat(O,"_H").concat(a).concat(a,'#include "ui_interface.h"').concat(a).concat(a),u=S()(x),h;try{for(u.s();!(h=u.n()).done;){var j=h.value;l+="extern ui_interface_".concat(I[j.type],"_t *ui_").concat(A,"_").concat(U,"_").concat(j.name,`;
`)}}catch(s){u.e(s)}finally{u.f()}return l+="".concat(a,"void _ui_init_").concat(A,"_").concat(U,"_").concat(O,"();").concat(a,"void _ui_update_").concat(A,"_").concat(U,"_").concat(O,"();").concat(a,"void _ui_remove_").concat(A,"_").concat(U,"_").concat(O,"();").concat(a).concat(a,"#endif //UI_").concat(A,"_").concat(U,"_").concat(O,"_H").concat(a),l},z=function(A,U,O){var x=Z()({},O),l=se[x.type],u=x.name;x.type==="UiFloat"&&(x.number=Math.round(x.float*1e3),delete x.float),x.type==="UiRect"&&(x.x2=x.x+x.width,x.y2=x.y+x.height,delete x.width,delete x.height),(x.type==="UiFloat"||x.type==="UiNumber")&&(x.lineWidth=Math.round(x.fontSize/10)),x.color=L[x.color],delete x.type,delete x.id,delete x.name,delete x.group;var h="ui_".concat(A,"_").concat(U,"_").concat(u),j="    ".concat(h,"->figure_tpye = ").concat(l,`;
`);for(var s in x){var Y=x[s];typeof Y=="number"&&(Y=Math.round(Y)),j+="    ".concat(h,"->").concat(N[s]," = ").concat(Y,`;
`)}return"".concat(j,`
`)},T=function(A,U,O,x,l,u,h,j){for(var s="".concat(A,"_").concat(O,"_").concat(l),Y="//".concat(a,"// Created by RM UI Designer").concat(a,"//").concat(a).concat(a,'#include "ui_').concat(s,'.h"').concat(a).concat(a,"#define FRAME_ID ").concat(U).concat(a,"#define GROUP_ID ").concat(x).concat(a,"#define START_ID ").concat(u).concat(a,"#define OBJ_NUM ").concat(h.length).concat(a,"#define FRAME_OBJ_NUM ").concat(j).concat(a).concat(a,"CAT(ui_, CAT(FRAME_OBJ_NUM, _frame_t)) ui_").concat(s,";").concat(a),de=0;de<h.length;de++){var fe=I[h[de].type],ve=h[de].name;Y+="ui_interface_".concat(fe,"_t *ui_").concat(A,"_").concat(O,"_").concat(ve," = ")+"(ui_interface_".concat(fe,"_t *)&(ui_").concat(s,".data[").concat(de,`]);
`)}Y+="".concat(a,"void _ui_init_").concat(s,"() {").concat(a,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(a,"        ui_").concat(s,".data[i].figure_name[0] = FRAME_ID;").concat(a,"        ui_").concat(s,".data[i].figure_name[1] = GROUP_ID;").concat(a,"        ui_").concat(s,".data[i].figure_name[2] = i + START_ID;").concat(a,"        ui_").concat(s,".data[i].operate_tpyel = 1;").concat(a,"    }").concat(a,"    for (int i = OBJ_NUM; i < FRAME_OBJ_NUM; i++) {").concat(a,"        ui_").concat(s,".data[i].operate_tpyel = 0;").concat(a,"    }").concat(a).concat(a);var f=S()(h),P;try{for(f.s();!(P=f.n()).done;){var g=P.value;Y+=z(A,O,g)}}catch(re){f.e(re)}finally{f.f()}return Y+="".concat(a,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(s,");").concat(a,"    SEND_MESSAGE((uint8_t *) &ui_").concat(s,", sizeof(ui_").concat(s,"));").concat(a,"}").concat(a).concat(a,"void _ui_update_").concat(s,"() {").concat(a,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(a,"        ui_").concat(s,".data[i].operate_tpyel = 2;").concat(a,"    }").concat(a).concat(a,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(s,");").concat(a,"    SEND_MESSAGE((uint8_t *) &ui_").concat(s,", sizeof(ui_").concat(s,"));").concat(a,"}").concat(a).concat(a,"void _ui_remove_").concat(s,"() {").concat(a,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(a,"        ui_").concat(s,".data[i].operate_tpyel = 3;").concat(a,"    }").concat(a).concat(a,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(s,");").concat(a,"    SEND_MESSAGE((uint8_t *) &ui_").concat(s,", sizeof(ui_").concat(s,"));").concat(a,"}").concat(a),Y},v=function(A,U,O,x,l,u,h){var j="".concat(A,"_").concat(O,"_").concat(l),s=Z()({},h[0]),Y=s.name,de=s.text;s.color=L[s.color],s.strLength=de.length,s.lineWidth=Math.round(s.fontSize/10),delete s.text,delete s.type,delete s.id,delete s.name,delete s.group;var fe="//".concat(a,"// Created by RM UI Designer").concat(a,"//").concat(a).concat(a,'#include "ui_').concat(j,'.h"').concat(a,'#include "string.h"').concat(a).concat(a,"#define FRAME_ID ").concat(U).concat(a,"#define GROUP_ID ").concat(x).concat(a,"#define START_ID ").concat(u).concat(a).concat(a,"ui_string_frame_t ui_").concat(j,";").concat(a).concat(a,"ui_interface_string_t* ui_").concat(A,"_").concat(O,"_").concat(Y," = &ui_").concat(j,".option;").concat(a).concat(a,"void _ui_init_").concat(j,"() {").concat(a,"    ui_").concat(j,".option.figure_name[0] = FRAME_ID;").concat(a,"    ui_").concat(j,".option.figure_name[1] = GROUP_ID;").concat(a,"    ui_").concat(j,".option.figure_name[2] = START_ID;").concat(a,"    ui_").concat(j,".option.operate_tpyel = 1;").concat(a);fe+="    ui_".concat(j,".option.figure_tpye = ").concat(se.UiText,`;
`);for(var ve in s){var f=s[ve];typeof f=="number"&&(f=Math.round(f)),fe+="    ui_".concat(j,".option.").concat(N[ve]," = ").concat(f,`;
`)}return fe+="    strcpy(ui_".concat(A,"_").concat(O,"_").concat(Y,'->string, "').concat(de,'");').concat(a).concat(a,"    ui_proc_string_frame(&ui_").concat(j,");").concat(a,"    SEND_MESSAGE((uint8_t *) &ui_").concat(j,", sizeof(ui_").concat(j,"));").concat(a,"}").concat(a).concat(a,"void _ui_update_").concat(j,"() {").concat(a,"    ui_").concat(j,".option.operate_tpyel = 2;").concat(a).concat(a,"    ui_proc_string_frame(&ui_").concat(j,");").concat(a,"    SEND_MESSAGE((uint8_t *) &ui_").concat(j,", sizeof(ui_").concat(j,"));").concat(a,"}").concat(a).concat(a,"void _ui_remove_").concat(j,"() {").concat(a,"    ui_").concat(j,".option.operate_tpyel = 3;").concat(a).concat(a,"    ui_proc_string_frame(&ui_").concat(j,");").concat(a,"    SEND_MESSAGE((uint8_t *) &ui_").concat(j,", sizeof(ui_").concat(j,"));").concat(a,"}"),fe},y=function(){return M.apply(this,arguments)},M=function(){return M=F()(R()().mark(function A(){return R()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",{ui_interface:{h:D,c:H},ui_types:{h:ce}});case 1:case"end":return O.stop()}},A)})),M.apply(this,arguments)};e.d(K,{HC:function(){return y},JP:function(){return T},LI:function(){return w},c0:function(){return v},pj:function(){return G}});var ee=e(15009),R=e.n(ee),W=e(99289),F=e.n(W),te=e(97857),Z=e.n(te),q=e(64599),S=e.n(q),a=`
`,I={UiArc:"arc",UiRound:"round",UiRect:"rect",UiLine:"line",UiEllipse:"ellipse",UiText:"string",UiNumber:"number",UiFloat:"number"},se={UiLine:0,UiRect:1,UiRound:2,UiEllipse:3,UiArc:4,UiFloat:5,UiNumber:6,UiText:7},N={lineWidth:"width",layer:"layer",x:"start_x",y:"start_y",x2:"end_x",y2:"end_y",rx:"rx",ry:"ry",r:"r",startAngle:"start_angle",endAngle:"end_angle",number:"number",color:"color",fontSize:"font_size",strLength:"str_length"},L={main:0,yellow:1,green:2,orange:3,purple:4,pink:5,cyan:6,black:7,white:8},o=e(75112),t=e(8938),p=e(33562),D=yield(yield fetch(o)).text(),H=yield(yield fetch(t)).text(),ce=yield(yield fetch(p)).text();d()}catch(C){d(C)}})},1)},70104:function(le,K,e){e.d(K,{Z:function(){return x}});var X=e(15009),d=e.n(X),ee=e(99289),R=e.n(ee),W=e(12444),F=e.n(W),te=e(72004),Z=e.n(te),q=e(9783),S=e.n(q),a=e(19632),I=e.n(a),se=[0,94,188,226,97,63,221,131,194,156,126,32,163,253,31,65,157,195,33,127,252,162,64,30,95,1,227,189,62,96,130,220,35,125,159,193,66,28,254,160,225,191,93,3,128,222,60,98,190,224,2,92,223,129,99,61,124,34,192,158,29,67,161,255,70,24,250,164,39,121,155,197,132,218,56,102,229,187,89,7,219,133,103,57,186,228,6,88,25,71,165,251,120,38,196,154,101,59,217,135,4,90,184,230,167,249,27,69,198,152,122,36,248,166,68,26,153,199,37,123,58,100,134,216,91,5,231,185,140,210,48,110,237,179,81,15,78,16,242,172,47,113,147,205,17,79,173,243,112,46,204,146,211,141,111,49,178,236,14,80,175,241,19,77,206,144,114,44,109,51,209,143,12,82,176,238,50,108,142,208,83,13,239,177,240,174,76,18,145,207,45,115,202,148,118,40,171,245,23,73,8,86,180,234,105,55,213,139,87,9,235,181,54,104,138,212,149,203,41,119,244,170,72,22,233,183,85,11,136,214,52,106,43,117,151,201,74,20,246,168,116,42,200,150,21,75,169,247,182,232,10,84,215,137,107,53];function N(l){for(var u=255,h=0,j,s=l.byteLength;s--;)j=u^l[h],u=se[j],h++;return u}var L=[0,4489,8978,12955,17956,22445,25910,29887,35912,40385,44890,48851,51820,56293,59774,63735,4225,264,13203,8730,22181,18220,30135,25662,40137,36160,49115,44626,56045,52068,63999,59510,8450,12427,528,5017,26406,30383,17460,21949,44362,48323,36440,40913,60270,64231,51324,55797,12675,8202,4753,792,30631,26158,21685,17724,48587,44098,40665,36688,64495,60006,55549,51572,16900,21389,24854,28831,1056,5545,10034,14011,52812,57285,60766,64727,34920,39393,43898,47859,21125,17164,29079,24606,5281,1320,14259,9786,57037,53060,64991,60502,39145,35168,48123,43634,25350,29327,16404,20893,9506,13483,1584,6073,61262,65223,52316,56789,43370,47331,35448,39921,29575,25102,20629,16668,13731,9258,5809,1848,65487,60998,56541,52564,47595,43106,39673,35696,33800,38273,42778,46739,49708,54181,57662,61623,2112,6601,11090,15067,20068,24557,28022,31999,38025,34048,47003,42514,53933,49956,61887,57398,6337,2376,15315,10842,24293,20332,32247,27774,42250,46211,34328,38801,58158,62119,49212,53685,10562,14539,2640,7129,28518,32495,19572,24061,46475,41986,38553,34576,62383,57894,53437,49460,14787,10314,6865,2904,32743,28270,23797,19836,50700,55173,58654,62615,32808,37281,41786,45747,19012,23501,26966,30943,3168,7657,12146,16123,54925,50948,62879,58390,37033,33056,46011,41522,23237,19276,31191,26718,7393,3432,16371,11898,59150,63111,50204,54677,41258,45219,33336,37809,27462,31439,18516,23005,11618,15595,3696,8185,63375,58886,54429,50452,45483,40994,37561,33584,31687,27214,22741,18780,15843,11370,7921,3960];function o(l){for(var u=65535,h,j=0,s=l.byteLength;s--;)h=l[j],u=u>>8^L[(u^h)&255],j++;return u}var t=function(){function l(){F()(this,l),S()(this,"messages",[]),S()(this,"enabled",!1)}return Z()(l,[{key:"warn",value:function(h){this.enabled&&(this.messages.push({level:"warn",message:h,time:new Date}),console.warn(h)),this.messages.length>100&&(this.messages=this.messages.slice(-100))}},{key:"error",value:function(h){this.enabled&&(this.messages.push({level:"error",message:h,time:new Date}),console.error(h)),this.messages.length>100&&(this.messages=this.messages.slice(-100))}},{key:"clear",value:function(){this.messages=[]}},{key:"get",value:function(){return this.messages}}]),l}(),p=new t,D=p,H=[8,21,36,81,111,51],ce=function(){function l(){F()(this,l),S()(this,"buffer",void 0),this.buffer=new Uint8Array(0)}return Z()(l,[{key:"transform",value:function(h,j){for(this.buffer=Uint8Array.from([].concat(I()(this.buffer),I()(h)));this.buffer.length>7;){if(this.buffer[0]!==165){this.buffer=this.buffer.subarray(1);continue}if(this.buffer.length<7)break;var s=this.buffer[1]|this.buffer[2]<<8,Y=this.buffer[3],de=this.buffer[4],fe=this.buffer[5]|this.buffer[6]<<8,ve=this.buffer.subarray(0,4);if(N(ve)!==de){this.buffer=this.buffer.subarray(1),D.warn("crc8 error, calc: 0x".concat(N(ve).toString(16),", msg: 0x").concat(de.toString(16)));continue}if(fe!==769){this.buffer=this.buffer.subarray(1),D.warn("cmd_id 0x".concat(fe.toString(16)," not match"));continue}if(!H.includes(s)){this.buffer=this.buffer.subarray(1),D.warn("length error, length: ".concat(s));continue}if(this.buffer.length<6+s+2)break;var f=this.buffer.subarray(7,7+s),P=this.buffer[7+s]|this.buffer[8+s]<<8;if(o(this.buffer.subarray(0,7+s))!==P){this.buffer=this.buffer.subarray(1),D.error("crc16 error, calc: 0x".concat(o(this.buffer.subarray(0,7+s)).toString(16),", msg: 0x").concat(P.toString(16)));continue}j.enqueue(f),this.buffer=this.buffer.subarray(7+s+2)}}}]),l}(),C=ce,k=["UiLine","UiRect","UiRound","UiEllipse","UiArc","UiFloat","UiNumber","UiText"],w=["main","yellow","green","orange","purple","pink","cyan","black","white"],G=["null","add","update","remove"],z={257:1,258:2,259:5,260:7},T=["null","removeLayer","removeAll"];function v(l,u){return l[u]|l[u+1]<<8}function y(l,u){return l[u]|l[u+1]<<8|l[u+2]<<16|l[u+3]<<24}function M(l){var u=0,h="".concat(l[u++],"-").concat(l[u++]),j=l[u++],s=y(l,u);u+=4;var Y=s&7,de=s>>3&7,fe=s>>6&15,ve=s>>10&15,f=s>>14&511,P=s>>23&511,g=y(l,u);u+=4;var re=g&1023,ge=g>>10&2047,ne=g>>21&2047,ue=y(l,u),me=ue&1023,Se=ue>>10&2047,ye=ue>>21&2047;return{group:h,id:j,operate_tpyel:Y,figure_tpye:de,layer:fe,color:ve,_a:f,_b:P,width:re,start_x:ge,start_y:ne,_c:me,_d:Se,_e:ye,number:ue}}function A(l){var u=v(l,0),h=v(l,2),j=v(l,4),s=[];if(u===256)s.push({type:T[l[6]],obj:{layer:l[7]}});else if(u===272){var Y=M(l.subarray(6,21)),de=String.fromCharCode.apply(String,I()(l.subarray(21,21+Y._b)));s.push({type:G[Y.operate_tpyel],obj:{layer:Y.layer,group:Y.group,type:k[Y.figure_tpye],id:Y.id,name:"".concat(k[Y.figure_tpye],"_").concat(Y.id),color:w[Y.color],lineWidth:Y.width,x:Y.start_x,y:Y.start_y,fontSize:Y._a,text:de}})}else if(u in z)for(var fe=z[u],ve=0;ve<fe;ve++){var f=M(l.subarray(6+ve*15,6+(ve+1)*15)),P={layer:f.layer,group:f.group,type:k[f.figure_tpye],id:f.id,name:"".concat(k[f.figure_tpye],"_").concat(f.id),color:w[f.color],lineWidth:f.width,x:f.start_x,y:f.start_y};switch(k[f.figure_tpye].slice(2)){case"Line":P.x2=f._d,P.y2=f._e;break;case"Rect":P.width=f._d-f.start_x,P.height=f._e-f.start_y;break;case"Round":P.r=f._c;break;case"Ellipse":P.rx=f._d,P.ry=f._e;break;case"Arc":P.startAngle=f._a,P.endAngle=f._b,P.rx=f._d,P.ry=f._e;break;case"Float":P.fontSize=f._a,P.float=f.number/1e3;break;case"Number":P.fontSize=f._a,P.number=f.number;break}s.push({type:G[f.operate_tpyel],obj:P})}else console.log("unknown sub_id",u);return{sender:h,receiver:j,events:s}}var U=e(97318),O=function(){function l(u,h){F()(this,l),S()(this,"options",{baudRate:115200,dataBits:8,stopBits:1,flowControl:"none",parity:"none"}),this.onEvent=u,this.onError=h,this.reader=null,this.transformer=new TransformStream(new C),this.self=1}return Z()(l,[{key:"connect",value:function(){var u=R()(d()().mark(function j(){return d()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if("serial"in navigator){Y.next=3;break}return U.yw.error("Web Serial API not supported."),Y.abrupt("return");case 3:return Y.next=5,navigator.serial.requestPort();case 5:return this.port=Y.sent,Y.next=8,this.port.open(this.options);case 8:this.readableStreamClosed=this.port.readable.pipeTo(this.transformer.writable),this.reader=this.transformer.readable.getReader(),D.enabled=!0,D.clear(),this.readLoop();case 13:case"end":return Y.stop()}},j,this)}));function h(){return u.apply(this,arguments)}return h}()},{key:"stop",value:function(){var u=R()(d()().mark(function j(){var s,Y,de;return d()().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return s=new TextEncoderStream,Y=s.writable.getWriter(),de=s.readable.pipeTo(this.port.writable),this.reader.cancel(),ve.next=6,this.readableStreamClosed.catch(function(){});case 6:return Y.close(),ve.next=9,de;case 9:return ve.next=11,this.port.close();case 11:this.reader=null,this.transformer=new TransformStream(new C),this.self=1,D.enabled=!1;case 15:case"end":return ve.stop()}},j,this)}));function h(){return u.apply(this,arguments)}return h}()},{key:"readLoop",value:function(){var u=R()(d()().mark(function j(){var s,Y,de,fe;return d()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:f.prev=0;case 1:return f.next=4,this.reader.read();case 4:if(s=f.sent,Y=s.value,de=s.done,!de){f.next=10;break}return this.reader.releaseLock(),f.abrupt("break",20);case 10:if(fe=A(Y),fe.sender===this.self){f.next=14;break}return D.error("Sender ".concat(fe.sender," not match self ").concat(this.self)),f.abrupt("continue",1);case 14:if(fe.receiver===this.self+256){f.next=17;break}return D.error("Receiver ".concat(fe.receiver," not match self ").concat(this.self)),f.abrupt("continue",1);case 17:this===null||this===void 0||this.onEvent(fe),f.next=1;break;case 20:f.next=37;break;case 22:return f.prev=22,f.t0=f.catch(0),f.prev=24,f.next=27,this.stop();case 27:f.next=31;break;case 29:f.prev=29,f.t1=f.catch(24);case 31:this.reader=null,this.transformer=new TransformStream(new C),this.self=1,D.enabled=!1,D.clear(),this.onError(f.t0);case 37:case"end":return f.stop()}},j,this,[[0,22],[24,29]])}));function h(){return u.apply(this,arguments)}return h}()},{key:"getLog",value:function(){return D.get()}}]),l}(),x=O},30789:function(le,K,e){e.d(K,{E:function(){return S},E4:function(){return I},GM:function(){return D},Gj:function(){return se},UP:function(){return o},cT:function(){return ce},jK:function(){return C},lZ:function(){return L},q7:function(){return N}});var X=e(15009),d=e.n(X),ee=e(99289),R=e.n(ee),W=e(17990),F=e(55733),te=e.n(F),Z=document.createElement("a"),q=document.createElement("input");q.type="file";var S={yellow:"rgb(255, 238, 70)",green:"rgb(168, 255, 45)",orange:"rgb(255, 163, 8)",purple:"rgb(240, 41, 246)",pink:"rgb(255, 100, 142)",cyan:"rgb(69, 255, 242)",white:"#fff",black:"#000",blue:"rgb(47, 168, 223)",red:"rgb(255, 69, 70)"};function a(k){var w=k.split(".").pop();return{name:w+" file",extensions:[w]}}function I(k,w){if(o())R()(d()().mark(function T(){var v;return d()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,W.WZ.save({filters:[a(w)],defaultPath:w});case 2:if(v=M.sent,!(v!==null&&v.length>0)){M.next=6;break}return M.next=6,W.fs.writeTextFile(v,k);case 6:case"end":return M.stop()}},T)}))();else{var G=new Blob([k],{type:"text/plain;charset=utf-8"}),z=URL.createObjectURL(G);Z.href=z,Z.download=w,Z.click(),URL.revokeObjectURL(z)}}function se(k,w){if(o())R()(d()().mark(function z(){var T,v;return d()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,W.WZ.save({filters:[a(w)],defaultPath:w});case 2:if(T=M.sent,!(T!==null&&T.length>0)){M.next=9;break}return M.next=6,k.arrayBuffer();case 6:return v=M.sent,M.next=9,W.fs.writeBinaryFile(T,v);case 9:case"end":return M.stop()}},z)}))();else{var G=URL.createObjectURL(k);Z.href=G,Z.download=w,Z.click(),URL.revokeObjectURL(G)}}function N(k,w,G){var z={version:2,data:k,selected:G},T=JSON.stringify(z);I(T,w)}function L(k){var w=null;return window.createObjcectURL!==void 0?w=window.createOjcectURL(k):window.URL!==void 0?w=window.URL.createObjectURL(k):window.webkitURL!==void 0&&(w=window.webkitURL.createObjectURL(k)),w}function o(){return window!==void 0&&window.__TAURI__!==void 0}function t(k){return p.apply(this,arguments)}function p(){return p=R()(d()().mark(function k(w){var G;return d()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return G=new(te()),w.forEach(function(v){G.file(v.fileName,v.content)}),T.next=4,G.generateAsync({type:"blob"});case 4:return T.abrupt("return",T.sent);case 5:case"end":return T.stop()}},k)})),p.apply(this,arguments)}function D(k){return H.apply(this,arguments)}function H(){return H=R()(d()().mark(function k(w){var G,z,T;return d()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:G=[];for(z in w)for(T in w[z])G.push({fileName:"".concat(z,".").concat(T),content:w[z][T]});return y.next=4,t(G);case 4:return y.abrupt("return",y.sent);case 5:case"end":return y.stop()}},k)})),H.apply(this,arguments)}function ce(k){return new Promise(function(w,G){if(o()){var z=[k.slice(1)],T="".concat(z," file");k==="image/*"&&(z=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],T="image"),R()(d()().mark(function v(){var y,M,A,U,O;return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,W.WZ.open({multiple:!1,directory:!1,filters:[{name:T,extensions:z}]});case 2:if(y=l.sent,!(y!==null&&y.length>0)){l.next=16;break}return M=y.replace(/\\/g,"/"),A=M.split("/").pop(),l.t0=Blob,l.next=9,W.fs.readBinaryFile(y);case 9:l.t1=l.sent,l.t2=[l.t1],U=new l.t0(l.t2),O=new File([U],A),w(O),l.next=17;break;case 16:G();case 17:case"end":return l.stop()}},v)}))()}else q.accept=k,q.value="",q.onchange=function(){if(q.files.length>0){var v=q.files[0];w(v)}else G(new Error("No file selected"))},q.click()})}function C(k){return document.getElementById("content-in").contains(k)||k.getAttribute("contentEditable")==="true"?!0:k.tagName==="INPUT"||k.tagName==="TEXTAREA"}},54030:function(le,K,e){var X=e(67294),d=e(97318),ee=e(85893);function R(W){return(0,d.ZP)(),(0,ee.jsx)("div",{})}K.Z=R},7427:function(le,K,e){var X=e(12444),d=e.n(X),ee=e(72004),R=e.n(ee),W=e(31996),F=e.n(W),te=e(26037),Z=e.n(te),q=e(67294),S=e(21797),a=e(2487),I=e(42075),se=e(28058),N=e(18429),L=e(85893),o=function(t){F()(D,t);var p=Z()(D);function D(){return d()(this,D),p.apply(this,arguments)}return R()(D,[{key:"render",value:function(){var ce=this.props.errors.filter(function(w){return w.level==="warning"}),C=this.props.errors.filter(function(w){return w.level==="error"}),k=(0,L.jsx)(S.ZP,{status:"success",title:"Check Passed!",subTitle:"0 error, 0 warning!",style:{marginTop:"50px"}});return C.length+ce.length>0&&(k=(0,L.jsxs)("div",{style:{color:"var(--ant-color-text)",height:"100%"},children:[(0,L.jsxs)("p",{children:["Found ",C.length," errors, ",ce.length," warnings."]}),(0,L.jsx)("div",{style:{paddingBottom:10},className:"card-body",children:(0,L.jsx)(a.Z,{bordered:!0,dataSource:this.props.errors,renderItem:function(G){return(0,L.jsx)(a.Z.Item,{children:(0,L.jsxs)(I.Z,{size:"middle",children:[G.level==="warning"?(0,L.jsx)(se.Z,{}):(0,L.jsx)(N.Z,{}),G.info]})})}})})]})),(0,L.jsxs)("div",{style:{width:"100%",height:"calc(100% - 50px)"},children:[(0,L.jsx)("h3",{style:{color:"var(--ant-color-text)"},children:"Check Data"}),k]})}}]),D}(q.Component);K.Z=o},56296:function(le,K,e){e.a(le,function(X,d){return Te(this,null,function*(){try{let s=function(de){var fe="";return de.h&&(fe+=".h"),de.h&&de.c&&(fe+=" and "),de.c&&(fe+=".c"),fe},Y=function(){var de=document.querySelector(".rmui"),fe=getComputedStyle(de),ve=fe.getPropertyValue("--ant-color-text-base");return ve==="#fff"};var ee=e(19632),R=e.n(ee),W=e(15009),F=e.n(W),te=e(64599),Z=e.n(te),q=e(97857),S=e.n(q),a=e(99289),I=e.n(a),se=e(12444),N=e.n(se),L=e(72004),o=e.n(L),t=e(25098),p=e.n(t),D=e(31996),H=e.n(D),ce=e(26037),C=e.n(ce),k=e(9783),w=e.n(k),G=e(67294),z=e(49107),T=e(42075),v=e(14726),y=e(85265),M=e(42308),A=e(97318),U=e(24389),O=e(51376),x=e(30789),l=e(5970),u=e(85893),h=X([l]);l=(h.then?(yield h)():h)[0];var j=function(de){H()(ve,de);var fe=C()(ve);function ve(){var f;N()(this,ve);for(var P=arguments.length,g=new Array(P),re=0;re<P;re++)g[re]=arguments[re];return f=fe.call.apply(fe,[this].concat(g)),w()(p()(f),"state",{preview:null,fileName:""}),w()(p()(f),"checked",[]),f}return o()(ve,[{key:"review",value:function(P,g){this.setState({preview:this.props.code[P][g],fileName:"".concat(P,".").concat(g)})}},{key:"download",value:function(P,g){(0,x.E4)(this.props.code[P][g],"".concat(P,".").concat(g)),console.log(this.props.code[P][g])}},{key:"downloadChecked",value:function(){var f=I()(F()().mark(function g(){var re,ge,ne,ue,me;return F()().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(this.checked.length!==0){ye.next=3;break}return A.yw.error("Please select at least one file."),ye.abrupt("return");case 3:return re={},ye.t0=S(),ye.t1=S()({},this.props.code),ye.next=8,(0,l.HC)();case 8:ye.t2=ye.sent,ge=(0,ye.t0)(ye.t1,ye.t2),ne=Z()(this.checked);try{for(ne.s();!(ue=ne.n()).done;)me=ue.value,re[me]=ge[me]}catch(ze){ne.e(ze)}finally{ne.f()}(0,x.GM)(re).then(function(ze){(0,x.Gj)(ze,"codes.zip")});case 13:case"end":return ye.stop()}},g,this)}));function P(){return f.apply(this,arguments)}return P}()},{key:"render",value:function(){var P=this,g=[{file:"ui base .h and .c",key:"_base"}];for(var re in this.props.code)g.push({file:"".concat(re," ").concat(s(this.props.code[re])),key:re,h:this.props.code[re].h!==void 0,c:this.props.code[re].c!==void 0});return(0,u.jsxs)("div",{className:"full",style:{overflow:"hidden"},children:[(0,u.jsx)("h3",{style:{color:"var(--ant-color-text)",marginBottom:20},children:"Download Data"}),(0,u.jsx)("div",{style:{paddingBottom:36},className:"card-body",children:(0,u.jsx)(z.Z,{columns:[{title:"File",dataIndex:"file",key:"file"},{title:"Preview",dataIndex:"key",key:"preview",render:function(ne,ue){return(0,u.jsxs)(T.Z,{children:[ue.h&&(0,u.jsx)(v.ZP,{type:"link",onClick:function(){P.review(ne,"h")},children:"Preview .h"}),ue.c&&(0,u.jsx)(v.ZP,{type:"link",onClick:function(){P.review(ne,"c")},children:"Preview .c"})]})}},{title:"Download",dataIndex:"key",key:"download",render:function(ne,ue){return ne!=="_base"?(0,u.jsxs)(T.Z,{children:[ue.h&&(0,u.jsx)(v.ZP,{type:"link",onClick:function(){P.download(ne,"h")},children:"Download .h"}),ue.c&&(0,u.jsx)(v.ZP,{type:"link",onClick:function(){P.download(ne,"c")},children:"Download .c"})]}):(0,u.jsx)(v.ZP,{type:"link",onClick:I()(F()().mark(function me(){var Se,ye;return F()().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=2,(0,l.HC)();case 2:return Se=he.sent,he.next=5,(0,x.GM)(Se);case 5:ye=he.sent,(0,x.Gj)(ye,"ui_base.zip");case 7:case"end":return he.stop()}},me)})),children:"Download .zip"})}}],dataSource:g,rowSelection:{type:"checkbox",onChange:function(ne){var ue=R()(ne);ue.includes("_base")&&(ue=ue.filter(function(me){return me!=="_base"}),ue.push("ui_types"),ue.push("ui_interface")),P.checked=ue},getCheckboxProps:function(ne){return{name:ne.key}}},pagination:!1})}),(0,u.jsx)(y.Z,{onClose:function(){return P.setState({preview:null})},open:this.state.preview!==null,title:this.state.fileName,size:"large",getContainer:document.getElementById("content-in"),rootStyle:{inset:"25px 0 0 0"},children:(0,u.jsx)("div",{style:{height:"100%",overflow:"auto"},children:(0,u.jsx)(M.ZP,{value:this.state.preview||"",theme:Y()?U.ub:U.tR,extensions:[(0,O.N)()],onContextMenu:function(ne){ne.stopPropagation()}})})})]})}}]),ve}(G.Component);K.Z=j,d()}catch(s){d(s)}})})},22312:function(le,K,e){e.a(le,function(X,d){return Te(this,null,function*(){try{var ee=e(64599),R=e.n(ee),W=e(12444),F=e.n(W),te=e(72004),Z=e.n(te),q=e(25098),S=e.n(q),a=e(31996),I=e.n(a),se=e(26037),N=e.n(se),L=e(9783),o=e.n(L),t=e(67294),p=e(14726),D=e(85265),H=e(7427),ce=e(56296),C=e(10622),k=e(85893),w=X([ce,C]);[ce,C]=w.then?(yield w)():w;var G=function(z){I()(v,z);var T=N()(v);function v(){var y;F()(this,v);for(var M=arguments.length,A=new Array(M),U=0;U<M;U++)A[U]=arguments[U];return y=T.call.apply(T,[this].concat(A)),o()(S()(y),"state",{show:!1,step:"check"}),o()(S()(y),"downloadRef",(0,t.createRef)()),o()(S()(y),"data",{}),o()(S()(y),"errors",[]),y}return Z()(v,[{key:"gen",value:function(M){this.helper=new C.Z(M),this.data=M,this.code={ui:{h:this.helper.toUiH()}};var A=R()(this.helper.frames),U;try{for(A.s();!(U=A.n()).done;){var O=U.value,x=R()(O.groups),l;try{for(x.s();!(l=x.n()).done;){var u=l.value,h=R()(u.splits),j;try{for(h.s();!(j=h.n()).done;){var s=j.value;this.code["ui_".concat(O.name,"_").concat(u.group_name,"_").concat(s.split_id)]={c:s.toSplitC(),h:s.toSplitH()}}}catch(Y){h.e(Y)}finally{h.f()}}}catch(Y){x.e(Y)}finally{x.f()}}}catch(Y){A.e(Y)}finally{A.f()}this.errors=this.helper.check(),this.setState({show:!0,step:"check"})}},{key:"onClose",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var M=this,A=(0,k.jsx)(p.ZP,{type:"primary",onClick:function(){return M.setState({step:"generate"})},disabled:this.errors.filter(function(O){return O.level==="error"}).length>0,children:"Generate"}),U=(0,k.jsx)(p.ZP,{type:"primary",onClick:function(){var x;return(x=M.downloadRef)===null||x===void 0||(x=x.current)===null||x===void 0?void 0:x.downloadChecked()},children:"Download"});return(0,k.jsx)("div",{children:(0,k.jsx)(D.Z,{title:"C Code Generator",placement:"right",onClose:function(){return M.onClose()},open:this.state.show,size:"large",getContainer:document.getElementById("content-in"),rootStyle:{inset:"25px 0 0 0"},style:{borderTop:"3px var(--ant-line-type) var(--ant-color-split)"},footer:(0,k.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",padding:5},children:this.state.step==="check"?A:U}),children:this.state.step==="check"?(0,k.jsx)(H.Z,{errors:this.errors}):(0,k.jsx)(ce.Z,{code:this.code,ref:this.downloadRef})})})}}]),v}(t.Component);K.Z=G,d()}catch(z){d(z)}})})},9520:function(le,K,e){e.a(le,function(X,d){return Te(this,null,function*(){try{var ee=e(15009),R=e.n(ee),W=e(99289),F=e.n(W),te=e(64599),Z=e.n(te),q=e(12444),S=e.n(q),a=e(72004),I=e.n(a),se=e(25098),N=e.n(se),L=e(31996),o=e.n(L),t=e(26037),p=e.n(t),D=e(9783),H=e.n(D),ce=e(67294),C=e(14726),k=e(86250),w=e(83159),G=e(40411),z=e(73711),T=e(27732),v=e(11713),y=e(1210),M=e(52745),A=e(97937),U=e(16165),O=e(48268),x=e(62388),l=e(3213),u=e(13799),h=e(82843),j=e(23481),s=e(79476),Y=e(97318),de=e(73344),fe=e(553),ve=e(30789),f=e(22312),P=e(70104),g=e(85893),re=X([f]);f=(re.then?(yield re)():re)[0];var ge=[{key:"File-new",label:"New Project"},{key:"File-open",label:"Open .rmui"},{key:"File-save",label:"Save as .rmui"},{type:"divider"},{key:"File-generate",label:"Generate Code",icon:(0,g.jsx)(z.Z,{})}],ne=[{key:"Edit-undo",label:"Undo"},{key:"Edit-redo",label:"Redo"},{key:"Edit-reset",label:"Reset History"}],ue=[{key:"Simulate-start",label:"Start"},{key:"Simulate-stop",label:"Stop"},{key:"Simulate-settings",label:"Settings"},{key:"Simulate-log",label:"Debug Log"}],me=function(Se){o()(ze,Se);var ye=p()(ze);function ze(){var he;S()(this,ze);for(var $=arguments.length,be=new Array($),je=0;je<$;je++)be[je]=arguments[je];return he=ye.call.apply(ye,[this].concat(be)),H()(N()(he),"state",{fullscreen:!1,frames:["default"],selectedFrame:"default",darkMode:!1,couldUndo:!1,couldRedo:!1,serialStart:!1}),H()(N()(he),"formRef",(0,ce.createRef)()),H()(N()(he),"aboutRef",(0,ce.createRef)()),H()(N()(he),"generatorRef",(0,ce.createRef)()),H()(N()(he),"logDrawerRef",(0,ce.createRef)()),H()(N()(he),"serialModalRef",(0,ce.createRef)()),H()(N()(he),"tauri",(0,ve.UP)()),H()(N()(he),"serial",new P.Z(function(_){return he.onSerialEvent(_)},function(_){return he.onSerialError(_)})),he}return I()(ze,[{key:"onSerialEvent",value:function($){var be=Z()($.events),je;try{for(be.s();!(je=be.n()).done;){var _=je.value;this.props.onObjectEvent(_.type,_.obj)}}catch(Ie){be.e(Ie)}finally{be.f()}}},{key:"onSerialError",value:function($){this.props.setEditable(!0),this.setState({serialStart:!1}),Y.yw.error($.text)}},{key:"componentDidMount",value:function(){var he=F()(R()().mark(function be(){var je;return R()().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(!this.tauri){Ie.next=5;break}return Ie.next=3,de.G.isMaximized();case 3:je=Ie.sent,this.setState({fullscreen:je});case 5:case"end":return Ie.stop()}},be,this)}));function $(){return he.apply(this,arguments)}return $}()},{key:"setCouldDo",value:function($){console.log($),this.setState({couldUndo:$.couldPrevious,couldRedo:$.couldNext})}},{key:"fullScreen",value:function(){if(this.tauri)de.G.maximize();else{var $=document.documentElement;$.requestFullscreen?$.requestFullscreen():$.msRequestFullscreen?$.msRequestFullscreen():$.mozRequestFullScreen?$.mozRequestFullScreen():$.webkitRequestFullscreen&&$.webkitRequestFullscreen()}this.setState({fullscreen:!0})}},{key:"exitFullscreen",value:function(){this.tauri?de.G.unmaximize():document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),this.setState({fullscreen:!1})}},{key:"setFrames",value:function($){this.setState({frames:$.frames,selectedFrame:$.selected})}},{key:"setRobotId",value:function($){this.serial.self=$}},{key:"onMenuClick",value:function(){var he=F()(R()().mark(function be(je){var _,Ie,Ae,Ce,De,pe,ie,J,b,i,n;return R()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(_=je.keyPath[je.keyPath.length-1],_.slice(0,6)!=="Insert"){r.next=7;break}Ie=je.key.slice(7),Ae={id:-1,name:"New".concat(Ie),layer:0,group:"Ungroup",type:"Ui".concat(Ie)},this.props.onObjectEvent("_add",Ae),r.next=100;break;case 7:if(_!=="Edit-reset"){r.next=11;break}this.props.onHistoryEvent("resetNow"),r.next=100;break;case 11:if(_!=="Edit-undo"){r.next=15;break}this.props.onHistoryEvent("previous"),r.next=100;break;case 15:if(_!=="Edit-redo"){r.next=19;break}this.props.onHistoryEvent("next"),r.next=100;break;case 19:if(_!=="File-new"){r.next=24;break}this.props.reset(),this.props.onHistoryEvent("reset"),r.next=100;break;case 24:if(_!=="File-save"){r.next=28;break}this.props.save(),r.next=100;break;case 28:if(_!=="File-open"){r.next=32;break}this.props.upload(),r.next=100;break;case 32:if(_!=="File-generate"){r.next=36;break}(Ce=this.generatorRef.current)===null||Ce===void 0||Ce.gen(this.props.getData()),r.next=100;break;case 36:if(_!=="FrameOp-add"){r.next=43;break}return r.next=39,this.formRef.current.open("New Frame",this.state.frames);case 39:De=r.sent,this.props.setFrame("add",De),r.next=100;break;case 43:if(_!=="FrameOp-remove"){r.next=47;break}this.props.setFrame("remove",this.state.selectedFrame),r.next=100;break;case 47:if(_!=="FrameOp-copy"){r.next=54;break}return r.next=50,this.formRef.current.open("Copy Frame To",this.state.frames);case 50:pe=r.sent,this.props.setFrame("copy",pe),r.next=100;break;case 54:if(_!=="FrameOp-rename"){r.next=61;break}return r.next=57,this.formRef.current.open("Rename Frame To",this.state.frames);case 57:ie=r.sent,this.props.setFrame("rename",ie),r.next=100;break;case 61:if(_!=="FrameOp-change"){r.next=66;break}J=je.key.slice(7),this.props.setFrame("change",J),r.next=100;break;case 66:if(_!=="Simulate-start"){r.next=79;break}return r.prev=67,this.props.setEditable(!1),r.next=71,this.serial.connect();case 71:this.setState({serialStart:!0}),r.next=77;break;case 74:r.prev=74,r.t0=r.catch(67),Y.yw.error(r.t0.text);case 77:r.next=100;break;case 79:if(_!=="Simulate-stop"){r.next=92;break}return r.prev=80,r.next=83,this.serial.stop();case 83:this.props.setEditable(!0),this.setState({serialStart:!1}),r.next=90;break;case 87:r.prev=87,r.t1=r.catch(80),Y.yw.error(r.t1.text);case 90:r.next=100;break;case 92:if(_!=="Simulate-settings"){r.next=99;break}return r.next=95,(b=this.serialModalRef.current)===null||b===void 0?void 0:b.getOptions(this.serial.options);case 95:i=r.sent,i&&(this.serial.options=i),r.next=100;break;case 99:_==="Simulate-log"&&((n=this.logDrawerRef.current)===null||n===void 0||n.show(this.serial.getLog()));case 100:case"end":return r.stop()}},be,this,[[67,74],[80,87]])}));function $(be){return he.apply(this,arguments)}return $}()},{key:"getFramesMenu",value:function(){var $=[{key:"FrameOp-add",label:"New Frame"},{key:"FrameOp-copy",label:"Copy This Frame"},{key:"FrameOp-rename",label:"Rename This Frame"},{key:"FrameOp-remove",label:"Remove This Frame"},{key:"FrameOp-change",label:"Change to",selectable:"true",children:[]}],be=Z()(this.state.frames),je;try{for(be.s();!(je=be.n()).done;){var _=je.value;$[4].children.push({key:"Frames-".concat(_),label:_})}}catch(Ie){be.e(Ie)}finally{be.f()}return $}},{key:"render",value:function(){var $=this,be=(0,g.jsx)(C.ZP,{type:"text",onClick:function(){return $.fullScreen()},size:"small",children:(0,g.jsx)(T.Z,{style:{color:"var(--ant-color-text)"}})}),je=(0,g.jsx)(C.ZP,{type:"text",onClick:function(){return $.exitFullscreen()},size:"small",children:(0,g.jsx)(v.Z,{style:{color:"var(--ant-color-text)"}})}),_=(0,g.jsx)(C.ZP,{type:"text",onClick:function(){return $.props.setDarkMode(!0)},size:"small",children:(0,g.jsx)(U.Z,{component:u.r})}),Ie=(0,g.jsx)(C.ZP,{type:"text",onClick:function(){return $.props.setDarkMode(!1)},size:"small",children:(0,g.jsx)(U.Z,{component:h.r})});return ne[0].disabled=!this.state.couldUndo,ne[1].disabled=!this.state.couldRedo,ue[0].disabled=this.state.serialStart,ue[1].disabled=!this.state.serialStart,(0,g.jsxs)("div",{style:{width:"100%",height:32,marginTop:-5,zIndex:2e3,position:"relative"},className:"solid-color","data-tauri-drag-region":!0,children:[(0,g.jsxs)(k.Z,{style:{width:"100vw",display:"flex",paddingTop:-5},justify:"flex-start",align:"center","data-tauri-drag-region":!0,children:[(0,g.jsx)("div",{style:{fontFamily:"YouSheBiaoTiHei",fontSize:20,paddingLeft:6,paddingRight:6,paddingTop:3,display:"flex",color:"var(--ant-color-text)",cursor:"default"},"data-tauri-drag-region":!0,children:"RoboMaster UI Designer"}),(0,g.jsx)(w.Z,{menu:{items:ge,onClick:function(Ce){return $.onMenuClick(Ce)}},children:(0,g.jsx)(C.ZP,{type:"text",size:"small",children:"File"})}),(0,g.jsx)(w.Z,{menu:{items:[].concat(ne),onClick:function(Ce){return $.onMenuClick(Ce)}},children:(0,g.jsx)(C.ZP,{type:"text",size:"small",children:"Edit"})}),(0,g.jsx)(w.Z,{menu:{items:(0,x.t)(),onClick:function(Ce){return $.onMenuClick(Ce)}},children:(0,g.jsx)(C.ZP,{type:"text",size:"small",children:"Insert"})}),(0,g.jsx)(w.Z,{menu:{items:this.getFramesMenu(),onClick:function(Ce){return $.onMenuClick(Ce)},selectedKeys:["Frames-".concat(this.state.selectedFrame)]},children:(0,g.jsx)(C.ZP,{type:"text",size:"small",children:"Frames"})}),(0,g.jsx)(w.Z,{menu:{items:[].concat(ue),onClick:function(Ce){return $.onMenuClick(Ce)}},children:(0,g.jsxs)(C.ZP,{type:"text",size:"small",children:["Simulate\xA0",(0,g.jsx)(G.Z,{color:this.state.serialStart?"green":"red"})]})}),(0,g.jsx)(C.ZP,{type:"text",size:"small",onClick:function(){var Ce;(Ce=$.aboutRef.current)===null||Ce===void 0||Ce.show()},children:"About"}),(0,g.jsxs)("div",{style:{marginRight:5,justifyContent:"flex-end",marginLeft:"auto",marginTop:2},"data-tauri-drag-region":!0,children:[(0,g.jsxs)("div",{style:{display:"inline",marginRight:15,fontSize:10,cursor:"default",color:"var(--ant-color-text)"},"data-tauri-drag-region":!0,children:["Created by\xA0",(0,g.jsx)("a",{href:"https://github.com/bismarckkk",target:"_blank",children:(0,g.jsx)(C.ZP,{type:"link",style:{padding:0},size:"small","data-tauri-drag-region":!0,children:"Bismarckkk"})})]}),this.props.darkMode?Ie:_,(0,g.jsx)("a",{href:"https://github.com/bismarckkk/RM-UI-Designer",target:"_blank",children:(0,g.jsx)(C.ZP,{type:"text",size:"small",children:(0,g.jsx)(y.Z,{style:{color:"var(--ant-color-text)"}})})}),(0,g.jsx)(C.ZP,{type:"text",size:"small",onClick:function(){return de.G.minimize()},style:{display:this.tauri?"inline":"none"},children:(0,g.jsx)(M.Z,{style:{color:"var(--ant-color-text)"}})}),this.state.fullscreen?je:be,(0,g.jsx)(C.ZP,{type:"text",size:"small",onClick:function(){return(0,fe.J)()},style:{display:this.tauri?"inline":"none"},children:(0,g.jsx)(A.Z,{style:{color:"var(--ant-color-text)"}})})]})]}),(0,g.jsx)(O.Z,{ref:this.formRef}),(0,g.jsx)(l.Z,{ref:this.aboutRef}),(0,g.jsx)(f.Z,{ref:this.generatorRef}),(0,g.jsx)(s.Z,{ref:this.logDrawerRef}),(0,g.jsx)(j.Z,{ref:this.serialModalRef})]})}}]),ze}(ce.Component);K.Z=me,d()}catch(Se){d(Se)}})})},3213:function(le,K,e){var X=e(97857),d=e.n(X),ee=e(13769),R=e.n(ee),W=e(12444),F=e.n(W),te=e(72004),Z=e.n(te),q=e(25098),S=e.n(q),a=e(31996),I=e.n(a),se=e(26037),N=e.n(se),L=e(9783),o=e.n(L),t=e(67294),p=e(85576),D=e(40249),H=e(21798),ce=e(85893),C=["node"],k=function(w){I()(z,w);var G=N()(z);function z(){var T;F()(this,z);for(var v=arguments.length,y=new Array(v),M=0;M<v;M++)y[M]=arguments[M];return T=G.call.apply(G,[this].concat(y)),o()(S()(T),"state",{open:!1,content:null}),T}return Z()(z,[{key:"show",value:function(){this.setState({open:!0})}},{key:"componentDidMount",value:function(){var v=this;fetch(e(99734)).then(function(y){return y.text()}).then(function(y){v.setState({content:y})})}},{key:"render",value:function(){var v=this;return(0,ce.jsx)(p.Z,{title:"About",onOk:function(){return v.setState({open:!1})},onCancel:function(){return v.setState({open:!1})},footer:null,open:this.state.open,children:this.state.content?(0,ce.jsx)(H.U,{components:{a:function(M){var A=M.node,U=R()(M,C);return(0,ce.jsx)("a",d()(d()({},U),{},{target:"_blank"}))}},children:this.state.content}):(0,ce.jsx)(D.Z,{})})}}]),z}(t.Component);K.Z=k},48268:function(le,K,e){var X=e(64599),d=e.n(X),ee=e(15009),R=e.n(ee),W=e(99289),F=e.n(W),te=e(12444),Z=e.n(te),q=e(72004),S=e.n(q),a=e(25098),I=e.n(a),se=e(31996),N=e.n(se),L=e(26037),o=e.n(L),t=e(9783),p=e.n(t),D=e(67294),H=e(37476),ce=e(5966),C=e(85893),k=function(w){N()(z,w);var G=o()(z);function z(){var T;Z()(this,z);for(var v=arguments.length,y=new Array(v),M=0;M<v;M++)y[M]=arguments[M];return T=G.call.apply(G,[this].concat(y)),p()(I()(T),"state",{title:"",open:!1,frames:[]}),p()(I()(T),"promise",null),T}return S()(z,[{key:"open",value:function(v,y){var M=this;return new Promise(function(A,U){M.setState({title:v,open:!0,frames:y}),M.promise&&M.promise.reject(),M.promise={resolve:A,reject:U}})}},{key:"render",value:function(){var v=this;return(0,C.jsx)(H.Y,{title:this.state.title,autoFocusFirstInput:!0,width:240,open:this.state.open,onOpenChange:function(M){v.promise&&!M&&v.state.open&&v.promise.reject(),v.setState({open:M})},onFinish:function(){var y=F()(R()().mark(function M(A){return R()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return v.promise.resolve(A.frame),v.promise=null,O.abrupt("return",!0);case 3:case"end":return O.stop()}},M)}));return function(M){return y.apply(this,arguments)}}(),children:(0,C.jsx)(ce.Z,{name:"frame",label:"New Frame Name",width:"sm",rules:[{required:!0,message:"Please input frame name!"},function(y){var M=y.getFieldValue,A=v;return{validator:function(O,x){{var l=!0,u=M("frame"),h=d()(A.state.frames),j;try{for(h.s();!(j=h.n()).done;){var s=j.value;if(s===u){l=!1;break}}}catch(Y){h.e(Y)}finally{h.f()}return l?Promise.resolve():Promise.reject(new Error("Cannot create same name frame!"))}}}}]})})}}]),z}(D.Component);K.Z=k},79476:function(le,K,e){var X=e(12444),d=e.n(X),ee=e(72004),R=e.n(ee),W=e(25098),F=e.n(W),te=e(31996),Z=e.n(te),q=e(26037),S=e.n(q),a=e(9783),I=e.n(a),se=e(67294),N=e(21797),L=e(2487),o=e(42075),t=e(85265),p=e(28058),D=e(18429),H=e(85893),ce=function(C){Z()(w,C);var k=S()(w);function w(){var G;d()(this,w);for(var z=arguments.length,T=new Array(z),v=0;v<z;v++)T[v]=arguments[v];return G=k.call.apply(k,[this].concat(T)),I()(F()(G),"state",{show:!1,errors:[]}),G}return R()(w,[{key:"onClose",value:function(){this.setState({show:!1})}},{key:"show",value:function(z){this.setState({show:!0,errors:z})}},{key:"render",value:function(){var z=this,T=this.state.errors.filter(function(M){return M.level==="warn"}),v=this.state.errors.filter(function(M){return M.level==="error"}),y=(0,H.jsx)(N.ZP,{status:"success",title:"0 error, 0 warning!",style:{marginTop:"50px"}});return v.length+T.length>0&&(y=(0,H.jsxs)("div",{style:{color:"var(--ant-color-text)",height:"100%"},children:[(0,H.jsxs)("p",{children:["Logged ",v.length," errors, ",T.length," warnings."]}),(0,H.jsx)("div",{style:{paddingBottom:10},className:"card-body",children:(0,H.jsx)(L.Z,{bordered:!0,dataSource:this.state.errors,renderItem:function(A){return(0,H.jsx)(L.Z.Item,{children:(0,H.jsxs)(o.Z,{size:"middle",children:[A.level==="warn"?(0,H.jsx)(p.Z,{}):(0,H.jsx)(D.Z,{}),"".concat(A.time.toLocaleTimeString(),": ").concat(A.message)]})})}})})]})),(0,H.jsx)(t.Z,{title:"Serial Debug Log",placement:"right",onClose:function(){return z.onClose()},open:this.state.show,size:"large",getContainer:document.getElementById("content-in"),rootStyle:{inset:"25px 0 0 0"},style:{borderTop:"3px var(--ant-line-type) var(--ant-color-split)"},children:(0,H.jsx)("div",{style:{width:"100%",height:"calc(100% - 25px)"},children:y})})}}]),w}(se.Component);K.Z=ce},23481:function(le,K,e){var X=e(15009),d=e.n(X),ee=e(99289),R=e.n(ee),W=e(12444),F=e.n(W),te=e(72004),Z=e.n(te),q=e(25098),S=e.n(q),a=e(31996),I=e.n(a),se=e(26037),N=e.n(se),L=e(9783),o=e.n(L),t=e(67294),p=e(37476),D=e(64317),H=e(85893),ce=[1152e3,1e6,921600,576e3,5e5,460800,230400,115200,74800,57600,38400,19200,9600,4800],C=function(k){I()(G,k);var w=N()(G);function G(){var z;F()(this,G);for(var T=arguments.length,v=new Array(T),y=0;y<T;y++)v[y]=arguments[y];return z=w.call.apply(w,[this].concat(v)),o()(S()(z),"state",{open:!1,defaultOptions:{}}),o()(S()(z),"promise",null),z}return Z()(G,[{key:"getOptions",value:function(T){var v=this;return new Promise(function(y,M){v.setState({open:!0,defaultOptions:T}),v.promise&&v.promise.reject(),v.promise={resolve:y,reject:M}})}},{key:"onFinish",value:function(){var z=R()(d()().mark(function v(y){return d()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return this.promise.resolve(y),this.promise=null,A.abrupt("return",!0);case 3:case"end":return A.stop()}},v,this)}));function T(v){return z.apply(this,arguments)}return T}()},{key:"render",value:function(){var T=this;return(0,H.jsxs)(p.Y,{title:"Serial",width:400,open:this.state.open,onOpenChange:function(y){return T.setState({open:y})},onFinish:function(){var v=R()(d()().mark(function y(M){return d()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,T.onFinish(M);case 2:return U.abrupt("return",U.sent);case 3:case"end":return U.stop()}},y)}));return function(y){return v.apply(this,arguments)}}(),children:[(0,H.jsx)(D.Z,{name:"baudRate",label:"Baud Rate",width:"sm",initialValue:this.state.defaultOptions.baudRate,options:ce.map(function(v){return{value:v,label:v.toString()}}),rules:[{required:!0}]}),(0,H.jsx)(D.Z,{name:"dataBits",label:"Data Bits",width:"sm",initialValue:this.state.defaultOptions.dataBits,options:[{value:8,label:"8"},{value:7,label:"7"}],rules:[{required:!0}]}),(0,H.jsx)(D.Z,{name:"stopBits",label:"Stop Bits",width:"sm",initialValue:this.state.defaultOptions.stopBits,options:[{value:1,label:"1"},{value:2,label:"2"}],rules:[{required:!0}]}),(0,H.jsx)(D.Z,{name:"parity",label:"Parity",width:"sm",initialValue:this.state.defaultOptions.parity,options:[{value:"none",label:"None"},{value:"even",label:"Even"},{value:"odd",label:"Odd"}],rules:[{required:!0}]}),(0,H.jsx)(D.Z,{name:"flowControl",label:"Flow Control",width:"sm",initialValue:this.state.defaultOptions.flowControl,options:[{value:"none",label:"None"},{value:"hardware",label:"Hardware"}],rules:[{required:!0}]})]})}}]),G}(t.Component);K.Z=C},4585:function(le,K,e){e.d(K,{Z:function(){return ve}});var X=e(97857),d=e.n(X),ee=e(13769),R=e.n(ee),W=e(15009),F=e.n(W),te=e(99289),Z=e.n(te),q=e(12444),S=e.n(q),a=e(72004),I=e.n(a),se=e(25098),N=e.n(se),L=e(31996),o=e.n(L),t=e(26037),p=e.n(t),D=e(9783),H=e.n(D),ce=e(67294),C=e(21797),k=e(42075),w=e(75081),G=e(85576),z=e(14726),T=e(92462),v=e(553),y=e(30789);function M(){return A.apply(this,arguments)}function A(){return A=Z()(F()().mark(function f(){var P,g,re,ge,ne,ue,me,Se,ye,ze,he,$,be;return F()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!(0,y.UP)()){_.next=14;break}return _.next=3,(0,T.Py)();case 3:if(P=_.sent,!P.manifest){_.next=11;break}return g=P.manifest.version.slice(1).split(".").map(Number),re=localStorage.getItem("version_ignored"),re||(re="v1.1.6"),ge=re.slice(1).split(".").map(Number),ne=g[0]>ge[0]||g[1]>ge[1]||g[2]>ge[2],_.abrupt("return",{shouldUpdate:ne,manifest:P.manifest});case 11:return _.abrupt("return",P);case 14:return ue=Date.now(),_.next=17,fetch("https://ui.bismarck.xyz/update.json?".concat(ue));case 17:return me=_.sent,_.next=20,me.json();case 20:return Se=_.sent,ye=Se.notes,ze=Se.version.slice(1).split(".").map(Number),he=localStorage.getItem("version_ignored"),he||(he="v1.1.6"),$=he.slice(1).split(".").map(Number),be=ze[0]>$[0]||ze[1]>$[1]||ze[2]>$[2],_.abrupt("return",{shouldUpdate:be,manifest:{body:ye,version:Se.version}});case 28:case"end":return _.stop()}},f)})),A.apply(this,arguments)}function U(){return O.apply(this,arguments)}function O(){return O=Z()(F()().mark(function f(){return F()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(0,y.UP)()){g.next=6;break}return g.next=3,(0,T.F_)();case 3:return g.abrupt("return",g.sent);case 6:window.location.reload();case 7:case"end":return g.stop()}},f)})),O.apply(this,arguments)}var x={checkUpdate:M,installUpdate:U,relaunch:v.R},l=e(97318),u=e(21798),h=e(85893),j=["node"],s=x.checkUpdate,Y=x.installUpdate,de=x.relaunch,fe=function(f){o()(g,f);var P=p()(g);function g(){var re;S()(this,g);for(var ge=arguments.length,ne=new Array(ge),ue=0;ue<ge;ue++)ne[ue]=arguments[ue];return re=P.call.apply(P,[this].concat(ne)),H()(N()(re),"state",{step:0,content:"",version:""}),re}return I()(g,[{key:"handleClose",value:function(){this.setState({step:0})}},{key:"handleOk",value:function(){var re=Z()(F()().mark(function ne(){return F()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.prev=0,this.setState({step:2}),me.next=4,Y();case 4:return me.next=6,de();case 6:if(me.sent){me.next=8;break}this.setState({step:3});case 8:me.next=13;break;case 10:me.prev=10,me.t0=me.catch(0),this.setState({step:-1});case 13:case"end":return me.stop()}},ne,this,[[0,10]])}));function ge(){return re.apply(this,arguments)}return ge}()},{key:"check",value:function(){var ge=this,ne=/(https:\/\/github\.com\/bismarckkk\/RM-UI-Designer\/pull\/)(\d+)/g,ue=/(https:\/\/github\.com\/bismarckkk\/RM-UI-Designer\/compare\/)(v\d+\.\d+\.\d+\.\.\.v\d+\.\d+\.\d+)/g;Z()(F()().mark(function me(){var Se,ye,ze;return F()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.prev=0,$.next=3,s();case 3:Se=$.sent,ye=Se.shouldUpdate,ze=Se.manifest,ye&&ge.setState({step:1,content:ze.body.replace(ne,function(be,je,_){return"[#".concat(_,"](").concat(je).concat(_,")")}).replace(ue,function(be,je,_){return"[#".concat(_,"](").concat(je).concat(_,")")}),version:ze.version}),$.next=12;break;case 9:$.prev=9,$.t0=$.catch(0),l.yw.warning("Failed to check update.");case 12:case"end":return $.stop()}},me,null,[[0,9]])}))()}},{key:"ignore",value:function(){localStorage.setItem("version_ignored",this.state.version),this.handleClose()}},{key:"componentDidMount",value:function(){this.check()}},{key:"render",value:function(){var ge=(0,h.jsx)("div",{});return this.state.step===-1?ge=(0,h.jsx)(C.ZP,{status:"error",title:"Update Failed"}):this.state.step===1?ge=(0,h.jsx)(u.U,{components:{a:function(ue){var me=ue.node,Se=R()(ue,j);return(0,h.jsx)("a",d()(d()({},Se),{},{target:"_blank"}))}},children:this.state.content}):this.state.step===2?ge=(0,h.jsx)("div",{style:{padding:40,textAlign:"center",color:"var(--ant-color-text)"},children:(0,h.jsxs)(k.Z,{direction:"vertical",children:[(0,h.jsx)(w.Z,{size:"large"}),(0,h.jsx)("h3",{children:"Updating..."})]})}):this.state.step===3&&(ge=(0,h.jsx)(C.ZP,{status:"success",title:"Update Success",subTitle:"Please restart the app to apply the update."})),(0,h.jsx)(G.Z,{title:"Auto Update",open:this.state.step,closable:this.state.step>1,maskClosable:this.state.step>1,footer:this.state.step>1?null:(0,h.jsxs)(k.Z,{children:[(0,h.jsx)(z.ZP,{onClick:this.ignore.bind(this),children:"Ignore"}),(0,h.jsx)(z.ZP,{onClick:this.handleClose.bind(this),children:"Cancel"}),(0,h.jsx)(z.ZP,{type:"primary",onClick:this.handleOk.bind(this),children:"Update"})]}),children:ge})}}]),g}(ce.Component),ve=fe},87159:function(le,K,e){e.d(K,{Z:function(){return De}});var X=e(97857),d=e.n(X),ee=e(15009),R=e.n(ee),W=e(99289),F=e.n(W),te=e(64599),Z=e.n(te),q=e(19632),S=e.n(q),a=e(12444),I=e.n(a),se=e(72004),N=e.n(se),L=e(25098),o=e.n(L),t=e(31996),p=e.n(t),D=e(26037),H=e.n(D),ce=e(9783),C=e.n(ce),k=e(67294),w=e(63084),G=e(32983),z=e(42075),T=e(14726),v=e(97318),y=e(3909),M=e(56680),A=e(86250),U=e(83159),O=e(27847),x=e(90420),l=e(99611),u=e(94149),h=e(3355),j=e(80882),s=e(85893),Y=function(pe){p()(J,pe);var ie=H()(J);function J(){var b;I()(this,J);for(var i=arguments.length,n=new Array(i),c=0;c<i;c++)n[c]=arguments[c];return b=ie.call.apply(ie,[this].concat(n)),C()(o()(b),"state",{status:b.props.defaultStatus||!1}),b}return N()(J,[{key:"render",value:function(){var i=this;return(0,s.jsx)(T.ZP,{size:"small",type:"text",onClick:function(){i.props.onChange&&i.props.onChange(!i.state.status),i.setState({status:!i.state.status})},children:this.state.status?this.props.onNode||"ON":this.props.offNode||"OFF"})}}]),J}(k.Component),de=Y;function fe(pe){return pe.map(function(ie){return ie===-2?"window":"E-".concat(ie)})}var ve=[{key:"D1-group-layer",label:"layer"},{key:"D1-group-group",label:"group"}],f=function(pe){p()(J,pe);var ie=H()(J);function J(){var b;I()(this,J);for(var i=arguments.length,n=new Array(i),c=0;c<i;c++)n[c]=arguments[c];return b=ie.call.apply(ie,[this].concat(n)),C()(o()(b),"state",{treeData:[],rightClickMenuOpen:!1,groupKey:"layer"}),C()(o()(b),"treeData",[]),b}return N()(J,[{key:"selectKey2id",value:function(i){var n=this,c=[],r=Z()(i),m;try{var E=function(){var V=m.value;if(V==="window")c.push(-2);else if(V.startsWith("E-"))c.push(parseInt(V.slice(2)));else{var B=n.treeData.find(function(xe){return xe.key===V}).children.map(function(xe){return parseInt(xe.key.slice(2))}),oe=Z()(B),Me;try{for(oe.s();!(Me=oe.n()).done;){var ae=Me.value;c.includes(ae)||c.push(ae)}}catch(xe){oe.e(xe)}finally{oe.f()}}};for(r.s();!(m=r.n()).done;)E()}catch(Q){r.e(Q)}finally{r.f()}return c}},{key:"onElementMenuContainerClick",value:function(i){i.target.localName==="div"&&(this.setState({rightClickMenuOpen:!1}),(i.target.classList.contains("ant-tree")||!i.ctrlKey&&!i.shiftKey)&&this.props.onSelect([]))}},{key:"onElementMenuClick",value:function(i){var n=this;if(this.setState({rightClickMenuOpen:!1}),i.key==="D2-copy"){var c=null;i.target.localName!=="input"&&this.props.selectedId.length!==0&&this.props.selectedId[0]!==-2&&(i.preventDefault(),c=JSON.stringify(this.props.selectedId.map(function(Q){return n.props.data[Q]})),i.clipboardData.setData("text",c))}else if(i.key==="D2-delete"){var r=Z()(this.props.selectedId),m;try{for(r.s();!(m=r.n()).done;){var E=m.value;this.props.onObjectEvent("remove",{id:E})}}catch(Q){r.e(Q)}finally{r.f()}}}},{key:"onElementRightClick",value:function(i){var n=this.selectKey2id([i.node.key]);n[0]in this.props.selectedId||this.props.onSelect(n)}},{key:"onSelect",value:function(i){if(i.length!==0){var n=this.selectKey2id(i);n.includes(-2)&&(n=[n[n.length-1]]),this.props.onSelect(n)}}},{key:"onMenuOpenChange",value:function(i){if(i){var n=this;setTimeout(function(){n.props.selectedId.length!==0&&n.props.selectedId[0]!==-2?n.setState({rightClickMenuOpen:!0}):n.setState({rightClickMenuOpen:!1})},100)}else this.setState({rightClickMenuOpen:!1})}},{key:"elementsMenuOnClick",value:function(i){var n=this;this.setState({groupKey:i.key.slice(9)},function(){return n.updateTree()})}},{key:"updateTree",value:function(){for(var i=this,n=this.state.groupKey,c=[],r=Object.keys(this.props.data),m=function(){for(var V=i.props.data[r[E]],B=-1,oe=0;oe<c.length;oe++)if(c[oe].key==="".concat(n,"-").concat(V[n])){B=oe;break}B===-1&&(c.push({title:"".concat(n," ").concat(V[n]),key:"".concat(n,"-").concat(V[n]),children:[],isLeaf:!1}),B=c.length-1),c[B].children.push({title:(0,s.jsxs)(A.Z,{justify:"space-between",style:{width:"100%"},children:[V.name,(0,s.jsxs)(z.Z,{children:[(0,s.jsx)(de,{onChange:function(ae){return i.props.onObjectEvent("setAttr",{id:V.id,payload:{visible:ae}})},defaultStatus:!0,offNode:(0,s.jsx)(x.Z,{}),onNode:(0,s.jsx)(l.Z,{})}),(0,s.jsx)(de,{onChange:function(ae){return i.props.onObjectEvent("setAttr",{id:V.id,payload:{selectable:ae}})},defaultStatus:!0,offNode:(0,s.jsx)(u.Z,{}),onNode:(0,s.jsx)(h.Z,{style:{transform:"scaleX(-1)"}})})]})]}),key:"E-".concat(r[E])})},E=0;E<r.length;E++)m();return c=c.sort(function(Q,V){return Q.key.toString().localeCompare(V.key.toString())}),c.unshift({title:"UI Window",key:"window"}),this.treeData=c,c}},{key:"render",value:function(){var i=this;return(0,s.jsx)(w.Z,{size:"small",title:"Elements",style:{height:"100%"},extra:(0,s.jsx)(U.Z,{menu:{items:ve,onClick:function(c){return i.elementsMenuOnClick(c)},selectable:!0,selectedKeys:["D1-group-".concat(this.state.groupKey)]},children:(0,s.jsxs)(z.Z,{style:{fontSize:11},children:["Group by",(0,s.jsx)(j.Z,{size:"small"})]})}),children:(0,s.jsx)("div",{className:"card-body",onMouseUp:function(c){return i.onElementMenuContainerClick(c)},children:(0,s.jsx)(U.Z,{menu:{items:[{key:"D2-copy",label:"Copy"},{key:"D2-delete",label:"Delete",danger:!0}],onClick:function(c){i.onElementMenuClick(c)}},trigger:["contextMenu"],open:this.state.rightClickMenuOpen,onOpenChange:function(c){i.onMenuOpenChange(c)},children:(0,s.jsx)(O.Z,{className:"full",treeData:this.updateTree(),onSelect:function(c){return i.onSelect(c)},selectedKeys:fe(this.props.selectedId),onRightClick:function(c){return i.onElementRightClick(c)},treeDefaultExpandAll:!0,showLine:!0,blockNode:!0,multiple:!0,selectable:this.props.editable})})})})}}]),J}(k.Component),P=f,g=e(32777),re=e(30789),ge=function(pe){p()(J,pe);var ie=H()(J);function J(){return I()(this,J),ie.apply(this,arguments)}return N()(J,[{key:"render",value:function(){return this.props.color==="Main"?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{style:{border:"1px solid #aaa",height:16,width:16,borderRadius:"20%",display:"inline-flex"},children:[(0,s.jsx)("div",{style:{backgroundColor:"red",height:12,width:6,margin:"1px 0 1px 1px",borderTopLeftRadius:"20%",borderBottomLeftRadius:"20%",display:"inline-flex"}}),(0,s.jsx)("div",{style:{backgroundColor:"blue",height:12,width:6,margin:"1px 1px 1px 0",borderTopRightRadius:"20%",borderBottomRightRadius:"20%",display:"inline-flex"}})]}),"\xA0 Main"]}):(0,s.jsx)("div",{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{border:"1px solid #aaa",height:16,width:16,borderRadius:"20%",display:"inline-flex"},children:(0,s.jsx)("div",{style:{backgroundColor:re.E[this.props.color.toLowerCase()],height:12,width:12,margin:1,borderRadius:"20%",display:"inline-flex"}})}),"\xA0 ",this.props.color]})})}}]),J}(k.Component),ne=ge,ue={id:{title:"Id",key:"id",dataIndex:"id",valueType:"digit",editable:!1},name:{title:"Name",key:"name",dataIndex:"name"},group:{title:"Group",key:"group",dataIndex:"group"},kind:{title:"Kind",key:"kind",dataIndex:"kind",editable:!1},lineWidth:{title:"Line Width",key:"lineWidth",dataIndex:"lineWidth",valueType:"digit"},layer:{title:"Layer",key:"layer",dataIndex:"layer",valueType:"digit"},x:{title:"X",key:"x",dataIndex:"x",valueType:"digit"},y:{title:"Y",key:"y",dataIndex:"y",valueType:"digit"},x2:{title:"X2",key:"x2",dataIndex:"x2",valueType:"digit"},y2:{title:"Y2",key:"y2",dataIndex:"y2",valueType:"digit"},width:{title:"Width",key:"width",dataIndex:"width",valueType:"digit"},height:{title:"Height",key:"height",dataIndex:"height",valueType:"digit"},rx:{title:"Rx",key:"rx",dataIndex:"rx",valueType:"digit"},ry:{title:"Ry",key:"ry",dataIndex:"ry",valueType:"digit"},r:{title:"R",key:"r",dataIndex:"r",valueType:"digit"},startAngle:{title:"Start Angle",key:"startAngle",dataIndex:"startAngle",valueType:"digit"},endAngle:{title:"End Angle",key:"endAngle",dataIndex:"endAngle",valueType:"digit"},fontSize:{title:"Font Size",key:"fontSize",dataIndex:"fontSize",valueType:"digit"},float:{title:"Number",key:"float",dataIndex:"float",valueType:"digit"},number:{title:"Number",key:"number",dataIndex:"number",valueType:"digit"},text:{title:"Text",key:"text",dataIndex:"text",formItemProps:{rules:[{max:30},{type:"string"}]}},color:{title:"Color",key:"color",dataIndex:"color",valueType:"select",valueEnum:{main:(0,s.jsx)(ne,{color:"Main"}),yellow:(0,s.jsx)(ne,{color:"Yellow"}),green:(0,s.jsx)(ne,{color:"Green"}),orange:(0,s.jsx)(ne,{color:"Orange"}),purple:(0,s.jsx)(ne,{color:"Purple"}),pink:(0,s.jsx)(ne,{color:"Pink"}),cyan:(0,s.jsx)(ne,{color:"Cyan"}),black:(0,s.jsx)(ne,{color:"Black"}),white:(0,s.jsx)(ne,{color:"White"})}},team:{title:"Team",key:"team",dataIndex:"team",valueType:"select",valueEnum:{red:(0,s.jsx)(ne,{color:"Red"}),blue:(0,s.jsx)(ne,{color:"Blue"})}},role:{title:"Role",key:"role",dataIndex:"role",valueType:"select",valueEnum:{1:"Hero",2:"Engineer",3:"No3. Infantry",4:"No4. Infantry",5:"No5. Infantry",6:"Drone"}},backgroundImage:{title:"Background Image",key:"backgroundImage",dataIndex:"backgroundImage",valueType:"switch"}};function me(pe){for(var ie=Object.keys(pe),J=[],b=0;b<ie.length;b++)ue[ie[b]]&&J.push(ue[ie[b]]);return J}var Se=e(62388);function ye(pe,ie,J,b){return ze.apply(this,arguments)}function ze(){return ze=F()(R()().mark(function pe(ie,J,b,i){var n,c,r,m,E,Q,V,B,oe,Me;return R()().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(ie){xe.next=2;break}return xe.abrupt("return");case 2:if(n=1,ie.version&&(n=ie.version),n!==1){xe.next=10;break}return xe.next=7,b("default");case 7:for(c=0,r=Object.keys(ie);c<r.length;c++)m=r[c],J("_update",ie[m]);xe.next=22;break;case 10:if(n!==2){xe.next=22;break}E=0,Q=Object.keys(ie.data);case 12:if(!(E<Q.length)){xe.next=20;break}return V=Q[E],xe.next=16,b(V);case 16:for(B=0,oe=Object.keys(ie.data[V]);B<oe.length;B++)Me=oe[B],J("_update",ie.data[V][Me]);case 17:E++,xe.next=12;break;case 20:return xe.next=22,b(ie.selected);case 22:i();case 23:case"end":return xe.stop()}},pe)})),ze.apply(this,arguments)}var he=e(96486),$=e.n(he);function be(pe){return pe.head>0?d()({},pe.data[pe.head-1]):null}function je(pe){return pe.head<pe.data.length-1?d()({},pe.data[pe.head+1]):null}var _=function(){function pe(){I()(this,pe),C()(this,"cacheTimer",null),C()(this,"updateTimer",null),C()(this,"now",null),C()(this,"_previous",null),C()(this,"_next",null),C()(this,"his",null),C()(this,"catchUpdate",!0);var ie=localStorage.getItem("history"),J={data:[{}],head:0,version:1};ie?J=JSON.parse(ie):(ie=localStorage.getItem("data"),ie?J.data[0]=JSON.parse(ie):J.data[0]={version:2,data:{default:{}},selected:"default"},localStorage.setItem("history",JSON.stringify(J))),this.now=J.data[J.head],this._previous=be(J),this._next=je(J)}return N()(pe,[{key:"save",value:function(){var J=this;this.cacheTimer&&clearTimeout(this.cacheTimer),this.cacheTimer=setTimeout(function(){J.his.head>50&&(J.his.data=J.his.data.slice(J.his.head-50),J.his.head=50),J.his.head<J.his.data.length-20&&(J.his.data=J.his.data.slice(0,J.his.head+20)),localStorage.setItem("history",JSON.stringify(J.his)),J.his=null},2e3)}},{key:"read",value:function(){this.his||(this.his=JSON.parse(localStorage.getItem("history")))}},{key:"get",value:function(){return this.catchUpdate?(console.log(this.his),{now:this.now,couldNext:this._next!==null,couldPrevious:this._previous!==null}):{now:this.now,couldNext:!1,couldPrevious:!1}}},{key:"reset",value:function(J){return this._previous=null,this._next=null,this.his={data:[J],head:0,version:1},console.log(this.his),this.save(),this.get()}},{key:"next",value:function(){return this._next&&(this._previous=this.now,this.now=this._next,this.read(),this.his.head++,this._next=je(this.his),this.save()),this.get()}},{key:"previous",value:function(){return this._previous&&(this._next=this.now,this.now=this._previous,this.read(),this.his.head--,this._previous=be(this.his),this.save()),this.get()}},{key:"cancelUpdate",value:function(){this.updateTimer&&clearTimeout(this.updateTimer)}},{key:"update",value:function(J){var b=this;this.catchUpdate&&(this.updateTimer&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout(function(){$().isEqual(J,b.now)||(b._previous=b.now,b.now=J,b.read(),b.his.data=b.his.data.slice(0,b.his.head+1),b.his.data.push(J),b.his.head++,b._next=null,b.save())},500))}}]),pe}(),Ie=_,Ae=e(30819),Ce=function(pe){p()(J,pe);var ie=H()(J);function J(){var b;I()(this,J);for(var i=arguments.length,n=new Array(i),c=0;c<i;c++)n[c]=arguments[c];return b=ie.call.apply(ie,[this].concat(n)),C()(o()(b),"objects",{default:{}}),C()(o()(b),"data",{}),C()(o()(b),"state",{properties:null,selectedId:[],frame:"default",uiWindow:{height:1080,width:1920,ratio:1,team:"red",role:1,backgroundImage:!0},infoModalShow:!1,data:{},editable:!0}),C()(o()(b),"canvas",null),C()(o()(b),"canvasRef",(0,k.createRef)()),C()(o()(b),"propertiesRef",(0,k.createRef)()),C()(o()(b),"background",null),C()(o()(b),"his",new Ie),C()(o()(b),"moveTimer",null),C()(o()(b),"moveTimeout",null),b}return N()(J,[{key:"getNewDataId",value:function(){return Object.keys(this.state.data).length===0?0:Math.max.apply(Math,S()(Object.keys(this.state.data)))+1}},{key:"setEditable",value:function(i){this.setState({editable:i}),this.his.catchUpdate=i,this.canvas.selection=i,g.fabric.Object.prototype.selectable=i;var n=this.canvas.getObjects();if(i){var c=Z()(n),r;try{for(c.s();!(r=c.n()).done;){var m=r.value;m.set("selectable",!0)}}catch(B){c.e(B)}finally{c.f()}}else{var E=Z()(n),Q;try{for(E.s();!(Q=E.n()).done;){var V=Q.value;V.set("selectable",!1)}}catch(B){E.e(B)}finally{E.f()}}this.select([])}},{key:"setRobotId",value:function(){var i=this.state.uiWindow.role;this.state.uiWindow.team==="blue"&&(i+=100),this.props.setRobotId(i)}},{key:"cancelHistoryUpdate",value:function(){var i=this;this.his.cancelUpdate(),setTimeout(function(){i.his.cancelUpdate(),i.props.setCouldDo(i.his.get())},200)}},{key:"save",value:function(){(0,re.q7)(this.data,"ui.rmui",this.state.frame)}},{key:"updateHistory",value:function(){var i=this;setTimeout(function(){var n={version:2,data:i.data,selected:i.state.frame};$().isEqual(n,i.his.now)||(i.his.update(n),i.props.setCouldDo({couldNext:!1,couldPrevious:!0}))},100)}},{key:"getData",value:function(){return this.data}},{key:"select",value:function(i,n){var c=this;if(i.length===0)this.setState({properties:null,selectedId:[]}),this.canvas.discardActiveObject(),this.canvas.renderAll();else if(i[0]===-2)this.setState({properties:this.state.uiWindow,selectedId:[-2]}),this.canvas.discardActiveObject(),this.canvas.renderAll();else if(i.length===1)this.setState({properties:this.state.data[i[0]],selectedId:[i[0]]}),this.canvas.setActiveObject(this.objects[this.state.frame][i[0]]),this.canvas.renderAll();else if(this.setState({properties:null,selectedId:i}),!n){var r=i.map(function(E){return c.objects[c.state.frame][E]}),m=new g.fabric.ActiveSelection(r,{canvas:this.canvas,hasControls:!1});this.canvas.setActiveObject(m),this.canvas.renderAll()}}},{key:"reset",value:function(){var b=F()(R()().mark(function n(){var c,r,m,E=arguments;return R()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(c=E.length>0&&E[0]!==void 0?E[0]:!1,c){r=this.canvas.getObjects();for(m in r)this.canvas.remove(r[m]);this.canvas.renderAll()}else this.canvas.clear(),this.setBackground(e(25665)),this.canvas.backgroundColor="#fff";if(Object.keys(this.objects).includes("default")){V.next=5;break}return V.next=5,this.onFrameEvent("add","default");case 5:return this.objects.default={},V.next=8,this.onFrameEvent("change","default");case 8:this.objects={default:{}},this.props.onFrameChange({frames:["default"],selected:"default"}),this.select([]),this.resetCanvasSize(),this.objectsToData();case 13:case"end":return V.stop()}},n,this)}));function i(){return b.apply(this,arguments)}return i}()},{key:"resetCanvasSize",value:function(){if(this.canvas){var i,n=this.canvasRef.current.clientWidth,c=this.canvasRef.current.clientHeight,r=d()({},this.state.uiWindow);n/c<r.width/r.height?(c=n*r.height/r.width,r.ratio=r.width/n):(n=c*r.width/r.height,r.ratio=r.height/c),this.setState({uiWindow:r}),this.canvas.setHeight(c),this.canvas.setWidth(n),this.canvas.viewportTransform[5]=c,this.canvas.viewportTransform[3]=-1;var m=this.canvasRef.current.clientWidth,E=this.canvasRef.current.clientHeight,Q=m-n,V=E-c,B=document.getElementById("coordinateDisplay");B.style.right="".concat(Q+12,"px"),B.style.bottom="".concat(V+25,"px");for(var oe=0,Me=Object.keys(this.objects[this.state.frame]);oe<Me.length;oe++){var ae=Me[oe];this.objects[this.state.frame][ae].setRatio(r.ratio)}(i=this.background)===null||i===void 0||i.set({scaleX:1/r.ratio,scaleY:1/r.ratio}),this.canvas.renderAll(),this.objectsToData(),this.setState({infoModalShow:!1})}}},{key:"onPropertiesChange",value:function(i,n){var c=this;if(this.state.selectedId[0]===-2){if(n.team!==this.state.uiWindow.team){for(var r=0,m=Object.keys(this.objects[this.state.frame]);r<m.length;r++){var E=m[r];this.objects[this.state.frame][E].setTeam(n.team)}this.canvas.renderAll(),this.objectsToData()}if(this.setState({uiWindow:n,properties:n},function(){c.resetCanvasSize(),c.setRobotId()}),n.backgroundImage!==this.state.uiWindow.backgroundImage)if(n.backgroundImage){var Q,V=this.state.uiWindow.ratio;(Q=this.background)===null||Q===void 0||Q.set({scaleX:1/V,scaleY:1/V}),this.canvas.setBackgroundImage(this.background),this.canvas.renderAll()}else this.canvas.setBackgroundImage(null),this.canvas.renderAll();(n.width!==this.state.uiWindow.width||n.height!==this.state.uiWindow.height)&&v.oC.warning({title:"Warning",content:"Modify UI window width and height may cause unknown error."})}else this.state.selectedId.length===1&&(this.objects[this.state.frame][this.state.selectedId[0]].fromObject(n),this.canvas.renderAll(),this.objectsToData(),this.updateHistory())}},{key:"setBackground",value:function(i){var n=this;g.fabric.Image.fromURL(i,function(c,r){var m;n.background=c;var E=n.state.uiWindow.ratio;(m=n.background)===null||m===void 0||m.set({scaleX:1/E,scaleY:-1/E}),n.state.uiWindow.backgroundImage&&(n.canvas.setBackgroundImage(n.background),n.canvas.renderAll())})}},{key:"componentDidMount",value:function(){var i=this,n=this;this.canvas=new g.fabric.Canvas("ui"),this.setBackground(e(25665)),this.canvas.backgroundColor="#fff",window.addEventListener("resize",function(){i.resetCanvasSize()},!1),window.addEventListener("copy",function(r){var m=null;console.log(r.target,(0,re.jK)(r.target)),!(0,re.jK)(r.target)&&n.state.selectedId.length!==0&&n.state.selectedId[0]!==-2&&(r.preventDefault(),m=JSON.stringify(n.state.selectedId.map(function(E){return n.state.data[E]})),r.clipboardData.setData("text",m))}),window.addEventListener("paste",function(r){for(var m=!1,E=r.clipboardData.items,Q=0;Q<E.length;Q++)if(E[Q].type.indexOf("image")===0){r.preventDefault(),m=!0;var V=E[Q].getAsFile(),B=new FileReader;B.onload=function(we){n.setBackground(we.target.result)},B.readAsDataURL(V)}if(!m&&!(0,re.jK)(r.target))try{r.preventDefault();var oe=r.clipboardData.getData("text"),Me=JSON.parse(oe);Array.isArray(Me)||(Me=[Me]);var ae=[],xe=20,ke=Z()(Me),Re;try{var Ue=function(){var Fe=Re.value;setTimeout(function(){Fe.id=n.getNewDataId(),ae.push(Fe.id),n.onObjectEvent("_update",Fe)},xe),xe+=20};for(ke.s();!(Re=ke.n()).done;)Ue()}catch(we){ke.e(we)}finally{ke.f()}setTimeout(function(){n.select(ae),i.updateHistory()},xe)}catch(we){v.yw.warning("Invalid data")}}),window.addEventListener("keydown",function(r){if(r.key==="Delete"&&n.state.selectedId.length!==0&&n.state.selectedId[0]!==-2){var m=Z()(n.state.selectedId),E;try{for(m.s();!(E=m.n()).done;){var Q=E.value;n.onObjectEvent("remove",{id:Q})}}catch(oe){m.e(oe)}finally{m.f()}i.updateHistory()}if(r.ctrlKey&&r.key==="z"&&!r.shiftKey?(r.preventDefault(),i.onHistoryEvent("previous")):r.ctrlKey&&(0,Ae.toLower)(r.key)==="z"&&r.shiftKey&&(r.preventDefault(),i.onHistoryEvent("next")),["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(r.key)&&!(0,re.jK)(r.target)){var V=function(Me,ae){switch(ae*=n.state.uiWindow.ratio,Me){case"ArrowUp":B.top+=ae;break;case"ArrowDown":B.top-=ae;break;case"ArrowLeft":B.left-=ae;break;case"ArrowRight":B.left+=ae;break}B instanceof g.fabric.ActiveSelection?B.getObjects().forEach(function(xe){xe.setCoords(),xe.resizeScale()}):(B.setCoords(),B.resizeScale()),n.canvas.renderAll(),n.objectsToData(),n.updateHistory()},B=n.canvas.getActiveObject();if(!B)return;r.preventDefault(),V(r.key,2),i.moveTimeout&&clearTimeout(i.moveTimeout),i.moveTimer&&clearInterval(i.moveTimer),i.moveTimeout=setTimeout(function(){i.moveTimer=setInterval(function(){V(r.key,1)},500)},1500)}}),window.addEventListener("keyup",function(r){["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(r.key)&&(clearTimeout(i.moveTimeout),clearInterval(i.moveTimer))}),this.canvas.on({"mouse:up":function(){for(var m=0,E=Object.keys(n.objects[n.state.frame]);m<E.length;m++){var Q=E[m];n.objects[n.state.frame][Q].resizeScale()}n.canvas.renderAll(),n.objectsToData(),n.updateHistory();var V=n.canvas.getActiveObject();setTimeout(function(){if(V)if(V instanceof g.fabric.ActiveSelection){var B=V.getObjects().map(function(oe){return oe.id});n.select(B,!0)}else n.select([V.id]);else n.select([])},100)},"mouse:move":function(m){var E=i.canvas.getPointer(m.e),Q=i.state.uiWindow.ratio,V=Math.round(E.x*Q),B=Math.round(E.y*Q),oe=document.getElementById("coordinateDisplay");oe.style.display="block",oe.textContent="x: ".concat(V,", y: ").concat(B)},"mouse:out":function(){var m=document.getElementById("coordinateDisplay");m.style.display="none"}});var c=this.his.get();this.props.setCouldDo(c),ye(c.now,function(r,m){return i.onObjectEvent(r,m)},function(r){return n.onFrameEvent("change",r)},function(){return i.canvas.renderAll()}).then(function(){i.setRobotId(),i.resetCanvasSize()}),this.cancelHistoryUpdate()}},{key:"upload",value:function(){var i=this,n=this;(0,re.cT)(".rmui").then(function(c){var r=new FileReader;r.onload=function(){var m=F()(R()().mark(function E(Q){return R()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,n.reset();case 2:return B.next=4,ye(JSON.parse(Q.target.result),function(oe,Me){return n.onObjectEvent(oe,Me)},function(oe){return n.onFrameEvent("change",oe)},function(){return n.canvas.renderAll()}).then(function(){i.setRobotId()});case 4:n.objectsToData(),n.his.reset({version:2,data:i.data,selected:i.state.frame});case 6:case"end":return B.stop()}},E)}));return function(E){return m.apply(this,arguments)}}(),r.readAsText(c)}).catch(function(c){})}},{key:"objectsToData",value:function(){for(var i=this,n={},c=0,r=Object.keys(this.objects);c<r.length;c++){var m=r[c];n[m]={};for(var E=0,Q=Object.keys(this.objects[m]);E<Q.length;E++){var V=Q[E],B=this.objects[m][V].toObject();n[m][B.id]=B}}if(this.data=n,this.setState({data:n[this.state.frame]}),this.state.selectedId.length===1){var oe;this.state.selectedId[0]===-2?oe=this.state.uiWindow:oe=n[this.state.frame][this.state.selectedId[0]],this.setState({properties:d()({},oe)},function(){var Me;(Me=i.propertiesRef.current)===null||Me===void 0||Me.reload()})}}},{key:"onObjectEvent",value:function(i,n){var c=this;function r(B){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Me={id:B.id,name:B.name,layer:B.layer,group:B.group,type:B.type,ratio:c.state.uiWindow.ratio,team:c.state.uiWindow.team},ae=(0,Se.R)(Me);c.objects[c.state.frame][B.id]=ae,oe&&ae.fromObject(B),ae.setRatio(c.state.uiWindow.ratio);for(var xe=c.canvas.getObjects(),ke=!0,Re=0,Ue=Object.keys(xe);Re<Ue.length;Re++){var we=Ue[Re];if(xe[we].id===ae.id){ke=!1;break}}c.canvas.add(ae)}if(i==="add")typeof n.id=="number"&&n.id>=0&&!this.objects[this.state.frame][n.id]?r(n,!0):console.log("id exists",n.id,this.objects[this.state.frame][n.id]);else if(i==="_add")n.id=this.getNewDataId(),n.ratio=this.state.uiWindow.ratio,n.team=this.state.uiWindow.team,r(n,!1);else if(i==="update")this.objects[this.state.frame][n.id]&&this.objects[this.state.frame][n.id].fromObject(n);else if(i==="_update")n.id>=0&&this.objects[this.state.frame][n.id]?this.objects[this.state.frame][n.id].fromObject(n):r(n);else if(i==="remove"){var m=n.id;this.objects[this.state.frame][m]&&(this.select([]),this.canvas.remove(this.objects[this.state.frame][m]),this.canvas.renderAll(),delete this.objects[this.state.frame][m],this.objectsToData())}else if(i==="setAttr")this.objects[this.state.frame][n.id]&&this.objects[this.state.frame][n.id].set(n.payload);else if(i==="removeLayer")for(var E=0,Q=Object.keys(this.objects[this.state.frame]);E<Q.length;E++){var V=Q[E];this.objects[this.state.frame][V].layer===n.layer&&this.onObjectEvent("remove",{id:V})}else i==="removeAll"&&this.reset(!0);this.objectsToData(),this.canvas.renderAll()}},{key:"setFrame",value:function(i){this.objects[i]||(this.objects[i]={});for(var n=0,c=Object.keys(this.objects[this.state.frame]);n<c.length;n++){var r=c[n];this.canvas.remove(this.objects[this.state.frame][r])}this.canvas.renderAll();var m=this;return new Promise(function(E,Q){m.setState({frame:i},function(){for(var V=m.canvas.getObjects(),B=0,oe=Object.keys(m.objects[m.state.frame]);B<oe.length;B++){for(var Me=oe[B],ae=!0,xe=0,ke=Object.keys(V);xe<ke.length;xe++){var Re=ke[xe];if(V[Re].id===m.objects[m.state.frame][Me].id){ae=!1;break}}ae&&m.canvas.add(m.objects[m.state.frame][Me])}m.objectsToData(),m.select([]),m.canvas.renderAll(),E()})})}},{key:"onHistoryEvent",value:function(){var b=F()(R()().mark(function n(c){var r=this,m;return R()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(c!=="update"){Q.next=5;break}return this.updateHistory(),Q.abrupt("return");case 5:if(c!=="reset"){Q.next=11;break}return m=this.his.reset({version:2,data:{default:{}},selected:"default"}),this.props.setCouldDo(m),Q.abrupt("return");case 11:if(c!=="resetNow"){Q.next=15;break}return m=this.his.reset({version:2,data:this.data,selected:this.state.frame}),this.props.setCouldDo(m),Q.abrupt("return");case 15:return c==="previous"?m=this.his.previous():c==="next"&&(m=this.his.next()),this.props.setCouldDo(m),Q.next=19,this.reset(!0);case 19:return Q.next=21,ye(m.now,function(V,B){return r.onObjectEvent(V,B)},function(V){return r.onFrameEvent("change",V)},function(){return r.canvas.renderAll()}).then(function(){r.setRobotId()});case 21:this.cancelHistoryUpdate(),this.props.setCouldDo(m);case 23:case"end":return Q.stop()}},n,this)}));function i(n){return b.apply(this,arguments)}return i}()},{key:"onFrameEvent",value:function(){var b=F()(R()().mark(function n(c,r){var m,E,Q,V,B,oe;return R()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(c!=="add"){ae.next=6;break}return this.objects[r]={},ae.next=4,this.setFrame(r);case 4:ae.next=40;break;case 6:if(c!=="remove"){ae.next=19;break}if(Object.keys(this.objects).length!==1){ae.next=10;break}return v.yw.error("Cannot remove last frame!"),ae.abrupt("return");case 10:if(m=r,this.state.frame!==r){ae.next=16;break}return r=Object.keys(this.objects)[0],r===m&&(r=Object.keys(this.objects)[1]),ae.next=16,this.setFrame(r);case 16:delete this.objects[m],ae.next=40;break;case 19:if(c!=="change"){ae.next=24;break}return ae.next=22,this.setFrame(r);case 22:ae.next=40;break;case 24:if(c!=="copy"){ae.next=34;break}return this.objects[r]={},E=this.objects[this.state.frame],ae.next=29,this.setFrame(r);case 29:for(Q=0,V=Object.keys(E);Q<V.length;Q++)B=V[Q],this.onObjectEvent("_update",E[B].toObject());this.objectsToData(),this.canvas.renderAll(),ae.next=40;break;case 34:if(c!=="rename"){ae.next=40;break}return oe=this.state.frame,ae.next=38,this.onFrameEvent("copy",r);case 38:return ae.next=40,this.onFrameEvent("remove",oe);case 40:this.props.onFrameChange({frames:Object.keys(this.objects),selected:r}),this.objectsToData(),this.updateHistory();case 43:case"end":return ae.stop()}},n,this)}));function i(n,c){return b.apply(this,arguments)}return i}()},{key:"render",value:function(){var i,n=this;return(i=this.canvas)===null||i===void 0||i.renderAll(),(0,s.jsx)("div",{style:{width:"100vw",height:"calc(100% - 20px)",padding:10},children:(0,s.jsxs)(y.eh,{autoSaveId:"container_h",className:"container",direction:"horizontal",children:[(0,s.jsx)(y.s_,{defaultSize:25,minSize:15,maxSize:45,order:1,children:(0,s.jsxs)(y.eh,{autoSaveId:"card_v",className:"full",direction:"vertical",children:[(0,s.jsx)(y.s_,{defaultSize:50,minSize:25,maxSize:75,children:(0,s.jsx)(P,{onSelect:function(r){return n.select(r)},onObjectEvent:function(r,m){return n.onObjectEvent(r,m)},onReset:function(){return n.reset()},data:this.state.data,editable:this.state.editable,selectedId:this.state.selectedId})}),(0,s.jsx)(y.OT,{className:"panel-resize-handle",style:{height:6}}),(0,s.jsx)(y.s_,{defaultSize:50,children:(0,s.jsx)(w.Z,{size:"small",title:"Properties",style:{height:"100%"},children:(0,s.jsxs)("div",{className:"card-body",children:[this.state.properties?(0,s.jsx)(M.vY,{dataSource:this.state.properties,columns:me(this.state.properties),ref:this.propertiesRef,editable:this.props.editable?{onSave:function(r,m){return n.onPropertiesChange(r,m)}}:null,column:1,style:{marginTop:4}},this.state.selectedId[0]):(0,s.jsx)(G.Z,{image:G.Z.PRESENTED_IMAGE_SIMPLE}),this.state.selectedId[0]===-2?(0,s.jsxs)(z.Z,{direction:"vertical",size:"middle",style:{display:"flex"},children:[(0,s.jsx)(T.ZP,{onClick:function(){return(0,re.cT)("image/*").then(function(r){n.setState({imageUploadShow:!1}),n.setBackground((0,re.lZ)(r))}).catch(function(r){})},children:"Upload Background"}),(0,s.jsx)(T.ZP,{onClick:function(){return n.setBackground(e(25665))},children:"Reset Background"})]}):(0,s.jsx)("div",{})]})})})]})}),(0,s.jsx)(y.OT,{className:"panel-resize-handle",style:{width:6}}),(0,s.jsx)(y.s_,{defaultSize:75,order:2,onResize:function(r){return setTimeout(function(){return n.resetCanvasSize()},100)},children:(0,s.jsxs)("div",{className:"full",ref:this.canvasRef,children:[(0,s.jsx)("canvas",{className:"full",id:"ui"}),(0,s.jsx)("div",{id:"coordinateDisplay",style:{bottom:0,right:0,display:"none",padding:"1px 6px 1px 6px"}})]})})]})})}}]),J}(k.Component),De=Ce},12997:function(le,K,e){e.a(le,function(X,d){return Te(this,null,function*(){try{e.r(K);var ee=e(12444),R=e.n(ee),W=e(72004),F=e.n(W),te=e(25098),Z=e.n(te),q=e(31996),S=e.n(q),a=e(26037),I=e.n(a),se=e(9783),N=e.n(se),L=e(67294),o=e(9361),t=e(28459),p=e(62338),D=e(65848),H=e(87159),ce=e(4585),C=e(9520),k=e(54030),w=e(97318),G=e(18253),z=e(85893),T=X([C]);C=(T.then?(yield T)():T)[0];var v=o.Z.darkAlgorithm,y=o.Z.compactAlgorithm,M=function(A){S()(O,A);var U=I()(O);function O(){var x;R()(this,O);for(var l=arguments.length,u=new Array(l),h=0;h<l;h++)u[h]=arguments[h];return x=U.call.apply(U,[this].concat(u)),N()(Z()(x),"state",{simulate:!1,darkMode:x.isBrowserDarkMode()}),N()(Z()(x),"modal",null),N()(Z()(x),"renderRef",L.createRef()),N()(Z()(x),"menuRef",L.createRef()),x}return F()(O,[{key:"isBrowserDarkMode",value:function(){try{return window.matchMedia("(prefers-color-scheme: dark)").matches}catch(l){return!1}}},{key:"componentDidMount",value:function(){var l=this,u=0;window.addEventListener("drop",function(s){return s.preventDefault()},!1),window.addEventListener("dragover",function(s){return s.preventDefault()},!1),window.addEventListener("contextmenu",function(s){s.target.tagName.toLowerCase()!=="input"&&s.preventDefault()},!1);function h(s){!l.modal&&s<880&&s!==u&&(u=s,l.modal=w.oC.warning({title:"Display Aera too Small",content:"Cannot show all contents on this window. Please resize this window or rotate your phone.",footer:null})),l.modal&&s>=880&&(l.modal.destroy(),l.modal=null)}setTimeout(function(){return h(window.innerWidth)},500),window.addEventListener("resize",function(){h(window.innerWidth)},!1);var j=window.matchMedia("(prefers-color-scheme: dark)");j.addEventListener("change",function(s){l.setState({darkMode:s.matches})})}},{key:"setDarkMode",value:function(l){this.setState({darkMode:l})}},{key:"render",value:function(){var l=this;return(0,z.jsx)(t.ZP,{locale:G.Z,theme:{cssVar:{key:"rmui"},hashed:!1,algorithm:this.state.darkMode?[v,y]:y},children:(0,z.jsxs)(p.Z,{children:[(0,z.jsx)("div",{className:"rmui",children:(0,z.jsxs)("div",{className:"container background-color",style:{height:"100vh",paddingBottom:12,overflow:"hidden"},children:[(0,z.jsx)(C.Z,{save:function(){return l.renderRef.current.save()},onObjectEvent:function(h,j){return l.renderRef.current.onObjectEvent(h,j)},onHistoryEvent:function(h){return l.renderRef.current.onHistoryEvent(h)},reset:function(){return l.renderRef.current.reset()},setFrame:function(h,j){return l.renderRef.current.onFrameEvent(h,j)},upload:function(h){return l.renderRef.current.upload(h)},getData:function(){return l.renderRef.current.getData()},setEditable:function(h){return l.renderRef.current.setEditable(h)},setDarkMode:function(h){return l.setDarkMode(h)},ref:this.menuRef,darkMode:this.state.darkMode}),(0,z.jsx)(D.Z,{content:["RM Ui Designer","v1.1.6"],zIndex:0,style:{height:"100%"},gap:[30,30],children:(0,z.jsx)("div",{id:"content-in",style:{width:"100vw",height:"100%",zIndex:2,position:"relative"},children:(0,z.jsx)(H.Z,{style:{width:"100vw",height:"100%"},editable:!0,ref:this.renderRef,onFrameChange:function(h){var j;return(j=l.menuRef.current)===null||j===void 0?void 0:j.setFrames(h)},setCouldDo:function(h){var j;(j=l.menuRef.current)===null||j===void 0||j.setCouldDo(h)},setRobotId:function(h){var j;(j=l.menuRef.current)===null||j===void 0||j.setRobotId(h)}})})})]})}),(0,z.jsx)(k.Z,{}),(0,z.jsx)(ce.Z,{})]})})}}]),O}(L.Component);K.default=M,d()}catch(A){d(A)}})})},13799:function(le,K,e){e.d(K,{r:function(){return Z}});var X=e(67294),d=Object.defineProperty,ee=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,F=(S,a,I)=>a in S?d(S,a,{enumerable:!0,configurable:!0,writable:!0,value:I}):S[a]=I,te=(S,a)=>{for(var I in a||(a={}))R.call(a,I)&&F(S,I,a[I]);if(ee)for(var I of ee(a))W.call(a,I)&&F(S,I,a[I]);return S};const Z=S=>X.createElement("svg",te({className:"moon_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:200,height:200},S),X.createElement("path",{d:"M472 991.6c-157 0-304.4-77.2-394.3-206.6-6.9-9.9-7.6-22.9-1.8-33.6 5.8-10.7 17.1-17.8 29.2-16.7l7.7.4c2.4.2 4.8.3 7.2.3 229.4 0 416-186.6 416-416 0-85-25.7-167-74.3-236.9-6.9-9.9-7.6-22.9-1.8-33.6 5.8-10.7 17.2-17.6 29.2-16.7C748.7 41.6 952 252.1 952 511.6c0 264.7-215.3 480-480 480zM169.7 797.1c78.1 82.7 187.2 130.6 302.3 130.6 229.4 0 416-186.6 416-416 0-204-144.9-373-339.7-408.6 34 66.9 51.7 140.7 51.7 216.6 0 247.8-188.9 452.4-430.3 477.4z",fill:"#2c2c2c"}));var q="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTQ3MiA5OTEuNmMtMTU3IDAtMzA0LjQtNzcuMi0zOTQuMy0yMDYuNi02LjktOS45LTcuNi0yMi45LTEuOC0zMy42IDUuOC0xMC43IDE3LjEtMTcuOCAyOS4yLTE2LjdsNy43LjRjMi40LjIgNC44LjMgNy4yLjMgMjI5LjQgMCA0MTYtMTg2LjYgNDE2LTQxNiAwLTg1LTI1LjctMTY3LTc0LjMtMjM2LjktNi45LTkuOS03LjYtMjIuOS0xLjgtMzMuNiA1LjgtMTAuNyAxNy4yLTE3LjYgMjkuMi0xNi43Qzc0OC43IDQxLjYgOTUyIDI1Mi4xIDk1MiA1MTEuNmMwIDI2NC43LTIxNS4zIDQ4MC00ODAgNDgwek0xNjkuNyA3OTcuMWM3OC4xIDgyLjcgMTg3LjIgMTMwLjYgMzAyLjMgMTMwLjYgMjI5LjQgMCA0MTYtMTg2LjYgNDE2LTQxNiAwLTIwNC0xNDQuOS0zNzMtMzM5LjctNDA4LjYgMzQgNjYuOSA1MS43IDE0MC43IDUxLjcgMjE2LjYgMCAyNDcuOC0xODguOSA0NTIuNC00MzAuMyA0NzcuNHoiIGZpbGw9IiMyYzJjMmMiLz48L3N2Zz4="},82843:function(le,K,e){e.d(K,{r:function(){return Z}});var X=e(67294),d=Object.defineProperty,ee=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,F=(S,a,I)=>a in S?d(S,a,{enumerable:!0,configurable:!0,writable:!0,value:I}):S[a]=I,te=(S,a)=>{for(var I in a||(a={}))R.call(a,I)&&F(S,I,a[I]);if(ee)for(var I of ee(a))W.call(a,I)&&F(S,I,a[I]);return S};const Z=S=>X.createElement("svg",te({className:"sun_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:200,height:200},S),X.createElement("path",{d:"M522.88 874.667A21.333 21.333 0 0 1 544.213 896v85.333a21.333 21.333 0 0 1-21.333 21.334h-21.333a21.333 21.333 0 0 1-21.334-21.334V896a21.333 21.333 0 0 1 21.334-21.333h21.333zm268.416-107.52 60.352 60.352a21.333 21.333 0 0 1 0 30.165l-15.083 15.083a21.333 21.333 0 0 1-30.186 0l-60.331-60.352a21.333 21.333 0 0 1 0-30.166l15.083-15.082a21.333 21.333 0 0 1 30.165 0zm-527.957 0 15.082 15.082a21.333 21.333 0 0 1 0 30.166l-60.352 60.352a21.333 21.333 0 0 1-30.165 0l-15.083-15.083a21.333 21.333 0 0 1 0-30.165l60.331-60.352a21.333 21.333 0 0 1 30.187 0zM512 277.333c141.376 0 256 114.624 256 256s-114.624 256-256 256-256-114.624-256-256 114.624-256 256-256zm0 64a192 192 0 1 0 0 384 192 192 0 0 0 0-384zm448.213 160a21.333 21.333 0 0 1 21.334 21.334V544a21.333 21.333 0 0 1-21.334 21.333H874.88A21.333 21.333 0 0 1 853.547 544v-21.333a21.333 21.333 0 0 1 21.333-21.334h85.333zm-810.666 0a21.333 21.333 0 0 1 21.333 21.334V544a21.333 21.333 0 0 1-21.333 21.333H64.213A21.333 21.333 0 0 1 42.88 544v-21.333a21.333 21.333 0 0 1 21.333-21.334h85.334zm687.04-307.413 15.082 15.083a21.333 21.333 0 0 1 0 30.165l-60.352 60.352a21.333 21.333 0 0 1-30.165 0l-15.083-15.083a21.333 21.333 0 0 1 0-30.165L806.4 193.92a21.333 21.333 0 0 1 30.187 0zm-618.496 0 60.352 60.352a21.333 21.333 0 0 1 0 30.165L263.36 299.52a21.333 21.333 0 0 1-30.187 0l-60.352-60.373a21.333 21.333 0 0 1 0-30.166l15.083-15.082a21.333 21.333 0 0 1 30.165 0zM522.9 64a21.333 21.333 0 0 1 21.334 21.333v85.334A21.333 21.333 0 0 1 522.9 192h-21.333a21.333 21.333 0 0 1-21.333-21.333V85.333A21.333 21.333 0 0 1 501.568 64h21.333z",fill:"#ebebeb"}));var q="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTUyMi44OCA4NzQuNjY3QTIxLjMzMyAyMS4zMzMgMCAwIDEgNTQ0LjIxMyA4OTZ2ODUuMzMzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzMzIDIxLjMzNGgtMjEuMzMzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzM0LTIxLjMzNFY4OTZhMjEuMzMzIDIxLjMzMyAwIDAgMSAyMS4zMzQtMjEuMzMzaDIxLjMzM3ptMjY4LjQxNi0xMDcuNTIgNjAuMzUyIDYwLjM1MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDAgMzAuMTY1bC0xNS4wODMgMTUuMDgzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTg2IDBsLTYwLjMzMS02MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NmwxNS4wODMtMTUuMDgyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTY1IDB6bS01MjcuOTU3IDAgMTUuMDgyIDE1LjA4MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDAgMzAuMTY2bC02MC4zNTIgNjAuMzUyYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTY1IDBsLTE1LjA4My0xNS4wODNhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NWw2MC4zMzEtNjAuMzUyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTg3IDB6TTUxMiAyNzcuMzMzYzE0MS4zNzYgMCAyNTYgMTE0LjYyNCAyNTYgMjU2cy0xMTQuNjI0IDI1Ni0yNTYgMjU2LTI1Ni0xMTQuNjI0LTI1Ni0yNTYgMTE0LjYyNC0yNTYgMjU2LTI1NnptMCA2NGExOTIgMTkyIDAgMSAwIDAgMzg0IDE5MiAxOTIgMCAwIDAgMC0zODR6bTQ0OC4yMTMgMTYwYTIxLjMzMyAyMS4zMzMgMCAwIDEgMjEuMzM0IDIxLjMzNFY1NDRhMjEuMzMzIDIxLjMzMyAwIDAgMS0yMS4zMzQgMjEuMzMzSDg3NC44OEEyMS4zMzMgMjEuMzMzIDAgMCAxIDg1My41NDcgNTQ0di0yMS4zMzNhMjEuMzMzIDIxLjMzMyAwIDAgMSAyMS4zMzMtMjEuMzM0aDg1LjMzM3ptLTgxMC42NjYgMGEyMS4zMzMgMjEuMzMzIDAgMCAxIDIxLjMzMyAyMS4zMzRWNTQ0YTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzMzIDIxLjMzM0g2NC4yMTNBMjEuMzMzIDIxLjMzMyAwIDAgMSA0Mi44OCA1NDR2LTIxLjMzM2EyMS4zMzMgMjEuMzMzIDAgMCAxIDIxLjMzMy0yMS4zMzRoODUuMzM0em02ODcuMDQtMzA3LjQxMyAxNS4wODIgMTUuMDgzYTIxLjMzMyAyMS4zMzMgMCAwIDEgMCAzMC4xNjVsLTYwLjM1MiA2MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMS0zMC4xNjUgMGwtMTUuMDgzLTE1LjA4M2EyMS4zMzMgMjEuMzMzIDAgMCAxIDAtMzAuMTY1TDgwNi40IDE5My45MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDMwLjE4NyAwem0tNjE4LjQ5NiAwIDYwLjM1MiA2MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMSAwIDMwLjE2NUwyNjMuMzYgMjk5LjUyYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTg3IDBsLTYwLjM1Mi02MC4zNzNhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NmwxNS4wODMtMTUuMDgyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTY1IDB6TTUyMi45IDY0YTIxLjMzMyAyMS4zMzMgMCAwIDEgMjEuMzM0IDIxLjMzM3Y4NS4zMzRBMjEuMzMzIDIxLjMzMyAwIDAgMSA1MjIuOSAxOTJoLTIxLjMzM2EyMS4zMzMgMjEuMzMzIDAgMCAxLTIxLjMzMy0yMS4zMzNWODUuMzMzQTIxLjMzMyAyMS4zMzMgMCAwIDEgNTAxLjU2OCA2NGgyMS4zMzN6IiBmaWxsPSIjZWJlYmViIi8+PC9zdmc+"},99734:function(le,K,e){le.exports=e.p+"static/about.6af660a8.md"},8938:function(le,K,e){le.exports=e.p+"static/ui_interface.33202de4.c"},75112:function(le,K,e){le.exports=e.p+"static/ui_interface.6e21894b.h"},33562:function(le,K,e){le.exports=e.p+"static/ui_types.acde8fff.h"},25665:function(le,K,e){le.exports=e.p+"static/background.d741a18b.png"}}]);
