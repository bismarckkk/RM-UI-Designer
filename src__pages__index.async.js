"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[858],{69682:function(U,W,f){f.r(W),f.d(W,{default:function(){return na}});var fe=f(12444),C=f.n(fe),ve=f(72004),D=f.n(ve),me=f(25098),y=f.n(me),ge=f(31996),E=f.n(ge),Me=f(26037),N=f.n(Me),ye=f(9783),p=f.n(ye),x=f(67294),Q=f(9361),pe=f(28459),V=f(62338),je=f(97857),F=f.n(je),xe=f(15009),z=f.n(xe),ke=f(99289),R=f.n(ke),ze=f(19632),Ie=f.n(ze),Ae=f(71230),K=f(15746),X=f(31057),$=f(32983),_=f(42075),A=f(14726),q,be,P,we=function(){var c=V.Z.useApp();return q=c.message,P=c.modal,be=c.notification,null},Ce=f(63366),De=f(65170),ee=f(85576),Se=f(96074),Te=f(64082),Y=f(22347),B=document.createElement("a"),b={yellow:"rgb(255, 238, 70)",green:"rgb(168, 255, 45)",orange:"rgb(255, 163, 8)",purple:"rgb(240, 41, 246)",pink:"rgb(255, 100, 142)",cyan:"rgb(69, 255, 242)",white:"#fff",black:"#000",blue:"rgb(47, 168, 223)",red:"rgb(255, 69, 70)"};function Oe(c,e,o){var r={version:2,data:c,selected:o},a=JSON.stringify(r);G()?R()(z()().mark(function t(){var i;return z()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Y.WZ.save({filters:[{name:"rmui file",extensions:["rmui"]}]});case 2:if(i=s.sent,!(i!==null&&i.length>0)){s.next=6;break}return s.next=6,Y.fs.writeTextFile(i,a);case 6:case"end":return s.stop()}},t)}))():(B.href="data:,".concat(a),B.download=e,B.click())}function Ee(c){var e=null;return window.createObjcectURL!==void 0?e=window.createOjcectURL(c):window.URL!==void 0?e=window.URL.createObjectURL(c):window.webkitURL!==void 0&&(e=window.webkitURL.createObjectURL(c)),e}function G(){return window!==void 0&&window.__TAURI__!==void 0}var u=f(85893),Ne=De.Z.Dragger,Re=function(c){E()(o,c);var e=N()(o);function o(){var r;C()(this,o);for(var a=arguments.length,t=new Array(a),i=0;i<a;i++)t[i]=arguments[i];return r=e.call.apply(e,[this].concat(t)),p()(y()(r),"state",{show:!1,promise:null,title:"",accept:""}),r}return D()(o,[{key:"onCancel",value:function(){this.setState({show:!1}),this.state.promise.reject()}},{key:"onUpload",value:function(a){var t=this.state.promise;t.resolve(a),this.setState({show:!1})}},{key:"upload",value:function(a,t){var i=this;if(G()){var n=[t.slice(1)],s="".concat(n," file");return t==="image/*"&&(n=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],s="image"),new Promise(function(h,v){R()(z()().mark(function g(){var m,M,d,j,w;return z()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,Y.WZ.open({multiple:!1,directory:!1,filters:[{name:s,extensions:n}]});case 2:if(m=I.sent,!(m!==null&&m.length>0)){I.next=16;break}return M=m.replace(/\\/g,"/"),d=M.split("/").pop(),I.t0=Blob,I.next=9,Y.fs.readBinaryFile(m);case 9:I.t1=I.sent,I.t2=[I.t1],j=new I.t0(I.t2),w=new File([j],d),h(w),I.next=17;break;case 16:v();case 17:case"end":return I.stop()}},g)}))()})}else return new Promise(function(h,v){i.setState({show:!0,promise:{resolve:h,reject:v},title:a,accept:t})})}},{key:"render",value:function(){var a=this;return(0,u.jsx)("div",{children:(0,u.jsxs)(ee.Z,{title:this.state.title,open:this.state.show,onCancel:function(){return a.onCancel()},footer:null,destroyOnClose:!0,children:[(0,u.jsx)(Se.Z,{}),(0,u.jsxs)(Ne,{showUploadList:!1,beforeUpload:function(i){return a.onUpload(i)},accept:this.state.accept,children:[(0,u.jsx)("p",{className:"ant-upload-drag-icon",children:(0,u.jsx)(Te.Z,{})}),(0,u.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})]})})}}]),o}(x.Component),Le=Re,L=f(49527),Fe=f(31673),Ue=f(80882);function We(c){return c===-1?[]:c===-2?["window"]:["E-".concat(c)]}function te(c){return c[0]==="E"?c.slice(2):c==="window"?-2:-1}var Pe=[{key:"D1-group-layer",label:"layer"},{key:"D1-group-group",label:"group"}],Ye=function(c){E()(o,c);var e=N()(o);function o(){var r;C()(this,o);for(var a=arguments.length,t=new Array(a),i=0;i<a;i++)t[i]=arguments[i];return r=e.call.apply(e,[this].concat(t)),p()(y()(r),"state",{treeData:[],rightClickMenuOpen:!1,groupKey:"layer"}),r}return D()(o,[{key:"onElementMenuContainerClick",value:function(a){a.target.localName==="div"&&(this.setState({rightClickMenuOpen:!1}),this.props.onSelect(-1))}},{key:"onElementMenuClick",value:function(a){if(this.setState({rightClickMenuOpen:!1}),a.key==="D2-copy"){var t=F()({},this.props.data[this.props.selectedId]);t.id=-1,this.props.onObjectEvent("_update",t)}else a.key==="D2-delete"&&this.props.onObjectEvent("remove",{id:this.props.selectedId})}},{key:"onElementRightClick",value:function(a){this.props.onSelect(te(a.node.key))}},{key:"onSelect",value:function(a){a.length!==0&&this.props.onSelect(te(a[0]))}},{key:"onMenuOpenChange",value:function(a){if(a){var t=this;setTimeout(function(){t.props.selectedId!==-1?t.setState({rightClickMenuOpen:!0}):t.setState({rightClickMenuOpen:!1})},100)}else this.setState({rightClickMenuOpen:!1})}},{key:"elementsMenuOnClick",value:function(a){var t=this;this.setState({groupKey:a.key.slice(9)},function(){return t.updateTree()})}},{key:"updateTree",value:function(){for(var a=this.state.groupKey,t=[],i=Object.keys(this.props.data),n=0;n<i.length;n++){for(var s=this.props.data[i[n]],h=-1,v=0;v<t.length;v++)if(t[v].key==="".concat(a,"-").concat(s[a])){h=v;break}h===-1&&(t.push({title:"".concat(a," ").concat(s[a]),key:"".concat(a,"-").concat(s[a]),children:[],isLeaf:!1}),h=t.length-1),t[h].children.push({title:s.name,key:"E-".concat(i[n])})}return t=t.sort(function(g,m){return g.key.toString().localeCompare(m.key.toString())}),t.unshift({title:"UI Window",key:"window"}),t}},{key:"render",value:function(){var a=this;return(0,u.jsx)(X.Z,{size:"small",title:"Elements",style:{height:"100%"},extra:(0,u.jsx)(L.Z,{menu:{items:Pe,onClick:function(i){return a.elementsMenuOnClick(i)},selectable:!0,selectedKeys:["D1-group-".concat(this.state.groupKey)]},children:(0,u.jsxs)(_.Z,{style:{fontSize:11},children:["Group by",(0,u.jsx)(Ue.Z,{size:"small"})]})}),children:(0,u.jsx)("div",{className:"card-body",onMouseUp:function(i){return a.onElementMenuContainerClick(i)},children:(0,u.jsx)(L.Z,{menu:{items:[{key:"D2-copy",label:"Copy"},{key:"D2-delete",label:"Delete",danger:!0}],onClick:function(i){a.onElementMenuClick(i)}},trigger:["contextMenu"],open:this.state.rightClickMenuOpen,onOpenChange:function(i){a.onMenuOpenChange(i)},children:(0,u.jsx)(Fe.Z,{className:"full",treeData:this.updateTree(),onSelect:function(i){return a.onSelect(i)},selectedKeys:We(this.props.selectedId),onRightClick:function(i){return a.onElementRightClick(i)},defaultExpandParent:!0})})})})}}]),o}(x.Component),Ze=Ye,T=f(32777),Be=function(c){E()(o,c);var e=N()(o);function o(){return C()(this,o),e.apply(this,arguments)}return D()(o,[{key:"render",value:function(){return this.props.color==="Main"?(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{style:{border:"1px solid #aaa",height:16,width:16,borderRadius:"20%",display:"inline-flex"},children:[(0,u.jsx)("div",{style:{backgroundColor:"red",height:12,width:6,margin:"1px 0 1px 1px",borderTopLeftRadius:"20%",borderBottomLeftRadius:"20%",display:"inline-flex"}}),(0,u.jsx)("div",{style:{backgroundColor:"blue",height:12,width:6,margin:"1px 1px 1px 0",borderTopRightRadius:"20%",borderBottomRightRadius:"20%",display:"inline-flex"}})]}),"\xA0 Main"]}):(0,u.jsx)("div",{children:(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{style:{border:"1px solid #aaa",height:16,width:16,borderRadius:"20%",display:"inline-flex"},children:(0,u.jsx)("div",{style:{backgroundColor:b[this.props.color.toLowerCase()],height:12,width:12,margin:1,borderRadius:"20%",display:"inline-flex"}})}),"\xA0 ",this.props.color]})})}}]),o}(x.Component),O=Be,ae={id:{title:"Id",key:"id",dataIndex:"id",valueType:"digit",editable:!1},name:{title:"Name",key:"name",dataIndex:"name"},group:{title:"Group",key:"group",dataIndex:"group"},kind:{title:"Kind",key:"kind",dataIndex:"kind",editable:!1},lineWidth:{title:"Line Width",key:"lineWidth",dataIndex:"lineWidth",valueType:"digit"},layer:{title:"Layer",key:"layer",dataIndex:"layer",valueType:"digit"},x:{title:"X",key:"x",dataIndex:"x",valueType:"digit"},y:{title:"Y",key:"y",dataIndex:"y",valueType:"digit"},x2:{title:"X2",key:"x2",dataIndex:"x2",valueType:"digit"},y2:{title:"Y2",key:"y2",dataIndex:"y2",valueType:"digit"},width:{title:"Width",key:"width",dataIndex:"width",valueType:"digit"},height:{title:"Height",key:"height",dataIndex:"height",valueType:"digit"},rx:{title:"Rx",key:"rx",dataIndex:"rx",valueType:"digit"},ry:{title:"Ry",key:"ry",dataIndex:"ry",valueType:"digit"},r:{title:"R",key:"r",dataIndex:"r",valueType:"digit"},startAngle:{title:"Start Angle",key:"startAngle",dataIndex:"startAngle",valueType:"digit"},endAngle:{title:"End Angle",key:"endAngle",dataIndex:"endAngle",valueType:"digit"},fontSize:{title:"Font Size",key:"fontSize",dataIndex:"fontSize",valueType:"digit"},decimalPlaces:{title:"Decimal Places",key:"decimalPlaces",dataIndex:"decimalPlaces",valueType:"digit"},number:{title:"Number",key:"number",dataIndex:"number",valueType:"digit"},text:{title:"Text",key:"text",dataIndex:"text"},color:{title:"Color",key:"color",dataIndex:"color",valueType:"select",valueEnum:{main:(0,u.jsx)(O,{color:"Main"}),yellow:(0,u.jsx)(O,{color:"Yellow"}),green:(0,u.jsx)(O,{color:"Green"}),orange:(0,u.jsx)(O,{color:"Orange"}),purple:(0,u.jsx)(O,{color:"Purple"}),pink:(0,u.jsx)(O,{color:"Pink"}),cyan:(0,u.jsx)(O,{color:"Cyan"}),black:(0,u.jsx)(O,{color:"Black"}),white:(0,u.jsx)(O,{color:"White"})}},team:{title:"Team",key:"team",dataIndex:"team",valueType:"select",valueEnum:{red:(0,u.jsx)(O,{color:"Red"}),blue:(0,u.jsx)(O,{color:"Blue"})}},backgroundImage:{title:"Background Image",key:"backgroundImage",dataIndex:"backgroundImage",valueType:"switch"}};function Ge(c){for(var e=Object.keys(c),o=[],r=0;r<e.length;r++)ae[e[r]]&&o.push(ae[e[r]]);return o}var He=T.fabric.util.createClass(T.fabric.Rect,{type:"UiRect",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(e){e||(e={}),e.color||(e.color="main"),this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.groupName,this.ratio=e.ratio,this._color=e.color,this.team=e.team,e.lockRotation=!0,e.lockScalingFlip=!0,e.hasRotatingPoint=!1,e.width||(e.width=50/this.ratio),e.height||(e.height=50/this.ratio),e.left||(e.left=50/this.ratio),e.top||(e.top=50/this.ratio),e.strokeWidth||(e.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?e.stroke=b[this._color]:(e.stroke=b[e.team],this._color="main"),e.fill=null,this.callSuper("initialize",e),this.moveTo(e.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){this.set("width",Math.round(this.width*this.scaleX*this.ratio)/this.ratio),this.set("height",Math.round(this.height*this.scaleY*this.ratio)/this.ratio),this.set("left",Math.round(this.left*this.ratio)/this.ratio),this.set("top",Math.round(this.top*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,width:this.width*this.ratio,height:this.height*this.ratio,x:this.left*this.ratio,y:this.top*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(e){this._color=e.color,this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.group,this.set("width",e.width/this.ratio),this.set("height",e.height/this.ratio),this.set("left",e.x/this.ratio),this.set("top",e.y/this.ratio),this.set("strokeWidth",e.lineWidth/this.ratio),this._color==="main"?this.set("stroke",b[this.team]):this.set("stroke",b[this._color]),this.moveTo(e.layer)},setRatio:function(e){this.set("width",this.width*this.ratio/e),this.set("height",this.height*this.ratio/e),this.set("left",this.left*this.ratio/e),this.set("top",this.top*this.ratio/e),this.set("strokeWidth",this.strokeWidth*this.ratio/e),this.ratio=e},setTeam:function(e){this.team=e,this._color==="main"&&this.set("stroke",b[this.team])}}),Je=T.fabric.util.createClass(T.fabric.Line,{type:"UiLine",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(e){e||(e={}),e.color||(e.color="main"),this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.groupName,this.ratio=e.ratio,this._color=e.color,this.team=e.team,e.lockRotation=!0,e.lockScalingFlip=!0,e.hasRotatingPoint=!1,e.x1||(e.x1=50/this.ratio),e.y1||(e.y1=50/this.ratio),e.x2||(e.x2=100/this.ratio),e.y2||(e.y2=100/this.ratio),e.strokeWidth||(e.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?e.stroke=b[this._color]:(e.stroke=b[e.team],this._color="main"),e.fill=null,this.callSuper("initialize",[e.x1,e.y1,e.x2,e.y2],e),this.moveTo(e.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){var e=this.left,o=this.top,r=Math.round((this.x2-this.x1)*this.scaleX),a=Math.round((this.y2-this.y1)*this.scaleY);this.set("x1",Math.round(e*this.ratio)/this.ratio),this.set("y1",Math.round(o*this.ratio)/this.ratio),this.set("x2",Math.round((e+r)*this.ratio)/this.ratio),this.set("y2",Math.round((o+a)*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,x:this.x1*this.ratio,y:this.y1*this.ratio,x2:this.x2*this.ratio,y2:this.y2*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(e){this._color=e.color,this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.group,this.set("x2",e.x2/this.ratio),this.set("y2",e.y2/this.ratio),this.set("x1",e.x/this.ratio),this.set("y1",e.y/this.ratio),this.set("strokeWidth",e.lineWidth/this.ratio),this._color==="main"?this.set("stroke",b[this.team]):this.set("stroke",b[this._color]),this.moveTo(e.layer)},setRatio:function(e){this.set("x1",this.x1*this.ratio/e),this.set("y1",this.y1*this.ratio/e),this.set("x2",this.x2*this.ratio/e),this.set("y2",this.y2*this.ratio/e),this.set("strokeWidth",this.strokeWidth*this.ratio/e),this.ratio=e},setTeam:function(e){this.team=e,this._color==="main"&&this.set("stroke",b[this.team])}}),H=T.fabric.util.createClass(T.fabric.Ellipse,{type:"UiEllipse",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(e){e||(e={}),e.color||(e.color="main"),this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.groupName,this.ratio=e.ratio,this._color=e.color,this.team=e.team,e.lockRotation=!0,e.lockScalingFlip=!0,e.hasRotatingPoint=!1,e.rx||(e.rx=50/this.ratio),e.ry||(e.ry=50/this.ratio),e.left||(e.left=50/this.ratio),e.top||(e.top=50/this.ratio),e.strokeWidth||(e.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?e.stroke=b[this._color]:(e.stroke=b[e.team],this._color="main"),e.fill=null,this.callSuper("initialize",e),this.moveTo(e.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){this.set("rx",Math.round(this.rx*this.scaleX*this.ratio)/this.ratio),this.set("ry",Math.round(this.ry*this.scaleY*this.ratio)/this.ratio),this.set("left",Math.round(this.left*this.ratio)/this.ratio),this.set("top",Math.round(this.top*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,rx:this.rx*this.ratio,ry:this.ry*this.ratio,x:(this.left+this.rx)*this.ratio,y:(this.top+this.ry)*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(e){this._color=e.color,this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.group,this.set("rx",e.rx/this.ratio),this.set("ry",e.ry/this.ratio),this.set("left",(e.x-e.rx)/this.ratio),this.set("top",(e.y-e.ry)/this.ratio),this.set("strokeWidth",e.lineWidth/this.ratio),this._color==="main"?this.set("stroke",b[this.team]):this.set("stroke",b[this._color]),this.moveTo(e.layer)},setRatio:function(e){this.set("rx",this.rx*this.ratio/e),this.set("ry",this.ry*this.ratio/e),this.set("left",this.left*this.ratio/e),this.set("top",this.top*this.ratio/e),this.set("strokeWidth",this.strokeWidth*this.ratio/e),this.ratio=e},setTeam:function(e){this.team=e,this._color==="main"&&this.set("stroke",b[this.team])}}),Qe=T.fabric.util.createClass(H,{type:"UiRound",r:50,initialize:function(e){e||(e={}),e.r||(e.r=50/this.ratio),e.rx=e.r,e.ry=e.r,this.callSuper("initialize",e),this.setControlVisible("ml",!1),this.setControlVisible("mb",!1),this.setControlVisible("mr",!1),this.setControlVisible("mt",!1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,r:this.rx*this.ratio,x:(this.left+this.rx)*this.ratio,y:(this.top+this.ry)*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(e){e.rx=e.r,e.ry=e.r,this.callSuper("fromObject",e)}}),Ve=T.fabric.util.createClass(H,{type:"UiArc",startAngle:0,endAngle:90,initialize:function(e){e||(e={}),e.startAngle||(e.startAngle=0),e.endAngle||(e.endAngle=90),this.callSuper("initialize",e),this.startAngle=e.startAngle,this.endAngle=e.endAngle,this.set("dirty",!0)},toObject:function(){return T.fabric.util.object.extend(this.callSuper("toObject"),{startAngle:this.startAngle,endAngle:this.endAngle})},_render:function(e){var o=(this.startAngle-90)*(Math.PI/180),r=(this.endAngle-90)*(Math.PI/180);e.beginPath(),e.ellipse(0,0,this.rx,this.ry,0,o,r,!1),e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke()},fromObject:function(e){this.set("startAngle",e.startAngle),this.set("endAngle",e.endAngle),this.set("ry",1),this.callSuper("fromObject",e)}}),ie={Rect:He,Line:Je,Round:Qe,Ellipse:H,Arc:Ve};function Ke(c){var e={id:c.id,name:c.name,layer:c.layer,groupName:c.group,ratio:c.ratio,team:c.team};return new ie[c.type.slice(2)](e)}function Xe(){for(var c=[],e=0,o=Object.keys(ie);e<o.length;e++){var r=o[e];c.push({key:"Insert-".concat(r),label:r})}return c}var $e=f(64599),S=f.n($e),_e=f(85265),l=`
`,re={UiArc:"arc",UiRound:"round",UiRect:"rect",UiLine:"line",UiEllipse:"ellipse",UiText:"string",UiInt:"number",UiFloat:"number"},qe={UiLine:0,UiRect:1,UiRound:2,UiEllipse:3,UiArc:4,UiFloat:5,UiInt:6,UiText:7},et={lineWidth:"width",layer:"layer",x:"start_x",y:"start_y",x2:"end_x",y2:"end_y",rx:"rx",ry:"ry",startAngle:"start_angle",endAngle:"end_angle",number:"number",color:"color"},tt={main:0,yellow:1,green:2,orange:3,purple:4,pink:5,cyan:6,black:7,white:8};function at(c,e,o){for(var r="",a=0;a<o;a++)r=r+`
#include "ui_`.concat(c,"_").concat(e,"_").concat(a,'.h"');for(var t=`
#define ui_init_`.concat(c,"_").concat(e,`() \\
`),i=`
#define ui_update_`.concat(c,"_").concat(e,`() \\
`),n=`
#define ui_remove_`.concat(c,"_").concat(e,`() \\
`),s=0;s<o;s++)t+="_ui_init_".concat(c,"_").concat(e,"_").concat(s,`(); \\
`),i+="_ui_update_".concat(c,"_").concat(e,"_").concat(s,`(); \\
`),n+="_ui_remove_".concat(c,"_").concat(e,"_").concat(s,`(); \\
`);return r+="".concat(l).concat(t.slice(0,-4)).concat(l).concat(i.slice(0,-4)).concat(l).concat(n.slice(0,-4),`
    `),"".concat(r,`
`)}function it(c,e){var o="",r=S()(e),a;try{for(r.s();!(a=r.n()).done;){var t=a.value;o+=at(c,t.name,t.splits.length)}}catch(i){r.e(i)}finally{r.f()}return o}function rt(c){var e="//".concat(l,"// Created by RM UI Designer").concat(l,"//").concat(l).concat(l,"#ifndef UI_H").concat(l,"#define UI_H").concat(l).concat(l,'#include "ui_interface.h"').concat(l),o=S()(c),r;try{for(o.s();!(r=o.n()).done;){var a=r.value;e+=it(a.name,a.groups)}}catch(t){o.e(t)}finally{o.f()}return"".concat(e,`
#endif //UI_H
`)}function nt(c,e,o,r){var a="//".concat(l,"// Created by RM UI Designer").concat(l,"//").concat(l).concat(l,"#ifndef UI_").concat(c,"_").concat(e,"_").concat(o,"_H").concat(l,"#define UI_").concat(c,"_").concat(e,"_").concat(o,"_H").concat(l).concat(l,'#include "ui_interface.h"').concat(l).concat(l),t=S()(r),i;try{for(t.s();!(i=t.n()).done;){var n=i.value;a+="extern ui_interface_".concat(re[n.type],"_t *ui_").concat(c,"_").concat(e,"_").concat(n.name,`;
`)}}catch(s){t.e(s)}finally{t.f()}return a+="".concat(l,"void _ui_init_").concat(c,"_").concat(e,"_").concat(o,"();").concat(l,"void _ui_update_").concat(c,"_").concat(e,"_").concat(o,"();").concat(l,"void _ui_remove_").concat(c,"_").concat(e,"_").concat(o,"();").concat(l).concat(l,"#endif //UI_").concat(c,"_").concat(e,"_").concat(o,"_H").concat(l),a}function st(c,e,o){var r=F()({},o),a=qe[r.type],t=r.name;r.type==="UiFloat"&&(r.number=Math.round(r.number*1e3)),r.type==="UiRect"&&(r.x2=r.x+r.width,r.y2=r.y+r.height,delete r.width,delete r.height),r.color=tt[r.color],delete r.type,delete r.id,delete r.name,delete r.group;var i="ui_".concat(c,"_").concat(e,"_").concat(t),n="    ".concat(i,"->figure_tpye = ").concat(a,`;
`);for(var s in r){var h=r[s];typeof h=="number"&&(h=Math.round(h)),n+="    ".concat(i,"->").concat(et[s]," = ").concat(h,`;
`)}return"".concat(n,`
`)}function ct(c,e,o,r,a,t,i,n){for(var s="".concat(c,"_").concat(o,"_").concat(a),h="//".concat(l,"// Created by RM UI Designer").concat(l,"//").concat(l).concat(l,'#include "ui_').concat(s,'.h"').concat(l).concat(l,"#define FRAME_ID ").concat(e).concat(l,"#define GROUP_ID ").concat(r).concat(l,"#define START_ID ").concat(t).concat(l,"#define OBJ_NUM ").concat(i.length).concat(l,"#define FRAME_OBJ_NUM ").concat(n).concat(l).concat(l,"CAT(ui_, CAT(FRAME_OBJ_NUM, _frame_t)) ui_").concat(s,";").concat(l),v=0;v<i.length;v++){var g=re[i[v].type],m=i[v].name;h+="ui_interface_".concat(g,"_t *ui_").concat(c,"_").concat(o,"_").concat(m," = ")+"(ui_interface_".concat(g,"_t *)&(ui_").concat(s,".data[").concat(v,`]);
`)}h+="".concat(l,"void _ui_init_").concat(s,"() {").concat(l,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(l,"        ui_").concat(s,".data[i].figure_name[0] = FRAME_ID;").concat(l,"        ui_").concat(s,".data[i].figure_name[1] = GROUP_ID;").concat(l,"        ui_").concat(s,".data[i].figure_name[2] = i + START_ID;").concat(l,"        ui_").concat(s,".data[i].operate_tpyel = 1;").concat(l,"    }").concat(l,"    for (int i = OBJ_NUM; i < FRAME_OBJ_NUM; i++) {").concat(l,"        ui_").concat(s,".data[i].operate_tpyel = 0;").concat(l,"    }").concat(l).concat(l);var M=S()(i),d;try{for(M.s();!(d=M.n()).done;){var j=d.value;h+=st(c,o,j)}}catch(w){M.e(w)}finally{M.f()}return h+="".concat(l,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(s,");").concat(l,"    SEND_MESSAGE((uint8_t *) &ui_").concat(s,", sizeof(ui_").concat(s,"));").concat(l,"}").concat(l).concat(l,"void _ui_update_").concat(s,"() {").concat(l,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(l,"        ui_").concat(s,".data[i].operate_tpyel = 2;").concat(l,"    }").concat(l).concat(l,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(s,");").concat(l,"    SEND_MESSAGE((uint8_t *) &ui_").concat(s,", sizeof(ui_").concat(s,"));").concat(l,"}").concat(l).concat(l,"void _ui_remove_").concat(s,"() {").concat(l,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(l,"        ui_").concat(s,".data[i].operate_tpyel = 3;").concat(l,"    }").concat(l).concat(l,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(s,");").concat(l,"    SEND_MESSAGE((uint8_t *) &ui_").concat(s,", sizeof(ui_").concat(s,"));").concat(l,"}").concat(l),h}function ot(c,e,o,r,a,t,i){var n="".concat(c,"_").concat(o,"_").concat(a),s=i[0].name;return"//".concat(l,"// Created by RM UI Designer").concat(l,"//").concat(l).concat(l,'#include "ui_').concat(n,'.h"').concat(l).concat(l,"#define FRAME_ID ").concat(e).concat(l,"#define GROUP_ID ").concat(r).concat(l,"#define START_ID ").concat(t).concat(l,"#define OBJ_NUM ").concat(i.length).concat(l).concat(l,"CAT(ui_, CAT(FRAME_OBJ_NUM, _frame_t)) ui_").concat(n,";").concat(l).concat(l,"char* ui_").concat(c,"_").concat(o,"_").concat(s," = ui_").concat(n,".string;").concat(l).concat(l,"void _ui_init_").concat(n,"() {").concat(l,"    ui_").concat(n,".option.figure_name[0] = FRAME_ID;").concat(l,"    ui_").concat(n,".option.figure_name[1] = GROUP_ID;").concat(l,"    ui_").concat(n,".option.figure_name[2] = START_ID;").concat(l,"    ui_").concat(n,".option.operate_tpyel = 1;").concat(l).concat(l,"    strcpy(ui_").concat(c,"_").concat(o,"_").concat(s,', "Hello, World!");').concat(l).concat(l,"    ui_proc_string_frame(&ui_").concat(n,");").concat(l,"    SEND_MESSAGE((uint8_t *) &ui_").concat(n,", sizeof(ui_").concat(n,"));").concat(l,"}").concat(l).concat(l,"void _ui_update_").concat(n,"() {").concat(l,"    ui_").concat(n,".option.operate_tpyel = 2;").concat(l).concat(l,"    ui_proc_string_frame(&ui_").concat(n,");").concat(l,"    SEND_MESSAGE((uint8_t *) &ui_").concat(n,", sizeof(ui_").concat(n,"));").concat(l,"}").concat(l).concat(l,"void _ui_remove_").concat(n,"() {").concat(l,"    ui_").concat(n,".option.operate_tpyel = 2;").concat(l).concat(l,"    ui_proc_string_frame(&ui_").concat(n,");").concat(l,"    SEND_MESSAGE((uint8_t *) &ui_").concat(n,", sizeof(ui_").concat(n,"));").concat(l,"}")}var lt=function(){function c(e,o,r,a,t,i,n){var s=this;if(C()(this,c),this.frame_name=e,this.frame_id=o,this.group_name=r,this.group_id=a,this.split_id=t,this.start_id=i,this.objs=n,n[0].type==="UiText")this.toSplitC=function(){return ot(s.frame_name,s.frame_id,s.group_name,s.group_id,s.split_id,s.start_id,s.objs)};else{var h=7;n.length===1?h=1:n.length<=2?h=2:n.length<=5&&(h=5),this.toSplitC=function(){return ct(s.frame_name,s.frame_id,s.group_name,s.group_id,s.split_id,s.start_id,s.objs,h)}}this.toSplitH=function(){return nt(s.frame_name,s.group_name,s.split_id,s.objs)}}return D()(c,[{key:"check",value:function(){return[]}}]),c}(),ne=lt,ut=function(){function c(e,o,r,a,t){C()(this,c),this.frame_name=e,this.frame_id=o,this.group_name=r,this.group_id=a,this.splits=[];var i=0,n=S()(t),s;try{for(n.s();!(s=n.n()).done;){var h=s.value;h.type==="UiText"&&(this.splits.push(new ne(this.frame_name,this.frame_id,this.group_name,this.group_id,this.splits.length,i,h)),i+=1)}}catch(M){n.e(M)}finally{n.f()}for(var v=t.filter(function(M){return M.type!=="UiText"}),g=Math.ceil(v.length/7),m=0;m<g;m++)this.splits.push(new ne(this.frame_name,this.frame_id,this.group_name,this.group_id,this.splits.length,i,v.slice(m*7,(m+1)*7))),i+=7}return D()(c,[{key:"check",value:function(){var o=[],r=S()(this.splits),a;try{for(r.s();!(a=r.n()).done;){var t=a.value;o=o.concat(t.check())}}catch(i){r.e(i)}finally{r.f()}return o}}]),c}(),ht=ut,dt=function(){function c(e,o,r){C()(this,c),this.name=e,this.id=o,this.groups=[];var a={};for(var t in r){var i=r[t];i.group in a?a[i.group].push(i):a[i.group]=[i]}for(var n in a)this.groups.push(new ht(this.name,this.id,n,this.groups.length,a[n]))}return D()(c,[{key:"check",value:function(){var o=[],r=S()(this.groups),a;try{for(r.s();!(a=r.n()).done;){var t=a.value;o=o.concat(t.check())}}catch(i){r.e(i)}finally{r.f()}return o}}]),c}(),ft=dt,vt=function(){function c(e){C()(this,c),this.frames=[];for(var o in e)this.frames.push(new ft(o,this.frames.length,e[o]))}return D()(c,[{key:"toUiH",value:function(){return rt(this.frames)}}]),c}(),mt=vt,gt=function(c){E()(o,c);var e=N()(o);function o(){var r;C()(this,o);for(var a=arguments.length,t=new Array(a),i=0;i<a;i++)t[i]=arguments[i];return r=e.call.apply(e,[this].concat(t)),p()(y()(r),"state",{show:!1}),p()(y()(r),"data",{}),r}return D()(o,[{key:"gen",value:function(a){this.helper=new mt(a),this.data=a,console.log("ui.h"),console.log(this.helper.toUiH());var t=S()(this.helper.frames),i;try{for(t.s();!(i=t.n()).done;){var n=i.value,s=S()(n.groups),h;try{for(s.s();!(h=s.n()).done;){var v=h.value,g=S()(v.splits),m;try{for(g.s();!(m=g.n()).done;){var M=m.value;console.log("ui_".concat(n.name,"_").concat(v.group_name,"_").concat(M.split_id,".h")),console.log(M.toSplitH()),console.log("ui_".concat(n.name,"_").concat(v.group_name,"_").concat(M.split_id,".c")),console.log(M.toSplitC())}}catch(d){g.e(d)}finally{g.f()}}}catch(d){s.e(d)}finally{s.f()}}}catch(d){t.e(d)}finally{t.f()}this.setState({show:!0})}},{key:"onClose",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var a=this;return(0,u.jsx)("div",{children:(0,u.jsxs)(_e.Z,{title:"C Code Generator",placement:"right",onClose:function(){return a.onClose()},open:this.state.show,size:"large",children:[(0,u.jsx)("h1",{children:"Not yet completed"}),(0,u.jsx)("p",{children:JSON.stringify(this.data)})]})})}}]),o}(x.Component),Mt=gt;function se(c,e,o,r){return J.apply(this,arguments)}function J(){return J=R()(z()().mark(function c(e,o,r,a){var t,i,n,s,h,v,g,m,M,d,j;return z()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(t=JSON.parse(e),t){k.next=3;break}return k.abrupt("return");case 3:if(i=1,t.version&&(i=t.version),i!==1){k.next=11;break}return k.next=8,r("default");case 8:for(n=0,s=Object.keys(t);n<s.length;n++)h=s[n],o("_update",t[h]);k.next=23;break;case 11:if(i!==2){k.next=23;break}v=0,g=Object.keys(t.data);case 13:if(!(v<g.length)){k.next=21;break}return m=g[v],k.next=17,r(m);case 17:for(M=0,d=Object.keys(t.data[m]);M<d.length;M++)j=d[M],o("_update",t.data[m][j]);case 18:v++,k.next=13;break;case 21:return k.next=23,r(t.selected);case 23:a();case 24:case"end":return k.stop()}},c)})),J.apply(this,arguments)}var yt=function(c){E()(o,c);var e=N()(o);function o(){var r;C()(this,o);for(var a=arguments.length,t=new Array(a),i=0;i<a;i++)t[i]=arguments[i];return r=e.call.apply(e,[this].concat(t)),p()(y()(r),"objects",{default:{}}),p()(y()(r),"data",{}),p()(y()(r),"state",{properties:null,selectedId:-1,frame:"default",uiWindow:{height:1080,width:1920,ratio:1,team:"red",backgroundImage:!0},infoModalShow:!1,data:{}}),p()(y()(r),"canvas",null),p()(y()(r),"canvasRef",(0,x.createRef)()),p()(y()(r),"uploadRef",(0,x.createRef)()),p()(y()(r),"generatorRef",(0,x.createRef)()),p()(y()(r),"propertiesRef",(0,x.createRef)()),p()(y()(r),"background",null),r}return D()(o,[{key:"getNewDataId",value:function(){return Object.keys(this.state.data).length===0?0:Math.max.apply(Math,Ie()(Object.keys(this.state.data)))+1}},{key:"save",value:function(){Oe(this.data,"ui.rmui",this.state.frame)}},{key:"generate",value:function(){this.generatorRef.current.gen(this.data)}},{key:"select",value:function(a){typeof a=="undefined"||a===-1?(this.setState({properties:null,selectedId:-1}),this.canvas.discardActiveObject(),this.canvas.renderAll()):a===-2?(this.setState({properties:this.state.uiWindow,selectedId:-2}),this.canvas.discardActiveObject(),this.canvas.renderAll()):(this.setState({properties:this.state.data[a],selectedId:a}),this.canvas.setActiveObject(this.objects[this.state.frame][a]),this.canvas.renderAll())}},{key:"reset",value:function(){var r=R()(z()().mark(function t(){return z()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.canvas.clear(),this.canvas.backgroundColor="#fff",this.setBackground(f(25665)),Object.keys(this.objects).includes("default")){n.next=6;break}return n.next=6,this.onFrameEvent("add","default");case 6:return this.objects.default={},n.next=9,this.onFrameEvent("change","default");case 9:this.objects={default:{}},this.props.onFrameChange({frames:["default"],selected:"default"}),this.select(-1),this.resetCanvasSize(),this.objectsToData(),localStorage.setItem("data",JSON.stringify({version:2,data:{default:{}},selected:"default"}));case 15:case"end":return n.stop()}},t,this)}));function a(){return r.apply(this,arguments)}return a}()},{key:"resetCanvasSize",value:function(){var a,t=this.canvasRef.current.clientWidth-14,i=this.canvasRef.current.clientHeight,n=F()({},this.state.uiWindow);t/i<n.width/n.height?(i=t*n.height/n.width,n.ratio=n.width/t):(t=i*n.width/n.height,n.ratio=n.height/i),this.setState({uiWindow:n}),this.canvas.setHeight(i),this.canvas.setWidth(t),this.canvas.viewportTransform[5]=i,this.canvas.viewportTransform[3]=-1;var s=this.canvasRef.current.clientWidth,h=this.canvasRef.current.clientHeight,v=s-t,g=h-i,m=document.getElementById("coordinateDisplay");m.style.right="".concat(v,"px"),m.style.bottom="".concat(g,"px");for(var M=0,d=Object.keys(this.objects[this.state.frame]);M<d.length;M++){var j=d[M];this.objects[this.state.frame][j].setRatio(n.ratio)}(a=this.background)===null||a===void 0||a.set({scaleX:1/n.ratio,scaleY:1/n.ratio}),this.canvas.renderAll(),this.objectsToData(),this.setState({infoModalShow:!1})}},{key:"onReSize",value:function(){var a=this;this.state.infoModalShow||(this.canvas.setHeight(10),this.canvas.setWidth(10),this.canvas.renderAll(),this.setState({infoModalShow:!0},function(){P.info({title:"Reset UI Window Size",content:"Must reset UI window size after resize browser window.",onOk:function(){return a.resetCanvasSize()},okText:"Reset",zIndex:10})}))}},{key:"onPropertiesChange",value:function(a,t){var i=this;if(this.state.selectedId===-2){if(t.team!==this.state.uiWindow.team){for(var n=0,s=Object.keys(this.objects[this.state.frame]);n<s.length;n++){var h=s[n];this.objects[this.state.frame][h].setTeam(t.team)}this.canvas.renderAll(),this.objectsToData()}if(this.setState({uiWindow:t,properties:t},function(){i.resetCanvasSize()}),t.backgroundImage!==this.state.uiWindow.backgroundImage)if(t.backgroundImage){var v,g=this.state.uiWindow.ratio;(v=this.background)===null||v===void 0||v.set({scaleX:1/g,scaleY:1/g}),this.canvas.setBackgroundImage(this.background),this.canvas.renderAll()}else this.canvas.setBackgroundImage(null),this.canvas.renderAll();(t.width!==this.state.uiWindow.width||t.height!==this.state.uiWindow.height)&&P.warning({title:"Warning",content:"Modify UI window width and height may cause unknown error."})}else this.state.selectedId!==-1&&(this.objects[this.state.frame][this.state.selectedId].fromObject(t),this.canvas.renderAll(),this.objectsToData())}},{key:"setBackground",value:function(a){var t=this;T.fabric.Image.fromURL(a,function(i,n){var s;t.background=i;var h=t.state.uiWindow.ratio;(s=t.background)===null||s===void 0||s.set({scaleX:1/h,scaleY:-1/h}),t.state.uiWindow.backgroundImage&&(t.canvas.setBackgroundImage(t.background),t.canvas.renderAll())})}},{key:"componentDidMount",value:function(){var a=this,t=this;this.canvas=new T.fabric.Canvas("ui"),this.setBackground(f(25665)),this.canvas.backgroundColor="#fff",window.addEventListener("resize",function(){a.onReSize()},!1),window.addEventListener("copy",function(i){var n=null;i.target.localName!=="input"&&t.state.selectedId>=0&&(i.preventDefault(),n=JSON.stringify(t.state.data[t.state.selectedId]),i.clipboardData.setData("text",n))}),window.addEventListener("paste",function(i){for(var n=!1,s=i.clipboardData.items,h=0;h<s.length;h++)if(s[h].type.indexOf("image")===0){i.preventDefault(),n=!0;var v=s[h].getAsFile(),g=new FileReader;g.onload=function(d){t.setBackground(d.target.result)},g.readAsDataURL(v)}if(!n&&i.target.localName!=="input")try{i.preventDefault();var m=i.clipboardData.getData("text"),M=JSON.parse(m);M.id=t.getNewDataId(),t.onObjectEvent("_update",M),t.select(M.id)}catch(d){}}),window.addEventListener("keyup",function(i){i.key==="Delete"&&t.state.selectedId!==-1&&t.onObjectEvent("remove",{id:a.state.selectedId})}),this.canvas.on({"mouse:up":function(){for(var n=0,s=Object.keys(t.objects[t.state.frame]);n<s.length;n++){var h=s[n];t.objects[t.state.frame][h].resizeScale()}t.canvas.renderAll(),t.objectsToData();var v=t.canvas.getActiveObject();setTimeout(function(){v?t.select(v.id):t.select(-1)},100)},"mouse:move":function(n){var s=a.canvas.getPointer(n.e),h=a.state.uiWindow.ratio,v=Math.round(s.x*h),g=Math.round(s.y*h),m=document.getElementById("coordinateDisplay");m.style.display="block",m.textContent="x: ".concat(v,", y: ").concat(g)},"mouse:out":function(){var n=document.getElementById("coordinateDisplay");n.style.display="none"}}),this.canvas.selection=!1,se(localStorage.getItem("data"),function(i,n){return a.onObjectEvent(i,n)},function(i){return t.onFrameEvent("change",i)},function(){return a.canvas.renderAll()}),this.resetCanvasSize()}},{key:"upload",value:function(){var a=this;this.uploadRef.current.upload("Upload Your .rmui File",".rmui").then(function(t){var i=new FileReader;i.onload=function(){var n=R()(z()().mark(function s(h){return z()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,a.reset();case 2:return g.next=4,se(h.target.result,function(m,M){return a.onObjectEvent(m,M)},function(m){return a.onFrameEvent("change",m)},function(){return a.canvas.renderAll()});case 4:case"end":return g.stop()}},s)}));return function(s){return n.apply(this,arguments)}}(),i.readAsText(t)}).catch(function(t){})}},{key:"objectsToData",value:function(){for(var a=this,t={},i=0,n=Object.keys(this.objects);i<n.length;i++){var s=n[i];t[s]={};for(var h=0,v=Object.keys(this.objects[s]);h<v.length;h++){var g=v[h],m=this.objects[s][g].toObject();t[s][m.id]=m}}if(this.data=t,this.setState({data:t[this.state.frame]}),this.state.selectedId!==-1){var M=t[this.state.frame][this.state.selectedId];this.state.selectedId===-2&&(M=this.state.uiWindow),this.setState({properties:F()({},M)},function(){var j;(j=a.propertiesRef.current)===null||j===void 0||j.reload()})}if(Object.keys(t).length!==0){var d={version:2,data:t,selected:this.state.frame};localStorage.setItem("data",JSON.stringify(d))}}},{key:"onObjectEvent",value:function(a,t){var i=this;function n(h){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,g={id:h.id,name:h.name,layer:h.layer,group:h.group,type:h.type,ratio:i.state.uiWindow.ratio,team:i.state.uiWindow.team},m=Ke(g);i.objects[i.state.frame][h.id]=m,v&&m.fromObject(h),m.setRatio(i.state.uiWindow.ratio);for(var M=i.canvas.getObjects(),d=!0,j=0,w=Object.keys(M);j<w.length;j++){var k=w[j];if(M[k].id===m.id){d=!1;break}}i.canvas.add(m)}if(a==="add")(!t.id||this.objects[this.state.frame][t.id])&&(t.id=this.getNewDataId(),n(t));else if(a==="_add")t.id=this.getNewDataId(),t.ratio=this.state.uiWindow.ratio,t.team=this.state.uiWindow.team,n(t,!1);else if(a==="update")this.objects[this.state.frame][t.id]&&this.objects[this.state.frame][t.id].fromObject(t);else if(a==="_update")t.id>=0&&this.objects[this.state.frame][t.id]?this.objects[this.state.frame][t.id].fromObject(t):n(t);else if(a==="remove"){var s=t.id;this.objects[this.state.frame][s]&&(this.select(-1),this.canvas.remove(this.objects[this.state.frame][s]),this.canvas.renderAll(),delete this.objects[this.state.frame][s],this.objectsToData())}this.objectsToData(),this.canvas.renderAll()}},{key:"setFrame",value:function(a){this.objects[a]||(this.objects[a]={});for(var t=0,i=Object.keys(this.objects[this.state.frame]);t<i.length;t++){var n=i[t];this.canvas.remove(this.objects[this.state.frame][n])}this.canvas.renderAll();var s=this;return new Promise(function(h,v){s.setState({frame:a},function(){for(var g=s.canvas.getObjects(),m=0,M=Object.keys(s.objects[s.state.frame]);m<M.length;m++){for(var d=M[m],j=!0,w=0,k=Object.keys(g);w<k.length;w++){var I=k[w];if(g[I].id===s.objects[s.state.frame][d].id){j=!1;break}}j&&s.canvas.add(s.objects[s.state.frame][d])}s.objectsToData(),s.select(-1),s.canvas.renderAll(),h()})})}},{key:"onFrameEvent",value:function(){var r=R()(z()().mark(function t(i,n){var s,h,v,g,m;return z()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(i!=="add"){d.next=6;break}return this.objects[n]={},d.next=4,this.setFrame(n);case 4:d.next=34;break;case 6:if(i!=="remove"){d.next=18;break}if(Object.keys(this.objects).length!==1){d.next=10;break}return q.error("Cannot remove last frame!"),d.abrupt("return");case 10:return s=n,n=Object.keys(this.objects)[0],n===s&&(n=Object.keys(this.objects)[1]),d.next=15,this.setFrame(n);case 15:delete this.objects[s],d.next=34;break;case 18:if(i!=="change"){d.next=23;break}return d.next=21,this.setFrame(n);case 21:d.next=34;break;case 23:if(i!=="copy"){d.next=33;break}return this.objects[n]={},h=this.objects[this.state.frame],d.next=28,this.setFrame(n);case 28:for(v=0,g=Object.keys(h);v<g.length;v++)m=g[v],this.onObjectEvent("_update",h[m].toObject());this.objectsToData(),this.canvas.renderAll(),d.next=34;break;case 33:i==="rename"&&(this.objects[n]=this.objects[this.state.frame],delete this.objects[this.state.frame],this.setState({frame:n}));case 34:this.props.onFrameChange({frames:Object.keys(this.objects),selected:n}),this.objectsToData();case 36:case"end":return d.stop()}},t,this)}));function a(t,i){return r.apply(this,arguments)}return a}()},{key:"render",value:function(){var a,t=this;return(a=this.canvas)===null||a===void 0||a.renderAll(),(0,u.jsxs)("div",{className:"full",children:[(0,u.jsxs)(Ae.Z,{warp:!1,className:"container",gutter:12,style:{paddingTop:12,paddingLeft:12,paddingBottom:12},children:[(0,u.jsxs)(K.Z,{flex:"300px",children:[(0,u.jsx)("div",{style:{height:"50%",paddingBottom:12},children:(0,u.jsx)(Ze,{onSelect:function(n){return t.select(n)},onObjectEvent:function(n,s){return t.onObjectEvent(n,s)},onReset:function(){return t.reset()},data:this.state.data,editable:this.props.editable,selectedId:this.state.selectedId})}),(0,u.jsx)(X.Z,{size:"small",title:"Properties",style:{height:"50%"},children:(0,u.jsxs)("div",{className:"card-body",children:[this.state.properties?(0,u.jsx)(Ce.vY,{dataSource:this.state.properties,columns:Ge(this.state.properties),ref:this.propertiesRef,editable:this.props.editable?{onSave:function(n,s){return t.onPropertiesChange(n,s)}}:null,column:1,style:{marginTop:4}},this.state.selectedId):(0,u.jsx)($.Z,{image:$.Z.PRESENTED_IMAGE_SIMPLE}),this.state.selectedId===-2?(0,u.jsxs)(_.Z,{direction:"vertical",size:"middle",style:{display:"flex"},children:[(0,u.jsx)(A.ZP,{onClick:function(){return t.uploadRef.current.upload("Upload Your Background Image","image/*").then(function(n){console.log(n),t.setState({imageUploadShow:!1}),t.setBackground(Ee(n))}).catch(function(n){})},children:"Upload Background"}),(0,u.jsx)(A.ZP,{onClick:function(){return t.setBackground(f(25665))},children:"Reset Background"})]}):(0,u.jsx)("div",{})]})})]}),(0,u.jsxs)(K.Z,{flex:"auto",ref:this.canvasRef,children:[(0,u.jsx)("canvas",{className:"full",id:"ui"}),(0,u.jsx)("div",{id:"coordinateDisplay",style:{bottom:0,right:0,display:"none"}})]})]}),(0,u.jsx)(Le,{ref:this.uploadRef}),(0,u.jsx)(Mt,{ref:this.generatorRef})]})}}]),o}(x.Component),pt=yt,jt=f(86250),xt=f(73711),kt=f(27732),zt=f(11713),It=f(1210),At=f(52745),bt=f(97937),ce=f(16165),wt=f(37476),Ct=f(5966),Dt=function(c){E()(o,c);var e=N()(o);function o(){var r;C()(this,o);for(var a=arguments.length,t=new Array(a),i=0;i<a;i++)t[i]=arguments[i];return r=e.call.apply(e,[this].concat(t)),p()(y()(r),"state",{title:"",open:!1,frames:[]}),p()(y()(r),"promise",null),r}return D()(o,[{key:"open",value:function(a,t){var i=this;return new Promise(function(n,s){i.setState({title:a,open:!0,frames:t}),i.promise={resolve:n,reject:s}})}},{key:"render",value:function(){var a=this;return(0,u.jsx)(wt.Y,{title:this.state.title,autoFocusFirstInput:!0,width:240,open:this.state.open,onOpenChange:function(i){a.promise&&!i&&a.state.open&&a.promise.reject(),a.setState({open:i})},onFinish:function(){var t=R()(z()().mark(function i(n){return z()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return a.promise.resolve(n.frame),a.promise=null,h.abrupt("return",!0);case 3:case"end":return h.stop()}},i)}));return function(i){return t.apply(this,arguments)}}(),children:(0,u.jsx)(Ct.Z,{name:"frame",label:"New Frame Name",width:"sm",rules:[{required:!0,message:"Please input frame name!"},function(t){var i=t.getFieldValue,n=a;return{validator:function(h,v){{var g=!0,m=i("frame"),M=S()(n.state.frames),d;try{for(M.s();!(d=M.n()).done;){var j=d.value;if(j===m){g=!1;break}}}catch(w){M.e(w)}finally{M.f()}return g?Promise.resolve():Promise.reject(new Error("Cannot create same name frame!"))}}}}]})})}}]),o}(x.Component),St=Dt,Tt=f(13769),Ot=f.n(Tt),Et=f(40249),Nt=f(21798),Rt=["node"],Lt=function(c){E()(o,c);var e=N()(o);function o(){var r;C()(this,o);for(var a=arguments.length,t=new Array(a),i=0;i<a;i++)t[i]=arguments[i];return r=e.call.apply(e,[this].concat(t)),p()(y()(r),"state",{open:!1,content:null}),r}return D()(o,[{key:"show",value:function(){this.setState({open:!0})}},{key:"componentDidMount",value:function(){var a=this;fetch(f(99734)).then(function(t){return t.text()}).then(function(t){a.setState({content:t})})}},{key:"render",value:function(){var a=this;return(0,u.jsx)(ee.Z,{title:"About",onOk:function(){return a.setState({open:!1})},onCancel:function(){return a.setState({open:!1})},footer:null,open:this.state.open,children:this.state.content?(0,u.jsx)(Nt.U,{components:{a:function(i){var n=i.node,s=Ot()(i,Rt);return(0,u.jsx)("a",F()(F()({},s),{},{target:"_blank"}))}},children:this.state.content}):(0,u.jsx)(Et.Z,{})})}}]),o}(x.Component),Ft=Lt,Ut=Object.defineProperty,oe=Object.getOwnPropertySymbols,Wt=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable,le=(c,e,o)=>e in c?Ut(c,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):c[e]=o,Yt=(c,e)=>{for(var o in e||(e={}))Wt.call(e,o)&&le(c,o,e[o]);if(oe)for(var o of oe(e))Pt.call(e,o)&&le(c,o,e[o]);return c};const Zt=c=>x.createElement("svg",Yt({className:"moon_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:200,height:200},c),x.createElement("path",{d:"M472 991.6c-157 0-304.4-77.2-394.3-206.6-6.9-9.9-7.6-22.9-1.8-33.6 5.8-10.7 17.1-17.8 29.2-16.7l7.7.4c2.4.2 4.8.3 7.2.3 229.4 0 416-186.6 416-416 0-85-25.7-167-74.3-236.9-6.9-9.9-7.6-22.9-1.8-33.6 5.8-10.7 17.2-17.6 29.2-16.7C748.7 41.6 952 252.1 952 511.6c0 264.7-215.3 480-480 480zM169.7 797.1c78.1 82.7 187.2 130.6 302.3 130.6 229.4 0 416-186.6 416-416 0-204-144.9-373-339.7-408.6 34 66.9 51.7 140.7 51.7 216.6 0 247.8-188.9 452.4-430.3 477.4z",fill:"#2c2c2c"}));var sa="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTQ3MiA5OTEuNmMtMTU3IDAtMzA0LjQtNzcuMi0zOTQuMy0yMDYuNi02LjktOS45LTcuNi0yMi45LTEuOC0zMy42IDUuOC0xMC43IDE3LjEtMTcuOCAyOS4yLTE2LjdsNy43LjRjMi40LjIgNC44LjMgNy4yLjMgMjI5LjQgMCA0MTYtMTg2LjYgNDE2LTQxNiAwLTg1LTI1LjctMTY3LTc0LjMtMjM2LjktNi45LTkuOS03LjYtMjIuOS0xLjgtMzMuNiA1LjgtMTAuNyAxNy4yLTE3LjYgMjkuMi0xNi43Qzc0OC43IDQxLjYgOTUyIDI1Mi4xIDk1MiA1MTEuNmMwIDI2NC43LTIxNS4zIDQ4MC00ODAgNDgwek0xNjkuNyA3OTcuMWM3OC4xIDgyLjcgMTg3LjIgMTMwLjYgMzAyLjMgMTMwLjYgMjI5LjQgMCA0MTYtMTg2LjYgNDE2LTQxNiAwLTIwNC0xNDQuOS0zNzMtMzM5LjctNDA4LjYgMzQgNjYuOSA1MS43IDE0MC43IDUxLjcgMjE2LjYgMCAyNDcuOC0xODguOSA0NTIuNC00MzAuMyA0NzcuNHoiIGZpbGw9IiMyYzJjMmMiLz48L3N2Zz4=",Bt=Object.defineProperty,ue=Object.getOwnPropertySymbols,Gt=Object.prototype.hasOwnProperty,Ht=Object.prototype.propertyIsEnumerable,he=(c,e,o)=>e in c?Bt(c,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):c[e]=o,Jt=(c,e)=>{for(var o in e||(e={}))Gt.call(e,o)&&he(c,o,e[o]);if(ue)for(var o of ue(e))Ht.call(e,o)&&he(c,o,e[o]);return c};const Qt=c=>x.createElement("svg",Jt({className:"sun_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:200,height:200},c),x.createElement("path",{d:"M522.88 874.667A21.333 21.333 0 0 1 544.213 896v85.333a21.333 21.333 0 0 1-21.333 21.334h-21.333a21.333 21.333 0 0 1-21.334-21.334V896a21.333 21.333 0 0 1 21.334-21.333h21.333zm268.416-107.52 60.352 60.352a21.333 21.333 0 0 1 0 30.165l-15.083 15.083a21.333 21.333 0 0 1-30.186 0l-60.331-60.352a21.333 21.333 0 0 1 0-30.166l15.083-15.082a21.333 21.333 0 0 1 30.165 0zm-527.957 0 15.082 15.082a21.333 21.333 0 0 1 0 30.166l-60.352 60.352a21.333 21.333 0 0 1-30.165 0l-15.083-15.083a21.333 21.333 0 0 1 0-30.165l60.331-60.352a21.333 21.333 0 0 1 30.187 0zM512 277.333c141.376 0 256 114.624 256 256s-114.624 256-256 256-256-114.624-256-256 114.624-256 256-256zm0 64a192 192 0 1 0 0 384 192 192 0 0 0 0-384zm448.213 160a21.333 21.333 0 0 1 21.334 21.334V544a21.333 21.333 0 0 1-21.334 21.333H874.88A21.333 21.333 0 0 1 853.547 544v-21.333a21.333 21.333 0 0 1 21.333-21.334h85.333zm-810.666 0a21.333 21.333 0 0 1 21.333 21.334V544a21.333 21.333 0 0 1-21.333 21.333H64.213A21.333 21.333 0 0 1 42.88 544v-21.333a21.333 21.333 0 0 1 21.333-21.334h85.334zm687.04-307.413 15.082 15.083a21.333 21.333 0 0 1 0 30.165l-60.352 60.352a21.333 21.333 0 0 1-30.165 0l-15.083-15.083a21.333 21.333 0 0 1 0-30.165L806.4 193.92a21.333 21.333 0 0 1 30.187 0zm-618.496 0 60.352 60.352a21.333 21.333 0 0 1 0 30.165L263.36 299.52a21.333 21.333 0 0 1-30.187 0l-60.352-60.373a21.333 21.333 0 0 1 0-30.166l15.083-15.082a21.333 21.333 0 0 1 30.165 0zM522.9 64a21.333 21.333 0 0 1 21.334 21.333v85.334A21.333 21.333 0 0 1 522.9 192h-21.333a21.333 21.333 0 0 1-21.333-21.333V85.333A21.333 21.333 0 0 1 501.568 64h21.333z",fill:"#ebebeb"}));var ca="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTUyMi44OCA4NzQuNjY3QTIxLjMzMyAyMS4zMzMgMCAwIDEgNTQ0LjIxMyA4OTZ2ODUuMzMzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzMzIDIxLjMzNGgtMjEuMzMzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzM0LTIxLjMzNFY4OTZhMjEuMzMzIDIxLjMzMyAwIDAgMSAyMS4zMzQtMjEuMzMzaDIxLjMzM3ptMjY4LjQxNi0xMDcuNTIgNjAuMzUyIDYwLjM1MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDAgMzAuMTY1bC0xNS4wODMgMTUuMDgzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTg2IDBsLTYwLjMzMS02MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NmwxNS4wODMtMTUuMDgyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTY1IDB6bS01MjcuOTU3IDAgMTUuMDgyIDE1LjA4MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDAgMzAuMTY2bC02MC4zNTIgNjAuMzUyYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTY1IDBsLTE1LjA4My0xNS4wODNhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NWw2MC4zMzEtNjAuMzUyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTg3IDB6TTUxMiAyNzcuMzMzYzE0MS4zNzYgMCAyNTYgMTE0LjYyNCAyNTYgMjU2cy0xMTQuNjI0IDI1Ni0yNTYgMjU2LTI1Ni0xMTQuNjI0LTI1Ni0yNTYgMTE0LjYyNC0yNTYgMjU2LTI1NnptMCA2NGExOTIgMTkyIDAgMSAwIDAgMzg0IDE5MiAxOTIgMCAwIDAgMC0zODR6bTQ0OC4yMTMgMTYwYTIxLjMzMyAyMS4zMzMgMCAwIDEgMjEuMzM0IDIxLjMzNFY1NDRhMjEuMzMzIDIxLjMzMyAwIDAgMS0yMS4zMzQgMjEuMzMzSDg3NC44OEEyMS4zMzMgMjEuMzMzIDAgMCAxIDg1My41NDcgNTQ0di0yMS4zMzNhMjEuMzMzIDIxLjMzMyAwIDAgMSAyMS4zMzMtMjEuMzM0aDg1LjMzM3ptLTgxMC42NjYgMGEyMS4zMzMgMjEuMzMzIDAgMCAxIDIxLjMzMyAyMS4zMzRWNTQ0YTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzMzIDIxLjMzM0g2NC4yMTNBMjEuMzMzIDIxLjMzMyAwIDAgMSA0Mi44OCA1NDR2LTIxLjMzM2EyMS4zMzMgMjEuMzMzIDAgMCAxIDIxLjMzMy0yMS4zMzRoODUuMzM0em02ODcuMDQtMzA3LjQxMyAxNS4wODIgMTUuMDgzYTIxLjMzMyAyMS4zMzMgMCAwIDEgMCAzMC4xNjVsLTYwLjM1MiA2MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMS0zMC4xNjUgMGwtMTUuMDgzLTE1LjA4M2EyMS4zMzMgMjEuMzMzIDAgMCAxIDAtMzAuMTY1TDgwNi40IDE5My45MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDMwLjE4NyAwem0tNjE4LjQ5NiAwIDYwLjM1MiA2MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMSAwIDMwLjE2NUwyNjMuMzYgMjk5LjUyYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTg3IDBsLTYwLjM1Mi02MC4zNzNhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NmwxNS4wODMtMTUuMDgyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTY1IDB6TTUyMi45IDY0YTIxLjMzMyAyMS4zMzMgMCAwIDEgMjEuMzM0IDIxLjMzM3Y4NS4zMzRBMjEuMzMzIDIxLjMzMyAwIDAgMSA1MjIuOSAxOTJoLTIxLjMzM2EyMS4zMzMgMjEuMzMzIDAgMCAxLTIxLjMzMy0yMS4zMzNWODUuMzMzQTIxLjMzMyAyMS4zMzMgMCAwIDEgNTAxLjU2OCA2NGgyMS4zMzN6IiBmaWxsPSIjZWJlYmViIi8+PC9zdmc+",Z=f(36449),Vt=f(553),Kt=[{key:"File-open",label:"Open .rmui"},{key:"File-save",label:"Save as .rmui"},{type:"divider"},{key:"File-generate",label:"Generate Code",icon:(0,u.jsx)(xt.Z,{})}],Xt=[{key:"Edit-reset",label:"Reset Designer"},{key:"Edit-undo",label:"Undo \u{1F6A7}"},{key:"Edit-redo",label:"Redo \u{1F6A7}"}],$t=[{key:"Simulate-start",label:"Start"},{key:"Simulate-settings",label:"Settings"}],_t=function(c){E()(o,c);var e=N()(o);function o(){var r;C()(this,o);for(var a=arguments.length,t=new Array(a),i=0;i<a;i++)t[i]=arguments[i];return r=e.call.apply(e,[this].concat(t)),p()(y()(r),"state",{fullscreen:!1,frames:["default"],selectedFrame:"default",darkMode:!1}),p()(y()(r),"formRef",(0,x.createRef)()),p()(y()(r),"aboutRef",(0,x.createRef)()),p()(y()(r),"tauri",G()),r}return D()(o,[{key:"componentDidMount",value:function(){var r=R()(z()().mark(function t(){var i;return z()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!this.tauri){s.next=5;break}return s.next=3,Z.G.isMaximized();case 3:i=s.sent,this.setState({fullscreen:i});case 5:case"end":return s.stop()}},t,this)}));function a(){return r.apply(this,arguments)}return a}()},{key:"fullScreen",value:function(){if(this.tauri)Z.G.maximize();else{var a=document.documentElement;a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()}this.setState({fullscreen:!0})}},{key:"exitFullscreen",value:function(){this.tauri?Z.G.unmaximize():document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),this.setState({fullscreen:!1})}},{key:"setFrames",value:function(a){this.setState({frames:a.frames,selectedFrame:a.selected})}},{key:"onMenuClick",value:function(){var r=R()(z()().mark(function t(i){var n,s,h,v,g,m;return z()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(n=i.keyPath[i.keyPath.length-1],n.slice(0,6)!=="Insert"){d.next=7;break}s=i.key.slice(7),h={id:-1,name:"New".concat(s),layer:0,group:"Ungroup",type:"Ui".concat(s)},this.props.onObjectEvent("_add",h),d.next=42;break;case 7:if(n!=="Edit-reset"){d.next=11;break}this.props.reset(),d.next=42;break;case 11:if(n!=="File-save"){d.next=15;break}this.props.save(),d.next=42;break;case 15:if(n!=="File-open"){d.next=19;break}this.props.upload(),d.next=42;break;case 19:if(n!=="File-generate"){d.next=23;break}this.props.generate(this.data),d.next=42;break;case 23:if(n!=="FrameOp-add"){d.next=30;break}return d.next=26,this.formRef.current.open("New Frame",this.state.frames);case 26:v=d.sent,this.props.setFrame("add",v),d.next=42;break;case 30:if(n!=="FrameOp-remove"){d.next=34;break}this.props.setFrame("remove",this.state.selectedFrame),d.next=42;break;case 34:if(n!=="FrameOp-copy"){d.next=41;break}return d.next=37,this.formRef.current.open("Copy Frame To",this.state.frames);case 37:g=d.sent,this.props.setFrame("copy",g),d.next=42;break;case 41:n==="FrameOp-change"&&(m=i.key.slice(7),this.props.setFrame("change",m));case 42:case"end":return d.stop()}},t,this)}));function a(t){return r.apply(this,arguments)}return a}()},{key:"getFramesMenu",value:function(){var a=[{key:"FrameOp-add",label:"New Frame"},{key:"FrameOp-remove",label:"Remove This Frame"},{key:"FrameOp-copy",label:"Copy This Frame"},{key:"FrameOp-change",label:"Change to",selectable:"true",children:[]}],t=S()(this.state.frames),i;try{for(t.s();!(i=t.n()).done;){var n=i.value;a[3].children.push({key:"Frames-".concat(n),label:n})}}catch(s){t.e(s)}finally{t.f()}return a}},{key:"render",value:function(){var a=this,t=(0,u.jsx)(A.ZP,{type:"text",onClick:function(){return a.fullScreen()},size:"small",children:(0,u.jsx)(kt.Z,{style:{color:"var(--ant-color-text)"}})}),i=(0,u.jsx)(A.ZP,{type:"text",onClick:function(){return a.exitFullscreen()},size:"small",children:(0,u.jsx)(zt.Z,{style:{color:"var(--ant-color-text)"}})}),n=(0,u.jsx)(A.ZP,{type:"text",onClick:function(){return a.props.setDarkMode(!0)},size:"small",children:(0,u.jsx)(ce.Z,{component:Zt})}),s=(0,u.jsx)(A.ZP,{type:"text",onClick:function(){return a.props.setDarkMode(!1)},size:"small",children:(0,u.jsx)(ce.Z,{component:Qt})});return(0,u.jsxs)("div",{style:{width:"100%",height:32,marginTop:-5},className:"solid-color","data-tauri-drag-region":!0,children:[(0,u.jsxs)(jt.Z,{style:{width:"100vw",display:"flex",paddingTop:-5},justify:"flex-start",align:"center","data-tauri-drag-region":!0,children:[(0,u.jsx)("div",{style:{fontFamily:"YouSheBiaoTiHei",fontSize:20,paddingLeft:6,paddingRight:6,paddingTop:3,display:"flex",color:"var(--ant-color-text)",userSelect:!1,cursor:"default"},"data-tauri-drag-region":!0,children:"RoboMaster UI Designer"}),(0,u.jsx)(L.Z,{menu:{items:Kt,onClick:function(v){return a.onMenuClick(v)}},children:(0,u.jsx)(A.ZP,{type:"text",size:"small",children:"File"})}),(0,u.jsx)(L.Z,{menu:{items:Xt,onClick:function(v){return a.onMenuClick(v)}},children:(0,u.jsx)(A.ZP,{type:"text",size:"small",children:"Edit"})}),(0,u.jsx)(L.Z,{menu:{items:Xe(),onClick:function(v){return a.onMenuClick(v)}},children:(0,u.jsx)(A.ZP,{type:"text",size:"small",children:"Insert"})}),(0,u.jsx)(L.Z,{menu:{items:this.getFramesMenu(),onClick:function(v){return a.onMenuClick(v)},selectedKeys:["Frames-".concat(this.state.selectedFrame)]},children:(0,u.jsx)(A.ZP,{type:"text",size:"small",children:"Frames"})}),(0,u.jsx)(L.Z,{menu:{items:$t,onClick:function(v){return a.onMenuClick(v)}},children:(0,u.jsx)(A.ZP,{type:"text",size:"small",children:"Simulate\u{1F6A7}"})}),(0,u.jsx)(A.ZP,{type:"text",size:"small",onClick:function(){var v;(v=a.aboutRef.current)===null||v===void 0||v.show()},children:"About"}),(0,u.jsxs)("div",{style:{marginRight:5,justifyContent:"flex-end",marginLeft:"auto",marginTop:2},"data-tauri-drag-region":!0,children:[(0,u.jsxs)("div",{style:{display:"inline",marginRight:15,fontSize:10,cursor:"default",color:"var(--ant-color-text)",userSelect:!1},"data-tauri-drag-region":!0,children:["Created by\xA0",(0,u.jsx)("a",{href:"https://github.com/bismarckkk",target:"_blank",children:(0,u.jsx)(A.ZP,{type:"link",style:{padding:0},size:"small","data-tauri-drag-region":!0,children:"Bismarckkk"})})]}),this.props.darkMode?s:n,(0,u.jsx)("a",{href:"https://github.com/bismarckkk/RM-UI-Designer",target:"_blank",children:(0,u.jsx)(A.ZP,{type:"text",size:"small",children:(0,u.jsx)(It.Z,{style:{color:"var(--ant-color-text)"}})})}),(0,u.jsx)(A.ZP,{type:"text",size:"small",onClick:function(){return Z.G.minimize()},style:{display:this.tauri?"inline":"none"},children:(0,u.jsx)(At.Z,{style:{color:"var(--ant-color-text)"}})}),this.state.fullscreen?i:t,(0,u.jsx)(A.ZP,{type:"text",size:"small",onClick:function(){return(0,Vt.J)()},style:{display:this.tauri?"inline":"none"},children:(0,u.jsx)(bt.Z,{style:{color:"var(--ant-color-text)"}})})]})]}),(0,u.jsx)(St,{ref:this.formRef}),(0,u.jsx)(Ft,{ref:this.aboutRef})]})}}]),o}(x.Component),qt=_t;function ea(c){return we(),(0,u.jsx)("div",{})}var ta=ea,aa=f(18253),ia=Q.Z.darkAlgorithm,de=Q.Z.compactAlgorithm,ra=function(c){E()(o,c);var e=N()(o);function o(){var r;C()(this,o);for(var a=arguments.length,t=new Array(a),i=0;i<a;i++)t[i]=arguments[i];return r=e.call.apply(e,[this].concat(t)),p()(y()(r),"state",{simulate:!1,darkMode:r.isBrowserDarkMode()}),p()(y()(r),"modal",null),p()(y()(r),"renderRef",x.createRef()),p()(y()(r),"menuRef",x.createRef()),r}return D()(o,[{key:"isBrowserDarkMode",value:function(){try{return window.matchMedia("(prefers-color-scheme: dark)").matches}catch(a){return!1}}},{key:"componentDidMount",value:function(){var a=this,t=0;window.addEventListener("drop",function(s){return s.preventDefault()},!1),window.addEventListener("dragover",function(s){return s.preventDefault()},!1),window.addEventListener("contextmenu",function(s){return s.preventDefault()},!1);function i(s){!a.modal&&s<792&&s!==t&&(t=s,a.modal=P.warning({title:"Display Aera too Small",content:"Cannot show all contents on this window. Please resize this window or rotate your phone.",footer:null})),a.modal&&s>=792&&(a.modal.destroy(),a.modal=null)}setTimeout(function(){return i(window.innerWidth)},500),window.addEventListener("resize",function(){i(window.innerWidth)},!1);var n=window.matchMedia("(prefers-color-scheme: dark)");n.addEventListener("change",function(s){a.setState({darkMode:s.matches})})}},{key:"setDarkMode",value:function(a){this.setState({darkMode:a})}},{key:"render",value:function(){var a=this;return(0,u.jsx)(pe.ZP,{locale:aa.Z,theme:{cssVar:{key:"rmui"},hashed:!1,algorithm:this.state.darkMode?[ia,de]:de},children:(0,u.jsxs)(V.Z,{children:[(0,u.jsx)("div",{className:"rmui",children:(0,u.jsxs)("div",{className:"container background-color",style:{height:"100vh",paddingBottom:12,overflow:"hidden"},children:[(0,u.jsx)(qt,{save:function(){return a.renderRef.current.save()},onObjectEvent:function(i,n){return a.renderRef.current.onObjectEvent(i,n)},generate:function(){return a.renderRef.current.generate()},reset:function(){return a.renderRef.current.reset()},setFrame:function(i,n){return a.renderRef.current.onFrameEvent(i,n)},upload:function(i){return a.renderRef.current.upload(i)},ref:this.menuRef,setDarkMode:function(i){return a.setDarkMode(i)},darkMode:this.state.darkMode}),(0,u.jsx)(pt,{className:"full",editable:!0,ref:this.renderRef,onFrameChange:function(i){return a.menuRef.current.setFrames(i)}})]})}),(0,u.jsx)(ta,{})]})})}}]),o}(x.Component),na=ra},99734:function(U,W,f){U.exports=f.p+"static/about.93caff1b.md"},25665:function(U,W,f){U.exports=f.p+"static/background.d741a18b.png"}}]);
