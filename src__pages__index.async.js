"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[858],{3813:function(R,P,v){v.r(P),v.d(P,{default:function(){return cr}});var Ke=v(12444),S=v.n(Ke),Xe=v(72004),T=v.n(Xe),qe=v(25098),k=v.n(qe),_e=v(31996),D=v.n(_e),et=v(26037),O=v.n(et),tt=v(9783),x=v.n(tt),z=v(67294),fe=v(9361),at=v(28459),ve=v(62338),rt=v(65848),it=v(64599),I=v.n(it),nt=v(97857),E=v.n(nt),st=v(15009),j=v.n(st),lt=v(99289),C=v.n(lt),ot=v(19632),me=v.n(ot),pe=v(63084),ge=v(32983),U=v(42075),b=v(14726),Y,ct,K,ut=function(){var o=ve.Z.useApp();return Y=o.message,K=o.modal,ct=o.notification,null},F=v(3909),ht=v(56680),ye=v(86250),Z=v(83159),dt=v(27847),ft=v(90420),vt=v(99611),mt=v(94149),pt=v(3355),gt=v(80882),c=v(85893),yt=function(o){D()(l,o);var e=O()(l);function l(){var n;S()(this,l);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a)),x()(k()(n),"state",{status:n.props.defaultStatus||!1}),n}return T()(l,[{key:"render",value:function(){var t=this;return(0,c.jsx)(b.ZP,{size:"small",type:"text",onClick:function(){t.props.onChange&&t.props.onChange(!t.state.status),t.setState({status:!t.state.status})},children:this.state.status?this.props.onNode||"ON":this.props.offNode||"OFF"})}}]),l}(z.Component),Me=yt;function Mt(o){return o.map(function(e){return e===-2?"window":"E-".concat(e)})}var xt=[{key:"D1-group-layer",label:"layer"},{key:"D1-group-group",label:"group"}],jt=function(o){D()(l,o);var e=O()(l);function l(){var n;S()(this,l);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a)),x()(k()(n),"state",{treeData:[],rightClickMenuOpen:!1,groupKey:"layer"}),x()(k()(n),"treeData",[]),n}return T()(l,[{key:"selectKey2id",value:function(t){var a=this,i=[],r=I()(t),s;try{var u=function(){var m=s.value;if(m==="window")i.push(-2);else if(m.startsWith("E-"))i.push(parseInt(m.slice(2)));else{var f=a.treeData.find(function(y){return y.key===m}).children.map(function(y){return parseInt(y.key.slice(2))}),p=I()(f),M;try{for(p.s();!(M=p.n()).done;){var g=M.value;i.includes(g)||i.push(g)}}catch(y){p.e(y)}finally{p.f()}}};for(r.s();!(s=r.n()).done;)u()}catch(h){r.e(h)}finally{r.f()}return i}},{key:"onElementMenuContainerClick",value:function(t){t.target.localName==="div"&&(this.setState({rightClickMenuOpen:!1}),(t.target.classList.contains("ant-tree")||!t.ctrlKey&&!t.shiftKey)&&this.props.onSelect([]))}},{key:"onElementMenuClick",value:function(t){var a=this;if(this.setState({rightClickMenuOpen:!1}),t.key==="D2-copy"){var i=null;t.target.localName!=="input"&&this.props.selectedId.length!==0&&this.props.selectedId[0]!==-2&&(t.preventDefault(),i=JSON.stringify(this.props.selectedId.map(function(h){return a.props.data[h]})),t.clipboardData.setData("text",i))}else if(t.key==="D2-delete"){var r=I()(this.props.selectedId),s;try{for(r.s();!(s=r.n()).done;){var u=s.value;this.props.onObjectEvent("remove",{id:u})}}catch(h){r.e(h)}finally{r.f()}}}},{key:"onElementRightClick",value:function(t){var a=this.selectKey2id([t.node.key]);a[0]in this.props.selectedId||this.props.onSelect(a)}},{key:"onSelect",value:function(t){if(t.length!==0){var a=this.selectKey2id(t);a.includes(-2)&&(a=[a[a.length-1]]),this.props.onSelect(a)}}},{key:"onMenuOpenChange",value:function(t){if(t){var a=this;setTimeout(function(){a.props.selectedId.length!==0&&a.props.selectedId[0]!==-2?a.setState({rightClickMenuOpen:!0}):a.setState({rightClickMenuOpen:!1})},100)}else this.setState({rightClickMenuOpen:!1})}},{key:"elementsMenuOnClick",value:function(t){var a=this;this.setState({groupKey:t.key.slice(9)},function(){return a.updateTree()})}},{key:"updateTree",value:function(){for(var t=this,a=this.state.groupKey,i=[],r=Object.keys(this.props.data),s=function(){for(var m=t.props.data[r[u]],f=-1,p=0;p<i.length;p++)if(i[p].key==="".concat(a,"-").concat(m[a])){f=p;break}f===-1&&(i.push({title:"".concat(a," ").concat(m[a]),key:"".concat(a,"-").concat(m[a]),children:[],isLeaf:!1}),f=i.length-1),i[f].children.push({title:(0,c.jsxs)(ye.Z,{justify:"space-between",style:{width:"100%"},children:[m.name,(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(Me,{onChange:function(g){return t.props.onObjectEvent("setAttr",{id:m.id,payload:{visible:g}})},defaultStatus:!0,offNode:(0,c.jsx)(ft.Z,{}),onNode:(0,c.jsx)(vt.Z,{})}),(0,c.jsx)(Me,{onChange:function(g){return t.props.onObjectEvent("setAttr",{id:m.id,payload:{selectable:g}})},defaultStatus:!0,offNode:(0,c.jsx)(mt.Z,{}),onNode:(0,c.jsx)(pt.Z,{style:{transform:"scaleX(-1)"}})})]})]}),key:"E-".concat(r[u])})},u=0;u<r.length;u++)s();return i=i.sort(function(h,m){return h.key.toString().localeCompare(m.key.toString())}),i.unshift({title:"UI Window",key:"window"}),this.treeData=i,i}},{key:"render",value:function(){var t=this;return(0,c.jsx)(pe.Z,{size:"small",title:"Elements",style:{height:"100%"},extra:(0,c.jsx)(Z.Z,{menu:{items:xt,onClick:function(i){return t.elementsMenuOnClick(i)},selectable:!0,selectedKeys:["D1-group-".concat(this.state.groupKey)]},children:(0,c.jsxs)(U.Z,{style:{fontSize:11},children:["Group by",(0,c.jsx)(gt.Z,{size:"small"})]})}),children:(0,c.jsx)("div",{className:"card-body",onMouseUp:function(i){return t.onElementMenuContainerClick(i)},children:(0,c.jsx)(Z.Z,{menu:{items:[{key:"D2-copy",label:"Copy"},{key:"D2-delete",label:"Delete",danger:!0}],onClick:function(i){t.onElementMenuClick(i)}},trigger:["contextMenu"],open:this.state.rightClickMenuOpen,onOpenChange:function(i){t.onMenuOpenChange(i)},children:(0,c.jsx)(dt.Z,{className:"full",treeData:this.updateTree(),onSelect:function(i){return t.onSelect(i)},selectedKeys:Mt(this.props.selectedId),onRightClick:function(i){return t.onElementRightClick(i)},treeDefaultExpandAll:!0,showLine:!0,blockNode:!0,multiple:!0})})})})}}]),l}(z.Component),kt=jt,A=v(32777),W=v(17990),bt=v(55733),zt=v.n(bt),H=document.createElement("a"),B=document.createElement("input");B.type="file";var w={yellow:"rgb(255, 238, 70)",green:"rgb(168, 255, 45)",orange:"rgb(255, 163, 8)",purple:"rgb(240, 41, 246)",pink:"rgb(255, 100, 142)",cyan:"rgb(69, 255, 242)",white:"#fff",black:"#000",blue:"rgb(47, 168, 223)",red:"rgb(255, 69, 70)"};function xe(o){var e=o.split(".").pop();return{name:e+" file",extensions:[e]}}function je(o,e){if(G())C()(j()().mark(function t(){var a;return j()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,W.WZ.save({filters:[xe(e)],defaultPath:e});case 2:if(a=r.sent,!(a!==null&&a.length>0)){r.next=6;break}return r.next=6,W.fs.writeTextFile(a,o);case 6:case"end":return r.stop()}},t)}))();else{var l=new Blob([o],{type:"text/plain;charset=utf-8"}),n=URL.createObjectURL(l);H.href=n,H.download=e,H.click(),URL.revokeObjectURL(n)}}function ke(o,e){if(G())C()(j()().mark(function n(){var t,a;return j()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,W.WZ.save({filters:[xe(e)],defaultPath:e});case 2:if(t=r.sent,!(t!==null&&t.length>0)){r.next=9;break}return r.next=6,o.arrayBuffer();case 6:return a=r.sent,r.next=9,W.fs.writeBinaryFile(t,a);case 9:case"end":return r.stop()}},n)}))();else{var l=URL.createObjectURL(o);H.href=l,H.download=e,H.click(),URL.revokeObjectURL(l)}}function wt(o,e,l){var n={version:2,data:o,selected:l},t=JSON.stringify(n);je(t,e)}function It(o){var e=null;return window.createObjcectURL!==void 0?e=window.createOjcectURL(o):window.URL!==void 0?e=window.URL.createObjectURL(o):window.webkitURL!==void 0&&(e=window.webkitURL.createObjectURL(o)),e}function G(){return window!==void 0&&window.__TAURI__!==void 0}function Ct(o){return X.apply(this,arguments)}function X(){return X=C()(j()().mark(function o(e){var l;return j()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return l=new(zt()),e.forEach(function(a){l.file(a.fileName,a.content)}),t.next=4,l.generateAsync({type:"blob"});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},o)})),X.apply(this,arguments)}function be(o){return q.apply(this,arguments)}function q(){return q=C()(j()().mark(function o(e){var l,n,t;return j()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:l=[];for(n in e)for(t in e[n])l.push({fileName:"".concat(n,".").concat(t),content:e[n][t]});return i.next=4,Ct(l);case 4:return i.abrupt("return",i.sent);case 5:case"end":return i.stop()}},o)})),q.apply(this,arguments)}function ze(o){return new Promise(function(e,l){if(G()){var n=[o.slice(1)],t="".concat(n," file");o==="image/*"&&(n=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],t="image"),C()(j()().mark(function a(){var i,r,s,u,h;return j()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,W.WZ.open({multiple:!1,directory:!1,filters:[{name:t,extensions:n}]});case 2:if(i=f.sent,!(i!==null&&i.length>0)){f.next=16;break}return r=i.replace(/\\/g,"/"),s=r.split("/").pop(),f.t0=Blob,f.next=9,W.fs.readBinaryFile(i);case 9:f.t1=f.sent,f.t2=[f.t1],u=new f.t0(f.t2),h=new File([u],s),e(h),f.next=17;break;case 16:l();case 17:case"end":return f.stop()}},a)}))()}else B.accept=o,B.value="",B.onchange=function(){if(B.files.length>0){var a=B.files[0];e(a)}else l(new Error("No file selected"))},B.click()})}function _(o){return o.getAttribute("contentEditable")==="true"?!0:o.tagName==="INPUT"||o.tagName==="TEXTAREA"}var At=function(o){D()(l,o);var e=O()(l);function l(){return S()(this,l),e.apply(this,arguments)}return T()(l,[{key:"render",value:function(){return this.props.color==="Main"?(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{style:{border:"1px solid #aaa",height:16,width:16,borderRadius:"20%",display:"inline-flex"},children:[(0,c.jsx)("div",{style:{backgroundColor:"red",height:12,width:6,margin:"1px 0 1px 1px",borderTopLeftRadius:"20%",borderBottomLeftRadius:"20%",display:"inline-flex"}}),(0,c.jsx)("div",{style:{backgroundColor:"blue",height:12,width:6,margin:"1px 1px 1px 0",borderTopRightRadius:"20%",borderBottomRightRadius:"20%",display:"inline-flex"}})]}),"\xA0 Main"]}):(0,c.jsx)("div",{children:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{style:{border:"1px solid #aaa",height:16,width:16,borderRadius:"20%",display:"inline-flex"},children:(0,c.jsx)("div",{style:{backgroundColor:w[this.props.color.toLowerCase()],height:12,width:12,margin:1,borderRadius:"20%",display:"inline-flex"}})}),"\xA0 ",this.props.color]})})}}]),l}(z.Component),N=At,we={id:{title:"Id",key:"id",dataIndex:"id",valueType:"digit",editable:!1},name:{title:"Name",key:"name",dataIndex:"name"},group:{title:"Group",key:"group",dataIndex:"group"},kind:{title:"Kind",key:"kind",dataIndex:"kind",editable:!1},lineWidth:{title:"Line Width",key:"lineWidth",dataIndex:"lineWidth",valueType:"digit"},layer:{title:"Layer",key:"layer",dataIndex:"layer",valueType:"digit"},x:{title:"X",key:"x",dataIndex:"x",valueType:"digit"},y:{title:"Y",key:"y",dataIndex:"y",valueType:"digit"},x2:{title:"X2",key:"x2",dataIndex:"x2",valueType:"digit"},y2:{title:"Y2",key:"y2",dataIndex:"y2",valueType:"digit"},width:{title:"Width",key:"width",dataIndex:"width",valueType:"digit"},height:{title:"Height",key:"height",dataIndex:"height",valueType:"digit"},rx:{title:"Rx",key:"rx",dataIndex:"rx",valueType:"digit"},ry:{title:"Ry",key:"ry",dataIndex:"ry",valueType:"digit"},r:{title:"R",key:"r",dataIndex:"r",valueType:"digit"},startAngle:{title:"Start Angle",key:"startAngle",dataIndex:"startAngle",valueType:"digit"},endAngle:{title:"End Angle",key:"endAngle",dataIndex:"endAngle",valueType:"digit"},fontSize:{title:"Font Size",key:"fontSize",dataIndex:"fontSize",valueType:"digit"},float:{title:"Number",key:"float",dataIndex:"float",valueType:"digit"},number:{title:"Number",key:"number",dataIndex:"number",valueType:"digit"},text:{title:"Text",key:"text",dataIndex:"text",formItemProps:{rules:[{max:30},{type:"string"}]}},color:{title:"Color",key:"color",dataIndex:"color",valueType:"select",valueEnum:{main:(0,c.jsx)(N,{color:"Main"}),yellow:(0,c.jsx)(N,{color:"Yellow"}),green:(0,c.jsx)(N,{color:"Green"}),orange:(0,c.jsx)(N,{color:"Orange"}),purple:(0,c.jsx)(N,{color:"Purple"}),pink:(0,c.jsx)(N,{color:"Pink"}),cyan:(0,c.jsx)(N,{color:"Cyan"}),black:(0,c.jsx)(N,{color:"Black"}),white:(0,c.jsx)(N,{color:"White"})}},team:{title:"Team",key:"team",dataIndex:"team",valueType:"select",valueEnum:{red:(0,c.jsx)(N,{color:"Red"}),blue:(0,c.jsx)(N,{color:"Blue"})}},backgroundImage:{title:"Background Image",key:"backgroundImage",dataIndex:"backgroundImage",valueType:"switch"}};function St(o){for(var e=Object.keys(o),l=[],n=0;n<e.length;n++)we[e[n]]&&l.push(we[e[n]]);return l}var Tt=A.fabric.util.createClass(A.fabric.Rect,{type:"UiRect",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(e){e||(e={}),e.color||(e.color="main"),this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.groupName,this.ratio=e.ratio,this._color=e.color,this.team=e.team,e.lockRotation=!0,e.lockScalingFlip=!0,e.hasRotatingPoint=!1,e.width||(e.width=50/this.ratio),e.height||(e.height=50/this.ratio),e.left||(e.left=50/this.ratio),e.top||(e.top=50/this.ratio),e.strokeWidth||(e.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?e.stroke=w[this._color]:(e.stroke=w[e.team],this._color="main"),e.fill=null,this.callSuper("initialize",e),this.moveTo(e.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){this.set("width",Math.round(this.width*this.scaleX*this.ratio)/this.ratio),this.set("height",Math.round(this.height*this.scaleY*this.ratio)/this.ratio),this.set("left",Math.round(this.left*this.ratio)/this.ratio),this.set("top",Math.round(this.top*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,width:this.width*this.ratio,height:this.height*this.ratio,x:this.left*this.ratio,y:this.top*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(e){this._color=e.color,this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.group,this.set("width",e.width/this.ratio),this.set("height",e.height/this.ratio),this.set("left",e.x/this.ratio),this.set("top",e.y/this.ratio),this.set("strokeWidth",e.lineWidth/this.ratio),this._color==="main"?this.set("stroke",w[this.team]):this.set("stroke",w[this._color]),this.moveTo(e.layer)},setRatio:function(e){this.set("width",this.width*this.ratio/e),this.set("height",this.height*this.ratio/e),this.set("left",this.left*this.ratio/e),this.set("top",this.top*this.ratio/e),this.set("strokeWidth",this.strokeWidth*this.ratio/e),this.ratio=e},setTeam:function(e){this.team=e,this._color==="main"&&this.set("stroke",w[this.team])}}),Dt=A.fabric.util.createClass(A.fabric.Line,{type:"UiLine",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(e){e||(e={}),e.color||(e.color="main"),this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.groupName,this.ratio=e.ratio,this._color=e.color,this.team=e.team,e.lockRotation=!0,e.lockScalingFlip=!0,e.hasRotatingPoint=!1,e.x1||(e.x1=50/this.ratio),e.y1||(e.y1=50/this.ratio),e.x2||(e.x2=100/this.ratio),e.y2||(e.y2=100/this.ratio),e.strokeWidth||(e.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?e.stroke=w[this._color]:(e.stroke=w[e.team],this._color="main"),e.fill=null,this.callSuper("initialize",[e.x1,e.y1,e.x2,e.y2],e),this.moveTo(e.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){var e=this.left,l=this.top,n=Math.round((this.x2-this.x1)*this.scaleX),t=Math.round((this.y2-this.y1)*this.scaleY);this.set("x1",Math.round(e*this.ratio)/this.ratio),this.set("y1",Math.round(l*this.ratio)/this.ratio),this.set("x2",Math.round((e+n)*this.ratio)/this.ratio),this.set("y2",Math.round((l+t)*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,x:this.x1*this.ratio,y:this.y1*this.ratio,x2:this.x2*this.ratio,y2:this.y2*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(e){this._color=e.color,this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.group,this.set("x2",e.x2/this.ratio),this.set("y2",e.y2/this.ratio),this.set("x1",e.x/this.ratio),this.set("y1",e.y/this.ratio),this.set("strokeWidth",e.lineWidth/this.ratio),this._color==="main"?this.set("stroke",w[this.team]):this.set("stroke",w[this._color]),this.moveTo(e.layer)},setRatio:function(e){this.set("x1",this.x1*this.ratio/e),this.set("y1",this.y1*this.ratio/e),this.set("x2",this.x2*this.ratio/e),this.set("y2",this.y2*this.ratio/e),this.set("strokeWidth",this.strokeWidth*this.ratio/e),this.ratio=e},setTeam:function(e){this.team=e,this._color==="main"&&this.set("stroke",w[this.team])}}),ee=A.fabric.util.createClass(A.fabric.Ellipse,{type:"UiEllipse",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(e){e||(e={}),e.color||(e.color="main"),this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.groupName,this.ratio=e.ratio,this._color=e.color,this.team=e.team,e.lockRotation=!0,e.lockScalingFlip=!0,e.hasRotatingPoint=!1,e.rx||(e.rx=50/this.ratio),e.ry||(e.ry=50/this.ratio),e.left||(e.left=50/this.ratio),e.top||(e.top=50/this.ratio),e.strokeWidth||(e.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?e.stroke=w[this._color]:(e.stroke=w[e.team],this._color="main"),e.fill=null,this.callSuper("initialize",e),this.moveTo(e.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){this.set("rx",Math.round(this.rx*this.scaleX*this.ratio)/this.ratio),this.set("ry",Math.round(this.ry*this.scaleY*this.ratio)/this.ratio),this.set("left",Math.round(this.left*this.ratio)/this.ratio),this.set("top",Math.round(this.top*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,rx:this.rx*this.ratio,ry:this.ry*this.ratio,x:(this.left+this.rx)*this.ratio,y:(this.top+this.ry)*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(e){this._color=e.color,this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.group,this.set("rx",e.rx/this.ratio),this.set("ry",e.ry/this.ratio),this.set("left",(e.x-e.rx)/this.ratio),this.set("top",(e.y-e.ry)/this.ratio),this.set("strokeWidth",e.lineWidth/this.ratio),this._color==="main"?this.set("stroke",w[this.team]):this.set("stroke",w[this._color]),this.moveTo(e.layer)},setRatio:function(e){this.set("rx",this.rx*this.ratio/e),this.set("ry",this.ry*this.ratio/e),this.set("left",this.left*this.ratio/e),this.set("top",this.top*this.ratio/e),this.set("strokeWidth",this.strokeWidth*this.ratio/e),this.ratio=e},setTeam:function(e){this.team=e,this._color==="main"&&this.set("stroke",w[this.team])}}),Ot=A.fabric.util.createClass(ee,{type:"UiRound",r:50,initialize:function(e){e||(e={}),e.r||(e.r=50/this.ratio),e.rx=e.r,e.ry=e.r,this.callSuper("initialize",e),this.setControlVisible("ml",!1),this.setControlVisible("mb",!1),this.setControlVisible("mr",!1),this.setControlVisible("mt",!1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,r:this.rx*this.ratio,x:(this.left+this.rx)*this.ratio,y:(this.top+this.ry)*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(e){e.rx=e.r,e.ry=e.r,this.callSuper("fromObject",e)}}),Et=A.fabric.util.createClass(ee,{type:"UiArc",startAngle:0,endAngle:90,initialize:function(e){e||(e={}),e.startAngle||(e.startAngle=0),e.endAngle||(e.endAngle=90),this.callSuper("initialize",e),this.startAngle=e.startAngle,this.endAngle=e.endAngle,this.set("dirty",!0)},toObject:function(){return A.fabric.util.object.extend(this.callSuper("toObject"),{startAngle:this.startAngle,endAngle:this.endAngle})},_render:function(e){var l=(this.startAngle-90)*(Math.PI/180),n=(this.endAngle-90)*(Math.PI/180);e.beginPath(),e.ellipse(0,0,this.rx,this.ry,0,l,n,!1),e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke()},fromObject:function(e){this.set("startAngle",e.startAngle),this.set("endAngle",e.endAngle),this.set("ry",1),this.callSuper("fromObject",e)}});function Q(o,e){var l=Q.canvas||(Q.canvas=document.createElement("canvas")),n=l.getContext("2d");n.font=e;var t=n.measureText(o);return t.width}var te=A.fabric.util.createClass(A.fabric.Text,{type:"UiText",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(e){e||(e={}),e.color||(e.color="main"),this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.groupName,this.ratio=e.ratio,this._color=e.color,this.team=e.team,e.flipY=!0,e.fontSize||(e.fontSize=20/this.ratio),e.fontFamily||(e.fontFamily="ds-digitalnormal"),e.text||(e.text="Text"),e.left||(e.left=50/this.ratio),e.top||(e.top=50/this.ratio),e.width||(e.width=Q(e.text,e.fontSize+"px "+e.fontFamily)/this.ratio),this._color&&this._color!=="main"?e.fill=w[this._color]:(e.fill=w[e.team],this._color="main"),this.callSuper("initialize",e.text,e),this.moveTo(e.layer),this.setControlsVisibility({tl:!1,tr:!1,bl:!1,br:!1,ml:!1,mt:!1,mr:!1,mb:!1,mtr:!1})},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,fontSize:this.fontSize*this.ratio,x:this.left*this.ratio,y:this.top*this.ratio,text:this.text,color:this._color}},fromObject:function(e){this._color=e.color,this.id=e.id,this.name=e.name,this.layer=e.layer,this.groupName=e.group,this.set("left",e.x/this.ratio),this.set("top",e.y/this.ratio),this.set("fontSize",e.fontSize/this.ratio),this.text=e.text,this.set("width",Q(e.text,e.fontSize+"px "+this.fontFamily)/this.ratio),this._color==="main"?this.set("fill",w[this.team]):this.set("fill",w[this._color]),this.moveTo(e.layer)},setRatio:function(e){this.set("width",this.width*this.ratio/e),this.set("left",this.left*this.ratio/e),this.set("top",this.top*this.ratio/e),this.set("fontSize",this.fontSize*this.ratio/e),this.ratio=e},resizeScale:function(){},setTeam:function(e){this.team=e,this._color==="main"&&this.set("fill",w[this.team])}}),Nt=A.fabric.util.createClass(te,{type:"UiNumber",number:12345,initialize:function(e){e||(e={}),this.number=e.number||12345,e.text=this.number.toString(),this.callSuper("initialize",e)},toObject:function(){var e=this.callSuper("toObject");return e.number=this.number,delete e.text,e},fromObject:function(e){this.number=parseInt(e.number),e.text=this.number.toString(),this.callSuper("fromObject",e)}}),Rt=A.fabric.util.createClass(te,{type:"UiFloat",float:12.345,initialize:function(e){e||(e={}),this.float=e.float||12.345,e.text=this.float.toString(),this.callSuper("initialize",e)},toObject:function(){var e=this.callSuper("toObject");return e.float=this.float,delete e.text,e},fromObject:function(e){this.float=parseFloat(e.float),e.text=this.float.toString(),this.callSuper("fromObject",e)}}),Ie={Rect:Tt,Line:Dt,Round:Ot,Ellipse:ee,Arc:Et,Text:te,Number:Nt,Float:Rt};function Lt(o){var e={id:o.id,name:o.name,layer:o.layer,groupName:o.group,ratio:o.ratio,team:o.team},l=o.type.slice(2);return l==="Text"&&Y.warning("Text object is beta now, maybe not same with client!"),new Ie[l](e)}function Ut(){for(var o=[],e=0,l=Object.keys(Ie);e<l.length;e++){var n=l[e];o.push({key:"Insert-".concat(n),label:n})}return o}function ae(o,e,l,n){return re.apply(this,arguments)}function re(){return re=C()(j()().mark(function o(e,l,n,t){var a,i,r,s,u,h,m,f,p,M;return j()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(e){y.next=2;break}return y.abrupt("return");case 2:if(a=1,e.version&&(a=e.version),a!==1){y.next=10;break}return y.next=7,n("default");case 7:for(i=0,r=Object.keys(e);i<r.length;i++)s=r[i],l("_update",e[s]);y.next=22;break;case 10:if(a!==2){y.next=22;break}u=0,h=Object.keys(e.data);case 12:if(!(u<h.length)){y.next=20;break}return m=h[u],y.next=16,n(m);case 16:for(f=0,p=Object.keys(e.data[m]);f<p.length;f++)M=p[f],l("_update",e.data[m][M]);case 17:u++,y.next=12;break;case 20:return y.next=22,n(e.selected);case 22:t();case 23:case"end":return y.stop()}},o)})),re.apply(this,arguments)}var Ft=v(96486),Ce=v.n(Ft);function Ae(o){return o.head>0?E()({},o.data[o.head-1]):null}function Se(o){return o.head<o.data.length-1?E()({},o.data[o.head+1]):null}var Pt=function(){function o(){S()(this,o),x()(this,"cacheTimer",null),x()(this,"updateTimer",null),x()(this,"now",null),x()(this,"_previous",null),x()(this,"_next",null),x()(this,"his",null);var e=localStorage.getItem("history"),l={data:[{}],head:0,version:1};e?l=JSON.parse(e):(e=localStorage.getItem("data"),e?l.data[0]=JSON.parse(e):l.data[0]={version:2,data:{default:{}},selected:"default"},localStorage.setItem("history",JSON.stringify(l))),this.now=l.data[l.head],this._previous=Ae(l),this._next=Se(l)}return T()(o,[{key:"save",value:function(){var l=this;this.cacheTimer&&clearTimeout(this.cacheTimer),this.cacheTimer=setTimeout(function(){l.his.head>50&&(l.his.data=l.his.data.slice(l.his.head-50),l.his.head=50),l.his.head<l.his.data.length-20&&(l.his.data=l.his.data.slice(0,l.his.head+20)),localStorage.setItem("history",JSON.stringify(l.his)),l.his=null},2e3)}},{key:"read",value:function(){this.his||(this.his=JSON.parse(localStorage.getItem("history")))}},{key:"get",value:function(){return{now:this.now,couldNext:this._next!==null,couldPrevious:this._previous!==null}}},{key:"reset",value:function(l){return this._previous=null,this._next=null,this.his={data:[l],head:0,version:1},this.save(),this.get()}},{key:"next",value:function(){return this._next&&(this._previous=this.now,this.now=this._next,this.read(),this.his.head++,this._next=Se(this.his),this.save()),this.get()}},{key:"previous",value:function(){return this._previous&&(this._next=this.now,this.now=this._previous,this.read(),this.his.head--,this._previous=Ae(this.his),this.save()),this.get()}},{key:"cancelUpdate",value:function(){this.updateTimer&&clearTimeout(this.updateTimer)}},{key:"update",value:function(l){var n=this;this.updateTimer&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout(function(){Ce().isEqual(l,n.now)||(n._previous=n.now,n.now=l,n.read(),n.his.data=n.his.data.slice(0,n.his.head+1),n.his.data.push(l),n.his.head++,n._next=null,n.save())},500)}}]),o}(),Zt=Pt,Bt=v(30819),Yt=function(o){D()(l,o);var e=O()(l);function l(){var n;S()(this,l);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a)),x()(k()(n),"objects",{default:{}}),x()(k()(n),"data",{}),x()(k()(n),"state",{properties:null,selectedId:[],frame:"default",uiWindow:{height:1080,width:1920,ratio:1,team:"red",backgroundImage:!0},infoModalShow:!1,data:{}}),x()(k()(n),"canvas",null),x()(k()(n),"canvasRef",(0,z.createRef)()),x()(k()(n),"propertiesRef",(0,z.createRef)()),x()(k()(n),"background",null),x()(k()(n),"his",new Zt),x()(k()(n),"moveTimer",null),x()(k()(n),"moveTimeout",null),n}return T()(l,[{key:"getNewDataId",value:function(){return Object.keys(this.state.data).length===0?0:Math.max.apply(Math,me()(Object.keys(this.state.data)))+1}},{key:"save",value:function(){wt(this.data,"ui.rmui",this.state.frame)}},{key:"updateHistory",value:function(){var t=this;setTimeout(function(){var a={version:2,data:t.data,selected:t.state.frame};Ce().isEqual(a,t.his.now)||(t.his.update(a),t.props.setCouldDo({couldNext:!1,couldPrevious:!0}))},100)}},{key:"getData",value:function(){return this.data}},{key:"select",value:function(t,a){var i=this;if(t.length===0)this.setState({properties:null,selectedId:[]}),this.canvas.discardActiveObject(),this.canvas.renderAll();else if(t[0]===-2)this.setState({properties:this.state.uiWindow,selectedId:[-2]}),this.canvas.discardActiveObject(),this.canvas.renderAll();else if(t.length===1)this.setState({properties:this.state.data[t[0]],selectedId:[t[0]]}),this.canvas.setActiveObject(this.objects[this.state.frame][t[0]]),this.canvas.renderAll();else if(this.setState({properties:null,selectedId:t}),!a){var r=t.map(function(u){return i.objects[i.state.frame][u]}),s=new A.fabric.ActiveSelection(r,{canvas:this.canvas,hasControls:!1});this.canvas.setActiveObject(s),this.canvas.renderAll()}}},{key:"reset",value:function(){var n=C()(j()().mark(function a(){return j()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(this.canvas.clear(),this.setBackground(v(25665)),this.canvas.backgroundColor="#fff",Object.keys(this.objects).includes("default")){r.next=6;break}return r.next=6,this.onFrameEvent("add","default");case 6:return this.objects.default={},r.next=9,this.onFrameEvent("change","default");case 9:this.objects={default:{}},this.props.onFrameChange({frames:["default"],selected:"default"}),this.select([]),this.resetCanvasSize(),this.objectsToData();case 14:case"end":return r.stop()}},a,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"resetCanvasSize",value:function(){if(this.canvas){var t,a=this.canvasRef.current.clientWidth,i=this.canvasRef.current.clientHeight,r=E()({},this.state.uiWindow);a/i<r.width/r.height?(i=a*r.height/r.width,r.ratio=r.width/a):(a=i*r.width/r.height,r.ratio=r.height/i),this.setState({uiWindow:r}),this.canvas.setHeight(i),this.canvas.setWidth(a),this.canvas.viewportTransform[5]=i,this.canvas.viewportTransform[3]=-1;var s=this.canvasRef.current.clientWidth,u=this.canvasRef.current.clientHeight,h=s-a,m=u-i,f=document.getElementById("coordinateDisplay");f.style.right="".concat(h+12,"px"),f.style.bottom="".concat(m+25,"px");for(var p=0,M=Object.keys(this.objects[this.state.frame]);p<M.length;p++){var g=M[p];this.objects[this.state.frame][g].setRatio(r.ratio)}(t=this.background)===null||t===void 0||t.set({scaleX:1/r.ratio,scaleY:1/r.ratio}),this.canvas.renderAll(),this.objectsToData(),this.setState({infoModalShow:!1})}}},{key:"onPropertiesChange",value:function(t,a){var i=this;if(this.state.selectedId[0]===-2){if(a.team!==this.state.uiWindow.team){for(var r=0,s=Object.keys(this.objects[this.state.frame]);r<s.length;r++){var u=s[r];this.objects[this.state.frame][u].setTeam(a.team)}this.canvas.renderAll(),this.objectsToData()}if(this.setState({uiWindow:a,properties:a},function(){i.resetCanvasSize()}),a.backgroundImage!==this.state.uiWindow.backgroundImage)if(a.backgroundImage){var h,m=this.state.uiWindow.ratio;(h=this.background)===null||h===void 0||h.set({scaleX:1/m,scaleY:1/m}),this.canvas.setBackgroundImage(this.background),this.canvas.renderAll()}else this.canvas.setBackgroundImage(null),this.canvas.renderAll();(a.width!==this.state.uiWindow.width||a.height!==this.state.uiWindow.height)&&K.warning({title:"Warning",content:"Modify UI window width and height may cause unknown error."})}else this.state.selectedId.length===1&&(this.objects[this.state.frame][this.state.selectedId[0]].fromObject(a),this.canvas.renderAll(),this.objectsToData(),this.updateHistory())}},{key:"setBackground",value:function(t){var a=this;A.fabric.Image.fromURL(t,function(i,r){var s;a.background=i;var u=a.state.uiWindow.ratio;(s=a.background)===null||s===void 0||s.set({scaleX:1/u,scaleY:-1/u}),a.state.uiWindow.backgroundImage&&(a.canvas.setBackgroundImage(a.background),a.canvas.renderAll())})}},{key:"componentDidMount",value:function(){var t=this,a=this;this.canvas=new A.fabric.Canvas("ui"),this.setBackground(v(25665)),this.canvas.backgroundColor="#fff",window.addEventListener("resize",function(){t.resetCanvasSize()},!1),window.addEventListener("copy",function(r){var s=null;!_(r.target)&&a.state.selectedId.length!==0&&a.state.selectedId[0]!==-2&&(r.preventDefault(),s=JSON.stringify(a.state.selectedId.map(function(u){return a.state.data[u]})),r.clipboardData.setData("text",s))}),window.addEventListener("paste",function(r){for(var s=!1,u=r.clipboardData.items,h=0;h<u.length;h++)if(u[h].type.indexOf("image")===0){r.preventDefault(),s=!0;var m=u[h].getAsFile(),f=new FileReader;f.onload=function(J){a.setBackground(J.target.result)},f.readAsDataURL(m)}if(!s&&!_(r.target))try{r.preventDefault();var p=r.clipboardData.getData("text"),M=JSON.parse(p);Array.isArray(M)||(M=[M]);var g=[],y=20,L=I()(M),V;try{var ur=function(){var de=V.value;setTimeout(function(){de.id=a.getNewDataId(),g.push(de.id),a.onObjectEvent("_update",de)},y),y+=20};for(L.s();!(V=L.n()).done;)ur()}catch(J){L.e(J)}finally{L.f()}setTimeout(function(){a.select(g),t.updateHistory()},y)}catch(J){Y.warning("Invalid data")}}),window.addEventListener("keydown",function(r){if(r.key==="Delete"&&a.state.selectedId.length!==0&&a.state.selectedId[0]!==-2){var s=I()(a.state.selectedId),u;try{for(s.s();!(u=s.n()).done;){var h=u.value;a.onObjectEvent("remove",{id:h})}}catch(p){s.e(p)}finally{s.f()}t.updateHistory()}if(r.ctrlKey&&r.key==="z"&&!r.shiftKey?(r.preventDefault(),t.onHistoryEvent("previous")):r.ctrlKey&&(0,Bt.toLower)(r.key)==="z"&&r.shiftKey&&(r.preventDefault(),t.onHistoryEvent("next")),["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(r.key)&&!_(r.target)){var m=function(M,g){switch(g*=a.state.uiWindow.ratio,M){case"ArrowUp":f.top+=g;break;case"ArrowDown":f.top-=g;break;case"ArrowLeft":f.left-=g;break;case"ArrowRight":f.left+=g;break}f instanceof A.fabric.ActiveSelection?f.getObjects().forEach(function(y){y.setCoords(),y.resizeScale()}):(f.setCoords(),f.resizeScale()),a.canvas.renderAll(),a.objectsToData(),a.updateHistory()},f=a.canvas.getActiveObject();if(!f)return;r.preventDefault(),m(r.key,2),t.moveTimeout&&clearTimeout(t.moveTimeout),t.moveTimer&&clearInterval(t.moveTimer),t.moveTimeout=setTimeout(function(){t.moveTimer=setInterval(function(){m(r.key,1)},500)},1500)}}),window.addEventListener("keyup",function(r){["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(r.key)&&(clearTimeout(t.moveTimeout),clearInterval(t.moveTimer))}),this.canvas.on({"mouse:up":function(){for(var s=0,u=Object.keys(a.objects[a.state.frame]);s<u.length;s++){var h=u[s];a.objects[a.state.frame][h].resizeScale()}a.canvas.renderAll(),a.objectsToData(),a.updateHistory();var m=a.canvas.getActiveObject();setTimeout(function(){if(m)if(m instanceof A.fabric.ActiveSelection){var f=m.getObjects().map(function(p){return p.id});a.select(f,!0)}else a.select([m.id]);else a.select([])},100)},"mouse:move":function(s){var u=t.canvas.getPointer(s.e),h=t.state.uiWindow.ratio,m=Math.round(u.x*h),f=Math.round(u.y*h),p=document.getElementById("coordinateDisplay");p.style.display="block",p.textContent="x: ".concat(m,", y: ").concat(f)},"mouse:out":function(){var s=document.getElementById("coordinateDisplay");s.style.display="none"}});var i=this.his.get();this.props.setCouldDo(i),ae(i.now,function(r,s){return t.onObjectEvent(r,s)},function(r){return a.onFrameEvent("change",r)},function(){return t.canvas.renderAll()}),this.his.cancelUpdate(),this.resetCanvasSize()}},{key:"upload",value:function(){var t=this,a=this;ze(".rmui").then(function(i){var r=new FileReader;r.onload=function(){var s=C()(j()().mark(function u(h){return j()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,a.reset();case 2:return f.next=4,ae(JSON.parse(h.target.result),function(p,M){return a.onObjectEvent(p,M)},function(p){return a.onFrameEvent("change",p)},function(){return a.canvas.renderAll()});case 4:a.objectsToData(),a.his.reset({version:2,data:t.data,selected:t.state.frame});case 6:case"end":return f.stop()}},u)}));return function(u){return s.apply(this,arguments)}}(),r.readAsText(i)}).catch(function(i){})}},{key:"objectsToData",value:function(){for(var t=this,a={},i=0,r=Object.keys(this.objects);i<r.length;i++){var s=r[i];a[s]={};for(var u=0,h=Object.keys(this.objects[s]);u<h.length;u++){var m=h[u],f=this.objects[s][m].toObject();a[s][f.id]=f}}if(this.data=a,this.setState({data:a[this.state.frame]}),this.state.selectedId.length===1){var p;this.state.selectedId[0]===-2?p=this.state.uiWindow:p=a[this.state.frame][this.state.selectedId[0]],this.setState({properties:E()({},p)},function(){var M;(M=t.propertiesRef.current)===null||M===void 0||M.reload()})}}},{key:"onObjectEvent",value:function(t,a){var i=this;function r(u){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,m={id:u.id,name:u.name,layer:u.layer,group:u.group,type:u.type,ratio:i.state.uiWindow.ratio,team:i.state.uiWindow.team},f=Lt(m);i.objects[i.state.frame][u.id]=f,h&&f.fromObject(u),f.setRatio(i.state.uiWindow.ratio);for(var p=i.canvas.getObjects(),M=!0,g=0,y=Object.keys(p);g<y.length;g++){var L=y[g];if(p[L].id===f.id){M=!1;break}}i.canvas.add(f)}if(t==="add")(!a.id||this.objects[this.state.frame][a.id])&&(a.id=this.getNewDataId(),r(a));else if(t==="_add")a.id=this.getNewDataId(),a.ratio=this.state.uiWindow.ratio,a.team=this.state.uiWindow.team,r(a,!1);else if(t==="update")this.objects[this.state.frame][a.id]&&this.objects[this.state.frame][a.id].fromObject(a);else if(t==="_update")a.id>=0&&this.objects[this.state.frame][a.id]?this.objects[this.state.frame][a.id].fromObject(a):r(a);else if(t==="remove"){var s=a.id;this.objects[this.state.frame][s]&&(this.select([]),this.canvas.remove(this.objects[this.state.frame][s]),this.canvas.renderAll(),delete this.objects[this.state.frame][s],this.objectsToData())}else t==="setAttr"&&this.objects[this.state.frame][a.id]&&this.objects[this.state.frame][a.id].set(a.payload);this.objectsToData(),this.canvas.renderAll()}},{key:"setFrame",value:function(t){this.objects[t]||(this.objects[t]={});for(var a=0,i=Object.keys(this.objects[this.state.frame]);a<i.length;a++){var r=i[a];this.canvas.remove(this.objects[this.state.frame][r])}this.canvas.renderAll();var s=this;return new Promise(function(u,h){s.setState({frame:t},function(){for(var m=s.canvas.getObjects(),f=0,p=Object.keys(s.objects[s.state.frame]);f<p.length;f++){for(var M=p[f],g=!0,y=0,L=Object.keys(m);y<L.length;y++){var V=L[y];if(m[V].id===s.objects[s.state.frame][M].id){g=!1;break}}g&&s.canvas.add(s.objects[s.state.frame][M])}s.objectsToData(),s.select([]),s.canvas.renderAll(),u()})})}},{key:"onHistoryEvent",value:function(){var n=C()(j()().mark(function a(i){var r=this,s;return j()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(i!=="update"){h.next=5;break}return this.updateHistory(),h.abrupt("return");case 5:if(i!=="reset"){h.next=11;break}return s=this.his.reset({version:2,data:{default:{}},selected:"default"}),this.props.setCouldDo(s),h.abrupt("return");case 11:if(i!=="resetNow"){h.next=15;break}return s=this.his.reset(this.data),this.props.setCouldDo(s),h.abrupt("return");case 15:return i==="previous"?s=this.his.previous():i==="next"&&(s=this.his.next()),this.props.setCouldDo(s),h.next=19,this.reset();case 19:return h.next=21,ae(s.now,function(m,f){return r.onObjectEvent(m,f)},function(m){return r.onFrameEvent("change",m)},function(){return r.canvas.renderAll()});case 21:this.his.cancelUpdate();case 22:case"end":return h.stop()}},a,this)}));function t(a){return n.apply(this,arguments)}return t}()},{key:"onFrameEvent",value:function(){var n=C()(j()().mark(function a(i,r){var s,u,h,m,f,p;return j()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(i!=="add"){g.next=6;break}return this.objects[r]={},g.next=4,this.setFrame(r);case 4:g.next=40;break;case 6:if(i!=="remove"){g.next=19;break}if(Object.keys(this.objects).length!==1){g.next=10;break}return Y.error("Cannot remove last frame!"),g.abrupt("return");case 10:if(s=r,this.state.frame!==r){g.next=16;break}return r=Object.keys(this.objects)[0],r===s&&(r=Object.keys(this.objects)[1]),g.next=16,this.setFrame(r);case 16:delete this.objects[s],g.next=40;break;case 19:if(i!=="change"){g.next=24;break}return g.next=22,this.setFrame(r);case 22:g.next=40;break;case 24:if(i!=="copy"){g.next=34;break}return this.objects[r]={},u=this.objects[this.state.frame],g.next=29,this.setFrame(r);case 29:for(h=0,m=Object.keys(u);h<m.length;h++)f=m[h],this.onObjectEvent("_update",u[f].toObject());this.objectsToData(),this.canvas.renderAll(),g.next=40;break;case 34:if(i!=="rename"){g.next=40;break}return p=this.state.frame,g.next=38,this.onFrameEvent("copy",r);case 38:return g.next=40,this.onFrameEvent("remove",p);case 40:this.props.onFrameChange({frames:Object.keys(this.objects),selected:r}),this.objectsToData(),this.updateHistory();case 43:case"end":return g.stop()}},a,this)}));function t(a,i){return n.apply(this,arguments)}return t}()},{key:"render",value:function(){var t,a=this;return(t=this.canvas)===null||t===void 0||t.renderAll(),(0,c.jsx)("div",{style:{width:"100vw",height:"calc(100% - 20px)",padding:10},children:(0,c.jsxs)(F.eh,{autoSaveId:"container_h",className:"container",direction:"horizontal",children:[(0,c.jsx)(F.s_,{defaultSize:25,minSize:15,maxSize:45,order:1,children:(0,c.jsxs)(F.eh,{autoSaveId:"card_v",className:"full",direction:"vertical",children:[(0,c.jsx)(F.s_,{defaultSize:50,minSize:25,maxSize:75,children:(0,c.jsx)(kt,{onSelect:function(r){return a.select(r)},onObjectEvent:function(r,s){return a.onObjectEvent(r,s)},onReset:function(){return a.reset()},data:this.state.data,editable:this.props.editable,selectedId:this.state.selectedId})}),(0,c.jsx)(F.OT,{className:"panel-resize-handle",style:{height:6}}),(0,c.jsx)(F.s_,{defaultSize:50,children:(0,c.jsx)(pe.Z,{size:"small",title:"Properties",style:{height:"100%"},children:(0,c.jsxs)("div",{className:"card-body",children:[this.state.properties?(0,c.jsx)(ht.vY,{dataSource:this.state.properties,columns:St(this.state.properties),ref:this.propertiesRef,editable:this.props.editable?{onSave:function(r,s){return a.onPropertiesChange(r,s)}}:null,column:1,style:{marginTop:4}},this.state.selectedId[0]):(0,c.jsx)(ge.Z,{image:ge.Z.PRESENTED_IMAGE_SIMPLE}),this.state.selectedId[0]===-2?(0,c.jsxs)(U.Z,{direction:"vertical",size:"middle",style:{display:"flex"},children:[(0,c.jsx)(b.ZP,{onClick:function(){return ze("image/*").then(function(r){a.setState({imageUploadShow:!1}),a.setBackground(It(r))}).catch(function(r){})},children:"Upload Background"}),(0,c.jsx)(b.ZP,{onClick:function(){return a.setBackground(v(25665))},children:"Reset Background"})]}):(0,c.jsx)("div",{})]})})})]})}),(0,c.jsx)(F.OT,{className:"panel-resize-handle",style:{width:6}}),(0,c.jsx)(F.s_,{defaultSize:75,order:2,onResize:function(r){return setTimeout(function(){return a.resetCanvasSize()},100)},children:(0,c.jsxs)("div",{className:"full",ref:this.canvasRef,children:[(0,c.jsx)("canvas",{className:"full",id:"ui"}),(0,c.jsx)("div",{id:"coordinateDisplay",style:{bottom:0,right:0,display:"none",padding:"1px 6px 1px 6px"}})]})})]})})}}]),l}(z.Component),Wt=Yt,Ht=v(13769),Te=v.n(Ht),ie=v(21797),Gt=v(75081),De=v(85576),Oe=v(92462),Ee=v(553);function Jt(){return ne.apply(this,arguments)}function ne(){return ne=C()(j()().mark(function o(){var e,l,n,t,a,i,r,s,u,h,m,f,p;return j()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!G()){g.next=14;break}return g.next=3,(0,Oe.Py)();case 3:if(e=g.sent,!e.manifest){g.next=11;break}return l=e.manifest.version.slice(1).split(".").map(Number),n=localStorage.getItem("version_ignored"),n||(n="v1.0.1"),t=n.slice(1).split(".").map(Number),a=l[0]>t[0]||l[1]>t[1]||l[2]>t[2],g.abrupt("return",{shouldUpdate:a,manifest:e.manifest});case 11:return g.abrupt("return",e);case 14:return i=Date.now(),g.next=17,fetch("https://ui.bismarck.xyz/update.json?".concat(i));case 17:return r=g.sent,g.next=20,r.json();case 20:return s=g.sent,u=s.notes,h=s.version.slice(1).split(".").map(Number),m=localStorage.getItem("version_ignored"),m||(m="v1.0.1"),f=m.slice(1).split(".").map(Number),p=h[0]>f[0]||h[1]>f[1]||h[2]>f[2],g.abrupt("return",{shouldUpdate:p,manifest:{body:u,version:s.version}});case 28:case"end":return g.stop()}},o)})),ne.apply(this,arguments)}function Qt(){return se.apply(this,arguments)}function se(){return se=C()(j()().mark(function o(){return j()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!G()){l.next=6;break}return l.next=3,(0,Oe.F_)();case 3:return l.abrupt("return",l.sent);case 6:window.location.reload();case 7:case"end":return l.stop()}},o)})),se.apply(this,arguments)}var le={checkUpdate:Jt,installUpdate:Qt,relaunch:Ee.R},Ne=v(21798),$t=["node"],Vt=le.checkUpdate,Kt=le.installUpdate,Xt=le.relaunch,qt=function(o){D()(l,o);var e=O()(l);function l(){var n;S()(this,l);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a)),x()(k()(n),"state",{step:0,content:"",version:""}),n}return T()(l,[{key:"handleClose",value:function(){this.setState({step:0})}},{key:"handleOk",value:function(){var n=C()(j()().mark(function a(){return j()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,this.setState({step:2}),r.next=4,Kt();case 4:return r.next=6,Xt();case 6:if(r.sent){r.next=8;break}this.setState({step:3});case 8:r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),this.setState({step:-1});case 13:case"end":return r.stop()}},a,this,[[0,10]])}));function t(){return n.apply(this,arguments)}return t}()},{key:"check",value:function(){var t=this,a=/(https:\/\/github\.com\/bismarckkk\/RM-UI-Designer\/pull\/)(\d+)/g,i=/(https:\/\/github\.com\/bismarckkk\/RM-UI-Designer\/compare\/)(v\d+\.\d+\.\d+\.\.\.v\d+\.\d+\.\d+)/g;C()(j()().mark(function r(){var s,u,h;return j()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,f.next=3,Vt();case 3:s=f.sent,u=s.shouldUpdate,h=s.manifest,u&&t.setState({step:1,content:h.body.replace(a,function(p,M,g){return"[#".concat(g,"](").concat(M).concat(g,")")}).replace(i,function(p,M,g){return"[#".concat(g,"](").concat(M).concat(g,")")}),version:h.version}),f.next=12;break;case 9:f.prev=9,f.t0=f.catch(0),Y.warning("Failed to check update.");case 12:case"end":return f.stop()}},r,null,[[0,9]])}))()}},{key:"ignore",value:function(){localStorage.setItem("version_ignored",this.state.version),this.handleClose()}},{key:"componentDidMount",value:function(){this.check()}},{key:"render",value:function(){var t=(0,c.jsx)("div",{});return this.state.step===-1?t=(0,c.jsx)(ie.ZP,{status:"error",title:"Update Failed"}):this.state.step===1?t=(0,c.jsx)(Ne.U,{components:{a:function(i){var r=i.node,s=Te()(i,$t);return(0,c.jsx)("a",E()(E()({},s),{},{target:"_blank"}))}},children:this.state.content}):this.state.step===2?t=(0,c.jsx)("div",{style:{padding:40,textAlign:"center",color:"var(--ant-color-text)"},children:(0,c.jsxs)(U.Z,{direction:"vertical",children:[(0,c.jsx)(Gt.Z,{size:"large"}),(0,c.jsx)("h3",{children:"Updating..."})]})}):this.state.step===3&&(t=(0,c.jsx)(ie.ZP,{status:"success",title:"Update Success",subTitle:"Please restart the app to apply the update."})),(0,c.jsx)(De.Z,{title:"Auto Update",open:this.state.step,closable:this.state.step>1,maskClosable:this.state.step>1,footer:this.state.step>1?null:(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(b.ZP,{onClick:this.ignore.bind(this),children:"Ignore"}),(0,c.jsx)(b.ZP,{onClick:this.handleClose.bind(this),children:"Cancel"}),(0,c.jsx)(b.ZP,{type:"primary",onClick:this.handleOk.bind(this),children:"Update"})]}),children:t})}}]),l}(z.Component),_t=qt,ea=v(73711),ta=v(27732),aa=v(11713),ra=v(1210),ia=v(52745),na=v(97937),Re=v(16165),sa=v(37476),la=v(5966),oa=function(o){D()(l,o);var e=O()(l);function l(){var n;S()(this,l);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a)),x()(k()(n),"state",{title:"",open:!1,frames:[]}),x()(k()(n),"promise",null),n}return T()(l,[{key:"open",value:function(t,a){var i=this;return new Promise(function(r,s){i.setState({title:t,open:!0,frames:a}),i.promise={resolve:r,reject:s}})}},{key:"render",value:function(){var t=this;return(0,c.jsx)(sa.Y,{title:this.state.title,autoFocusFirstInput:!0,width:240,open:this.state.open,onOpenChange:function(i){t.promise&&!i&&t.state.open&&t.promise.reject(),t.setState({open:i})},onFinish:function(){var a=C()(j()().mark(function i(r){return j()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t.promise.resolve(r.frame),t.promise=null,u.abrupt("return",!0);case 3:case"end":return u.stop()}},i)}));return function(i){return a.apply(this,arguments)}}(),children:(0,c.jsx)(la.Z,{name:"frame",label:"New Frame Name",width:"sm",rules:[{required:!0,message:"Please input frame name!"},function(a){var i=a.getFieldValue,r=t;return{validator:function(u,h){{var m=!0,f=i("frame"),p=I()(r.state.frames),M;try{for(p.s();!(M=p.n()).done;){var g=M.value;if(g===f){m=!1;break}}}catch(y){p.e(y)}finally{p.f()}return m?Promise.resolve():Promise.reject(new Error("Cannot create same name frame!"))}}}}]})})}}]),l}(z.Component),ca=oa,ua=v(40249),ha=["node"],da=function(o){D()(l,o);var e=O()(l);function l(){var n;S()(this,l);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a)),x()(k()(n),"state",{open:!1,content:null}),n}return T()(l,[{key:"show",value:function(){this.setState({open:!0})}},{key:"componentDidMount",value:function(){var t=this;fetch(v(99734)).then(function(a){return a.text()}).then(function(a){t.setState({content:a})})}},{key:"render",value:function(){var t=this;return(0,c.jsx)(De.Z,{title:"About",onOk:function(){return t.setState({open:!1})},onCancel:function(){return t.setState({open:!1})},footer:null,open:this.state.open,children:this.state.content?(0,c.jsx)(Ne.U,{components:{a:function(i){var r=i.node,s=Te()(i,ha);return(0,c.jsx)("a",E()(E()({},s),{},{target:"_blank"}))}},children:this.state.content}):(0,c.jsx)(ua.Z,{})})}}]),l}(z.Component),fa=da,va=Object.defineProperty,Le=Object.getOwnPropertySymbols,ma=Object.prototype.hasOwnProperty,pa=Object.prototype.propertyIsEnumerable,Ue=(o,e,l)=>e in o?va(o,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[e]=l,ga=(o,e)=>{for(var l in e||(e={}))ma.call(e,l)&&Ue(o,l,e[l]);if(Le)for(var l of Le(e))pa.call(e,l)&&Ue(o,l,e[l]);return o};const ya=o=>z.createElement("svg",ga({className:"moon_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:200,height:200},o),z.createElement("path",{d:"M472 991.6c-157 0-304.4-77.2-394.3-206.6-6.9-9.9-7.6-22.9-1.8-33.6 5.8-10.7 17.1-17.8 29.2-16.7l7.7.4c2.4.2 4.8.3 7.2.3 229.4 0 416-186.6 416-416 0-85-25.7-167-74.3-236.9-6.9-9.9-7.6-22.9-1.8-33.6 5.8-10.7 17.2-17.6 29.2-16.7C748.7 41.6 952 252.1 952 511.6c0 264.7-215.3 480-480 480zM169.7 797.1c78.1 82.7 187.2 130.6 302.3 130.6 229.4 0 416-186.6 416-416 0-204-144.9-373-339.7-408.6 34 66.9 51.7 140.7 51.7 216.6 0 247.8-188.9 452.4-430.3 477.4z",fill:"#2c2c2c"}));var hr="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTQ3MiA5OTEuNmMtMTU3IDAtMzA0LjQtNzcuMi0zOTQuMy0yMDYuNi02LjktOS45LTcuNi0yMi45LTEuOC0zMy42IDUuOC0xMC43IDE3LjEtMTcuOCAyOS4yLTE2LjdsNy43LjRjMi40LjIgNC44LjMgNy4yLjMgMjI5LjQgMCA0MTYtMTg2LjYgNDE2LTQxNiAwLTg1LTI1LjctMTY3LTc0LjMtMjM2LjktNi45LTkuOS03LjYtMjIuOS0xLjgtMzMuNiA1LjgtMTAuNyAxNy4yLTE3LjYgMjkuMi0xNi43Qzc0OC43IDQxLjYgOTUyIDI1Mi4xIDk1MiA1MTEuNmMwIDI2NC43LTIxNS4zIDQ4MC00ODAgNDgwek0xNjkuNyA3OTcuMWM3OC4xIDgyLjcgMTg3LjIgMTMwLjYgMzAyLjMgMTMwLjYgMjI5LjQgMCA0MTYtMTg2LjYgNDE2LTQxNiAwLTIwNC0xNDQuOS0zNzMtMzM5LjctNDA4LjYgMzQgNjYuOSA1MS43IDE0MC43IDUxLjcgMjE2LjYgMCAyNDcuOC0xODguOSA0NTIuNC00MzAuMyA0NzcuNHoiIGZpbGw9IiMyYzJjMmMiLz48L3N2Zz4=",Ma=Object.defineProperty,Fe=Object.getOwnPropertySymbols,xa=Object.prototype.hasOwnProperty,ja=Object.prototype.propertyIsEnumerable,Pe=(o,e,l)=>e in o?Ma(o,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[e]=l,ka=(o,e)=>{for(var l in e||(e={}))xa.call(e,l)&&Pe(o,l,e[l]);if(Fe)for(var l of Fe(e))ja.call(e,l)&&Pe(o,l,e[l]);return o};const ba=o=>z.createElement("svg",ka({className:"sun_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:200,height:200},o),z.createElement("path",{d:"M522.88 874.667A21.333 21.333 0 0 1 544.213 896v85.333a21.333 21.333 0 0 1-21.333 21.334h-21.333a21.333 21.333 0 0 1-21.334-21.334V896a21.333 21.333 0 0 1 21.334-21.333h21.333zm268.416-107.52 60.352 60.352a21.333 21.333 0 0 1 0 30.165l-15.083 15.083a21.333 21.333 0 0 1-30.186 0l-60.331-60.352a21.333 21.333 0 0 1 0-30.166l15.083-15.082a21.333 21.333 0 0 1 30.165 0zm-527.957 0 15.082 15.082a21.333 21.333 0 0 1 0 30.166l-60.352 60.352a21.333 21.333 0 0 1-30.165 0l-15.083-15.083a21.333 21.333 0 0 1 0-30.165l60.331-60.352a21.333 21.333 0 0 1 30.187 0zM512 277.333c141.376 0 256 114.624 256 256s-114.624 256-256 256-256-114.624-256-256 114.624-256 256-256zm0 64a192 192 0 1 0 0 384 192 192 0 0 0 0-384zm448.213 160a21.333 21.333 0 0 1 21.334 21.334V544a21.333 21.333 0 0 1-21.334 21.333H874.88A21.333 21.333 0 0 1 853.547 544v-21.333a21.333 21.333 0 0 1 21.333-21.334h85.333zm-810.666 0a21.333 21.333 0 0 1 21.333 21.334V544a21.333 21.333 0 0 1-21.333 21.333H64.213A21.333 21.333 0 0 1 42.88 544v-21.333a21.333 21.333 0 0 1 21.333-21.334h85.334zm687.04-307.413 15.082 15.083a21.333 21.333 0 0 1 0 30.165l-60.352 60.352a21.333 21.333 0 0 1-30.165 0l-15.083-15.083a21.333 21.333 0 0 1 0-30.165L806.4 193.92a21.333 21.333 0 0 1 30.187 0zm-618.496 0 60.352 60.352a21.333 21.333 0 0 1 0 30.165L263.36 299.52a21.333 21.333 0 0 1-30.187 0l-60.352-60.373a21.333 21.333 0 0 1 0-30.166l15.083-15.082a21.333 21.333 0 0 1 30.165 0zM522.9 64a21.333 21.333 0 0 1 21.334 21.333v85.334A21.333 21.333 0 0 1 522.9 192h-21.333a21.333 21.333 0 0 1-21.333-21.333V85.333A21.333 21.333 0 0 1 501.568 64h21.333z",fill:"#ebebeb"}));var dr="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTUyMi44OCA4NzQuNjY3QTIxLjMzMyAyMS4zMzMgMCAwIDEgNTQ0LjIxMyA4OTZ2ODUuMzMzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzMzIDIxLjMzNGgtMjEuMzMzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzM0LTIxLjMzNFY4OTZhMjEuMzMzIDIxLjMzMyAwIDAgMSAyMS4zMzQtMjEuMzMzaDIxLjMzM3ptMjY4LjQxNi0xMDcuNTIgNjAuMzUyIDYwLjM1MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDAgMzAuMTY1bC0xNS4wODMgMTUuMDgzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTg2IDBsLTYwLjMzMS02MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NmwxNS4wODMtMTUuMDgyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTY1IDB6bS01MjcuOTU3IDAgMTUuMDgyIDE1LjA4MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDAgMzAuMTY2bC02MC4zNTIgNjAuMzUyYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTY1IDBsLTE1LjA4My0xNS4wODNhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NWw2MC4zMzEtNjAuMzUyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTg3IDB6TTUxMiAyNzcuMzMzYzE0MS4zNzYgMCAyNTYgMTE0LjYyNCAyNTYgMjU2cy0xMTQuNjI0IDI1Ni0yNTYgMjU2LTI1Ni0xMTQuNjI0LTI1Ni0yNTYgMTE0LjYyNC0yNTYgMjU2LTI1NnptMCA2NGExOTIgMTkyIDAgMSAwIDAgMzg0IDE5MiAxOTIgMCAwIDAgMC0zODR6bTQ0OC4yMTMgMTYwYTIxLjMzMyAyMS4zMzMgMCAwIDEgMjEuMzM0IDIxLjMzNFY1NDRhMjEuMzMzIDIxLjMzMyAwIDAgMS0yMS4zMzQgMjEuMzMzSDg3NC44OEEyMS4zMzMgMjEuMzMzIDAgMCAxIDg1My41NDcgNTQ0di0yMS4zMzNhMjEuMzMzIDIxLjMzMyAwIDAgMSAyMS4zMzMtMjEuMzM0aDg1LjMzM3ptLTgxMC42NjYgMGEyMS4zMzMgMjEuMzMzIDAgMCAxIDIxLjMzMyAyMS4zMzRWNTQ0YTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzMzIDIxLjMzM0g2NC4yMTNBMjEuMzMzIDIxLjMzMyAwIDAgMSA0Mi44OCA1NDR2LTIxLjMzM2EyMS4zMzMgMjEuMzMzIDAgMCAxIDIxLjMzMy0yMS4zMzRoODUuMzM0em02ODcuMDQtMzA3LjQxMyAxNS4wODIgMTUuMDgzYTIxLjMzMyAyMS4zMzMgMCAwIDEgMCAzMC4xNjVsLTYwLjM1MiA2MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMS0zMC4xNjUgMGwtMTUuMDgzLTE1LjA4M2EyMS4zMzMgMjEuMzMzIDAgMCAxIDAtMzAuMTY1TDgwNi40IDE5My45MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDMwLjE4NyAwem0tNjE4LjQ5NiAwIDYwLjM1MiA2MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMSAwIDMwLjE2NUwyNjMuMzYgMjk5LjUyYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTg3IDBsLTYwLjM1Mi02MC4zNzNhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NmwxNS4wODMtMTUuMDgyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTY1IDB6TTUyMi45IDY0YTIxLjMzMyAyMS4zMzMgMCAwIDEgMjEuMzM0IDIxLjMzM3Y4NS4zMzRBMjEuMzMzIDIxLjMzMyAwIDAgMSA1MjIuOSAxOTJoLTIxLjMzM2EyMS4zMzMgMjEuMzMzIDAgMCAxLTIxLjMzMy0yMS4zMzNWODUuMzMzQTIxLjMzMyAyMS4zMzMgMCAwIDEgNTAxLjU2OCA2NGgyMS4zMzN6IiBmaWxsPSIjZWJlYmViIi8+PC9zdmc+",$=v(73344),Ze=v(85265),Be=v(2487),za=v(28058),wa=v(18429),Ia=function(o){D()(l,o);var e=O()(l);function l(){return S()(this,l),e.apply(this,arguments)}return T()(l,[{key:"render",value:function(){var t=this.props.errors.filter(function(r){return r.level==="warning"}),a=this.props.errors.filter(function(r){return r.level==="error"}),i=(0,c.jsx)(ie.ZP,{status:"success",title:"Check Passed!",subTitle:"0 error, 0 warning!",style:{marginTop:"50px"}});return a.length+t.length>0&&(i=(0,c.jsxs)("div",{style:{color:"var(--ant-color-text)",height:"100%"},children:[(0,c.jsxs)("p",{children:["Found ",a.length," errors, ",t.length," warnings."]}),(0,c.jsx)("div",{style:{paddingBottom:10},className:"card-body",children:(0,c.jsx)(Be.Z,{bordered:!0,dataSource:this.props.errors,renderItem:function(s){return(0,c.jsx)(Be.Z.Item,{children:(0,c.jsxs)(U.Z,{size:"middle",children:[s.level==="warning"?(0,c.jsx)(za.Z,{}):(0,c.jsx)(wa.Z,{}),s.info]})})}})})]})),(0,c.jsxs)("div",{style:{width:"100%",height:"calc(100% - 50px)"},children:[(0,c.jsx)("h3",{style:{color:"var(--ant-color-text)"},children:"Check Data"}),i]})}}]),l}(z.Component),Ca=Ia,Aa=v(49107),Sa=v(42308),Ye=v(24389),Ta=v(51376),d=`
`,We={UiArc:"arc",UiRound:"round",UiRect:"rect",UiLine:"line",UiEllipse:"ellipse",UiText:"string",UiInt:"number",UiFloat:"number"},He={UiLine:0,UiRect:1,UiRound:2,UiEllipse:3,UiArc:4,UiFloat:5,UiInt:6,UiText:7},Ge={lineWidth:"width",layer:"layer",x:"start_x",y:"start_y",x2:"end_x",y2:"end_y",rx:"rx",ry:"ry",startAngle:"start_angle",endAngle:"end_angle",number:"number",color:"color",fontSize:"font_size",strLength:"str_length"},Je={main:0,yellow:1,green:2,orange:3,purple:4,pink:5,cyan:6,black:7,white:8};function Da(o,e,l){for(var n="",t=0;t<l;t++)n=n+`
#include "ui_`.concat(o,"_").concat(e,"_").concat(t,'.h"');for(var a=`
#define ui_init_`.concat(o,"_").concat(e,`() \\
`),i=`
#define ui_update_`.concat(o,"_").concat(e,`() \\
`),r=`
#define ui_remove_`.concat(o,"_").concat(e,`() \\
`),s=0;s<l;s++)a+="_ui_init_".concat(o,"_").concat(e,"_").concat(s,`(); \\
`),i+="_ui_update_".concat(o,"_").concat(e,"_").concat(s,`(); \\
`),r+="_ui_remove_".concat(o,"_").concat(e,"_").concat(s,`(); \\
`);return n+="".concat(d).concat(a.slice(0,-4)).concat(d).concat(i.slice(0,-4)).concat(d).concat(r.slice(0,-4),`
    `),"".concat(n,`
`)}function Oa(o,e){var l="",n=I()(e),t;try{for(n.s();!(t=n.n()).done;){var a=t.value;l+=Da(o,a.group_name,a.splits.length)}}catch(i){n.e(i)}finally{n.f()}return l}function Ea(o){var e="//".concat(d,"// Created by RM UI Designer").concat(d,"//").concat(d).concat(d,"#ifndef UI_H").concat(d,"#define UI_H").concat(d).concat(d,'#include "ui_interface.h"').concat(d),l=I()(o),n;try{for(l.s();!(n=l.n()).done;){var t=n.value;e+=Oa(t.name,t.groups)}}catch(a){l.e(a)}finally{l.f()}return"".concat(e,`
#endif //UI_H
`)}function Na(o,e,l,n){var t="//".concat(d,"// Created by RM UI Designer").concat(d,"//").concat(d).concat(d,"#ifndef UI_").concat(o,"_").concat(e,"_").concat(l,"_H").concat(d,"#define UI_").concat(o,"_").concat(e,"_").concat(l,"_H").concat(d).concat(d,'#include "ui_interface.h"').concat(d).concat(d),a=I()(n),i;try{for(a.s();!(i=a.n()).done;){var r=i.value;t+="extern ui_interface_".concat(We[r.type],"_t *ui_").concat(o,"_").concat(e,"_").concat(r.name,`;
`)}}catch(s){a.e(s)}finally{a.f()}return t+="".concat(d,"void _ui_init_").concat(o,"_").concat(e,"_").concat(l,"();").concat(d,"void _ui_update_").concat(o,"_").concat(e,"_").concat(l,"();").concat(d,"void _ui_remove_").concat(o,"_").concat(e,"_").concat(l,"();").concat(d).concat(d,"#endif //UI_").concat(o,"_").concat(e,"_").concat(l,"_H").concat(d),t}function Ra(o,e,l){var n=E()({},l),t=He[n.type],a=n.name;n.type==="UiFloat"&&(n.number=Math.round(n.float*1e3),delete n.float),n.type==="UiRect"&&(n.x2=n.x+n.width,n.y2=n.y+n.height,delete n.width,delete n.height),(n.type==="UiFloat"||n.type==="UiNumber")&&(n.lineWidth=Math.round(n.fontSize/10)),n.color=Je[n.color],delete n.type,delete n.id,delete n.name,delete n.group;var i="ui_".concat(o,"_").concat(e,"_").concat(a),r="    ".concat(i,"->figure_tpye = ").concat(t,`;
`);for(var s in n){var u=n[s];typeof u=="number"&&(u=Math.round(u)),r+="    ".concat(i,"->").concat(Ge[s]," = ").concat(u,`;
`)}return"".concat(r,`
`)}function La(o,e,l,n,t,a,i,r){for(var s="".concat(o,"_").concat(l,"_").concat(t),u="//".concat(d,"// Created by RM UI Designer").concat(d,"//").concat(d).concat(d,'#include "ui_').concat(s,'.h"').concat(d).concat(d,"#define FRAME_ID ").concat(e).concat(d,"#define GROUP_ID ").concat(n).concat(d,"#define START_ID ").concat(a).concat(d,"#define OBJ_NUM ").concat(i.length).concat(d,"#define FRAME_OBJ_NUM ").concat(r).concat(d).concat(d,"CAT(ui_, CAT(FRAME_OBJ_NUM, _frame_t)) ui_").concat(s,";").concat(d),h=0;h<i.length;h++){var m=We[i[h].type],f=i[h].name;u+="ui_interface_".concat(m,"_t *ui_").concat(o,"_").concat(l,"_").concat(f," = ")+"(ui_interface_".concat(m,"_t *)&(ui_").concat(s,".data[").concat(h,`]);
`)}u+="".concat(d,"void _ui_init_").concat(s,"() {").concat(d,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(d,"        ui_").concat(s,".data[i].figure_name[0] = FRAME_ID;").concat(d,"        ui_").concat(s,".data[i].figure_name[1] = GROUP_ID;").concat(d,"        ui_").concat(s,".data[i].figure_name[2] = i + START_ID;").concat(d,"        ui_").concat(s,".data[i].operate_tpyel = 1;").concat(d,"    }").concat(d,"    for (int i = OBJ_NUM; i < FRAME_OBJ_NUM; i++) {").concat(d,"        ui_").concat(s,".data[i].operate_tpyel = 0;").concat(d,"    }").concat(d).concat(d);var p=I()(i),M;try{for(p.s();!(M=p.n()).done;){var g=M.value;u+=Ra(o,l,g)}}catch(y){p.e(y)}finally{p.f()}return u+="".concat(d,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(s,");").concat(d,"    SEND_MESSAGE((uint8_t *) &ui_").concat(s,", sizeof(ui_").concat(s,"));").concat(d,"}").concat(d).concat(d,"void _ui_update_").concat(s,"() {").concat(d,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(d,"        ui_").concat(s,".data[i].operate_tpyel = 2;").concat(d,"    }").concat(d).concat(d,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(s,");").concat(d,"    SEND_MESSAGE((uint8_t *) &ui_").concat(s,", sizeof(ui_").concat(s,"));").concat(d,"}").concat(d).concat(d,"void _ui_remove_").concat(s,"() {").concat(d,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(d,"        ui_").concat(s,".data[i].operate_tpyel = 3;").concat(d,"    }").concat(d).concat(d,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(s,");").concat(d,"    SEND_MESSAGE((uint8_t *) &ui_").concat(s,", sizeof(ui_").concat(s,"));").concat(d,"}").concat(d),u}function Ua(o,e,l,n,t,a,i){var r="".concat(o,"_").concat(l,"_").concat(t),s=E()({},i[0]),u=s.name,h=s.text;s.color=Je[s.color],s.strLength=h.length,s.lineWidth=Math.round(s.fontSize/10),delete s.text,delete s.type,delete s.id,delete s.name,delete s.group;var m="//".concat(d,"// Created by RM UI Designer").concat(d,"//").concat(d).concat(d,'#include "ui_').concat(r,'.h"').concat(d).concat(d,"#define FRAME_ID ").concat(e).concat(d,"#define GROUP_ID ").concat(n).concat(d,"#define START_ID ").concat(a).concat(d,"#define OBJ_NUM ").concat(i.length).concat(d).concat(d,"CAT(ui_, CAT(FRAME_OBJ_NUM, _frame_t)) ui_").concat(r,";").concat(d).concat(d,"char* ui_").concat(o,"_").concat(l,"_").concat(u," = ui_").concat(r,".string;").concat(d).concat(d,"void _ui_init_").concat(r,"() {").concat(d,"    ui_").concat(r,".option.figure_name[0] = FRAME_ID;").concat(d,"    ui_").concat(r,".option.figure_name[1] = GROUP_ID;").concat(d,"    ui_").concat(r,".option.figure_name[2] = START_ID;").concat(d,"    ui_").concat(r,".option.operate_tpyel = 1;").concat(d);m+="    ui_".concat(r,".option.figure_tpye = ").concat(He.UiText,`;
`);for(var f in s){var p=s[f];typeof p=="number"&&(p=Math.round(p)),m+="    ui_".concat(r,".option.").concat(Ge[f]," = ").concat(p,`;
`)}return m+="    strcpy(ui_".concat(o,"_").concat(l,"_").concat(u,', "').concat(h,'");').concat(d).concat(d,"    ui_proc_string_frame(&ui_").concat(r,");").concat(d,"    SEND_MESSAGE((uint8_t *) &ui_").concat(r,", sizeof(ui_").concat(r,"));").concat(d,"}").concat(d).concat(d,"void _ui_update_").concat(r,"() {").concat(d,"    ui_").concat(r,".option.operate_tpyel = 2;").concat(d).concat(d,"    ui_proc_string_frame(&ui_").concat(r,");").concat(d,"    SEND_MESSAGE((uint8_t *) &ui_").concat(r,", sizeof(ui_").concat(r,"));").concat(d,"}").concat(d).concat(d,"void _ui_remove_").concat(r,"() {").concat(d,"    ui_").concat(r,".option.operate_tpyel = 3;").concat(d).concat(d,"    ui_proc_string_frame(&ui_").concat(r,");").concat(d,"    SEND_MESSAGE((uint8_t *) &ui_").concat(r,", sizeof(ui_").concat(r,"));").concat(d,"}"),m}var Fa=v(75112),Pa=v(8938),Za=v(33562),oe=null,ce=null,ue=null;function Qe(){return oe===null&&fetch(Fa).then(function(o){o.text().then(function(e){oe=e})}),ce===null&&fetch(Pa).then(function(o){o.text().then(function(e){ce=e})}),ue===null&&fetch(Za).then(function(o){o.text().then(function(e){ue=e})}),{ui_interface:{h:oe,c:ce},ui_types:{h:ue}}}function Ba(o){var e="";return o.h&&(e+=".h"),o.h&&o.c&&(e+=" and "),o.c&&(e+=".c"),e}function Ya(){var o=document.querySelector(".rmui"),e=getComputedStyle(o),l=e.getPropertyValue("--ant-color-text-base");return l==="#fff"}var Wa=function(o){D()(l,o);var e=O()(l);function l(){var n;S()(this,l);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a)),x()(k()(n),"state",{preview:null,fileName:""}),x()(k()(n),"checked",[]),n}return T()(l,[{key:"review",value:function(t,a){this.setState({preview:this.props.code[t][a],fileName:"".concat(t,".").concat(a)})}},{key:"download",value:function(t,a){je(this.props.code[t][a],"".concat(t,".").concat(a)),console.log(this.props.code[t][a])}},{key:"downloadChecked",value:function(){if(this.checked.length===0){Y.error("Please select at least one file.");return}var t={},a=E()(E()({},this.props.code),Qe()),i=I()(this.checked),r;try{for(i.s();!(r=i.n()).done;){var s=r.value;t[s]=a[s]}}catch(u){i.e(u)}finally{i.f()}be(t).then(function(u){ke(u,"codes.zip")})}},{key:"render",value:function(){var t=this,a=[{file:"ui base .h and .c",key:"_base"}];for(var i in this.props.code)a.push({file:"".concat(i," ").concat(Ba(this.props.code[i])),key:i,h:this.props.code[i].h!==void 0,c:this.props.code[i].c!==void 0});return(0,c.jsxs)("div",{className:"full",style:{overflow:"hidden"},children:[(0,c.jsx)("h3",{style:{color:"var(--ant-color-text)",marginBottom:20},children:"Download Data"}),(0,c.jsx)("div",{style:{paddingBottom:36},className:"card-body",children:(0,c.jsx)(Aa.Z,{columns:[{title:"File",dataIndex:"file",key:"file"},{title:"Preview",dataIndex:"key",key:"preview",render:function(s,u){return(0,c.jsxs)(U.Z,{children:[u.h&&(0,c.jsx)(b.ZP,{type:"link",onClick:function(){t.review(s,"h")},children:"Preview .h"}),u.c&&(0,c.jsx)(b.ZP,{type:"link",onClick:function(){t.review(s,"c")},children:"Preview .c"})]})}},{title:"Download",dataIndex:"key",key:"download",render:function(s,u){return s!=="_base"?(0,c.jsxs)(U.Z,{children:[u.h&&(0,c.jsx)(b.ZP,{type:"link",onClick:function(){t.download(s,"h")},children:"Download .h"}),u.c&&(0,c.jsx)(b.ZP,{type:"link",onClick:function(){t.download(s,"c")},children:"Download .c"})]}):(0,c.jsx)(b.ZP,{type:"link",onClick:C()(j()().mark(function h(){var m,f;return j()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,Qe();case 2:return m=M.sent,M.next=5,be(m);case 5:f=M.sent,ke(f,"ui_base.zip");case 7:case"end":return M.stop()}},h)})),children:"Download .zip"})}}],dataSource:a,rowSelection:{type:"checkbox",onChange:function(s){var u=me()(s);u.includes("_base")&&(u=u.filter(function(h){return h!=="_base"}),u.push("ui_types"),u.push("ui_interface")),t.checked=u},getCheckboxProps:function(s){return{name:s.key}}},pagination:!1})}),(0,c.jsx)(Ze.Z,{onClose:function(){return t.setState({preview:null})},open:this.state.preview!==null,title:this.state.fileName,size:"large",getContainer:document.getElementById("content-in"),rootStyle:{inset:"25px 0 0 0"},children:(0,c.jsx)("div",{style:{height:"100%",overflow:"auto"},children:(0,c.jsx)(Sa.ZP,{value:this.state.preview||"",theme:Ya()?Ye.ub:Ye.tR,extensions:[(0,Ta.N)()],onContextMenu:function(s){s.stopPropagation()}})})})]})}}]),l}(z.Component),Ha=Wa,Ga=function(){function o(e,l,n,t,a,i,r){var s=this;if(S()(this,o),this.frame_name=e,this.frame_id=l,this.group_name=n,this.group_id=t,this.split_id=a,this.start_id=i,this.objs=r,r[0].type==="UiText")this.toSplitC=function(){return Ua(s.frame_name,s.frame_id,s.group_name,s.group_id,s.split_id,s.start_id,s.objs)};else{var u=7;r.length===1?u=1:r.length<=2?u=2:r.length<=5&&(u=5),this.toSplitC=function(){return La(s.frame_name,s.frame_id,s.group_name,s.group_id,s.split_id,s.start_id,s.objs,u)}}this.toSplitH=function(){return Na(s.frame_name,s.group_name,s.split_id,s.objs)}}return T()(o,[{key:"check",value:function(){return this.objs.length!==1&&this.objs.length!==2&&this.objs.length!==5&&this.objs.length!==7?[{level:"warning",info:'Length of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Split "').concat(this.split_id,'" is not 1 or 2 or 5 or 7.')}]:[]}}]),o}(),$e=Ga,Ja=function(){function o(e,l,n,t,a){S()(this,o),this.frame_name=e,this.frame_id=l,this.group_name=n,this.group_id=t,this.splits=[],this.errors=[];var i=0,r=new Set,s=I()(a),u;try{for(s.s();!(u=s.n()).done;){var h=u.value;/^[a-zA-Z_]+\w+$/.test(h.name)||this.errors.push({level:"error",info:'Name of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Object "').concat(h.name,'" does not compliant.')}),r.has(h.name)?this.errors.push({level:"error",info:'Name of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Object "').concat(h.name,'" is duplicate.')}):r.add(h.name),h.type==="UiText"&&(this.splits.push(new $e(this.frame_name,this.frame_id,this.group_name,this.group_id,this.splits.length,i,[h])),i+=1)}}catch(M){s.e(M)}finally{s.f()}for(var m=a.filter(function(M){return M.type!=="UiText"}),f=Math.ceil(m.length/7),p=0;p<f;p++)this.splits.push(new $e(this.frame_name,this.frame_id,this.group_name,this.group_id,this.splits.length,i,m.slice(p*7,(p+1)*7))),i+=7}return T()(o,[{key:"check",value:function(){var l=this.errors,n=I()(this.splits),t;try{for(n.s();!(t=n.n()).done;){var a=t.value;l=l.concat(a.check())}}catch(i){n.e(i)}finally{n.f()}return l}}]),o}(),Qa=Ja,$a=function(){function o(e,l,n){S()(this,o),this.name=e,this.id=l,this.groups=[];var t={};for(var a in n){var i=n[a];i.group in t?t[i.group].push(i):t[i.group]=[i]}for(var r in t)this.groups.push(new Qa(this.name,this.id,r,this.groups.length,t[r]))}return T()(o,[{key:"check",value:function(){var l=[],n=I()(this.groups),t;try{for(n.s();!(t=n.n()).done;){var a=t.value;l=l.concat(a.check())}}catch(i){n.e(i)}finally{n.f()}return l}}]),o}(),Va=$a,Ka=function(){function o(e){S()(this,o),this.frames=[];for(var l in e)this.frames.push(new Va(l,this.frames.length,e[l]))}return T()(o,[{key:"toUiH",value:function(){return Ea(this.frames)}},{key:"check",value:function(){var l=[],n=I()(this.frames),t;try{for(n.s();!(t=n.n()).done;){var a=t.value;l=l.concat(a.check())}}catch(i){n.e(i)}finally{n.f()}return l}}]),o}(),Xa=Ka,qa=function(o){D()(l,o);var e=O()(l);function l(){var n;S()(this,l);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a)),x()(k()(n),"state",{show:!1,step:"check"}),x()(k()(n),"downloadRef",(0,z.createRef)()),x()(k()(n),"data",{}),x()(k()(n),"errors",[]),n}return T()(l,[{key:"gen",value:function(t){this.helper=new Xa(t),this.data=t,this.code={ui:{h:this.helper.toUiH()}};var a=I()(this.helper.frames),i;try{for(a.s();!(i=a.n()).done;){var r=i.value,s=I()(r.groups),u;try{for(s.s();!(u=s.n()).done;){var h=u.value,m=I()(h.splits),f;try{for(m.s();!(f=m.n()).done;){var p=f.value;this.code["ui_".concat(r.name,"_").concat(h.group_name,"_").concat(p.split_id)]={c:p.toSplitC(),h:p.toSplitH()}}}catch(M){m.e(M)}finally{m.f()}}}catch(M){s.e(M)}finally{s.f()}}}catch(M){a.e(M)}finally{a.f()}this.errors=this.helper.check(),this.setState({show:!0,step:"check"})}},{key:"onClose",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var t=this,a=(0,c.jsx)(b.ZP,{type:"primary",onClick:function(){return t.setState({step:"generate"})},disabled:this.errors.filter(function(r){return r.level==="error"}).length>0,children:"Generate"}),i=(0,c.jsx)(b.ZP,{type:"primary",onClick:function(){var s;return(s=t.downloadRef)===null||s===void 0||(s=s.current)===null||s===void 0?void 0:s.downloadChecked()},children:"Download"});return(0,c.jsx)("div",{children:(0,c.jsx)(Ze.Z,{title:"C Code Generator",placement:"right",onClose:function(){return t.onClose()},open:this.state.show,size:"large",getContainer:document.getElementById("content-in"),rootStyle:{inset:"25px 0 0 0"},footer:(0,c.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",padding:5},children:this.state.step==="check"?a:i}),children:this.state.step==="check"?(0,c.jsx)(Ca,{errors:this.errors}):(0,c.jsx)(Ha,{code:this.code,ref:this.downloadRef})})})}}]),l}(z.Component),_a=qa,er=[{key:"File-new",label:"New Project"},{key:"File-open",label:"Open .rmui"},{key:"File-save",label:"Save as .rmui"},{type:"divider"},{key:"File-generate",label:"Generate Code",icon:(0,c.jsx)(ea.Z,{})}],he=[{key:"Edit-undo",label:"Undo"},{key:"Edit-redo",label:"Redo"},{key:"Edit-reset",label:"Reset History"}],tr=[{key:"Simulate-start",label:"Start",disable:!0},{key:"Simulate-settings",label:"Settings",disable:!0}],ar=function(o){D()(l,o);var e=O()(l);function l(){var n;S()(this,l);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a)),x()(k()(n),"state",{fullscreen:!1,frames:["default"],selectedFrame:"default",darkMode:!1,couldUndo:!1,couldRedo:!1}),x()(k()(n),"formRef",(0,z.createRef)()),x()(k()(n),"aboutRef",(0,z.createRef)()),x()(k()(n),"generatorRef",(0,z.createRef)()),x()(k()(n),"tauri",G()),n}return T()(l,[{key:"componentDidMount",value:function(){var n=C()(j()().mark(function a(){var i;return j()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!this.tauri){s.next=5;break}return s.next=3,$.G.isMaximized();case 3:i=s.sent,this.setState({fullscreen:i});case 5:case"end":return s.stop()}},a,this)}));function t(){return n.apply(this,arguments)}return t}()},{key:"setCouldDo",value:function(t){this.setState({couldUndo:t.couldPrevious,couldRedo:t.couldNext})}},{key:"fullScreen",value:function(){if(this.tauri)$.G.maximize();else{var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}this.setState({fullscreen:!0})}},{key:"exitFullscreen",value:function(){this.tauri?$.G.unmaximize():document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),this.setState({fullscreen:!1})}},{key:"setFrames",value:function(t){this.setState({frames:t.frames,selectedFrame:t.selected})}},{key:"onMenuClick",value:function(){var n=C()(j()().mark(function a(i){var r,s,u,h,m,f,p,M;return j()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(r=i.keyPath[i.keyPath.length-1],r.slice(0,6)!=="Insert"){y.next=7;break}s=i.key.slice(7),u={id:-1,name:"New".concat(s),layer:0,group:"Ungroup",type:"Ui".concat(s)},this.props.onObjectEvent("_add",u),y.next=62;break;case 7:if(r!=="Edit-reset"){y.next=11;break}this.props.onHistoryEvent("resetNow"),y.next=62;break;case 11:if(r!=="Edit-undo"){y.next=15;break}this.props.onHistoryEvent("previous"),y.next=62;break;case 15:if(r!=="Edit-redo"){y.next=19;break}this.props.onHistoryEvent("next"),y.next=62;break;case 19:if(r!=="File-new"){y.next=24;break}this.props.reset(),this.props.onHistoryEvent("reset"),y.next=62;break;case 24:if(r!=="File-save"){y.next=28;break}this.props.save(),y.next=62;break;case 28:if(r!=="File-open"){y.next=32;break}this.props.upload(),y.next=62;break;case 32:if(r!=="File-generate"){y.next=36;break}(h=this.generatorRef.current)===null||h===void 0||h.gen(this.props.getData()),y.next=62;break;case 36:if(r!=="FrameOp-add"){y.next=43;break}return y.next=39,this.formRef.current.open("New Frame",this.state.frames);case 39:m=y.sent,this.props.setFrame("add",m),y.next=62;break;case 43:if(r!=="FrameOp-remove"){y.next=47;break}this.props.setFrame("remove",this.state.selectedFrame),y.next=62;break;case 47:if(r!=="FrameOp-copy"){y.next=54;break}return y.next=50,this.formRef.current.open("Copy Frame To",this.state.frames);case 50:f=y.sent,this.props.setFrame("copy",f),y.next=62;break;case 54:if(r!=="FrameOp-rename"){y.next=61;break}return y.next=57,this.formRef.current.open("Rename Frame To",this.state.frames);case 57:p=y.sent,this.props.setFrame("rename",p),y.next=62;break;case 61:r==="FrameOp-change"&&(M=i.key.slice(7),this.props.setFrame("change",M));case 62:case"end":return y.stop()}},a,this)}));function t(a){return n.apply(this,arguments)}return t}()},{key:"getFramesMenu",value:function(){var t=[{key:"FrameOp-add",label:"New Frame"},{key:"FrameOp-copy",label:"Copy This Frame"},{key:"FrameOp-rename",label:"Rename This Frame"},{key:"FrameOp-remove",label:"Remove This Frame"},{key:"FrameOp-change",label:"Change to",selectable:"true",children:[]}],a=I()(this.state.frames),i;try{for(a.s();!(i=a.n()).done;){var r=i.value;t[4].children.push({key:"Frames-".concat(r),label:r})}}catch(s){a.e(s)}finally{a.f()}return t}},{key:"render",value:function(){var t=this,a=(0,c.jsx)(b.ZP,{type:"text",onClick:function(){return t.fullScreen()},size:"small",children:(0,c.jsx)(ta.Z,{style:{color:"var(--ant-color-text)"}})}),i=(0,c.jsx)(b.ZP,{type:"text",onClick:function(){return t.exitFullscreen()},size:"small",children:(0,c.jsx)(aa.Z,{style:{color:"var(--ant-color-text)"}})}),r=(0,c.jsx)(b.ZP,{type:"text",onClick:function(){return t.props.setDarkMode(!0)},size:"small",children:(0,c.jsx)(Re.Z,{component:ya})}),s=(0,c.jsx)(b.ZP,{type:"text",onClick:function(){return t.props.setDarkMode(!1)},size:"small",children:(0,c.jsx)(Re.Z,{component:ba})});return he[0].disabled=!this.state.couldUndo,he[1].disabled=!this.state.couldRedo,(0,c.jsxs)("div",{style:{width:"100%",height:32,marginTop:-5},className:"solid-color","data-tauri-drag-region":!0,children:[(0,c.jsxs)(ye.Z,{style:{width:"100vw",display:"flex",paddingTop:-5},justify:"flex-start",align:"center","data-tauri-drag-region":!0,children:[(0,c.jsx)("div",{style:{fontFamily:"YouSheBiaoTiHei",fontSize:20,paddingLeft:6,paddingRight:6,paddingTop:3,display:"flex",color:"var(--ant-color-text)",cursor:"default"},"data-tauri-drag-region":!0,children:"RoboMaster UI Designer"}),(0,c.jsx)(Z.Z,{menu:{items:er,onClick:function(h){return t.onMenuClick(h)}},children:(0,c.jsx)(b.ZP,{type:"text",size:"small",children:"File"})}),(0,c.jsx)(Z.Z,{menu:{items:[].concat(he),onClick:function(h){return t.onMenuClick(h)}},children:(0,c.jsx)(b.ZP,{type:"text",size:"small",children:"Edit"})}),(0,c.jsx)(Z.Z,{menu:{items:Ut(),onClick:function(h){return t.onMenuClick(h)}},children:(0,c.jsx)(b.ZP,{type:"text",size:"small",children:"Insert"})}),(0,c.jsx)(Z.Z,{menu:{items:this.getFramesMenu(),onClick:function(h){return t.onMenuClick(h)},selectedKeys:["Frames-".concat(this.state.selectedFrame)]},children:(0,c.jsx)(b.ZP,{type:"text",size:"small",children:"Frames"})}),(0,c.jsx)(Z.Z,{menu:{items:tr,onClick:function(h){return t.onMenuClick(h)}},children:(0,c.jsx)(b.ZP,{type:"text",size:"small",children:"Simulate\u{1F6A7}"})}),(0,c.jsx)(b.ZP,{type:"text",size:"small",onClick:function(){var h;(h=t.aboutRef.current)===null||h===void 0||h.show()},children:"About"}),(0,c.jsxs)("div",{style:{marginRight:5,justifyContent:"flex-end",marginLeft:"auto",marginTop:2},"data-tauri-drag-region":!0,children:[(0,c.jsxs)("div",{style:{display:"inline",marginRight:15,fontSize:10,cursor:"default",color:"var(--ant-color-text)"},"data-tauri-drag-region":!0,children:["Created by\xA0",(0,c.jsx)("a",{href:"https://github.com/bismarckkk",target:"_blank",children:(0,c.jsx)(b.ZP,{type:"link",style:{padding:0},size:"small","data-tauri-drag-region":!0,children:"Bismarckkk"})})]}),this.props.darkMode?s:r,(0,c.jsx)("a",{href:"https://github.com/bismarckkk/RM-UI-Designer",target:"_blank",children:(0,c.jsx)(b.ZP,{type:"text",size:"small",children:(0,c.jsx)(ra.Z,{style:{color:"var(--ant-color-text)"}})})}),(0,c.jsx)(b.ZP,{type:"text",size:"small",onClick:function(){return $.G.minimize()},style:{display:this.tauri?"inline":"none"},children:(0,c.jsx)(ia.Z,{style:{color:"var(--ant-color-text)"}})}),this.state.fullscreen?i:a,(0,c.jsx)(b.ZP,{type:"text",size:"small",onClick:function(){return(0,Ee.J)()},style:{display:this.tauri?"inline":"none"},children:(0,c.jsx)(na.Z,{style:{color:"var(--ant-color-text)"}})})]})]}),(0,c.jsx)(ca,{ref:this.formRef}),(0,c.jsx)(fa,{ref:this.aboutRef}),(0,c.jsx)(_a,{ref:this.generatorRef})]})}}]),l}(z.Component),rr=ar;function ir(o){return ut(),(0,c.jsx)("div",{})}var nr=ir,sr=v(18253),lr=fe.Z.darkAlgorithm,Ve=fe.Z.compactAlgorithm,or=function(o){D()(l,o);var e=O()(l);function l(){var n;S()(this,l);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a)),x()(k()(n),"state",{simulate:!1,darkMode:n.isBrowserDarkMode()}),x()(k()(n),"modal",null),x()(k()(n),"renderRef",z.createRef()),x()(k()(n),"menuRef",z.createRef()),n}return T()(l,[{key:"isBrowserDarkMode",value:function(){try{return window.matchMedia("(prefers-color-scheme: dark)").matches}catch(t){return!1}}},{key:"componentDidMount",value:function(){var t=this,a=0;window.addEventListener("drop",function(s){return s.preventDefault()},!1),window.addEventListener("dragover",function(s){return s.preventDefault()},!1),window.addEventListener("contextmenu",function(s){s.target.tagName.toLowerCase()!=="input"&&s.preventDefault()},!1);function i(s){!t.modal&&s<880&&s!==a&&(a=s,t.modal=K.warning({title:"Display Aera too Small",content:"Cannot show all contents on this window. Please resize this window or rotate your phone.",footer:null})),t.modal&&s>=880&&(t.modal.destroy(),t.modal=null)}setTimeout(function(){return i(window.innerWidth)},500),window.addEventListener("resize",function(){i(window.innerWidth)},!1);var r=window.matchMedia("(prefers-color-scheme: dark)");r.addEventListener("change",function(s){t.setState({darkMode:s.matches})})}},{key:"setDarkMode",value:function(t){this.setState({darkMode:t})}},{key:"render",value:function(){var t=this;return(0,c.jsx)(at.ZP,{locale:sr.Z,theme:{cssVar:{key:"rmui"},hashed:!1,algorithm:this.state.darkMode?[lr,Ve]:Ve},children:(0,c.jsxs)(ve.Z,{children:[(0,c.jsx)("div",{className:"rmui",children:(0,c.jsxs)("div",{className:"container background-color",style:{height:"100vh",paddingBottom:12,overflow:"hidden"},children:[(0,c.jsx)(rr,{save:function(){return t.renderRef.current.save()},onObjectEvent:function(i,r){return t.renderRef.current.onObjectEvent(i,r)},onHistoryEvent:function(i){return t.renderRef.current.onHistoryEvent(i)},reset:function(){return t.renderRef.current.reset()},setFrame:function(i,r){return t.renderRef.current.onFrameEvent(i,r)},upload:function(i){return t.renderRef.current.upload(i)},getData:function(){return t.renderRef.current.getData()},setDarkMode:function(i){return t.setDarkMode(i)},ref:this.menuRef,darkMode:this.state.darkMode}),(0,c.jsx)(rt.Z,{content:["RM Ui Designer","v1.0.1"],zIndex:0,style:{height:"100%"},gap:[30,30],children:(0,c.jsx)("div",{id:"content-in",style:{width:"100vw",height:"100%",zIndex:2,position:"relative"},children:(0,c.jsx)(Wt,{style:{width:"100vw",height:"100%"},editable:!0,ref:this.renderRef,onFrameChange:function(i){var r;return(r=t.menuRef.current)===null||r===void 0?void 0:r.setFrames(i)},setCouldDo:function(i){var r;(r=t.menuRef.current)===null||r===void 0||r.setCouldDo(i)}})})})]})}),(0,c.jsx)(nr,{}),(0,c.jsx)(_t,{})]})})}}]),l}(z.Component),cr=or},99734:function(R,P,v){R.exports=v.p+"static/about.6af660a8.md"},8938:function(R,P,v){R.exports=v.p+"static/ui_interface.c852ade8.c"},75112:function(R,P,v){R.exports=v.p+"static/ui_interface.6e21894b.h"},33562:function(R,P,v){R.exports=v.p+"static/ui_types.bc5f0491.h"},25665:function(R,P,v){R.exports=v.p+"static/background.d741a18b.png"}}]);
