"use strict";var De=(te,Q,e)=>new Promise((P,u)=>{var W=I=>{try{H(e.next(I))}catch(J){u(J)}},R=I=>{try{H(e.throw(I))}catch(J){u(J)}},H=I=>I.done?P(I.value):Promise.resolve(I.value).then(W,R);H((e=e.apply(te,Q)).next())});(self.webpackChunk=self.webpackChunk||[]).push([[858],{62388:function(te,Q,e){e.d(Q,{R:function(){return A},t:function(){return M}});var P=e(32777),u=e(30789),W=P.fabric.util.createClass(P.fabric.Rect,{type:"UiRect",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(t){t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.lockRotation=!0,t.lockScalingFlip=!0,t.hasRotatingPoint=!1,t.width||(t.width=50/this.ratio),t.height||(t.height=50/this.ratio),t.left||(t.left=50/this.ratio),t.top||(t.top=50/this.ratio),t.strokeWidth||(t.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?t.stroke=u.E[this._color]:(t.stroke=u.E[t.team],this._color="main"),t.fill=null,this.callSuper("initialize",t),this.moveTo(t.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){this.set("width",Math.round(this.width*this.scaleX*this.ratio)/this.ratio),this.set("height",Math.round(this.height*this.scaleY*this.ratio)/this.ratio),this.set("left",Math.round(this.left*this.ratio)/this.ratio),this.set("top",Math.round(this.top*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,width:this.width*this.ratio,height:this.height*this.ratio,x:this.left*this.ratio,y:this.top*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("width",t.width/this.ratio),this.set("height",t.height/this.ratio),this.set("left",t.x/this.ratio),this.set("top",t.y/this.ratio),this.set("strokeWidth",t.lineWidth/this.ratio),this._color==="main"?this.set("stroke",u.E[this.team]):this.set("stroke",u.E[this._color]),this.moveTo(t.layer)},setRatio:function(t){this.set("width",this.width*this.ratio/t),this.set("height",this.height*this.ratio/t),this.set("left",this.left*this.ratio/t),this.set("top",this.top*this.ratio/t),this.set("strokeWidth",this.strokeWidth*this.ratio/t),this.ratio=t},setTeam:function(t){this.team=t,this._color==="main"&&this.set("stroke",u.E[this.team])}}),R=P.fabric.util.createClass(P.fabric.Line,{type:"UiLine",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(t){t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.lockRotation=!0,t.lockScalingFlip=!0,t.hasRotatingPoint=!1,t.x1||(t.x1=50/this.ratio),t.y1||(t.y1=50/this.ratio),t.x2||(t.x2=100/this.ratio),t.y2||(t.y2=100/this.ratio),t.strokeWidth||(t.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?t.stroke=u.E[this._color]:(t.stroke=u.E[t.team],this._color="main"),t.fill=null,this.callSuper("initialize",[t.x1,t.y1,t.x2,t.y2],t),this.moveTo(t.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){var t=this.left,g=this.top,y=Math.abs(Math.round((this.x2-this.x1)*this.scaleX)),c=Math.abs(Math.round((this.y2-this.y1)*this.scaleY));this.set("x1",Math.round(t*this.ratio)/this.ratio),this.set("y1",Math.round(g*this.ratio)/this.ratio),this.set("x2",Math.round((t+y)*this.ratio)/this.ratio),this.set("y2",Math.round((g+c)*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,x:this.x1*this.ratio,y:this.y1*this.ratio,x2:this.x2*this.ratio,y2:this.y2*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("x2",t.x2/this.ratio),this.set("y2",t.y2/this.ratio),this.set("x1",t.x/this.ratio),this.set("y1",t.y/this.ratio),this.set("strokeWidth",t.lineWidth/this.ratio),this._color==="main"?this.set("stroke",u.E[this.team]):this.set("stroke",u.E[this._color]),this.moveTo(t.layer)},setRatio:function(t){this.set("x1",this.x1*this.ratio/t),this.set("y1",this.y1*this.ratio/t),this.set("x2",this.x2*this.ratio/t),this.set("y2",this.y2*this.ratio/t),this.set("strokeWidth",this.strokeWidth*this.ratio/t),this.ratio=t},setTeam:function(t){this.team=t,this._color==="main"&&this.set("stroke",u.E[this.team])}}),H=P.fabric.util.createClass(P.fabric.Ellipse,{type:"UiEllipse",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(t){t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.lockRotation=!0,t.lockScalingFlip=!0,t.hasRotatingPoint=!1,t.rx||(t.rx=50/this.ratio),t.ry||(t.ry=50/this.ratio),t.left||(t.left=50/this.ratio),t.top||(t.top=50/this.ratio),t.strokeWidth||(t.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?t.stroke=u.E[this._color]:(t.stroke=u.E[t.team],this._color="main"),t.fill=null,this.callSuper("initialize",t),this.moveTo(t.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){this.set("rx",Math.round(this.rx*this.scaleX*this.ratio)/this.ratio),this.set("ry",Math.round(this.ry*this.scaleY*this.ratio)/this.ratio),this.set("left",Math.round(this.left*this.ratio)/this.ratio),this.set("top",Math.round(this.top*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,rx:this.rx*this.ratio,ry:this.ry*this.ratio,x:(this.left+this.rx)*this.ratio,y:(this.top+this.ry)*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("rx",t.rx/this.ratio),this.set("ry",t.ry/this.ratio),this.set("left",(t.x-t.rx)/this.ratio),this.set("top",(t.y-t.ry)/this.ratio),this.set("strokeWidth",t.lineWidth/this.ratio),this._color==="main"?this.set("stroke",u.E[this.team]):this.set("stroke",u.E[this._color]),this.moveTo(t.layer)},setRatio:function(t){this.set("rx",this.rx*this.ratio/t),this.set("ry",this.ry*this.ratio/t),this.set("left",this.left*this.ratio/t),this.set("top",this.top*this.ratio/t),this.set("strokeWidth",this.strokeWidth*this.ratio/t),this.ratio=t},setTeam:function(t){this.team=t,this._color==="main"&&this.set("stroke",u.E[this.team])}}),I=P.fabric.util.createClass(H,{type:"UiRound",r:50,initialize:function(t){t||(t={}),t.r||(t.r=50/this.ratio),t.rx=t.r,t.ry=t.r,this.callSuper("initialize",t),this.setControlVisible("ml",!1),this.setControlVisible("mb",!1),this.setControlVisible("mr",!1),this.setControlVisible("mt",!1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,r:this.rx*this.ratio,x:(this.left+this.rx)*this.ratio,y:(this.top+this.ry)*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){t.rx=t.r,t.ry=t.r,this.callSuper("fromObject",t)}}),J=P.fabric.util.createClass(H,{type:"UiArc",startAngle:0,endAngle:90,initialize:function(t){t||(t={}),t.startAngle||(t.startAngle=0),t.endAngle||(t.endAngle=90),this.callSuper("initialize",t),this.startAngle=t.startAngle,this.endAngle=t.endAngle,this.set("dirty",!0)},toObject:function(){return P.fabric.util.object.extend(this.callSuper("toObject"),{startAngle:this.startAngle,endAngle:this.endAngle})},_render:function(t){var g=(this.startAngle-90)*(Math.PI/180),y=(this.endAngle-90)*(Math.PI/180);t.beginPath(),t.ellipse(0,0,this.rx,this.ry,0,g,y,!1),t.strokeStyle=this.stroke,t.lineWidth=this.strokeWidth,t.stroke()},fromObject:function(t){this.set("startAngle",t.startAngle),this.set("endAngle",t.endAngle),this.set("ry",1),this.callSuper("fromObject",t)}});function F(a,t){var g=F.canvas||(F.canvas=document.createElement("canvas")),y=g.getContext("2d");y.font=t;var c=y.measureText(a);return c.width}var B=P.fabric.util.createClass(P.fabric.Text,{type:"UiText",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(t){t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.flipY=!0,t.fontSize||(t.fontSize=20/this.ratio),t.fontFamily||(t.fontFamily="ds-digitalnormal"),t.text||(t.text="Text"),t.left||(t.left=50/this.ratio),t.top||(t.top=50/this.ratio),t.width||(t.width=F(t.text,t.fontSize+"px "+t.fontFamily)/this.ratio),this._color&&this._color!=="main"?t.fill=u.E[this._color]:(t.fill=u.E[t.team],this._color="main"),this.callSuper("initialize",t.text,t),this.moveTo(t.layer),this.setControlsVisibility({tl:!1,tr:!1,bl:!1,br:!1,ml:!1,mt:!1,mr:!1,mb:!1,mtr:!1})},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,fontSize:this.fontSize*this.ratio,x:this.left*this.ratio,y:this.top*this.ratio,text:this.text,color:this._color}},fromObject:function(t){this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("left",t.x/this.ratio),this.set("top",t.y/this.ratio),this.set("fontSize",t.fontSize/this.ratio),this.text=t.text,this.set("width",F(t.text,t.fontSize+"px "+this.fontFamily)/this.ratio),this._color==="main"?this.set("fill",u.E[this.team]):this.set("fill",u.E[this._color]),this.moveTo(t.layer),this.set("fontFamily","ds-digitalnormal")},setRatio:function(t){this.set("width",this.width*this.ratio/t),this.set("left",this.left*this.ratio/t),this.set("top",this.top*this.ratio/t),this.set("fontSize",this.fontSize*this.ratio/t),this.ratio=t},resizeScale:function(){},setTeam:function(t){this.team=t,this._color==="main"&&this.set("fill",u.E[this.team])}}),Z=P.fabric.util.createClass(B,{type:"UiNumber",number:12345,initialize:function(t){t||(t={}),this.number=t.number||12345,t.text=this.number.toString(),this.callSuper("initialize",t)},toObject:function(){var t=this.callSuper("toObject");return t.number=this.number,delete t.text,t},fromObject:function(t){this.number=parseInt(t.number),t.text=this.number.toString(),this.callSuper("fromObject",t)}}),n=P.fabric.util.createClass(B,{type:"UiFloat",float:12.345,initialize:function(t){t||(t={}),this.float=t.float||12.345,t.text=this.float.toString(),this.callSuper("initialize",t)},toObject:function(){var t=this.callSuper("toObject");return t.float=this.float,delete t.text,t},fromObject:function(t){this.float=parseFloat(t.float),t.text=this.float.toString(),this.callSuper("fromObject",t)}}),x=e(28348),O={Rect:W,Line:R,Round:I,Ellipse:H,Arc:J,Text:B,Number:Z,Float:n},T=null;function A(a){var t={id:a.id,name:a.name,layer:a.layer,groupName:a.group,ratio:a.ratio,team:a.team},g=a.type.slice(2);return g==="Text"&&(T||(x.yw.warning("Text object is beta now, maybe not same with client!"),T=setTimeout(function(){T=null},2e3))),new O[g](t)}function M(){for(var a=[],t=0,g=Object.keys(O);t<g.length;t++){var y=g[t];a.push({key:"Insert-".concat(y),label:y})}return a}},83885:function(te,Q,e){e.a(te,function(P,u){return De(this,null,function*(){try{var W=e(64599),R=e.n(W),H=e(12444),I=e.n(H),J=e(72004),F=e.n(J),B=e(73070),Z=P([B]);B=(Z.then?(yield Z)():Z)[0];var n=function(){function x(O,T,A){I()(this,x),this.name=O,this.id=T,this.groups=[];var M={};for(var a in A){var t=A[a];t.group in M?M[t.group].push(t):M[t.group]=[t]}for(var g in M)this.groups.push(new B.Z(this.name,this.id,g,this.groups.length,M[g]))}return F()(x,[{key:"toSerialMsg",value:function(){var T=[],A=R()(this.groups),M;try{for(A.s();!(M=A.n()).done;){var a=M.value;T=T.concat(a.toSerialMsg())}}catch(t){A.e(t)}finally{A.f()}return console.log(T),T}},{key:"check",value:function(){var T=[],A=R()(this.groups),M;try{for(A.s();!(M=A.n()).done;){var a=M.value;T=T.concat(a.check())}}catch(t){A.e(t)}finally{A.f()}return T}}]),x}();Q.Z=n,u()}catch(x){u(x)}})})},10622:function(te,Q,e){e.a(te,function(P,u){return De(this,null,function*(){try{var W=e(64599),R=e.n(W),H=e(12444),I=e.n(H),J=e(72004),F=e.n(J),B=e(5970),Z=e(83885),n=P([B,Z]);[B,Z]=n.then?(yield n)():n;var x=function(){function O(T){I()(this,O),this.frames=[];for(var A in T)this.frames.push(new Z.Z(A,this.frames.length,T[A]))}return F()(O,[{key:"toUiH",value:function(){return(0,B.LI)(this.frames)}},{key:"check",value:function(){var A=[],M=R()(this.frames),a;try{for(M.s();!(a=M.n()).done;){var t=a.value;A=A.concat(t.check())}}catch(g){M.e(g)}finally{M.f()}return A}},{key:"toSerialMsg",value:function(){var A={},M=R()(this.frames),a;try{for(M.s();!(a=M.n()).done;){var t=a.value;A[t.name]=t.toSerialMsg()}}catch(g){M.e(g)}finally{M.f()}return A}}]),O}();Q.Z=x,u()}catch(O){u(O)}})})},73070:function(te,Q,e){e.a(te,function(P,u){return De(this,null,function*(){try{var W=e(64599),R=e.n(W),H=e(12444),I=e.n(H),J=e(72004),F=e.n(J),B=e(66978),Z=P([B]);B=(Z.then?(yield Z)():Z)[0];var n=function(){function x(O,T,A,M,a){I()(this,x),this.frame_name=O,this.frame_id=T,this.group_name=A,this.group_id=M,this.splits=[],this.errors=[];var t=0,g=new Set,y=R()(a),c;try{for(y.s();!(c=y.n()).done;){var l=c.value;/^[a-zA-Z_]+\w+$/.test(l.name)||this.errors.push({level:"error",info:'Name of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Object "').concat(l.name,'" does not compliant.')}),g.has(l.name)?this.errors.push({level:"error",info:'Name of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Object "').concat(l.name,'" is duplicate.')}):g.add(l.name),l.type==="UiText"&&(this.splits.push(new B.Z(this.frame_name,this.frame_id,this.group_name,this.group_id,this.splits.length,t,[l])),t+=1)}}catch(z){y.e(z)}finally{y.f()}for(var o=a.filter(function(z){return z.type!=="UiText"}),f=Math.ceil(o.length/7),d=0;d<f;d++)this.splits.push(new B.Z(this.frame_name,this.frame_id,this.group_name,this.group_id,this.splits.length,t,o.slice(d*7,(d+1)*7))),t+=7}return F()(x,[{key:"toSerialMsg",value:function(){var T=[],A=R()(this.splits),M;try{for(A.s();!(M=A.n()).done;){var a=M.value;T.push(a.toSerialMsg())}}catch(t){A.e(t)}finally{A.f()}return T}},{key:"check",value:function(){var T=this.errors,A=R()(this.splits),M;try{for(A.s();!(M=A.n()).done;){var a=M.value;T=T.concat(a.check())}}catch(t){A.e(t)}finally{A.f()}return T}}]),x}();Q.Z=n,u()}catch(x){u(x)}})})},66978:function(te,Q,e){e.a(te,function(P,u){return De(this,null,function*(){try{var W=e(97857),R=e.n(W),H=e(64599),I=e.n(H),J=e(12444),F=e.n(J),B=e(72004),Z=e.n(B),n=e(5970),x=e(52880),O=P([n]);n=(O.then?(yield O)():O)[0];var T=function(){function A(M,a,t,g,y,c,l){var o=this;if(F()(this,A),this.frame_name=M,this.frame_id=a,this.group_name=t,this.group_id=g,this.split_id=y,this.start_id=c,this.objs=l,l[0].type==="UiText")this.toSplitC=function(){return(0,n.c0)(o.frame_name,o.frame_id,o.group_name,o.group_id,o.split_id,o.start_id,o.objs)};else{var f=7;l.length===1?f=1:l.length<=2?f=2:l.length<=5&&(f=5),this.toSplitC=function(){return(0,n.JP)(o.frame_name,o.frame_id,o.group_name,o.group_id,o.split_id,o.start_id,o.objs,f)}}this.toSplitH=function(){return(0,n.pj)(o.frame_name,o.group_name,o.split_id,o.objs)}}return Z()(A,[{key:"toSerialMsg",value:function(){var a=[],t=I()(this.objs),g;try{for(t.s();!(g=t.n()).done;){var y=g.value,c=R()({},y);c.group="".concat(this.frame_name,"-").concat(this.split_id),a.push(c)}}catch(l){t.e(l)}finally{t.f()}return(0,x.h)(a)}},{key:"check",value:function(){return this.objs.length!==1&&this.objs.length!==2&&this.objs.length!==5&&this.objs.length!==7?[{level:"warning",info:'Length of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Split "').concat(this.split_id,'" is not 1 or 2 or 5 or 7.')}]:[]}}]),A}();Q.Z=T,u()}catch(A){u(A)}})})},5970:function(te,Q,e){e.a(te,function(P,u){return De(this,null,function*(){try{let l=function(C,k,w){for(var D="",q=0;q<w;q++)D=D+`
#include "ui_`.concat(C,"_").concat(k,"_").concat(q,'.h"');for(var G=`
#define ui_init_`.concat(C,"_").concat(k,`() \\
`),V=`
#define ui_update_`.concat(C,"_").concat(k,`() \\
`),Y=`
#define ui_remove_`.concat(C,"_").concat(k,`() \\
`),h=0;h<w;h++)G+="_ui_init_".concat(C,"_").concat(k,"_").concat(h,`(); \\
`),V+="_ui_update_".concat(C,"_").concat(k,"_").concat(h,`(); \\
`),Y+="_ui_remove_".concat(C,"_").concat(k,"_").concat(h,`(); \\
`);return D+="".concat(n).concat(G.slice(0,-4)).concat(n).concat(V.slice(0,-4)).concat(n).concat(Y.slice(0,-4),`
    `),"".concat(D,`
`)},o=function(C,k){var w="",D=Z()(k),q;try{for(D.s();!(q=D.n()).done;){var G=q.value;w+=l(C,G.group_name,G.splits.length)}}catch(V){D.e(V)}finally{D.f()}return w},f=function(C){var k="//".concat(n,"// Created by RM UI Designer").concat(n,"//").concat(n).concat(n,"#ifndef UI_H").concat(n,"#define UI_H").concat(n,"#ifdef __cplusplus").concat(n,'extern "C" {').concat(n,"#endif").concat(n).concat(n,'#include "ui_interface.h"').concat(n),w=Z()(C),D;try{for(w.s();!(D=w.n()).done;){var q=D.value;k+=o(q.name,q.groups)}}catch(G){w.e(G)}finally{w.f()}return"".concat(k).concat(n).concat(n,"#ifdef __cplusplus").concat(n,"}").concat(n,"#endif").concat(n).concat(n,`#endif //UI_H
`)},d=function(C,k,w,D){var q="//".concat(n,"// Created by RM UI Designer").concat(n,"//").concat(n).concat(n,"#ifndef UI_").concat(C,"_").concat(k,"_").concat(w,"_H").concat(n,"#define UI_").concat(C,"_").concat(k,"_").concat(w,"_H").concat(n).concat(n,'#include "ui_interface.h"').concat(n).concat(n),G=Z()(D),V;try{for(G.s();!(V=G.n()).done;){var Y=V.value;q+="extern ui_interface_".concat(x[Y.type],"_t *ui_").concat(C,"_").concat(k,"_").concat(Y.name,`;
`)}}catch(h){G.e(h)}finally{G.f()}return q+="".concat(n,"void _ui_init_").concat(C,"_").concat(k,"_").concat(w,"();").concat(n,"void _ui_update_").concat(C,"_").concat(k,"_").concat(w,"();").concat(n,"void _ui_remove_").concat(C,"_").concat(k,"_").concat(w,"();").concat(n).concat(n,"#endif //UI_").concat(C,"_").concat(k,"_").concat(w,"_H").concat(n),q},z=function(C,k,w){var D=F()({},w),q=O[D.type],G=D.name;D.type==="UiFloat"&&(D.number=Math.round(D.float*1e3),delete D.float),D.type==="UiRect"&&(D.x2=D.x+D.width,D.y2=D.y+D.height,delete D.width,delete D.height),(D.type==="UiFloat"||D.type==="UiNumber")&&(D.lineWidth=Math.round(D.fontSize/10)),D.color=A[D.color],delete D.type,delete D.id,delete D.name,delete D.group;var V="ui_".concat(C,"_").concat(k,"_").concat(G),Y="    ".concat(V,"->figure_tpye = ").concat(q,`;
`);for(var h in D){var le=D[h];typeof le=="number"&&(le=Math.round(le)),Y+="    ".concat(V,"->").concat(T[h]," = ").concat(le,`;
`)}return"".concat(Y,`
`)},m=function(C,k,w,D,q,G,V,Y){for(var h="".concat(C,"_").concat(w,"_").concat(q),le="//".concat(n,"// Created by RM UI Designer").concat(n,"//").concat(n).concat(n,'#include "ui_').concat(h,'.h"').concat(n).concat(n,"#define FRAME_ID ").concat(k).concat(n,"#define GROUP_ID ").concat(D).concat(n,"#define START_ID ").concat(G).concat(n,"#define OBJ_NUM ").concat(V.length).concat(n,"#define FRAME_OBJ_NUM ").concat(Y).concat(n).concat(n,"CAT(ui_, CAT(FRAME_OBJ_NUM, _frame_t)) ui_").concat(h,";").concat(n),Me=0;Me<V.length;Me++){var ye=x[V[Me].type],be=V[Me].name;le+="ui_interface_".concat(ye,"_t *ui_").concat(C,"_").concat(w,"_").concat(be," = ")+"(ui_interface_".concat(ye,"_t *)&(ui_").concat(h,".data[").concat(Me,`]);
`)}le+="".concat(n,"void _ui_init_").concat(h,"() {").concat(n,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(n,"        ui_").concat(h,".data[i].figure_name[0] = FRAME_ID;").concat(n,"        ui_").concat(h,".data[i].figure_name[1] = GROUP_ID;").concat(n,"        ui_").concat(h,".data[i].figure_name[2] = i + START_ID;").concat(n,"        ui_").concat(h,".data[i].operate_tpyel = 1;").concat(n,"    }").concat(n,"    for (int i = OBJ_NUM; i < FRAME_OBJ_NUM; i++) {").concat(n,"        ui_").concat(h,".data[i].operate_tpyel = 0;").concat(n,"    }").concat(n).concat(n);var pe=Z()(V),he;try{for(pe.s();!(he=pe.n()).done;){var se=he.value;le+=z(C,w,se)}}catch(oe){pe.e(oe)}finally{pe.f()}return le+="".concat(n,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(h,");").concat(n,"    SEND_MESSAGE((uint8_t *) &ui_").concat(h,", sizeof(ui_").concat(h,"));").concat(n,"}").concat(n).concat(n,"void _ui_update_").concat(h,"() {").concat(n,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(n,"        ui_").concat(h,".data[i].operate_tpyel = 2;").concat(n,"    }").concat(n).concat(n,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(h,");").concat(n,"    SEND_MESSAGE((uint8_t *) &ui_").concat(h,", sizeof(ui_").concat(h,"));").concat(n,"}").concat(n).concat(n,"void _ui_remove_").concat(h,"() {").concat(n,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(n,"        ui_").concat(h,".data[i].operate_tpyel = 3;").concat(n,"    }").concat(n).concat(n,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(h,");").concat(n,"    SEND_MESSAGE((uint8_t *) &ui_").concat(h,", sizeof(ui_").concat(h,"));").concat(n,"}").concat(n),le},p=function(C,k,w,D,q,G,V){var Y="".concat(C,"_").concat(w,"_").concat(q),h=F()({},V[0]),le=h.name,Me=h.text;h.color=A[h.color],h.strLength=Me.length,h.lineWidth=Math.round(h.fontSize/10),delete h.text,delete h.type,delete h.id,delete h.name,delete h.group;var ye="//".concat(n,"// Created by RM UI Designer").concat(n,"//").concat(n).concat(n,'#include "ui_').concat(Y,'.h"').concat(n,'#include "string.h"').concat(n).concat(n,"#define FRAME_ID ").concat(k).concat(n,"#define GROUP_ID ").concat(D).concat(n,"#define START_ID ").concat(G).concat(n).concat(n,"ui_string_frame_t ui_").concat(Y,";").concat(n).concat(n,"ui_interface_string_t* ui_").concat(C,"_").concat(w,"_").concat(le," = &ui_").concat(Y,".option;").concat(n).concat(n,"void _ui_init_").concat(Y,"() {").concat(n,"    ui_").concat(Y,".option.figure_name[0] = FRAME_ID;").concat(n,"    ui_").concat(Y,".option.figure_name[1] = GROUP_ID;").concat(n,"    ui_").concat(Y,".option.figure_name[2] = START_ID;").concat(n,"    ui_").concat(Y,".option.operate_tpyel = 1;").concat(n);ye+="    ui_".concat(Y,".option.figure_tpye = ").concat(O.UiText,`;
`);for(var be in h){var pe=h[be];typeof pe=="number"&&(pe=Math.round(pe)),ye+="    ui_".concat(Y,".option.").concat(T[be]," = ").concat(pe,`;
`)}return ye+="    strcpy(ui_".concat(C,"_").concat(w,"_").concat(le,'->string, "').concat(Me,'");').concat(n).concat(n,"    ui_proc_string_frame(&ui_").concat(Y,");").concat(n,"    SEND_MESSAGE((uint8_t *) &ui_").concat(Y,", sizeof(ui_").concat(Y,"));").concat(n,"}").concat(n).concat(n,"void _ui_update_").concat(Y,"() {").concat(n,"    ui_").concat(Y,".option.operate_tpyel = 2;").concat(n).concat(n,"    ui_proc_string_frame(&ui_").concat(Y,");").concat(n,"    SEND_MESSAGE((uint8_t *) &ui_").concat(Y,", sizeof(ui_").concat(Y,"));").concat(n,"}").concat(n).concat(n,"void _ui_remove_").concat(Y,"() {").concat(n,"    ui_").concat(Y,".option.operate_tpyel = 3;").concat(n).concat(n,"    ui_proc_string_frame(&ui_").concat(Y,");").concat(n,"    SEND_MESSAGE((uint8_t *) &ui_").concat(Y,", sizeof(ui_").concat(Y,"));").concat(n,"}"),ye},b=function(){return S.apply(this,arguments)},S=function(){return S=I()(R()().mark(function C(){return R()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",{ui_interface:{h:g,c:y},ui_types:{h:c}});case 1:case"end":return w.stop()}},C)})),S.apply(this,arguments)};e.d(Q,{HC:function(){return b},JP:function(){return m},LI:function(){return f},c0:function(){return p},pj:function(){return d}});var W=e(15009),R=e.n(W),H=e(99289),I=e.n(H),J=e(97857),F=e.n(J),B=e(64599),Z=e.n(B),n=`
`,x={UiArc:"arc",UiRound:"round",UiRect:"rect",UiLine:"line",UiEllipse:"ellipse",UiText:"string",UiNumber:"number",UiFloat:"number"},O={UiLine:0,UiRect:1,UiRound:2,UiEllipse:3,UiArc:4,UiFloat:5,UiNumber:6,UiText:7},T={lineWidth:"width",layer:"layer",x:"start_x",y:"start_y",x2:"end_x",y2:"end_y",rx:"rx",ry:"ry",r:"r",startAngle:"start_angle",endAngle:"end_angle",number:"number",color:"color",fontSize:"font_size",strLength:"str_length"},A={main:0,yellow:1,green:2,orange:3,purple:4,pink:5,cyan:6,black:7,white:8},M=e(75112),a=e(8938),t=e(33562),g=yield(yield fetch(M)).text(),y=yield(yield fetch(a)).text(),c=yield(yield fetch(t)).text();u()}catch(l){u(l)}})},1)},44740:function(te,Q,e){e.d(Q,{Z:function(){return o}});var P=e(15009),u=e.n(P),W=e(99289),R=e.n(W),H=e(12444),I=e.n(H),J=e(72004),F=e.n(J),B=e(9783),Z=e.n(B),n=e(19632),x=e.n(n),O=e(85378),T=function(){function f(){I()(this,f),Z()(this,"messages",[]),Z()(this,"enabled",!1)}return F()(f,[{key:"warn",value:function(z){this.enabled&&(this.messages.push({level:"warn",message:z,time:new Date}),console.warn(z)),this.messages.length>100&&(this.messages=this.messages.slice(-100))}},{key:"error",value:function(z){this.enabled&&(this.messages.push({level:"error",message:z,time:new Date}),console.error(z)),this.messages.length>100&&(this.messages=this.messages.slice(-100))}},{key:"clear",value:function(){this.messages=[]}},{key:"get",value:function(){return this.messages}}]),f}(),A=new T,M=A,a=[8,21,36,81,111,51],t=function(){function f(){I()(this,f),Z()(this,"buffer",void 0),this.buffer=new Uint8Array(0)}return F()(f,[{key:"transform",value:function(z,m){for(this.buffer=Uint8Array.from([].concat(x()(this.buffer),x()(z)));this.buffer.length>7;){if(this.buffer[0]!==165){this.buffer=this.buffer.subarray(1);continue}if(this.buffer.length<7)break;var p=this.buffer[1]|this.buffer[2]<<8,b=this.buffer[3],S=this.buffer[4],C=this.buffer[5]|this.buffer[6]<<8,k=this.buffer.subarray(0,4);if((0,O.d)(k)!==S){this.buffer=this.buffer.subarray(1),M.warn("crc8 error, calc: 0x".concat((0,O.d)(k).toString(16),", msg: 0x").concat(S.toString(16)));continue}if(C!==769){this.buffer=this.buffer.subarray(1),M.warn("cmd_id 0x".concat(C.toString(16)," not match"));continue}if(!a.includes(p)){this.buffer=this.buffer.subarray(1),M.warn("length error, length: ".concat(p));continue}if(this.buffer.length<6+p+2)break;var w=this.buffer.subarray(7,7+p),D=this.buffer[7+p]|this.buffer[8+p]<<8;if((0,O.I)(this.buffer.subarray(0,7+p))!==D){this.buffer=this.buffer.subarray(1),M.error("crc16 error, calc: 0x".concat((0,O.I)(this.buffer.subarray(0,7+p)).toString(16),", msg: 0x").concat(D.toString(16)));continue}m.enqueue(w),this.buffer=this.buffer.subarray(7+p+2)}}}]),f}(),g=t,y=e(73676),c=e(28348),l=function(){function f(d,z){I()(this,f),Z()(this,"options",{baudRate:115200,dataBits:8,stopBits:1,flowControl:"none",parity:"none"}),this.onEvent=d,this.onError=z,this.reader=null,this.transformer=new TransformStream(new g)}return F()(f,[{key:"connect",value:function(){var d=R()(u()().mark(function m(){return u()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if("serial"in navigator){b.next=3;break}return c.yw.error("Web Serial API not supported."),b.abrupt("return");case 3:return b.next=5,navigator.serial.requestPort();case 5:return this.port=b.sent,b.next=8,this.port.open(this.options);case 8:this.readableStreamClosed=this.port.readable.pipeTo(this.transformer.writable),this.reader=this.transformer.readable.getReader(),M.enabled=!0,M.clear(),this.readLoop();case 13:case"end":return b.stop()}},m,this)}));function z(){return d.apply(this,arguments)}return z}()},{key:"stop",value:function(){var d=R()(u()().mark(function m(){var p,b,S;return u()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return p=new TextEncoderStream,b=p.writable.getWriter(),S=p.readable.pipeTo(this.port.writable),this.reader.cancel(),k.next=6,this.readableStreamClosed.catch(function(){});case 6:return b.close(),k.next=9,S;case 9:return k.next=11,this.port.close();case 11:this.reader=null,this.transformer=new TransformStream(new g),M.enabled=!1;case 14:case"end":return k.stop()}},m,this)}));function z(){return d.apply(this,arguments)}return z}()},{key:"readLoop",value:function(){var d=R()(u()().mark(function m(){var p,b,S,C;return u()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:w.prev=0;case 1:return w.next=4,this.reader.read();case 4:if(p=w.sent,b=p.value,S=p.done,!S){w.next=10;break}return this.reader.releaseLock(),w.abrupt("break",20);case 10:if(C=(0,y.EY)(b),C.sender===c.eq){w.next=14;break}return M.error("Sender ".concat(C.sender," not match self ").concat(c.eq)),w.abrupt("continue",1);case 14:if(C.receiver===c.eq+256){w.next=17;break}return M.error("Receiver ".concat(C.receiver," not match self ").concat(c.eq)),w.abrupt("continue",1);case 17:this===null||this===void 0||this.onEvent(C),w.next=1;break;case 20:w.next=36;break;case 22:return w.prev=22,w.t0=w.catch(0),w.prev=24,w.next=27,this.stop();case 27:w.next=31;break;case 29:w.prev=29,w.t1=w.catch(24);case 31:this.reader=null,this.transformer=new TransformStream(new g),M.enabled=!1,M.clear(),this.onError(w.t0);case 36:case"end":return w.stop()}},m,this,[[0,22],[24,29]])}));function z(){return d.apply(this,arguments)}return z}()},{key:"getLog",value:function(){return M.get()}}]),f}(),o=l},56134:function(te,Q,e){e.a(te,function(P,u){return De(this,null,function*(){try{var W=e(64599),R=e.n(W),H=e(15009),I=e.n(H),J=e(99289),F=e.n(J),B=e(12444),Z=e.n(B),n=e(72004),x=e.n(n),O=e(9783),T=e.n(O),A=e(10622),M=e(52880),a=e(28348),t=P([A]);A=(t.then?(yield t)():t)[0];var g=function(){function y(){Z()(this,y),T()(this,"options",{baudRate:115200,dataBits:8,stopBits:1,flowControl:"none",parity:"none"}),T()(this,"writer",null)}return x()(y,[{key:"connect",value:function(){var c=F()(I()().mark(function o(){return I()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if("serial"in navigator){d.next=3;break}return a.yw.error("Web Serial API not supported."),d.abrupt("return");case 3:return d.next=5,navigator.serial.requestPort();case 5:return this.port=d.sent,d.next=8,this.port.open(this.options);case 8:this.writer=this.port.writable.getWriter();case 9:case"end":return d.stop()}},o,this)}));function l(){return c.apply(this,arguments)}return l}()},{key:"stop",value:function(){var c=F()(I()().mark(function o(){return I()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.writer.releaseLock();case 2:return this.writer=null,d.next=5,this.port.close();case 5:case"end":return d.stop()}},o,this)}));function l(){return c.apply(this,arguments)}return l}()},{key:"write",value:function(){var c=F()(I()().mark(function o(f){var d=this,z,m,p,b,S,C,k;return I()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(this.writer){D.next=3;break}return a.yw.error("Serial port is not open."),D.abrupt("return");case 3:z=0,setTimeout(function(){d.writer.write((0,M.r)())},z),z+=50,m=new A.Z(f.data),p=m.toSerialMsg(),b=p[f.selected],console.log(f),S=R()(b),D.prev=11,k=I()().mark(function q(){var G;return I()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:G=C.value,setTimeout(function(){d.writer.write(G)},z),z+=50;case 3:case"end":return Y.stop()}},q)}),S.s();case 14:if((C=S.n()).done){D.next=18;break}return D.delegateYield(k(),"t0",16);case 16:D.next=14;break;case 18:D.next=23;break;case 20:D.prev=20,D.t1=D.catch(11),S.e(D.t1);case 23:return D.prev=23,S.f(),D.finish(23);case 26:case"end":return D.stop()}},o,this,[[11,20,23,26]])}));function l(o){return c.apply(this,arguments)}return l}()}]),y}();Q.Z=g,u()}catch(y){u(y)}})})},30789:function(te,Q,e){e.d(Q,{E:function(){return Z},E4:function(){return x},GM:function(){return g},Gj:function(){return O},UP:function(){return M},cT:function(){return c},jK:function(){return l},lZ:function(){return A},q7:function(){return T}});var P=e(15009),u=e.n(P),W=e(99289),R=e.n(W),H=e(17990),I=e(55733),J=e.n(I),F=document.createElement("a"),B=document.createElement("input");B.type="file";var Z={yellow:"rgb(255, 238, 70)",green:"rgb(168, 255, 45)",orange:"rgb(255, 163, 8)",purple:"rgb(240, 41, 246)",pink:"rgb(255, 100, 142)",cyan:"rgb(69, 255, 242)",white:"#fff",black:"#000",blue:"rgb(47, 168, 223)",red:"rgb(255, 69, 70)"};function n(o){var f=o.split(".").pop();return{name:f+" file",extensions:[f]}}function x(o,f){if(M())R()(u()().mark(function m(){var p;return u()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,H.WZ.save({filters:[n(f)],defaultPath:f});case 2:if(p=S.sent,!(p!==null&&p.length>0)){S.next=6;break}return S.next=6,H.fs.writeTextFile(p,o);case 6:case"end":return S.stop()}},m)}))();else{var d=new Blob([o],{type:"text/plain;charset=utf-8"}),z=URL.createObjectURL(d);F.href=z,F.download=f,F.click(),URL.revokeObjectURL(z)}}function O(o,f){if(M())R()(u()().mark(function z(){var m,p;return u()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,H.WZ.save({filters:[n(f)],defaultPath:f});case 2:if(m=S.sent,!(m!==null&&m.length>0)){S.next=9;break}return S.next=6,o.arrayBuffer();case 6:return p=S.sent,S.next=9,H.fs.writeBinaryFile(m,p);case 9:case"end":return S.stop()}},z)}))();else{var d=URL.createObjectURL(o);F.href=d,F.download=f,F.click(),URL.revokeObjectURL(d)}}function T(o,f,d){var z={version:2,data:o,selected:d},m=JSON.stringify(z);x(m,f)}function A(o){var f=null;return window.createObjcectURL!==void 0?f=window.createOjcectURL(o):window.URL!==void 0?f=window.URL.createObjectURL(o):window.webkitURL!==void 0&&(f=window.webkitURL.createObjectURL(o)),f}function M(){return window!==void 0&&window.__TAURI__!==void 0}function a(o){return t.apply(this,arguments)}function t(){return t=R()(u()().mark(function o(f){var d;return u()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d=new(J()),f.forEach(function(p){d.file(p.fileName,p.content)}),m.next=4,d.generateAsync({type:"blob"});case 4:return m.abrupt("return",m.sent);case 5:case"end":return m.stop()}},o)})),t.apply(this,arguments)}function g(o){return y.apply(this,arguments)}function y(){return y=R()(u()().mark(function o(f){var d,z,m;return u()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:d=[];for(z in f)for(m in f[z])d.push({fileName:"".concat(z,".").concat(m),content:f[z][m]});return b.next=4,a(d);case 4:return b.abrupt("return",b.sent);case 5:case"end":return b.stop()}},o)})),y.apply(this,arguments)}function c(o){return new Promise(function(f,d){if(M()){var z=[o.slice(1)],m="".concat(z," file");o==="image/*"&&(z=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],m="image"),R()(u()().mark(function p(){var b,S,C,k,w;return u()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,H.WZ.open({multiple:!1,directory:!1,filters:[{name:m,extensions:z}]});case 2:if(b=q.sent,!(b!==null&&b.length>0)){q.next=16;break}return S=b.replace(/\\/g,"/"),C=S.split("/").pop(),q.t0=Blob,q.next=9,H.fs.readBinaryFile(b);case 9:q.t1=q.sent,q.t2=[q.t1],k=new q.t0(q.t2),w=new File([k],C),f(w),q.next=17;break;case 16:d();case 17:case"end":return q.stop()}},p)}))()}else B.accept=o,B.value="",B.onchange=function(){if(B.files.length>0){var p=B.files[0];f(p)}else d(new Error("No file selected"))},B.click()})}function l(o){return document.getElementById("content-in").contains(o)||o.getAttribute("contentEditable")==="true"?!0:o.tagName==="INPUT"||o.tagName==="TEXTAREA"}},54030:function(te,Q,e){var P=e(67294),u=e(28348),W=e(85893);function R(H){return(0,u.ZP)(),(0,W.jsx)("div",{})}Q.Z=R},7427:function(te,Q,e){var P=e(12444),u=e.n(P),W=e(72004),R=e.n(W),H=e(31996),I=e.n(H),J=e(26037),F=e.n(J),B=e(67294),Z=e(21797),n=e(2487),x=e(42075),O=e(28058),T=e(18429),A=e(85893),M=function(a){I()(g,a);var t=F()(g);function g(){return u()(this,g),t.apply(this,arguments)}return R()(g,[{key:"render",value:function(){var c=this.props.errors.filter(function(f){return f.level==="warning"}),l=this.props.errors.filter(function(f){return f.level==="error"}),o=(0,A.jsx)(Z.ZP,{status:"success",title:"Check Passed!",subTitle:"0 error, 0 warning!",style:{marginTop:"50px"}});return l.length+c.length>0&&(o=(0,A.jsxs)("div",{style:{color:"var(--ant-color-text)",height:"100%"},children:[(0,A.jsxs)("p",{children:["Found ",l.length," errors, ",c.length," warnings."]}),(0,A.jsx)("div",{style:{paddingBottom:10},className:"card-body",children:(0,A.jsx)(n.Z,{bordered:!0,dataSource:this.props.errors,renderItem:function(d){return(0,A.jsx)(n.Z.Item,{children:(0,A.jsxs)(x.Z,{size:"middle",children:[d.level==="warning"?(0,A.jsx)(O.Z,{}):(0,A.jsx)(T.Z,{}),d.info]})})}})})]})),(0,A.jsxs)("div",{style:{width:"100%",height:"calc(100% - 50px)"},children:[(0,A.jsx)("h3",{style:{color:"var(--ant-color-text)"},children:"Check Data"}),o]})}}]),g}(B.Component);Q.Z=M},56296:function(te,Q,e){e.a(te,function(P,u){return De(this,null,function*(){try{let h=function(Me){var ye="";return Me.h&&(ye+=".h"),Me.h&&Me.c&&(ye+=" and "),Me.c&&(ye+=".c"),ye},le=function(){var Me=document.querySelector(".rmui"),ye=getComputedStyle(Me),be=ye.getPropertyValue("--ant-color-text-base");return be==="#fff"};var W=e(19632),R=e.n(W),H=e(15009),I=e.n(H),J=e(64599),F=e.n(J),B=e(97857),Z=e.n(B),n=e(99289),x=e.n(n),O=e(12444),T=e.n(O),A=e(72004),M=e.n(A),a=e(25098),t=e.n(a),g=e(31996),y=e.n(g),c=e(26037),l=e.n(c),o=e(9783),f=e.n(o),d=e(67294),z=e(49107),m=e(42075),p=e(14726),b=e(85265),S=e(42308),C=e(28348),k=e(24389),w=e(51376),D=e(30789),q=e(5970),G=e(85893),V=P([q]);q=(V.then?(yield V)():V)[0];var Y=function(Me){y()(be,Me);var ye=l()(be);function be(){var pe;T()(this,be);for(var he=arguments.length,se=new Array(he),oe=0;oe<he;oe++)se[oe]=arguments[oe];return pe=ye.call.apply(ye,[this].concat(se)),f()(t()(pe),"state",{preview:null,fileName:""}),f()(t()(pe),"checked",[]),pe}return M()(be,[{key:"review",value:function(he,se){this.setState({preview:this.props.code[he][se],fileName:"".concat(he,".").concat(se)})}},{key:"download",value:function(he,se){(0,D.E4)(this.props.code[he][se],"".concat(he,".").concat(se)),console.log(this.props.code[he][se])}},{key:"downloadChecked",value:function(){var pe=x()(I()().mark(function se(){var oe,ve,ie,$,ue;return I()().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:if(this.checked.length!==0){ge.next=3;break}return C.yw.error("Please select at least one file."),ge.abrupt("return");case 3:return oe={},ge.t0=Z(),ge.t1=Z()({},this.props.code),ge.next=8,(0,q.HC)();case 8:ge.t2=ge.sent,ve=(0,ge.t0)(ge.t1,ge.t2),ie=F()(this.checked);try{for(ie.s();!($=ie.n()).done;)ue=$.value,oe[ue]=ve[ue]}catch(xe){ie.e(xe)}finally{ie.f()}(0,D.GM)(oe).then(function(xe){(0,D.Gj)(xe,"codes.zip")});case 13:case"end":return ge.stop()}},se,this)}));function he(){return pe.apply(this,arguments)}return he}()},{key:"render",value:function(){var he=this,se=[{file:"ui base .h and .c",key:"_base"}];for(var oe in this.props.code)se.push({file:"".concat(oe," ").concat(h(this.props.code[oe])),key:oe,h:this.props.code[oe].h!==void 0,c:this.props.code[oe].c!==void 0});return(0,G.jsxs)("div",{className:"full",style:{overflow:"hidden"},children:[(0,G.jsx)("h3",{style:{color:"var(--ant-color-text)",marginBottom:20},children:"Download Data"}),(0,G.jsx)("div",{style:{paddingBottom:36},className:"card-body",children:(0,G.jsx)(z.Z,{columns:[{title:"File",dataIndex:"file",key:"file"},{title:"Preview",dataIndex:"key",key:"preview",render:function(ie,$){return(0,G.jsxs)(m.Z,{children:[$.h&&(0,G.jsx)(p.ZP,{type:"link",onClick:function(){he.review(ie,"h")},children:"Preview .h"}),$.c&&(0,G.jsx)(p.ZP,{type:"link",onClick:function(){he.review(ie,"c")},children:"Preview .c"})]})}},{title:"Download",dataIndex:"key",key:"download",render:function(ie,$){return ie!=="_base"?(0,G.jsxs)(m.Z,{children:[$.h&&(0,G.jsx)(p.ZP,{type:"link",onClick:function(){he.download(ie,"h")},children:"Download .h"}),$.c&&(0,G.jsx)(p.ZP,{type:"link",onClick:function(){he.download(ie,"c")},children:"Download .c"})]}):(0,G.jsx)(p.ZP,{type:"link",onClick:x()(I()().mark(function ue(){var Se,ge;return I()().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return ze.next=2,(0,q.HC)();case 2:return Se=ze.sent,ze.next=5,(0,D.GM)(Se);case 5:ge=ze.sent,(0,D.Gj)(ge,"ui_base.zip");case 7:case"end":return ze.stop()}},ue)})),children:"Download .zip"})}}],dataSource:se,rowSelection:{type:"checkbox",onChange:function(ie){var $=R()(ie);$.includes("_base")&&($=$.filter(function(ue){return ue!=="_base"}),$.push("ui_types"),$.push("ui_interface")),he.checked=$},getCheckboxProps:function(ie){return{name:ie.key}}},pagination:!1})}),(0,G.jsx)(b.Z,{onClose:function(){return he.setState({preview:null})},open:this.state.preview!==null,title:this.state.fileName,size:"large",getContainer:document.getElementById("content-in"),rootStyle:{inset:"25px 0 0 0"},children:(0,G.jsx)("div",{style:{height:"100%",overflow:"auto"},children:(0,G.jsx)(S.ZP,{value:this.state.preview||"",theme:le()?k.ub:k.tR,extensions:[(0,w.N)()],onContextMenu:function(ie){ie.stopPropagation()}})})})]})}}]),be}(d.Component);Q.Z=Y,u()}catch(h){u(h)}})})},22312:function(te,Q,e){e.a(te,function(P,u){return De(this,null,function*(){try{var W=e(64599),R=e.n(W),H=e(12444),I=e.n(H),J=e(72004),F=e.n(J),B=e(25098),Z=e.n(B),n=e(31996),x=e.n(n),O=e(26037),T=e.n(O),A=e(9783),M=e.n(A),a=e(67294),t=e(14726),g=e(85265),y=e(7427),c=e(56296),l=e(10622),o=e(85893),f=P([c,l]);[c,l]=f.then?(yield f)():f;var d=function(z){x()(p,z);var m=T()(p);function p(){var b;I()(this,p);for(var S=arguments.length,C=new Array(S),k=0;k<S;k++)C[k]=arguments[k];return b=m.call.apply(m,[this].concat(C)),M()(Z()(b),"state",{show:!1,step:"check"}),M()(Z()(b),"downloadRef",(0,a.createRef)()),M()(Z()(b),"data",{}),M()(Z()(b),"errors",[]),b}return F()(p,[{key:"gen",value:function(S){this.helper=new l.Z(S),this.data=S,this.code={ui:{h:this.helper.toUiH()}};var C=R()(this.helper.frames),k;try{for(C.s();!(k=C.n()).done;){var w=k.value,D=R()(w.groups),q;try{for(D.s();!(q=D.n()).done;){var G=q.value,V=R()(G.splits),Y;try{for(V.s();!(Y=V.n()).done;){var h=Y.value;this.code["ui_".concat(w.name,"_").concat(G.group_name,"_").concat(h.split_id)]={c:h.toSplitC(),h:h.toSplitH()}}}catch(le){V.e(le)}finally{V.f()}}}catch(le){D.e(le)}finally{D.f()}}}catch(le){C.e(le)}finally{C.f()}this.errors=this.helper.check(),this.setState({show:!0,step:"check"})}},{key:"onClose",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var S=this,C=(0,o.jsx)(t.ZP,{type:"primary",onClick:function(){return S.setState({step:"generate"})},disabled:this.errors.filter(function(w){return w.level==="error"}).length>0,children:"Generate"}),k=(0,o.jsx)(t.ZP,{type:"primary",onClick:function(){var D;return(D=S.downloadRef)===null||D===void 0||(D=D.current)===null||D===void 0?void 0:D.downloadChecked()},children:"Download"});return(0,o.jsx)("div",{children:(0,o.jsx)(g.Z,{title:"C Code Generator",placement:"right",onClose:function(){return S.onClose()},open:this.state.show,size:"large",getContainer:document.getElementById("content-in"),rootStyle:{inset:"25px 0 0 0"},style:{borderTop:"3px var(--ant-line-type) var(--ant-color-split)"},footer:(0,o.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",padding:5},children:this.state.step==="check"?C:k}),children:this.state.step==="check"?(0,o.jsx)(y.Z,{errors:this.errors}):(0,o.jsx)(c.Z,{code:this.code,ref:this.downloadRef})})})}}]),p}(a.Component);Q.Z=d,u()}catch(z){u(z)}})})},54433:function(te,Q,e){var P=e(12444),u=e.n(P),W=e(72004),R=e.n(W),H=e(31996),I=e.n(H),J=e(26037),F=e.n(J),B=e(67294),Z=e(86250),n=e(63606),x=e(85893),O=function(T){I()(M,T);var A=F()(M);function M(){return u()(this,M),A.apply(this,arguments)}return R()(M,[{key:"render",value:function(){return(0,x.jsxs)(Z.Z,{style:{width:"100%"},justify:"space-between",children:[this.props.children,(0,x.jsx)("div",{children:this.props.checked&&(0,x.jsx)(n.Z,{})})]})}}]),M}(B.Component);Q.Z=O},58377:function(te,Q,e){e.a(te,function(P,u){return De(this,null,function*(){try{var W=e(15009),R=e.n(W),H=e(99289),I=e.n(H),J=e(64599),F=e.n(J),B=e(12444),Z=e.n(B),n=e(72004),x=e.n(n),O=e(25098),T=e.n(O),A=e(31996),M=e.n(A),a=e(26037),t=e.n(a),g=e(9783),y=e.n(g),c=e(67294),l=e(14726),o=e(86250),f=e(83159),d=e(40411),z=e(73711),m=e(27732),p=e(11713),b=e(1210),S=e(52745),C=e(97937),k=e(16165),w=e(48268),D=e(62388),q=e(3213),G=e(54349),V=e(13799),Y=e(82843),h=e(23481),le=e(79476),Me=e(54433),ye=e(28348),be=e(73344),pe=e(553),he=e(30789),se=e(22312),oe=e(44740),ve=e(56134),ie=e(37932),$=e(85893),ue=P([se,ve]);[se,ve]=ue.then?(yield ue)():ue;var Se=[{key:"File-new",label:"New"},{key:"File-open",label:"Open"},{key:"File-save",label:"Save"},{key:"File-saveAs",label:"Save as"},{key:"File-autoSave",label:"Auto Save"},{type:"divider"},{key:"File-generate",label:"Generate Code",icon:(0,$.jsx)(z.Z,{})}],ge=[{key:"Edit-undo",label:"Undo"},{key:"Edit-redo",label:"Redo"},{key:"Edit-reset",label:"Reset History"}],xe=[{key:"Simulate-from",label:"From Robot",children:[{key:"Simulate-from-start",label:"Start"},{key:"Simulate-from-stop",label:"Stop"},{key:"Simulate-from-log",label:"Debug Log"}]},{key:"Simulate-to",label:"To Referee",children:[{key:"Simulate-to-start",label:"Start"},{key:"Simulate-to-stop",label:"Stop"},{key:"Simulate-to-update",label:"Update"}]},{key:"Simulate-settings",label:"Settings"}],ze=function(je){M()(Ae,je);var ke=t()(Ae);function Ae(){var ae;Z()(this,Ae);for(var ce=arguments.length,Ie=new Array(ce),de=0;de<ce;de++)Ie[de]=arguments[de];return ae=ke.call.apply(ke,[this].concat(Ie)),y()(T()(ae),"state",{fullscreen:!1,frames:["default"],selectedFrame:"default",darkMode:!1,couldUndo:!1,couldRedo:!1,serialStart:!1,serialToStart:!1,autoSave:!0}),y()(T()(ae),"formRef",(0,c.createRef)()),y()(T()(ae),"aboutRef",(0,c.createRef)()),y()(T()(ae),"generatorRef",(0,c.createRef)()),y()(T()(ae),"logDrawerRef",(0,c.createRef)()),y()(T()(ae),"serialModalRef",(0,c.createRef)()),y()(T()(ae),"modeModalRef",(0,c.createRef)()),y()(T()(ae),"tauri",(0,he.UP)()),y()(T()(ae),"serial",new oe.Z(function(Ce){return ae.onSerialEvent(Ce)},function(Ce){return ae.onSerialError(Ce)})),y()(T()(ae),"serialTo",new ve.Z),y()(T()(ae),"fileHandler",null),ae}return x()(Ae,[{key:"onSerialEvent",value:function(ce){var Ie=F()(ce.events),de;try{for(Ie.s();!(de=Ie.n()).done;){var Ce=de.value;this.props.onObjectEvent(Ce.type,Ce.obj)}}catch(ee){Ie.e(ee)}finally{Ie.f()}}},{key:"onSerialError",value:function(ce){this.props.setEditable(!0),this.setState({serialStart:!1}),ye.yw.error(ce.text)}},{key:"componentDidMount",value:function(){var ae=I()(R()().mark(function Ie(){var de=this,Ce,ee,_,L,E;return R()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(_=function(){return _=I()(R()().mark(function j(){var U;return R()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,be.G.isMaximized();case 2:U=N.sent,Ce.setState({fullscreen:U});case 4:case"end":return N.stop()}},j)})),_.apply(this,arguments)},ee=function(){return _.apply(this,arguments)},Ce=this,!this.tauri){r.next=8;break}return r.next=6,ee();case 6:return r.next=8,be.G.onResized(function(i){return ee()});case 8:return r.next=11,(L=this.modeModalRef.current)===null||L===void 0?void 0:L.open();case 11:if(E=r.sent,E!=="new"){r.next=25;break}return this.fileHandler=new ie.X(function(){return JSON.stringify({version:2,data:de.props.getData(),selected:de.state.selectedFrame})}),r.next=16,this.fileHandler.create();case 16:if(!r.sent){r.next=23;break}return r.t0=this.props,r.next=20,this.fileHandler.read();case 20:return r.t1=r.sent,r.t0.upload.call(r.t0,r.t1),r.abrupt("break",42);case 23:r.next=40;break;case 25:if(E!=="open"){r.next=38;break}return this.fileHandler=new ie.X(function(){return JSON.stringify({version:2,data:de.props.getData(),selected:de.state.selectedFrame})}),r.next=29,this.fileHandler.open();case 29:if(!r.sent){r.next=36;break}return r.t2=this.props,r.next=33,this.fileHandler.read();case 33:return r.t3=r.sent,r.t2.upload.call(r.t2,r.t3),r.abrupt("break",42);case 36:r.next=40;break;case 38:return this.setState({autoSave:!1}),r.abrupt("break",42);case 40:r.next=8;break;case 42:window.addEventListener("keydown",function(){var i=I()(R()().mark(function j(U){return R()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(!(U.ctrlKey&&U.key==="s")){N.next=8;break}if(U.preventDefault(),!de.fileHandler){N.next=7;break}return N.next=5,de.fileHandler.save();case 5:N.next=8;break;case 7:(0,he.q7)(de.props.getData(),"ui.rmui",de.state.selectedFrame);case 8:case"end":return N.stop()}},j)}));return function(j){return i.apply(this,arguments)}}());case 43:case"end":return r.stop()}},Ie,this)}));function ce(){return ae.apply(this,arguments)}return ce}()},{key:"setCouldDo",value:function(ce){this.setState({couldUndo:ce.couldPrevious,couldRedo:ce.couldNext}),this.fileHandler&&this.state.autoSave&&this.fileHandler.update()}},{key:"fullScreen",value:function(){if(this.tauri)be.G.maximize();else{var ce=document.documentElement;ce.requestFullscreen?ce.requestFullscreen():ce.msRequestFullscreen?ce.msRequestFullscreen():ce.mozRequestFullScreen?ce.mozRequestFullScreen():ce.webkitRequestFullscreen&&ce.webkitRequestFullscreen()}this.setState({fullscreen:!0})}},{key:"exitFullscreen",value:function(){this.tauri?be.G.unmaximize():document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),this.setState({fullscreen:!1})}},{key:"setFrames",value:function(ce){this.setState({frames:ce.frames,selectedFrame:ce.selected})}},{key:"onMenuClick",value:function(){var ae=I()(R()().mark(function Ie(de){var Ce=this,ee,_,L,E,v,r,i,j,U,X,N;return R()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(ee=de.keyPath[de.keyPath.length-1],ee.slice(0,6)!=="Insert"){s.next=7;break}_=de.key.slice(7),L={id:-1,name:"New".concat(_),layer:0,group:"Ungroup",type:"Ui".concat(_)},this.props.onObjectEvent("_add",L),s.next=199;break;case 7:if(ee!=="Edit-reset"){s.next=11;break}this.props.onHistoryEvent("resetNow"),s.next=199;break;case 11:if(ee!=="Edit-undo"){s.next=15;break}this.props.onHistoryEvent("previous"),s.next=199;break;case 15:if(ee!=="Edit-redo"){s.next=19;break}this.props.onHistoryEvent("next"),s.next=199;break;case 19:if(ee!=="File-new"){s.next=40;break}if(!this.fileHandler){s.next=36;break}return s.next=23,this.fileHandler.disableAutoSave();case 23:return this.setState({autoSave:!1}),s.next=26,this.fileHandler.create();case 26:if(!s.sent){s.next=34;break}return s.t0=this.props,s.next=30,this.fileHandler.read();case 30:s.t1=s.sent,s.t0.upload.call(s.t0,s.t1),this.fileHandler.enableAutoSave(),this.setState({autoSave:!0});case 34:s.next=38;break;case 36:this.props.reset(),this.props.onHistoryEvent("reset");case 38:s.next=199;break;case 40:if(ee!=="File-save"){s.next=49;break}if(!this.fileHandler){s.next=46;break}return s.next=44,this.fileHandler.save();case 44:s.next=47;break;case 46:(0,he.q7)(this.props.getData(),"ui.rmui",this.state.selectedFrame);case 47:s.next=199;break;case 49:if(ee!=="File-saveAs"){s.next=63;break}if(!this.fileHandler){s.next=61;break}return s.next=53,this.fileHandler.disableAutoSave();case 53:return this.setState({autoSave:!1}),s.next=56,this.fileHandler.create();case 56:if(!s.sent){s.next=61;break}return s.next=59,this.fileHandler.save();case 59:this.fileHandler.enableAutoSave(),this.setState({autoSave:!0});case 61:s.next=199;break;case 63:if(ee!=="File-autoSave"){s.next=74;break}if(!this.fileHandler){s.next=72;break}if(!this.state.autoSave){s.next=70;break}return s.next=68,this.fileHandler.disableAutoSave();case 68:s.next=71;break;case 70:this.fileHandler.enableAutoSave();case 71:this.setState({autoSave:!this.state.autoSave});case 72:s.next=199;break;case 74:if(ee!=="File-open"){s.next=94;break}if(!this.fileHandler){s.next=91;break}return s.next=78,this.fileHandler.disableAutoSave();case 78:return this.setState({autoSave:!1}),s.next=81,this.fileHandler.open();case 81:if(!s.sent){s.next=89;break}return s.t2=this.props,s.next=85,this.fileHandler.read();case 85:s.t3=s.sent,s.t2.upload.call(s.t2,s.t3),this.fileHandler.enableAutoSave(),this.setState({autoSave:!0});case 89:s.next=92;break;case 91:(0,he.cT)(".rmui").then(function(re){Ce.props.upload(re)}).catch(function(){});case 92:s.next=199;break;case 94:if(ee!=="File-generate"){s.next=98;break}(E=this.generatorRef.current)===null||E===void 0||E.gen(this.props.getData()),s.next=199;break;case 98:if(ee!=="FrameOp-add"){s.next=105;break}return s.next=101,this.formRef.current.open("New Frame",this.state.frames);case 101:v=s.sent,this.props.setFrame("add",v),s.next=199;break;case 105:if(ee!=="FrameOp-remove"){s.next=109;break}this.props.setFrame("remove",this.state.selectedFrame),s.next=199;break;case 109:if(ee!=="FrameOp-copy"){s.next=116;break}return s.next=112,this.formRef.current.open("Copy Frame To",this.state.frames);case 112:r=s.sent,this.props.setFrame("copy",r),s.next=199;break;case 116:if(ee!=="FrameOp-rename"){s.next=123;break}return s.next=119,this.formRef.current.open("Rename Frame To",this.state.frames);case 119:i=s.sent,this.props.setFrame("rename",i),s.next=199;break;case 123:if(ee!=="FrameOp-change"){s.next=128;break}j=de.key.slice(7),this.props.setFrame("change",j),s.next=199;break;case 128:if(de.key!=="Simulate-from-start"){s.next=141;break}return s.prev=129,s.next=132,this.serial.connect();case 132:this.props.setEditable(!1),this.setState({serialStart:!0}),s.next=139;break;case 136:s.prev=136,s.t4=s.catch(129),ye.yw.error(s.t4.text);case 139:s.next=199;break;case 141:if(de.key!=="Simulate-from-stop"){s.next=154;break}return s.prev=142,s.next=145,this.serial.stop();case 145:this.props.setEditable(!0),this.setState({serialStart:!1}),s.next=152;break;case 149:s.prev=149,s.t5=s.catch(142),ye.yw.error(s.t5.text);case 152:s.next=199;break;case 154:if(de.key!=="Simulate-from-log"){s.next=158;break}(U=this.logDrawerRef.current)===null||U===void 0||U.show(this.serial.getLog()),s.next=199;break;case 158:if(de.key!=="Simulate-to-start"){s.next=171;break}return s.prev=159,s.next=162,this.serialTo.connect();case 162:ye.yw.warning("This Module is beta now, maybe not work!"),this.setState({serialToStart:!0}),s.next=169;break;case 166:s.prev=166,s.t6=s.catch(159),ye.yw.error(s.t6.text);case 169:s.next=199;break;case 171:if(de.key!=="Simulate-to-stop"){s.next=183;break}return s.prev=172,s.next=175,this.serialTo.stop();case 175:this.setState({serialToStart:!1}),s.next=181;break;case 178:s.prev=178,s.t7=s.catch(172),ye.yw.error(s.t7.text);case 181:s.next=199;break;case 183:if(de.key!=="Simulate-to-update"){s.next=194;break}return s.prev=184,s.next=187,this.serialTo.write({data:this.props.getData(),selected:this.state.selectedFrame});case 187:s.next=192;break;case 189:s.prev=189,s.t8=s.catch(184),ye.yw.error(s.t8.text);case 192:s.next=199;break;case 194:if(ee!=="Simulate-settings"){s.next=199;break}return s.next=197,(X=this.serialModalRef.current)===null||X===void 0?void 0:X.getOptions(this.serial.options);case 197:N=s.sent,N&&(this.serial.options=N);case 199:case"end":return s.stop()}},Ie,this,[[129,136],[142,149],[159,166],[172,178],[184,189]])}));function ce(Ie){return ae.apply(this,arguments)}return ce}()},{key:"getFramesMenu",value:function(){var ce=[{key:"FrameOp-add",label:"New Frame"},{key:"FrameOp-copy",label:"Copy This Frame"},{key:"FrameOp-rename",label:"Rename This Frame"},{key:"FrameOp-remove",label:"Remove This Frame"},{key:"FrameOp-change",label:"Change to",selectable:"true",children:[]}],Ie=F()(this.state.frames),de;try{for(Ie.s();!(de=Ie.n()).done;){var Ce=de.value;ce[4].children.push({key:"Frames-".concat(Ce),label:Ce})}}catch(ee){Ie.e(ee)}finally{Ie.f()}return ce}},{key:"render",value:function(){var ce=this,Ie=(0,$.jsx)(l.ZP,{type:"text",onClick:function(){return ce.fullScreen()},size:"small",children:(0,$.jsx)(m.Z,{style:{color:"var(--ant-color-text)"}})}),de=(0,$.jsx)(l.ZP,{type:"text",onClick:function(){return ce.exitFullscreen()},size:"small",children:(0,$.jsx)(p.Z,{style:{color:"var(--ant-color-text)"}})}),Ce=(0,$.jsx)(l.ZP,{type:"text",onClick:function(){return ce.props.setDarkMode(!0)},size:"small",children:(0,$.jsx)(k.Z,{component:V.r})}),ee=(0,$.jsx)(l.ZP,{type:"text",onClick:function(){return ce.props.setDarkMode(!1)},size:"small",children:(0,$.jsx)(k.Z,{component:Y.r})});return ge[0].disabled=!this.state.couldUndo,ge[1].disabled=!this.state.couldRedo,xe[0].disabled=this.state.serialToStart,xe[1].disabled=this.state.serialStart,xe[2].disabled=this.state.serialStart||this.state.serialToStart,xe[0].children[0].disabled=this.state.serialStart,xe[0].children[1].disabled=!this.state.serialStart,xe[1].children[0].disabled=this.state.serialToStart,xe[1].children[1].disabled=!this.state.serialToStart,xe[1].children[2].disabled=!this.state.serialToStart,Se[3].disabled=!this.fileHandler,Se[4].disabled=!this.fileHandler,Se[4].label=(0,$.jsx)(Me.Z,{checked:this.state.autoSave,children:"Auto Save"}),(0,$.jsxs)("div",{style:{width:"100%",height:32,marginTop:-5,zIndex:2e3,position:"relative"},className:"solid-color","data-tauri-drag-region":!0,children:[(0,$.jsxs)(o.Z,{style:{width:"100vw",display:"flex",paddingTop:-5},justify:"flex-start",align:"center","data-tauri-drag-region":!0,children:[(0,$.jsx)("div",{style:{fontFamily:"YouSheBiaoTiHei",fontSize:20,paddingLeft:6,paddingRight:6,paddingTop:3,display:"flex",color:"var(--ant-color-text)",cursor:"default"},"data-tauri-drag-region":!0,children:"RoboMaster UI Designer"}),(0,$.jsx)(f.Z,{menu:{items:[].concat(Se),onClick:function(L){return ce.onMenuClick(L)}},children:(0,$.jsx)(l.ZP,{type:"text",size:"small",children:"File"})}),(0,$.jsx)(f.Z,{menu:{items:[].concat(ge),onClick:function(L){return ce.onMenuClick(L)}},children:(0,$.jsx)(l.ZP,{type:"text",size:"small",children:"Edit"})}),(0,$.jsx)(f.Z,{menu:{items:(0,D.t)(),onClick:function(L){return ce.onMenuClick(L)}},children:(0,$.jsx)(l.ZP,{type:"text",size:"small",children:"Insert"})}),(0,$.jsx)(f.Z,{menu:{items:this.getFramesMenu(),onClick:function(L){return ce.onMenuClick(L)},selectedKeys:["Frames-".concat(this.state.selectedFrame)]},children:(0,$.jsx)(l.ZP,{type:"text",size:"small",children:"Frames"})}),(0,$.jsx)(f.Z,{menu:{items:[].concat(xe),onClick:function(L){return ce.onMenuClick(L)}},children:(0,$.jsxs)(l.ZP,{type:"text",size:"small",children:["Simulate\xA0",(0,$.jsx)(d.Z,{color:this.state.serialStart||this.state.serialToStart?"green":"red"})]})}),(0,$.jsx)(l.ZP,{type:"text",size:"small",onClick:function(){var L;(L=ce.aboutRef.current)===null||L===void 0||L.show()},children:"About"}),(0,$.jsxs)("div",{style:{marginRight:5,justifyContent:"flex-end",marginLeft:"auto",marginTop:2},"data-tauri-drag-region":!0,children:[(0,$.jsxs)("div",{style:{display:"inline",marginRight:15,fontSize:10,cursor:"default",color:"var(--ant-color-text)"},"data-tauri-drag-region":!0,children:["Created by\xA0",(0,$.jsx)("a",{href:"https://github.com/bismarckkk",target:"_blank",children:(0,$.jsx)(l.ZP,{type:"link",style:{padding:0},size:"small","data-tauri-drag-region":!0,children:"Bismarckkk"})})]}),this.props.darkMode?ee:Ce,(0,$.jsx)("a",{href:"https://github.com/bismarckkk/RM-UI-Designer",target:"_blank",children:(0,$.jsx)(l.ZP,{type:"text",size:"small",children:(0,$.jsx)(b.Z,{style:{color:"var(--ant-color-text)"}})})}),(0,$.jsx)(l.ZP,{type:"text",size:"small",onClick:function(){return be.G.minimize()},style:{display:this.tauri?"inline":"none"},children:(0,$.jsx)(S.Z,{style:{color:"var(--ant-color-text)"}})}),this.state.fullscreen?de:Ie,(0,$.jsx)(l.ZP,{type:"text",size:"small",onClick:function(){return(0,pe.J)()},style:{display:this.tauri?"inline":"none"},children:(0,$.jsx)(C.Z,{style:{color:"var(--ant-color-text)"}})})]})]}),(0,$.jsx)(w.Z,{ref:this.formRef}),(0,$.jsx)(q.Z,{ref:this.aboutRef}),(0,$.jsx)(se.Z,{ref:this.generatorRef}),(0,$.jsx)(le.Z,{ref:this.logDrawerRef}),(0,$.jsx)(h.Z,{ref:this.serialModalRef}),(0,$.jsx)(G.Z,{ref:this.modeModalRef})]})}}]),Ae}(c.Component);Q.Z=ze,u()}catch(je){u(je)}})})},3213:function(te,Q,e){var P=e(97857),u=e.n(P),W=e(13769),R=e.n(W),H=e(12444),I=e.n(H),J=e(72004),F=e.n(J),B=e(25098),Z=e.n(B),n=e(31996),x=e.n(n),O=e(26037),T=e.n(O),A=e(9783),M=e.n(A),a=e(67294),t=e(85576),g=e(40249),y=e(21798),c=e(85893),l=["node"],o=function(f){x()(z,f);var d=T()(z);function z(){var m;I()(this,z);for(var p=arguments.length,b=new Array(p),S=0;S<p;S++)b[S]=arguments[S];return m=d.call.apply(d,[this].concat(b)),M()(Z()(m),"state",{open:!1,content:null}),m}return F()(z,[{key:"show",value:function(){this.setState({open:!0})}},{key:"componentDidMount",value:function(){var p=this;fetch(e(99734)).then(function(b){return b.text()}).then(function(b){p.setState({content:b})})}},{key:"render",value:function(){var p=this;return(0,c.jsx)(t.Z,{title:"About",onOk:function(){return p.setState({open:!1})},onCancel:function(){return p.setState({open:!1})},footer:null,open:this.state.open,children:this.state.content?(0,c.jsx)(y.U,{components:{a:function(S){var C=S.node,k=R()(S,l);return(0,c.jsx)("a",u()(u()({},k),{},{target:"_blank"}))}},children:this.state.content}):(0,c.jsx)(g.Z,{})})}}]),z}(a.Component);Q.Z=o},41327:function(te,Q,e){var P=e(97857),u=e.n(P),W=e(13769),R=e.n(W),H=e(12444),I=e.n(H),J=e(72004),F=e.n(J),B=e(25098),Z=e.n(B),n=e(31996),x=e.n(n),O=e(26037),T=e.n(O),A=e(9783),M=e.n(A),a=e(67294),t=e(85576),g=e(42075),y=e(14726),c=e(40249),l=e(21798),o=e(85893),f=["node"],d=function(z){x()(p,z);var m=T()(p);function p(){var b;I()(this,p);for(var S=arguments.length,C=new Array(S),k=0;k<S;k++)C[k]=arguments[k];return b=m.call.apply(m,[this].concat(C)),M()(Z()(b),"state",{open:!1,content:null}),b}return F()(p,[{key:"componentDidMount",value:function(){var S=this,C=localStorage.getItem("eula");(!C||!JSON.parse(C))&&(this.setState({open:!0}),fetch(e(19293)).then(function(k){return k.text()}).then(function(k){S.setState({content:k})}))}},{key:"dontShow",value:function(){localStorage.setItem("eula","true"),this.setState({open:!1})}},{key:"render",value:function(){var S=this;return(0,o.jsx)(t.Z,{title:"Welcome to RM UI Designer!",onOk:function(){return S.setState({open:!1})},onCancel:function(){return S.setState({open:!1})},footer:(0,o.jsxs)(g.Z,{children:[(0,o.jsx)(y.ZP,{onClick:this.dontShow.bind(this),children:"Don't show"}),(0,o.jsx)(y.ZP,{type:"primary",onClick:function(){return S.setState({open:!1})},children:"OK"})]}),open:this.state.open,zIndex:2200,children:this.state.content?(0,o.jsx)(l.U,{components:{a:function(k){var w=k.node,D=R()(k,f);return(0,o.jsx)("a",u()(u()({},D),{},{target:"_blank"}))}},children:this.state.content}):(0,o.jsx)(c.Z,{})})}}]),p}(a.Component);Q.Z=d},48268:function(te,Q,e){var P=e(64599),u=e.n(P),W=e(15009),R=e.n(W),H=e(99289),I=e.n(H),J=e(12444),F=e.n(J),B=e(72004),Z=e.n(B),n=e(25098),x=e.n(n),O=e(31996),T=e.n(O),A=e(26037),M=e.n(A),a=e(9783),t=e.n(a),g=e(67294),y=e(37476),c=e(5966),l=e(85893),o=function(f){T()(z,f);var d=M()(z);function z(){var m;F()(this,z);for(var p=arguments.length,b=new Array(p),S=0;S<p;S++)b[S]=arguments[S];return m=d.call.apply(d,[this].concat(b)),t()(x()(m),"state",{title:"",open:!1,frames:[]}),t()(x()(m),"promise",null),m}return Z()(z,[{key:"open",value:function(p,b){var S=this;return new Promise(function(C,k){S.setState({title:p,open:!0,frames:b}),S.promise&&S.promise.reject(),S.promise={resolve:C,reject:k}})}},{key:"render",value:function(){var p=this;return(0,l.jsx)(y.Y,{title:this.state.title,autoFocusFirstInput:!0,width:240,open:this.state.open,onOpenChange:function(S){p.promise&&!S&&p.state.open&&p.promise.reject(),p.setState({open:S})},onFinish:function(){var b=I()(R()().mark(function S(C){return R()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return p.promise.resolve(C.frame),p.promise=null,w.abrupt("return",!0);case 3:case"end":return w.stop()}},S)}));return function(S){return b.apply(this,arguments)}}(),children:(0,l.jsx)(c.Z,{name:"frame",label:"New Frame Name",width:"sm",rules:[{required:!0,message:"Please input frame name!"},function(b){var S=b.getFieldValue,C=p;return{validator:function(w,D){{var q=!0,G=S("frame"),V=u()(C.state.frames),Y;try{for(V.s();!(Y=V.n()).done;){var h=Y.value;if(h===G){q=!1;break}}}catch(le){V.e(le)}finally{V.f()}return q?Promise.resolve():Promise.reject(new Error("Cannot create same name frame!"))}}}}]})})}}]),z}(g.Component);Q.Z=o},79476:function(te,Q,e){var P=e(12444),u=e.n(P),W=e(72004),R=e.n(W),H=e(25098),I=e.n(H),J=e(31996),F=e.n(J),B=e(26037),Z=e.n(B),n=e(9783),x=e.n(n),O=e(67294),T=e(21797),A=e(2487),M=e(42075),a=e(85265),t=e(28058),g=e(18429),y=e(85893),c=function(l){F()(f,l);var o=Z()(f);function f(){var d;u()(this,f);for(var z=arguments.length,m=new Array(z),p=0;p<z;p++)m[p]=arguments[p];return d=o.call.apply(o,[this].concat(m)),x()(I()(d),"state",{show:!1,errors:[]}),d}return R()(f,[{key:"onClose",value:function(){this.setState({show:!1})}},{key:"show",value:function(z){this.setState({show:!0,errors:z})}},{key:"render",value:function(){var z=this,m=this.state.errors.filter(function(S){return S.level==="warn"}),p=this.state.errors.filter(function(S){return S.level==="error"}),b=(0,y.jsx)(T.ZP,{status:"success",title:"0 error, 0 warning!",style:{marginTop:"50px"}});return p.length+m.length>0&&(b=(0,y.jsxs)("div",{style:{color:"var(--ant-color-text)",height:"100%"},children:[(0,y.jsxs)("p",{children:["Logged ",p.length," errors, ",m.length," warnings."]}),(0,y.jsx)("div",{style:{paddingBottom:10},className:"card-body",children:(0,y.jsx)(A.Z,{bordered:!0,dataSource:this.state.errors,renderItem:function(C){return(0,y.jsx)(A.Z.Item,{children:(0,y.jsxs)(M.Z,{size:"middle",children:[C.level==="warn"?(0,y.jsx)(t.Z,{}):(0,y.jsx)(g.Z,{}),"".concat(C.time.toLocaleTimeString(),": ").concat(C.message)]})})}})})]})),(0,y.jsx)(a.Z,{title:"Serial Debug Log",placement:"right",onClose:function(){return z.onClose()},open:this.state.show,size:"large",getContainer:document.getElementById("content-in"),rootStyle:{inset:"25px 0 0 0"},style:{borderTop:"3px var(--ant-line-type) var(--ant-color-split)"},children:(0,y.jsx)("div",{style:{width:"100%",height:"calc(100% - 25px)"},children:b})})}}]),f}(O.Component);Q.Z=c},54349:function(te,Q,e){var P=e(12444),u=e.n(P),W=e(72004),R=e.n(W),H=e(25098),I=e.n(H),J=e(31996),F=e.n(J),B=e(26037),Z=e.n(B),n=e(9783),x=e.n(n),O=e(67294),T=e(85576),A=e(42075),M=e(14726),a=e(96074),t=e(37932),g=e(85893),y=function(c){F()(o,c);var l=Z()(o);function o(){var f;u()(this,o);for(var d=arguments.length,z=new Array(d),m=0;m<d;m++)z[m]=arguments[m];return f=l.call.apply(l,[this].concat(z)),x()(I()(f),"state",{title:"",open:!1,frames:[]}),x()(I()(f),"promise",null),f}return R()(o,[{key:"open",value:function(){var d=this;return new Promise(function(z,m){d.setState({open:!0}),d.promise&&d.promise.reject(),d.promise={resolve:z,reject:m}})}},{key:"onClick",value:function(d){this.setState({open:!1}),this.promise.resolve(d),this.promise=null}},{key:"render",value:function(){var d=this,z=(0,t._)();return(0,g.jsx)(T.Z,{footer:null,maskClosable:!1,closeIcon:null,zIndex:2050,open:this.state.open,children:(0,g.jsxs)(A.Z,{direction:"vertical",size:"middle",style:{width:"100%",padding:15},children:[(0,g.jsx)(M.ZP,{type:"primary",disabled:!z,style:{width:"100%"},size:"large",onClick:function(){return d.onClick("new")},children:"New Project"}),(0,g.jsx)(M.ZP,{type:"primary",disabled:!z,style:{width:"100%"},size:"large",onClick:function(){return d.onClick("open")},children:"Open Exist"}),(0,g.jsx)(a.Z,{}),(0,g.jsx)(M.ZP,{type:"primary",style:{width:"100%"},size:"large",onClick:function(){return d.onClick("use")},children:"Temporary Use"})]})})}}]),o}(O.Component);Q.Z=y},23481:function(te,Q,e){var P=e(15009),u=e.n(P),W=e(99289),R=e.n(W),H=e(12444),I=e.n(H),J=e(72004),F=e.n(J),B=e(25098),Z=e.n(B),n=e(31996),x=e.n(n),O=e(26037),T=e.n(O),A=e(9783),M=e.n(A),a=e(67294),t=e(37476),g=e(64317),y=e(85893),c=[1152e3,1e6,921600,576e3,5e5,460800,230400,115200,74800,57600,38400,19200,9600,4800],l=function(o){x()(d,o);var f=T()(d);function d(){var z;I()(this,d);for(var m=arguments.length,p=new Array(m),b=0;b<m;b++)p[b]=arguments[b];return z=f.call.apply(f,[this].concat(p)),M()(Z()(z),"state",{open:!1,defaultOptions:{}}),M()(Z()(z),"promise",null),z}return F()(d,[{key:"getOptions",value:function(m){var p=this;return new Promise(function(b,S){p.setState({open:!0,defaultOptions:m}),p.promise&&p.promise.reject(),p.promise={resolve:b,reject:S}})}},{key:"onFinish",value:function(){var z=R()(u()().mark(function p(b){return u()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.promise.resolve(b),this.promise=null,C.abrupt("return",!0);case 3:case"end":return C.stop()}},p,this)}));function m(p){return z.apply(this,arguments)}return m}()},{key:"render",value:function(){var m=this;return(0,y.jsxs)(t.Y,{title:"Serial",width:400,open:this.state.open,onOpenChange:function(b){return m.setState({open:b})},onFinish:function(){var p=R()(u()().mark(function b(S){return u()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,m.onFinish(S);case 2:return k.abrupt("return",k.sent);case 3:case"end":return k.stop()}},b)}));return function(b){return p.apply(this,arguments)}}(),children:[(0,y.jsx)(g.Z,{name:"baudRate",label:"Baud Rate",width:"sm",initialValue:this.state.defaultOptions.baudRate,options:c.map(function(p){return{value:p,label:p.toString()}}),rules:[{required:!0}]}),(0,y.jsx)(g.Z,{name:"dataBits",label:"Data Bits",width:"sm",initialValue:this.state.defaultOptions.dataBits,options:[{value:8,label:"8"},{value:7,label:"7"}],rules:[{required:!0}]}),(0,y.jsx)(g.Z,{name:"stopBits",label:"Stop Bits",width:"sm",initialValue:this.state.defaultOptions.stopBits,options:[{value:1,label:"1"},{value:2,label:"2"}],rules:[{required:!0}]}),(0,y.jsx)(g.Z,{name:"parity",label:"Parity",width:"sm",initialValue:this.state.defaultOptions.parity,options:[{value:"none",label:"None"},{value:"even",label:"Even"},{value:"odd",label:"Odd"}],rules:[{required:!0}]}),(0,y.jsx)(g.Z,{name:"flowControl",label:"Flow Control",width:"sm",initialValue:this.state.defaultOptions.flowControl,options:[{value:"none",label:"None"},{value:"hardware",label:"Hardware"}],rules:[{required:!0}]})]})}}]),d}(a.Component);Q.Z=l},4585:function(te,Q,e){e.d(Q,{Z:function(){return be}});var P=e(97857),u=e.n(P),W=e(13769),R=e.n(W),H=e(15009),I=e.n(H),J=e(99289),F=e.n(J),B=e(12444),Z=e.n(B),n=e(72004),x=e.n(n),O=e(25098),T=e.n(O),A=e(31996),M=e.n(A),a=e(26037),t=e.n(a),g=e(9783),y=e.n(g),c=e(67294),l=e(21797),o=e(42075),f=e(75081),d=e(85576),z=e(14726),m=e(92462),p=e(553),b=e(30789);function S(){return C.apply(this,arguments)}function C(){return C=F()(I()().mark(function pe(){var he,se,oe,ve,ie,$,ue,Se,ge,xe,ze,je,ke;return I()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(!(0,b.UP)()){ae.next=14;break}return ae.next=3,(0,m.Py)();case 3:if(he=ae.sent,!he.manifest){ae.next=11;break}return se=he.manifest.version.slice(1).split(".").map(Number),oe=localStorage.getItem("version_ignored"),oe||(oe="v1.2.6"),ve=oe.slice(1).split(".").map(Number),ie=se[0]>ve[0]||se[1]>ve[1]||se[2]>ve[2],ae.abrupt("return",{shouldUpdate:ie,manifest:he.manifest});case 11:return ae.abrupt("return",he);case 14:return $=Date.now(),ae.next=17,fetch("https://ui.bismarck.xyz/update.json?".concat($));case 17:return ue=ae.sent,ae.next=20,ue.json();case 20:return Se=ae.sent,ge=Se.notes,xe=Se.version.slice(1).split(".").map(Number),ze=localStorage.getItem("version_ignored"),ze||(ze="v1.2.6"),je=ze.slice(1).split(".").map(Number),ke=xe[0]>je[0]||xe[1]>je[1]||xe[2]>je[2],ae.abrupt("return",{shouldUpdate:ke,manifest:{body:ge,version:Se.version}});case 28:case"end":return ae.stop()}},pe)})),C.apply(this,arguments)}function k(){return w.apply(this,arguments)}function w(){return w=F()(I()().mark(function pe(){return I()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(!(0,b.UP)()){se.next=6;break}return se.next=3,(0,m.F_)();case 3:return se.abrupt("return",se.sent);case 6:window.location.reload();case 7:case"end":return se.stop()}},pe)})),w.apply(this,arguments)}var D={checkUpdate:S,installUpdate:k,relaunch:p.R},q=e(28348),G=e(21798),V=e(85893),Y=["node"],h=D.checkUpdate,le=D.installUpdate,Me=D.relaunch,ye=function(pe){M()(se,pe);var he=t()(se);function se(){var oe;Z()(this,se);for(var ve=arguments.length,ie=new Array(ve),$=0;$<ve;$++)ie[$]=arguments[$];return oe=he.call.apply(he,[this].concat(ie)),y()(T()(oe),"state",{step:0,content:"",version:""}),oe}return x()(se,[{key:"handleClose",value:function(){this.setState({step:0})}},{key:"handleOk",value:function(){var oe=F()(I()().mark(function ie(){return I()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.prev=0,this.setState({step:2}),ue.next=4,le();case 4:if(ue.t0=!(0,b.UP)(),ue.t0){ue.next=9;break}return ue.next=8,Me();case 8:ue.t0=!ue.sent;case 9:if(!ue.t0){ue.next=11;break}this.setState({step:3});case 11:ue.next=16;break;case 13:ue.prev=13,ue.t1=ue.catch(0),this.setState({step:-1});case 16:case"end":return ue.stop()}},ie,this,[[0,13]])}));function ve(){return oe.apply(this,arguments)}return ve}()},{key:"check",value:function(){var ve=this,ie=/(https:\/\/github\.com\/bismarckkk\/RM-UI-Designer\/pull\/)(\d+)/g,$=/(https:\/\/github\.com\/bismarckkk\/RM-UI-Designer\/compare\/)(v\d+\.\d+\.\d+\.\.\.v\d+\.\d+\.\d+)/g;F()(I()().mark(function ue(){var Se,ge,xe;return I()().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return je.prev=0,je.next=3,h();case 3:Se=je.sent,ge=Se.shouldUpdate,xe=Se.manifest,ge&&ve.setState({step:1,content:xe.body.replace(ie,function(ke,Ae,ae){return"[#".concat(ae,"](").concat(Ae).concat(ae,")")}).replace($,function(ke,Ae,ae){return"[#".concat(ae,"](").concat(Ae).concat(ae,")")}),version:xe.version}),je.next=12;break;case 9:je.prev=9,je.t0=je.catch(0),q.yw.warning("Failed to check update.");case 12:case"end":return je.stop()}},ue,null,[[0,9]])}))()}},{key:"ignore",value:function(){localStorage.setItem("version_ignored",this.state.version),this.handleClose()}},{key:"componentDidMount",value:function(){this.check()}},{key:"render",value:function(){var ve=(0,V.jsx)("div",{});return this.state.step===-1?ve=(0,V.jsx)(l.ZP,{status:"error",title:"Update Failed"}):this.state.step===1?ve=(0,V.jsx)(G.U,{components:{a:function($){var ue=$.node,Se=R()($,Y);return(0,V.jsx)("a",u()(u()({},Se),{},{target:"_blank"}))}},children:this.state.content}):this.state.step===2?ve=(0,V.jsx)("div",{style:{padding:40,textAlign:"center",color:"var(--ant-color-text)"},children:(0,V.jsxs)(o.Z,{direction:"vertical",children:[(0,V.jsx)(f.Z,{size:"large"}),(0,V.jsx)("h3",{children:"Updating..."})]})}):this.state.step===3&&(ve=(0,V.jsx)(l.ZP,{status:"success",title:"Update Success",subTitle:"Please restart the app to apply the update."})),(0,V.jsx)(d.Z,{title:"Auto Update",open:this.state.step,closable:this.state.step>1,maskClosable:this.state.step>1,zIndex:2100,footer:this.state.step===1?(0,V.jsxs)(o.Z,{children:[(0,V.jsx)(z.ZP,{onClick:this.ignore.bind(this),children:"Ignore"}),(0,V.jsx)(z.ZP,{onClick:this.handleClose.bind(this),children:"Cancel"}),(0,V.jsx)(z.ZP,{type:"primary",onClick:this.handleOk.bind(this),children:"Update"})]}):null,children:ve})}}]),se}(c.Component),be=ye},87159:function(te,Q,e){e.d(Q,{Z:function(){return Ce}});var P=e(97857),u=e.n(P),W=e(15009),R=e.n(W),H=e(64599),I=e.n(H),J=e(99289),F=e.n(J),B=e(19632),Z=e.n(B),n=e(12444),x=e.n(n),O=e(72004),T=e.n(O),A=e(25098),M=e.n(A),a=e(31996),t=e.n(a),g=e(26037),y=e.n(g),c=e(9783),l=e.n(c),o=e(67294),f=e(63084),d=e(32983),z=e(42075),m=e(14726),p=e(28348),b=e(3909),S=e(84754),C=e(86250),k=e(83159),w=e(27847),D=e(90420),q=e(99611),G=e(94149),V=e(3355),Y=e(80882),h=e(85893),le=function(ee){t()(L,ee);var _=y()(L);function L(){var E;x()(this,L);for(var v=arguments.length,r=new Array(v),i=0;i<v;i++)r[i]=arguments[i];return E=_.call.apply(_,[this].concat(r)),l()(M()(E),"state",{status:E.props.defaultStatus||!1}),E}return T()(L,[{key:"render",value:function(){var v=this;return(0,h.jsx)(m.ZP,{size:"small",type:"text",onClick:function(){v.props.onChange&&v.props.onChange(!v.state.status),v.setState({status:!v.state.status})},children:this.state.status?this.props.onNode||"ON":this.props.offNode||"OFF"})}}]),L}(o.Component),Me=le;function ye(ee){return ee.map(function(_){return _===-2?"window":"E-".concat(_)})}var be=[{key:"D1-group-layer",label:"layer"},{key:"D1-group-group",label:"group"}],pe=function(ee){t()(L,ee);var _=y()(L);function L(){var E;x()(this,L);for(var v=arguments.length,r=new Array(v),i=0;i<v;i++)r[i]=arguments[i];return E=_.call.apply(_,[this].concat(r)),l()(M()(E),"state",{treeData:[],rightClickMenuOpen:!1,groupKey:"layer"}),l()(M()(E),"treeData",[]),E}return T()(L,[{key:"selectKey2id",value:function(v){var r=this,i=[],j=I()(v),U;try{var X=function(){var K=U.value;if(K==="window")i.push(-2);else if(K.startsWith("E-"))i.push(parseInt(K.slice(2)));else{var s=r.treeData.find(function(me){return me.key===K}).children.map(function(me){return parseInt(me.key.slice(2))}),re=I()(s),fe;try{for(re.s();!(fe=re.n()).done;){var ne=fe.value;i.includes(ne)||i.push(ne)}}catch(me){re.e(me)}finally{re.f()}}};for(j.s();!(U=j.n()).done;)X()}catch(N){j.e(N)}finally{j.f()}return i}},{key:"onElementMenuContainerClick",value:function(v){this.setState({rightClickMenuOpen:!1}),(v.target.classList.contains("ant-tree")||!v.ctrlKey&&!v.shiftKey)&&this.props.onSelect([])}},{key:"onElementMenuClick",value:function(v){var r=this;if(this.setState({rightClickMenuOpen:!1}),v.key==="D2-copy"){var i=null;v.target.localName!=="input"&&this.props.selectedId.length!==0&&this.props.selectedId[0]!==-2&&(v.preventDefault(),i=JSON.stringify(this.props.selectedId.map(function(N){return r.props.data[N]})),v.clipboardData.setData("text",i))}else if(v.key==="D2-delete"){var j=I()(this.props.selectedId),U;try{for(j.s();!(U=j.n()).done;){var X=U.value;this.props.onObjectEvent("remove",{id:X})}}catch(N){j.e(N)}finally{j.f()}}}},{key:"onElementRightClick",value:function(v){var r=this.selectKey2id([v.node.key]);r[0]in this.props.selectedId||this.props.onSelect(r)}},{key:"onSelect",value:function(v){if(v.length!==0){var r=this.selectKey2id(v);r.includes(-2)&&(r=[r[r.length-1]]),this.props.onSelect(r)}}},{key:"onMenuOpenChange",value:function(v){if(v){var r=this;setTimeout(function(){r.props.selectedId.length!==0&&r.props.selectedId[0]!==-2?r.setState({rightClickMenuOpen:!0}):r.setState({rightClickMenuOpen:!1})},100)}else this.setState({rightClickMenuOpen:!1})}},{key:"elementsMenuOnClick",value:function(v){var r=this;this.setState({groupKey:v.key.slice(9)},function(){return r.updateTree()})}},{key:"updateTree",value:function(){for(var v=this,r=this.state.groupKey,i=[],j=Object.keys(this.props.data),U=function(){for(var K=v.props.data[j[X]],s=-1,re=0;re<i.length;re++)if(i[re].key==="".concat(r,"-").concat(K[r])){s=re;break}s===-1&&(i.push({title:"".concat(r," ").concat(K[r]),key:"".concat(r,"-").concat(K[r]),children:[],isLeaf:!1}),s=i.length-1),i[s].children.push({title:(0,h.jsxs)(C.Z,{justify:"space-between",style:{width:"100%"},children:[K.name,(0,h.jsxs)(z.Z,{children:[(0,h.jsx)(Me,{onChange:function(ne){return v.props.onObjectEvent("setAttr",{id:K.id,payload:{visible:ne}})},defaultStatus:!0,offNode:(0,h.jsx)(D.Z,{}),onNode:(0,h.jsx)(q.Z,{})}),(0,h.jsx)(Me,{onChange:function(ne){return v.props.onObjectEvent("setAttr",{id:K.id,payload:{selectable:ne}})},defaultStatus:!0,offNode:(0,h.jsx)(G.Z,{}),onNode:(0,h.jsx)(V.Z,{style:{transform:"scaleX(-1)"}})})]})]}),key:"E-".concat(j[X])})},X=0;X<j.length;X++)U();return i=i.sort(function(N,K){return N.key.toString().localeCompare(K.key.toString())}),i.unshift({title:"UI Window",key:"window"}),this.treeData=i,i}},{key:"render",value:function(){var v=this;return(0,h.jsx)(f.Z,{size:"small",title:"Elements",style:{height:"100%"},extra:(0,h.jsx)(k.Z,{menu:{items:be,onClick:function(i){return v.elementsMenuOnClick(i)},selectable:!0,selectedKeys:["D1-group-".concat(this.state.groupKey)]},children:(0,h.jsxs)(z.Z,{style:{fontSize:11},children:["Group by",(0,h.jsx)(Y.Z,{size:"small"})]})}),children:(0,h.jsx)("div",{className:"card-body",onMouseUp:function(i){return v.onElementMenuContainerClick(i)},children:(0,h.jsx)(k.Z,{menu:{items:[{key:"D2-copy",label:"Copy"},{key:"D2-delete",label:"Delete",danger:!0}],onClick:function(i){v.onElementMenuClick(i)}},trigger:["contextMenu"],open:this.state.rightClickMenuOpen,onOpenChange:function(i){v.onMenuOpenChange(i)},children:(0,h.jsx)(w.Z,{className:"full",treeData:this.updateTree(),onSelect:function(i){return v.onSelect(i)},selectedKeys:ye(this.props.selectedId),onRightClick:function(i){return v.onElementRightClick(i)},treeDefaultExpandAll:!0,showLine:!0,blockNode:!0,multiple:!0,selectable:this.props.editable})})})})}}]),L}(o.Component),he=pe,se=e(32777),oe=e(30789),ve=function(ee){t()(L,ee);var _=y()(L);function L(){return x()(this,L),_.apply(this,arguments)}return T()(L,[{key:"render",value:function(){return this.props.color==="Main"?(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{style:{border:"1px solid #aaa",height:16,width:16,borderRadius:"20%",display:"inline-flex"},children:[(0,h.jsx)("div",{style:{backgroundColor:"red",height:12,width:6,margin:"1px 0 1px 1px",borderTopLeftRadius:"20%",borderBottomLeftRadius:"20%",display:"inline-flex"}}),(0,h.jsx)("div",{style:{backgroundColor:"blue",height:12,width:6,margin:"1px 1px 1px 0",borderTopRightRadius:"20%",borderBottomRightRadius:"20%",display:"inline-flex"}})]}),"\xA0 Main"]}):(0,h.jsx)("div",{children:(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{style:{border:"1px solid #aaa",height:16,width:16,borderRadius:"20%",display:"inline-flex"},children:(0,h.jsx)("div",{style:{backgroundColor:oe.E[this.props.color.toLowerCase()],height:12,width:12,margin:1,borderRadius:"20%",display:"inline-flex"}})}),"\xA0 ",this.props.color]})})}}]),L}(o.Component),ie=ve,$={id:{title:"Id",key:"id",dataIndex:"id",valueType:"digit",editable:!1},name:{title:"Name",key:"name",dataIndex:"name"},group:{title:"Group",key:"group",dataIndex:"group"},kind:{title:"Kind",key:"kind",dataIndex:"kind",editable:!1},lineWidth:{title:"Line Width",key:"lineWidth",dataIndex:"lineWidth",valueType:"digit"},layer:{title:"Layer",key:"layer",dataIndex:"layer",valueType:"digit"},x:{title:"X",key:"x",dataIndex:"x",valueType:"digit"},y:{title:"Y",key:"y",dataIndex:"y",valueType:"digit"},x2:{title:"X2",key:"x2",dataIndex:"x2",valueType:"digit"},y2:{title:"Y2",key:"y2",dataIndex:"y2",valueType:"digit"},width:{title:"Width",key:"width",dataIndex:"width",valueType:"digit"},height:{title:"Height",key:"height",dataIndex:"height",valueType:"digit"},rx:{title:"Rx",key:"rx",dataIndex:"rx",valueType:"digit"},ry:{title:"Ry",key:"ry",dataIndex:"ry",valueType:"digit"},r:{title:"R",key:"r",dataIndex:"r",valueType:"digit"},startAngle:{title:"Start Angle",key:"startAngle",dataIndex:"startAngle",valueType:"digit"},endAngle:{title:"End Angle",key:"endAngle",dataIndex:"endAngle",valueType:"digit"},fontSize:{title:"Font Size",key:"fontSize",dataIndex:"fontSize",valueType:"digit"},float:{title:"Number",key:"float",dataIndex:"float",valueType:"digit"},number:{title:"Number",key:"number",dataIndex:"number",valueType:"digit"},text:{title:"Text",key:"text",dataIndex:"text",formItemProps:{rules:[{max:30},{type:"string"}]}},color:{title:"Color",key:"color",dataIndex:"color",valueType:"select",valueEnum:{main:(0,h.jsx)(ie,{color:"Main"}),yellow:(0,h.jsx)(ie,{color:"Yellow"}),green:(0,h.jsx)(ie,{color:"Green"}),orange:(0,h.jsx)(ie,{color:"Orange"}),purple:(0,h.jsx)(ie,{color:"Purple"}),pink:(0,h.jsx)(ie,{color:"Pink"}),cyan:(0,h.jsx)(ie,{color:"Cyan"}),black:(0,h.jsx)(ie,{color:"Black"}),white:(0,h.jsx)(ie,{color:"White"})}},team:{title:"Team",key:"team",dataIndex:"team",valueType:"select",valueEnum:{red:(0,h.jsx)(ie,{color:"Red"}),blue:(0,h.jsx)(ie,{color:"Blue"})}},role:{title:"Role",key:"role",dataIndex:"role",valueType:"select",valueEnum:{1:"Hero",2:"Engineer",3:"No3. Infantry",4:"No4. Infantry",5:"No5. Infantry",6:"Drone"}},backgroundImage:{title:"Background Image",key:"backgroundImage",dataIndex:"backgroundImage",valueType:"switch"}};function ue(ee){for(var _=Object.keys(ee),L=[],E=0;E<_.length;E++)$[_[E]]&&L.push($[_[E]]);return L}var Se=e(62388);function ge(ee,_,L,E){return xe.apply(this,arguments)}function xe(){return xe=F()(R()().mark(function ee(_,L,E,v){var r,i,j,U,X,N,K,s,re,fe;return R()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(_){me.next=2;break}return me.abrupt("return");case 2:if(r=1,_.version&&(r=_.version),r!==1){me.next=10;break}return me.next=7,E("default");case 7:for(i=0,j=Object.keys(_);i<j.length;i++)U=j[i],L("_update",_[U]);me.next=22;break;case 10:if(r!==2){me.next=22;break}X=0,N=Object.keys(_.data);case 12:if(!(X<N.length)){me.next=20;break}return K=N[X],me.next=16,E(K);case 16:for(s=0,re=Object.keys(_.data[K]);s<re.length;s++)fe=re[s],L("_update",_.data[K][fe]);case 17:X++,me.next=12;break;case 20:return me.next=22,E(_.selected);case 22:v();case 23:case"end":return me.stop()}},ee)})),xe.apply(this,arguments)}var ze=e(96486),je=e.n(ze);function ke(ee){return ee.head>0?u()({},ee.data[ee.head-1]):null}function Ae(ee){return ee.head<ee.data.length-1?u()({},ee.data[ee.head+1]):null}var ae=function(){function ee(){x()(this,ee),l()(this,"cacheTimer",null),l()(this,"updateTimer",null),l()(this,"now",null),l()(this,"_previous",null),l()(this,"_next",null),l()(this,"his",null),l()(this,"catchUpdate",!0);var _=localStorage.getItem("history"),L={data:[{}],head:0,version:1};_?L=JSON.parse(_):(_=localStorage.getItem("data"),_?L.data[0]=JSON.parse(_):L.data[0]={version:2,data:{default:{}},selected:"default"},localStorage.setItem("history",JSON.stringify(L))),this.now=L.data[L.head],this._previous=ke(L),this._next=Ae(L)}return T()(ee,[{key:"save",value:function(){var L=this;this.cacheTimer&&clearTimeout(this.cacheTimer),this.cacheTimer=setTimeout(function(){L.his.head>50&&(L.his.data=L.his.data.slice(L.his.head-50),L.his.head=50),L.his.head<L.his.data.length-20&&(L.his.data=L.his.data.slice(0,L.his.head+20)),localStorage.setItem("history",JSON.stringify(L.his)),L.his=null},2e3)}},{key:"read",value:function(){this.his||(this.his=JSON.parse(localStorage.getItem("history")))}},{key:"get",value:function(){return this.catchUpdate?{now:this.now,couldNext:this._next!==null,couldPrevious:this._previous!==null}:{now:this.now,couldNext:!1,couldPrevious:!1}}},{key:"reset",value:function(L){return this._previous=null,this._next=null,this.his={data:[L],head:0,version:1},this.save(),this.get()}},{key:"next",value:function(){return this._next&&(this._previous=this.now,this.now=this._next,this.read(),this.his.head++,this._next=Ae(this.his),this.save()),this.get()}},{key:"previous",value:function(){return this._previous&&(this._next=this.now,this.now=this._previous,this.read(),this.his.head--,this._previous=ke(this.his),this.save()),this.get()}},{key:"cancelUpdate",value:function(){this.updateTimer&&clearTimeout(this.updateTimer)}},{key:"update",value:function(L){var E=this;this.catchUpdate&&(this.updateTimer&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout(function(){je().isEqual(L,E.now)||(E._previous=E.now,E.now=L,E.read(),E.his.data=E.his.data.slice(0,E.his.head+1),E.his.data.push(L),E.his.head++,E._next=null,E.save())},500))}}]),ee}(),ce=ae,Ie=e(30819),de=function(ee){t()(L,ee);var _=y()(L);function L(){var E;x()(this,L);for(var v=arguments.length,r=new Array(v),i=0;i<v;i++)r[i]=arguments[i];return E=_.call.apply(_,[this].concat(r)),l()(M()(E),"objects",{default:{}}),l()(M()(E),"data",{}),l()(M()(E),"state",{properties:null,selectedId:[],frame:"default",uiWindow:{height:1080,width:1920,ratio:1,team:"red",role:1,backgroundImage:!0},infoModalShow:!1,data:{},editable:!0}),l()(M()(E),"canvas",null),l()(M()(E),"canvasRef",(0,o.createRef)()),l()(M()(E),"propertiesRef",(0,o.createRef)()),l()(M()(E),"background",null),l()(M()(E),"his",new ce),l()(M()(E),"moveTimer",null),l()(M()(E),"moveTimeout",null),E}return T()(L,[{key:"getNewDataId",value:function(){return Object.keys(this.state.data).length===0?0:Math.max.apply(Math,Z()(Object.keys(this.state.data)))+1}},{key:"setEditable",value:function(){var E=F()(R()().mark(function r(i){var j,U,X,N,K;return R()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(this.setState({editable:i}),this.his.catchUpdate=i,this.canvas.selection=i,se.fabric.Object.prototype.selectable=i,!i){re.next=9;break}return re.next=7,this.onHistoryEvent("refresh");case 7:re.next=15;break;case 9:return j=this.state.uiWindow.role,re.next=12,this.reset(!0);case 12:this.cancelHistoryUpdate(),this.props.setCouldDo({couldNext:!1,couldPrevious:!1}),this.setRobotId(j);case 15:U=this.canvas.getObjects(),X=I()(U);try{for(X.s();!(N=X.n()).done;)K=N.value,K.set("selectable",i)}catch(fe){X.e(fe)}finally{X.f()}this.select([]);case 19:case"end":return re.stop()}},r,this)}));function v(r){return E.apply(this,arguments)}return v}()},{key:"setRobotId",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;v===0&&(v=this.state.uiWindow.role),this.state.uiWindow.team==="blue"&&(v+=100),(0,p.ue)(v)}},{key:"cancelHistoryUpdate",value:function(){var v=this;this.his.cancelUpdate(),setTimeout(function(){v.his.cancelUpdate(),v.props.setCouldDo(v.his.get())},200)}},{key:"save",value:function(){(0,oe.q7)(this.data,"ui.rmui",this.state.frame)}},{key:"updateHistory",value:function(){var v=this;setTimeout(function(){var r={version:2,data:v.data,selected:v.state.frame};je().isEqual(r,v.his.now)||(v.his.update(r),v.props.setCouldDo({couldNext:!1,couldPrevious:!0}))},100)}},{key:"getData",value:function(){return this.data}},{key:"select",value:function(v,r){var i=this;if(v.length===0)this.setState({properties:null,selectedId:[]}),this.canvas.discardActiveObject(),this.canvas.renderAll();else if(v[0]===-2)this.setState({properties:this.state.uiWindow,selectedId:[-2]}),this.canvas.discardActiveObject(),this.canvas.renderAll();else if(v.length===1)this.setState({properties:this.state.data[v[0]],selectedId:[v[0]]}),this.canvas.setActiveObject(this.objects[this.state.frame][v[0]]),this.canvas.renderAll();else if(this.setState({properties:null,selectedId:v}),!r){var j=v.map(function(X){return i.objects[i.state.frame][X]}),U=new se.fabric.ActiveSelection(j,{canvas:this.canvas});this.canvas.setActiveObject(U),this.canvas.renderAll()}}},{key:"reset",value:function(){var E=F()(R()().mark(function r(){var i,j,U,X=arguments;return R()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(i=X.length>0&&X[0]!==void 0?X[0]:!1,i){j=this.canvas.getObjects();for(U in j)this.canvas.remove(j[U]);this.canvas.renderAll()}else this.canvas.clear(),this.setBackground(e(25665)),this.canvas.backgroundColor="#fff";if(Object.keys(this.objects).includes("default")){K.next=5;break}return K.next=5,this.onFrameEvent("add","default");case 5:return this.objects.default={},K.next=8,this.onFrameEvent("change","default");case 8:this.objects={default:{}},this.props.onFrameChange({frames:["default"],selected:"default"}),this.select([]),this.resetCanvasSize(),this.objectsToData();case 13:case"end":return K.stop()}},r,this)}));function v(){return E.apply(this,arguments)}return v}()},{key:"resetCanvasSize",value:function(){if(this.canvas){var v,r=this.canvasRef.current.clientWidth,i=this.canvasRef.current.clientHeight,j=u()({},this.state.uiWindow);r/i<j.width/j.height?(i=r*j.height/j.width,j.ratio=j.width/r):(r=i*j.width/j.height,j.ratio=j.height/i),this.setState({uiWindow:j}),this.canvas.setHeight(i),this.canvas.setWidth(r),this.canvas.viewportTransform[5]=i,this.canvas.viewportTransform[3]=-1;var U=this.canvasRef.current.clientWidth,X=this.canvasRef.current.clientHeight,N=U-r,K=X-i,s=document.getElementById("coordinateDisplay");s.style.right="".concat(N+12,"px"),s.style.bottom="".concat(K+25,"px");for(var re=0,fe=Object.keys(this.objects[this.state.frame]);re<fe.length;re++){var ne=fe[re];this.objects[this.state.frame][ne].setRatio(j.ratio)}(v=this.background)===null||v===void 0||v.set({scaleX:1/j.ratio,scaleY:1/j.ratio}),this.canvas.renderAll(),this.objectsToData(),this.setState({infoModalShow:!1})}}},{key:"onPropertiesChange",value:function(v,r){var i=this;if(this.state.selectedId[0]===-2){if(r.team!==this.state.uiWindow.team){for(var j=0,U=Object.keys(this.objects[this.state.frame]);j<U.length;j++){var X=U[j];this.objects[this.state.frame][X].setTeam(r.team)}this.canvas.renderAll(),this.objectsToData()}if(this.setState({uiWindow:r,properties:r},function(){i.resetCanvasSize(),i.setRobotId()}),r.backgroundImage!==this.state.uiWindow.backgroundImage)if(r.backgroundImage){var N,K=this.state.uiWindow.ratio;(N=this.background)===null||N===void 0||N.set({scaleX:1/K,scaleY:1/K}),this.canvas.setBackgroundImage(this.background),this.canvas.renderAll()}else this.canvas.setBackgroundImage(null),this.canvas.renderAll();(r.width!==this.state.uiWindow.width||r.height!==this.state.uiWindow.height)&&p.oC.warning({title:"Warning",content:"Modify UI window width and height may cause unknown error."})}else this.state.selectedId.length===1&&(this.objects[this.state.frame][this.state.selectedId[0]].fromObject(r),this.canvas.renderAll(),this.objectsToData(),this.updateHistory())}},{key:"setBackground",value:function(v){var r=this;se.fabric.Image.fromURL(v,function(i,j){var U;r.background=i;var X=r.state.uiWindow.ratio;(U=r.background)===null||U===void 0||U.set({scaleX:1/X,scaleY:-1/X}),r.state.uiWindow.backgroundImage&&(r.canvas.setBackgroundImage(r.background),r.canvas.renderAll())})}},{key:"componentDidMount",value:function(){var v=this,r=this;this.canvas=new se.fabric.Canvas("ui"),this.setBackground(e(25665)),this.canvas.backgroundColor="#fff",window.addEventListener("resize",function(){v.resetCanvasSize()},!1),window.addEventListener("copy",function(i){var j=null;console.log(i.target,(0,oe.jK)(i.target)),!(0,oe.jK)(i.target)&&r.state.selectedId.length!==0&&r.state.selectedId[0]!==-2&&(i.preventDefault(),j=JSON.stringify(r.state.selectedId.map(function(U){return r.state.data[U]})),i.clipboardData.setData("text",j))}),window.addEventListener("paste",function(i){for(var j=!1,U=i.clipboardData.items,X=0;X<U.length;X++)if(U[X].type.indexOf("image")===0){i.preventDefault(),j=!0;var N=U[X].getAsFile(),K=new FileReader;K.onload=function(Te){r.setBackground(Te.target.result)},K.readAsDataURL(N)}if(!j&&!(0,oe.jK)(i.target))try{i.preventDefault();var s=i.clipboardData.getData("text"),re=JSON.parse(s);Array.isArray(re)||(re=[re]);var fe=[],ne=20,me=I()(re),Re;try{var Ue=function(){var we=Re.value;setTimeout(function(){we.id=r.getNewDataId(),fe.push(we.id),r.onObjectEvent("_update",we)},ne),ne+=20};for(me.s();!(Re=me.n()).done;)Ue()}catch(Te){me.e(Te)}finally{me.f()}setTimeout(function(){r.select(fe),v.updateHistory()},ne)}catch(Te){p.yw.warning("Invalid data")}}),window.addEventListener("keydown",function(i){if(i.key==="Delete"&&r.state.selectedId.length!==0&&r.state.selectedId[0]!==-2){var j=I()(r.state.selectedId),U;try{for(j.s();!(U=j.n()).done;){var X=U.value;r.onObjectEvent("remove",{id:X})}}catch(s){j.e(s)}finally{j.f()}v.updateHistory()}if(i.ctrlKey&&i.key==="z"&&!i.shiftKey?(i.preventDefault(),v.onHistoryEvent("previous")):i.ctrlKey&&(0,Ie.toLower)(i.key)==="z"&&i.shiftKey&&(i.preventDefault(),v.onHistoryEvent("next")),["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(i.key)&&!(0,oe.jK)(i.target)){var N=function(re,fe){switch(fe*=r.state.uiWindow.ratio,re){case"ArrowUp":K.top+=fe;break;case"ArrowDown":K.top-=fe;break;case"ArrowLeft":K.left-=fe;break;case"ArrowRight":K.left+=fe;break}K instanceof se.fabric.ActiveSelection?K.getObjects().forEach(function(ne){ne.setCoords(),ne.resizeScale()}):(K.setCoords(),K.resizeScale()),r.canvas.renderAll(),r.objectsToData(),r.updateHistory()},K=r.canvas.getActiveObject();if(!K)return;i.preventDefault(),N(i.key,2),v.moveTimeout&&clearTimeout(v.moveTimeout),v.moveTimer&&clearInterval(v.moveTimer),v.moveTimeout=setTimeout(function(){v.moveTimer=setInterval(function(){N(i.key,1)},500)},1500)}}),window.addEventListener("keyup",function(i){["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(i.key)&&(clearTimeout(v.moveTimeout),clearInterval(v.moveTimer))}),this.canvas.on({"mouse:up":function(){for(var j=0,U=Object.keys(r.objects[r.state.frame]);j<U.length;j++){var X=U[j];r.objects[r.state.frame][X].resizeScale()}r.canvas.renderAll(),r.objectsToData(),r.updateHistory();var N=r.canvas.getActiveObject();setTimeout(function(){if(N)if(N instanceof se.fabric.ActiveSelection){var K=N.getObjects().map(function(s){return s.id});r.select(K,!0)}else r.select([N.id]);else r.select([])},100)},"mouse:move":function(j){var U=v.canvas.getPointer(j.e),X=v.state.uiWindow.ratio,N=Math.round(U.x*X),K=Math.round(U.y*X),s=document.getElementById("coordinateDisplay");s.style.display="block",s.textContent="x: ".concat(N,", y: ").concat(K)},"mouse:out":function(){var j=document.getElementById("coordinateDisplay");j.style.display="none"}}),setTimeout(function(){var i=v.his.get();v.props.setCouldDo(i),ge(i.now,function(j,U){return v.onObjectEvent(j,U)},function(j){return r.onFrameEvent("change",j)},function(){return v.canvas.renderAll()}).then(function(){v.setRobotId(),v.resetCanvasSize()}),v.cancelHistoryUpdate()},200)}},{key:"upload",value:function(v){var r=this,i=this,j=new FileReader;j.onload=function(){var U=F()(R()().mark(function X(N){return R()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,i.reset();case 2:return s.next=4,ge(JSON.parse(N.target.result),function(re,fe){return i.onObjectEvent(re,fe)},function(re){return i.onFrameEvent("change",re)},function(){return i.canvas.renderAll()}).then(function(){r.setRobotId()});case 4:i.objectsToData(),i.his.reset({version:2,data:r.data,selected:r.state.frame});case 6:case"end":return s.stop()}},X)}));return function(X){return U.apply(this,arguments)}}(),j.readAsText(v)}},{key:"objectsToData",value:function(){for(var v=this,r={},i=0,j=Object.keys(this.objects);i<j.length;i++){var U=j[i];r[U]={};for(var X=0,N=Object.keys(this.objects[U]);X<N.length;X++){var K=N[X],s=this.objects[U][K].toObject();r[U][s.id]=s}}if(this.data=r,this.setState({data:r[this.state.frame]}),this.state.selectedId.length===1){var re;this.state.selectedId[0]===-2?re=this.state.uiWindow:re=r[this.state.frame][this.state.selectedId[0]],this.setState({properties:u()({},re)},function(){var fe;(fe=v.propertiesRef.current)===null||fe===void 0||fe.reload()})}}},{key:"onObjectEvent",value:function(v,r){var i=this;function j(s){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,fe={id:s.id,name:s.name,layer:s.layer,group:s.group,type:s.type,ratio:i.state.uiWindow.ratio,team:i.state.uiWindow.team},ne=(0,Se.R)(fe);i.objects[i.state.frame][s.id]=ne,re&&ne.fromObject(s),ne.setRatio(i.state.uiWindow.ratio);for(var me=i.canvas.getObjects(),Re=!0,Ue=0,Te=Object.keys(me);Ue<Te.length;Ue++){var we=Te[Ue];if(me[we].id===ne.id){Re=!1;break}}i.canvas.add(ne)}if(v==="add")typeof r.id=="number"&&r.id>=0&&!this.objects[this.state.frame][r.id]?j(r,!0):console.log("id exists",r.id,this.objects[this.state.frame][r.id]);else if(v==="_add")r.id=this.getNewDataId(),r.ratio=this.state.uiWindow.ratio,r.team=this.state.uiWindow.team,j(r,!1);else if(v==="update")this.objects[this.state.frame][r.id]&&this.objects[this.state.frame][r.id].fromObject(r);else if(v==="_update")r.id>=0&&this.objects[this.state.frame][r.id]?this.objects[this.state.frame][r.id].fromObject(r):j(r);else if(v==="remove"){var U=r.id;this.objects[this.state.frame][U]&&(this.select([]),this.canvas.remove(this.objects[this.state.frame][U]),this.canvas.renderAll(),delete this.objects[this.state.frame][U],this.objectsToData())}else if(v==="setAttr")this.objects[this.state.frame][r.id]&&this.objects[this.state.frame][r.id].set(r.payload);else if(v==="removeLayer")for(var X=0,N=Object.keys(this.objects[this.state.frame]);X<N.length;X++){var K=N[X];this.objects[this.state.frame][K].layer===r.layer&&this.onObjectEvent("remove",{id:K})}else v==="removeAll"&&this.reset(!0);this.objectsToData(),this.canvas.renderAll()}},{key:"setFrame",value:function(v){this.objects[v]||(this.objects[v]={});for(var r=0,i=Object.keys(this.objects[this.state.frame]);r<i.length;r++){var j=i[r];this.canvas.remove(this.objects[this.state.frame][j])}this.canvas.renderAll();var U=this;return new Promise(function(X,N){U.setState({frame:v},function(){for(var K=U.canvas.getObjects(),s=0,re=Object.keys(U.objects[U.state.frame]);s<re.length;s++){for(var fe=re[s],ne=!0,me=0,Re=Object.keys(K);me<Re.length;me++){var Ue=Re[me];if(K[Ue].id===U.objects[U.state.frame][fe].id){ne=!1;break}}ne&&U.canvas.add(U.objects[U.state.frame][fe])}U.objectsToData(),U.select([]),U.canvas.renderAll(),X()})})}},{key:"onHistoryEvent",value:function(){var E=F()(R()().mark(function r(i){var j=this,U;return R()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(U=this.his.get(),i!=="update"){N.next=6;break}return this.updateHistory(),N.abrupt("return");case 6:if(i!=="reset"){N.next=12;break}return U=this.his.reset({version:2,data:{default:{}},selected:"default"}),this.props.setCouldDo(U),N.abrupt("return");case 12:if(i!=="resetNow"){N.next=16;break}return U=this.his.reset({version:2,data:this.data,selected:this.state.frame}),this.props.setCouldDo(U),N.abrupt("return");case 16:return i==="previous"?U=this.his.previous():i==="next"&&(U=this.his.next()),this.props.setCouldDo(U),N.next=20,this.reset(!0);case 20:return N.next=22,ge(U.now,function(K,s){return j.onObjectEvent(K,s)},function(K){return j.onFrameEvent("change",K)},function(){return j.canvas.renderAll()}).then(function(){j.setRobotId()});case 22:this.cancelHistoryUpdate(),this.props.setCouldDo(U);case 24:case"end":return N.stop()}},r,this)}));function v(r){return E.apply(this,arguments)}return v}()},{key:"onFrameEvent",value:function(){var E=F()(R()().mark(function r(i,j){var U,X,N,K,s,re;return R()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(i!=="add"){ne.next=6;break}return this.objects[j]={},ne.next=4,this.setFrame(j);case 4:ne.next=40;break;case 6:if(i!=="remove"){ne.next=19;break}if(Object.keys(this.objects).length!==1){ne.next=10;break}return p.yw.error("Cannot remove last frame!"),ne.abrupt("return");case 10:if(U=j,this.state.frame!==j){ne.next=16;break}return j=Object.keys(this.objects)[0],j===U&&(j=Object.keys(this.objects)[1]),ne.next=16,this.setFrame(j);case 16:delete this.objects[U],ne.next=40;break;case 19:if(i!=="change"){ne.next=24;break}return ne.next=22,this.setFrame(j);case 22:ne.next=40;break;case 24:if(i!=="copy"){ne.next=34;break}return this.objects[j]={},X=this.objects[this.state.frame],ne.next=29,this.setFrame(j);case 29:for(N=0,K=Object.keys(X);N<K.length;N++)s=K[N],this.onObjectEvent("_update",X[s].toObject());this.objectsToData(),this.canvas.renderAll(),ne.next=40;break;case 34:if(i!=="rename"){ne.next=40;break}return re=this.state.frame,ne.next=38,this.onFrameEvent("copy",j);case 38:return ne.next=40,this.onFrameEvent("remove",re);case 40:this.props.onFrameChange({frames:Object.keys(this.objects),selected:j}),this.objectsToData(),this.updateHistory();case 43:case"end":return ne.stop()}},r,this)}));function v(r,i){return E.apply(this,arguments)}return v}()},{key:"render",value:function(){var v,r=this;return(v=this.canvas)===null||v===void 0||v.renderAll(),(0,h.jsx)("div",{style:{width:"100vw",height:"calc(100% - 20px)",padding:10},children:(0,h.jsxs)(b.eh,{autoSaveId:"container_h",className:"container",direction:"horizontal",children:[(0,h.jsx)(b.s_,{defaultSize:25,minSize:15,maxSize:45,order:1,children:(0,h.jsxs)(b.eh,{autoSaveId:"card_v",className:"full",direction:"vertical",children:[(0,h.jsx)(b.s_,{defaultSize:50,minSize:25,maxSize:75,children:(0,h.jsx)(he,{onSelect:function(j){return r.select(j)},onObjectEvent:function(j,U){return r.onObjectEvent(j,U)},onReset:function(){return r.reset()},data:this.state.data,editable:this.state.editable,selectedId:this.state.selectedId})}),(0,h.jsx)(b.OT,{className:"panel-resize-handle",style:{height:6}}),(0,h.jsx)(b.s_,{defaultSize:50,children:(0,h.jsx)(f.Z,{size:"small",title:"Properties",style:{height:"100%"},children:(0,h.jsxs)("div",{className:"card-body",children:[this.state.properties?(0,h.jsx)(S.vY,{dataSource:this.state.properties,columns:ue(this.state.properties),ref:this.propertiesRef,editable:this.props.editable?{onSave:function(j,U){return r.onPropertiesChange(j,U)}}:null,column:1,style:{marginTop:4}},this.state.selectedId[0]):(0,h.jsx)(d.Z,{image:d.Z.PRESENTED_IMAGE_SIMPLE}),this.state.selectedId[0]===-2?(0,h.jsxs)(z.Z,{direction:"vertical",size:"middle",style:{display:"flex"},children:[(0,h.jsx)(m.ZP,{onClick:function(){return(0,oe.cT)("image/*").then(function(j){r.setState({imageUploadShow:!1}),r.setBackground((0,oe.lZ)(j))}).catch(function(j){})},children:"Upload Background"}),(0,h.jsx)(m.ZP,{onClick:function(){return r.setBackground(e(25665))},children:"Reset Background"})]}):(0,h.jsx)("div",{})]})})})]})}),(0,h.jsx)(b.OT,{className:"panel-resize-handle",style:{width:6}}),(0,h.jsx)(b.s_,{defaultSize:75,order:2,onResize:function(j){return setTimeout(function(){return r.resetCanvasSize()},100)},children:(0,h.jsxs)("div",{className:"full",ref:this.canvasRef,children:[(0,h.jsx)("canvas",{className:"full",id:"ui"}),(0,h.jsx)("div",{id:"coordinateDisplay",style:{bottom:0,right:0,display:"none",padding:"1px 6px 1px 6px"}})]})})]})})}}]),L}(o.Component),Ce=de},12997:function(te,Q,e){e.a(te,function(P,u){return De(this,null,function*(){try{e.r(Q);var W=e(12444),R=e.n(W),H=e(72004),I=e.n(H),J=e(25098),F=e.n(J),B=e(31996),Z=e.n(B),n=e(26037),x=e.n(n),O=e(9783),T=e.n(O),A=e(67294),M=e(9361),a=e(28459),t=e(62338),g=e(65848),y=e(87159),c=e(4585),l=e(41327),o=e(58377),f=e(54030),d=e(28348),z=e(18253),m=e(85893),p=P([o]);o=(p.then?(yield p)():p)[0];var b=M.Z.darkAlgorithm,S=M.Z.compactAlgorithm,C=function(k){Z()(D,k);var w=x()(D);function D(){var q;R()(this,D);for(var G=arguments.length,V=new Array(G),Y=0;Y<G;Y++)V[Y]=arguments[Y];return q=w.call.apply(w,[this].concat(V)),T()(F()(q),"state",{simulate:!1,darkMode:q.isBrowserDarkMode()}),T()(F()(q),"modal",null),T()(F()(q),"renderRef",A.createRef()),T()(F()(q),"menuRef",A.createRef()),q}return I()(D,[{key:"isBrowserDarkMode",value:function(){try{return window.matchMedia("(prefers-color-scheme: dark)").matches}catch(G){return!1}}},{key:"componentDidMount",value:function(){var G=this,V=0;window.addEventListener("drop",function(le){return le.preventDefault()},!1),window.addEventListener("dragover",function(le){return le.preventDefault()},!1),window.addEventListener("contextmenu",function(le){le.target.tagName.toLowerCase()!=="input"&&le.preventDefault()},!1);function Y(le){!G.modal&&le<880&&le!==V&&(V=le,G.modal=d.oC.warning({title:"Display Aera too Small",content:"Cannot show all contents on this window. Please resize this window or rotate your phone.",footer:null,zIndex:2500})),G.modal&&le>=880&&(G.modal.destroy(),G.modal=null)}setTimeout(function(){return Y(window.innerWidth)},500),window.addEventListener("resize",function(){Y(window.innerWidth)},!1);var h=window.matchMedia("(prefers-color-scheme: dark)");h.addEventListener("change",function(le){G.setState({darkMode:le.matches})})}},{key:"setDarkMode",value:function(G){this.setState({darkMode:G})}},{key:"render",value:function(){var G=this;return(0,m.jsx)(a.ZP,{locale:z.Z,theme:{cssVar:{key:"rmui"},hashed:!1,algorithm:this.state.darkMode?[b,S]:S},children:(0,m.jsxs)(t.Z,{children:[(0,m.jsx)("div",{className:"rmui",children:(0,m.jsxs)("div",{className:"container background-color",style:{height:"100vh",paddingBottom:12,overflow:"hidden"},children:[(0,m.jsx)(o.Z,{save:function(){return G.renderRef.current.save()},onObjectEvent:function(Y,h){return G.renderRef.current.onObjectEvent(Y,h)},onHistoryEvent:function(Y){return G.renderRef.current.onHistoryEvent(Y)},reset:function(){return G.renderRef.current.reset()},setFrame:function(Y,h){return G.renderRef.current.onFrameEvent(Y,h)},upload:function(Y){return G.renderRef.current.upload(Y)},getData:function(){return G.renderRef.current.getData()},setEditable:function(Y){return G.renderRef.current.setEditable(Y)},setDarkMode:function(Y){return G.setDarkMode(Y)},ref:this.menuRef,darkMode:this.state.darkMode}),(0,m.jsx)(g.Z,{content:["RM Ui Designer","v1.2.6"],zIndex:0,style:{height:"100%"},gap:[30,30],children:(0,m.jsx)("div",{id:"content-in",style:{width:"100vw",height:"100%",zIndex:2,position:"relative"},children:(0,m.jsx)(y.Z,{style:{width:"100vw",height:"100%"},editable:!0,ref:this.renderRef,onFrameChange:function(Y){var h;return(h=G.menuRef.current)===null||h===void 0?void 0:h.setFrames(Y)},setCouldDo:function(Y){var h;(h=G.menuRef.current)===null||h===void 0||h.setCouldDo(Y)},setRobotId:function(Y){var h;(h=G.menuRef.current)===null||h===void 0||h.setRobotId(Y)}})})})]})}),(0,m.jsx)(f.Z,{}),(0,m.jsx)(c.Z,{}),(0,m.jsx)(l.Z,{})]})})}}]),D}(A.Component);Q.default=C,u()}catch(k){u(k)}})})},28348:function(te,Q,e){e.d(Q,{eq:function(){return H},oC:function(){return R},ue:function(){return I},yw:function(){return u}});var P=e(62338),u,W,R,H=1;Q.ZP=function(){var J=P.Z.useApp();return u=J.message,R=J.modal,W=J.notification,null};function I(J){H=parseInt(J)}},37932:function(te,Q,e){e.d(Q,{X:function(){return A},_:function(){return M}});var P=e(15009),u=e.n(P),W=e(5574),R=e.n(W),H=e(99289),I=e.n(H),J=e(12444),F=e.n(J),B=e(72004),Z=e.n(B),n=e(9783),x=e.n(n),O=e(17990),T=e(30789),A=function(){function a(t){F()(this,a),x()(this,"getContentFunc",void 0),x()(this,"fileHandle",void 0),x()(this,"timerId",void 0),x()(this,"updateTimerId",void 0),this.getContentFunc=t,this.fileHandle=null,this.timerId=null,this.updateTimerId=null}return Z()(a,[{key:"open",value:function(){var t=I()(u()().mark(function y(){var c,l,o,f,d;return u()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(this.fileHandle=null,m.prev=1,!(0,T.UP)()){m.next=9;break}return m.next=5,O.WZ.open({multiple:!1,directory:!1,filters:[{name:"rmui file",extensions:["json","rmui"]}]});case 5:c=m.sent,c!==null&&c.length>0&&typeof c=="string"&&(this.fileHandle=c.replace(/\\/g,"/"),l=this.fileHandle.split("/").pop(),document.title="".concat(l," - RM UI Designer")),m.next=18;break;case 9:return m.next=11,window.showOpenFilePicker({types:[{description:"rmui file",accept:{"application/json":[".json",".rmui"]}}]});case 11:return o=m.sent,f=R()(o,1),this.fileHandle=f[0],m.next=16,this.fileHandle.getFile();case 16:d=m.sent.name,document.title="".concat(d," - RM UI Designer");case 18:this.enableAutoSave(),m.next=23;break;case 21:m.prev=21,m.t0=m.catch(1);case 23:return m.abrupt("return",this.fileHandle!==null);case 24:case"end":return m.stop()}},y,this,[[1,21]])}));function g(){return t.apply(this,arguments)}return g}()},{key:"create",value:function(){var t=I()(u()().mark(function y(){var c,l,o;return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(this.fileHandle=null,d.prev=1,!(0,T.UP)()){d.next=9;break}return d.next=5,O.WZ.save({filters:[{name:"rmui file",extensions:["rmui"]}]});case 5:c=d.sent,c!==null&&(this.fileHandle=c.replace(/\\/g,"/"),l=this.fileHandle.split("/").pop(),document.title="".concat(l," - RM UI Designer")),d.next=16;break;case 9:return d.next=11,window.showSaveFilePicker({types:[{description:"rmui file",accept:{"application/json":[".rmui"]}}]});case 11:return this.fileHandle=d.sent,d.next=14,this.fileHandle.getFile();case 14:o=d.sent.name,document.title="".concat(o," - RM UI Designer");case 16:return d.next=18,this.write(JSON.stringify({version:2,data:{default:{}},selected:"default"}));case 18:this.enableAutoSave(),d.next=23;break;case 21:d.prev=21,d.t0=d.catch(1);case 23:return d.abrupt("return",this.fileHandle!==null);case 24:case"end":return d.stop()}},y,this,[[1,21]])}));function g(){return t.apply(this,arguments)}return g}()},{key:"enableAutoSave",value:function(){var g=this;this.timerId=setInterval(I()(u()().mark(function y(){var c;return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return c=g.getContentFunc(),o.next=3,g.write(c);case 3:case"end":return o.stop()}},y)})),6e4)}},{key:"disableAutoSave",value:function(){var t=I()(u()().mark(function y(){return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.save();case 2:this.timerId&&(clearInterval(this.timerId),this.timerId=null),this.updateTimerId&&(clearTimeout(this.updateTimerId),this.updateTimerId=null);case 4:case"end":return l.stop()}},y,this)}));function g(){return t.apply(this,arguments)}return g}()},{key:"update",value:function(){var g=this;this.timerId!==null&&(this.updateTimerId!==null&&(clearTimeout(this.updateTimerId),this.updateTimerId=null),this.updateTimerId=setTimeout(I()(u()().mark(function y(){var c;return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return c=g.getContentFunc(),o.next=3,g.write(c);case 3:case"end":return o.stop()}},y)})),2e3))}},{key:"save",value:function(){var t=I()(u()().mark(function y(){var c;return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return c=this.getContentFunc(),o.next=3,this.write(c);case 3:case"end":return o.stop()}},y,this)}));function g(){return t.apply(this,arguments)}return g}()},{key:"write",value:function(){var t=I()(u()().mark(function y(c){var l;return u()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(this.fileHandle){f.next=2;break}throw new Error("File is not open");case 2:if(typeof this.fileHandle!="string"){f.next=7;break}return f.next=5,O.fs.writeTextFile(this.fileHandle,c);case 5:f.next=14;break;case 7:return f.next=9,this.fileHandle.createWritable();case 9:return l=f.sent,f.next=12,l.write(c);case 12:return f.next=14,l.close();case 14:case"end":return f.stop()}},y,this)}));function g(y){return t.apply(this,arguments)}return g}()},{key:"read",value:function(){var t=I()(u()().mark(function y(){var c,l;return u()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(this.fileHandle){f.next=2;break}throw new Error("File is not open");case 2:if(typeof this.fileHandle!="string"){f.next=10;break}return f.next=5,O.fs.readTextFile(this.fileHandle);case 5:return c=f.sent,l=new Blob([c],{type:"text/plain;charset=utf-8"}),f.abrupt("return",new File([l],this.fileHandle));case 10:return f.next=12,this.fileHandle.getFile();case 12:return f.abrupt("return",f.sent);case 13:case"end":return f.stop()}},y,this)}));function g(){return t.apply(this,arguments)}return g}()}]),a}();function M(){return"showOpenFilePicker"in window||(0,T.UP)()}},52880:function(te,Q,e){e.d(Q,{r:function(){return M},h:function(){return A}});var P=e(19632),u=e.n(P),W=e(73676);function R(a){var t=new Uint8Array(15),g=0,y=a.group.split("-");t[g++]=Math.round(Number(y[0])),t[g++]=Math.round(Number(y[1])),t[g++]=Math.round(a.id);var c=Math.round(a.operate_tpyel)|Math.round(a.figure_tpye)<<3|Math.round(a.layer)<<6|Math.round(a.color)<<10|Math.round(a._a)<<14|Math.round(a._b)<<23;t[g++]=c&255,t[g++]=c>>8&255,t[g++]=c>>16&255,t[g++]=c>>24&255;var l=Math.round(a.width)|Math.round(a.start_x)<<10|Math.round(a.start_y)<<21;t[g++]=l&255,t[g++]=l>>8&255,t[g++]=l>>16&255,t[g++]=l>>24&255;var o=Math.round(a._c)|Math.round(a._d)<<10|Math.round(a._e)<<21;return t[g++]=o&255,t[g++]=o>>8&255,t[g++]=o>>16&255,t[g++]=o>>24&255,t}function H(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"add",g=a.group,y=a.id&255,c=W.i_.indexOf(a.type),l=W.JM.indexOf(a.color),o=a.layer,f;a.fontSize?f=Math.round(a.fontSize/10):f=a.lineWidth;var d=a.x,z=a.y,m=0,p=0,b=0,S=0,C=0;switch(a.type.slice(2)){case"Line":S=a.x2||0,C=a.y2||0;break;case"Rect":S=(a.width||0)+d,C=(a.height||0)+z;break;case"Round":b=a.r||0;break;case"Ellipse":S=a.rx||0,C=a.ry||0;break;case"Arc":m=a.startAngle||0,p=a.endAngle||0,S=a.rx||0,C=a.ry||0;break;case"Float":m=a.fontSize||0;var k=(a.float||0)*1e3;b=k&1023,S=k>>10&2047,C=k>>21&2047;break;case"Number":m=a.fontSize||0;var w=a.number||0;b=w&1023,S=w>>10&2047,C=w>>21&2047;break;case"Text":m=a.fontSize||0,p=(a.text||"").length;break}return{group:g,id:y,operate_tpyel:W.$m.indexOf(t),figure_tpye:c,layer:o,color:l,_a:m,_b:p,width:f,start_x:d,start_y:z,_c:b,_d:S,_e:C,number:b}}function I(a){return R(H(a))}var J=e(85378),F=e(28348);function B(a){var t=new Uint8Array(0);if(a.forEach(function(o){t=new Uint8Array([].concat(u()(t),u()(I(o))))}),2<a.length&&a.length<5){for(var g=new Uint8Array(15*(5-a.length)),y=0;y<15*(5-a.length);y++)g[y]=0;t=new Uint8Array([].concat(u()(t),u()(g)))}if(5<a.length&&a.length<7){for(var c=new Uint8Array(15*(7-a.length)),l=0;l<15*(7-a.length);l++)c[l]=0;t=new Uint8Array([].concat(u()(t),u()(c)))}return t}function Z(a){var t=new Uint8Array([].concat(u()(I(a[0])),u()(new Uint8Array(30))));if(a[0].text)for(var g=15;g<a[0].text.length+15;g++)t[g]=a[0].text.charCodeAt(g);return t}function n(a){return a[0].text?Z(a):B(a)}var x=0,O=769;function T(a){var t=new Uint8Array(13),g=new Uint8Array(2);t[0]=165;var y=a.length+6;t[1]=y&255,t[2]=y>>8&255,t[3]=x,t[4]=(0,J.d)(t.subarray(0,4)),t[5]=O&255,t[6]=O>>8&255;var c=0;a.length===2?c=256:a.length===15?c=257:a.length===30?c=258:a.length===75?c=259:a.length===105?c=260:a.length===45&&(c=272),t[7]=c&255,t[8]=c>>8&255,t[9]=F.eq&255,t[10]=F.eq>>8&255,t[11]=F.eq+256&255,t[12]=F.eq+256>>8&255;var l=new Uint8Array([].concat(u()(t),u()(a),u()(g))),o=(0,J.I)(l.subarray(0,l.length-2));return l[l.length-2]=o&255,l[l.length-1]=o>>8&255,x++,x>=256&&(x=0),l}function A(a){var t=n(a);return T(t)}function M(){return T(new Uint8Array([2,0]))}},85378:function(te,Q,e){e.d(Q,{I:function(){return R},d:function(){return u}});var P=[0,94,188,226,97,63,221,131,194,156,126,32,163,253,31,65,157,195,33,127,252,162,64,30,95,1,227,189,62,96,130,220,35,125,159,193,66,28,254,160,225,191,93,3,128,222,60,98,190,224,2,92,223,129,99,61,124,34,192,158,29,67,161,255,70,24,250,164,39,121,155,197,132,218,56,102,229,187,89,7,219,133,103,57,186,228,6,88,25,71,165,251,120,38,196,154,101,59,217,135,4,90,184,230,167,249,27,69,198,152,122,36,248,166,68,26,153,199,37,123,58,100,134,216,91,5,231,185,140,210,48,110,237,179,81,15,78,16,242,172,47,113,147,205,17,79,173,243,112,46,204,146,211,141,111,49,178,236,14,80,175,241,19,77,206,144,114,44,109,51,209,143,12,82,176,238,50,108,142,208,83,13,239,177,240,174,76,18,145,207,45,115,202,148,118,40,171,245,23,73,8,86,180,234,105,55,213,139,87,9,235,181,54,104,138,212,149,203,41,119,244,170,72,22,233,183,85,11,136,214,52,106,43,117,151,201,74,20,246,168,116,42,200,150,21,75,169,247,182,232,10,84,215,137,107,53];function u(H){for(var I=255,J=0,F,B=H.byteLength;B--;)F=I^H[J],I=P[F],J++;return I}var W=[0,4489,8978,12955,17956,22445,25910,29887,35912,40385,44890,48851,51820,56293,59774,63735,4225,264,13203,8730,22181,18220,30135,25662,40137,36160,49115,44626,56045,52068,63999,59510,8450,12427,528,5017,26406,30383,17460,21949,44362,48323,36440,40913,60270,64231,51324,55797,12675,8202,4753,792,30631,26158,21685,17724,48587,44098,40665,36688,64495,60006,55549,51572,16900,21389,24854,28831,1056,5545,10034,14011,52812,57285,60766,64727,34920,39393,43898,47859,21125,17164,29079,24606,5281,1320,14259,9786,57037,53060,64991,60502,39145,35168,48123,43634,25350,29327,16404,20893,9506,13483,1584,6073,61262,65223,52316,56789,43370,47331,35448,39921,29575,25102,20629,16668,13731,9258,5809,1848,65487,60998,56541,52564,47595,43106,39673,35696,33800,38273,42778,46739,49708,54181,57662,61623,2112,6601,11090,15067,20068,24557,28022,31999,38025,34048,47003,42514,53933,49956,61887,57398,6337,2376,15315,10842,24293,20332,32247,27774,42250,46211,34328,38801,58158,62119,49212,53685,10562,14539,2640,7129,28518,32495,19572,24061,46475,41986,38553,34576,62383,57894,53437,49460,14787,10314,6865,2904,32743,28270,23797,19836,50700,55173,58654,62615,32808,37281,41786,45747,19012,23501,26966,30943,3168,7657,12146,16123,54925,50948,62879,58390,37033,33056,46011,41522,23237,19276,31191,26718,7393,3432,16371,11898,59150,63111,50204,54677,41258,45219,33336,37809,27462,31439,18516,23005,11618,15595,3696,8185,63375,58886,54429,50452,45483,40994,37561,33584,31687,27214,22741,18780,15843,11370,7921,3960];function R(H){for(var I=65535,J,F=0,B=H.byteLength;B--;)J=H[F],I=I>>8^W[(I^J)&255],F++;return I}},73676:function(te,Q,e){e.d(Q,{$m:function(){return H},EY:function(){return n},JM:function(){return R},i_:function(){return W}});var P=e(19632),u=e.n(P),W=["UiLine","UiRect","UiRound","UiEllipse","UiArc","UiFloat","UiNumber","UiText"],R=["main","yellow","green","orange","purple","pink","cyan","black","white"],H=["null","add","update","remove"],I={257:1,258:2,259:5,260:7},J=["null","removeLayer","removeAll"];function F(x,O){return x[O]|x[O+1]<<8}function B(x,O){return x[O]|x[O+1]<<8|x[O+2]<<16|x[O+3]<<24}function Z(x){var O=0,T=x[O++],A=x[O++],M="".concat(T,"-").concat(A),a=x[O++]|A<<8|T<<16,t=B(x,O);O+=4;var g=t&7,y=t>>3&7,c=t>>6&15,l=t>>10&15,o=t>>14&511,f=t>>23&511,d=B(x,O);O+=4;var z=d&1023,m=d>>10&2047,p=d>>21&2047,b=B(x,O),S=b&1023,C=b>>10&2047,k=b>>21&2047;return{group:M,id:a,operate_tpyel:g,figure_tpye:y,layer:c,color:l,_a:o,_b:f,width:z,start_x:m,start_y:p,_c:S,_d:C,_e:k,number:b}}function n(x){var O=F(x,0),T=F(x,2),A=F(x,4),M=[];if(O===256)M.push({type:J[x[6]],obj:{layer:x[7]}});else if(O===272){var a=Z(x.subarray(6,21)),t=String.fromCharCode.apply(String,u()(x.subarray(21,21+a._b)));M.push({type:H[a.operate_tpyel],obj:{layer:a.layer,group:a.group,type:W[a.figure_tpye],id:a.id,name:"".concat(W[a.figure_tpye],"_").concat(a.id&255),color:R[a.color],lineWidth:a.width,x:a.start_x,y:a.start_y,fontSize:a._a,text:t}})}else if(O in I)for(var g=I[O],y=0;y<g;y++){var c=Z(x.subarray(6+y*15,6+(y+1)*15)),l={layer:c.layer,group:c.group,type:W[c.figure_tpye],id:c.id,name:"".concat(W[c.figure_tpye],"_").concat(c.id&255),color:R[c.color],lineWidth:c.width,x:c.start_x,y:c.start_y};switch(W[c.figure_tpye].slice(2)){case"Line":l.x2=c._d,l.y2=c._e;break;case"Rect":l.width=c._d-c.start_x,l.height=c._e-c.start_y;break;case"Round":l.r=c._c;break;case"Ellipse":l.rx=c._d,l.ry=c._e;break;case"Arc":l.startAngle=c._a,l.endAngle=c._b,l.rx=c._d,l.ry=c._e;break;case"Float":l.fontSize=c._a,l.float=c.number/1e3;break;case"Number":l.fontSize=c._a,l.number=c.number;break}M.push({type:H[c.operate_tpyel],obj:l})}else console.log("unknown sub_id",O);return{sender:T,receiver:A,events:M}}},13799:function(te,Q,e){e.d(Q,{r:function(){return F}});var P=e(67294),u=Object.defineProperty,W=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,I=(Z,n,x)=>n in Z?u(Z,n,{enumerable:!0,configurable:!0,writable:!0,value:x}):Z[n]=x,J=(Z,n)=>{for(var x in n||(n={}))R.call(n,x)&&I(Z,x,n[x]);if(W)for(var x of W(n))H.call(n,x)&&I(Z,x,n[x]);return Z};const F=Z=>P.createElement("svg",J({className:"moon_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:200,height:200},Z),P.createElement("path",{d:"M472 991.6c-157 0-304.4-77.2-394.3-206.6-6.9-9.9-7.6-22.9-1.8-33.6 5.8-10.7 17.1-17.8 29.2-16.7l7.7.4c2.4.2 4.8.3 7.2.3 229.4 0 416-186.6 416-416 0-85-25.7-167-74.3-236.9-6.9-9.9-7.6-22.9-1.8-33.6 5.8-10.7 17.2-17.6 29.2-16.7C748.7 41.6 952 252.1 952 511.6c0 264.7-215.3 480-480 480zM169.7 797.1c78.1 82.7 187.2 130.6 302.3 130.6 229.4 0 416-186.6 416-416 0-204-144.9-373-339.7-408.6 34 66.9 51.7 140.7 51.7 216.6 0 247.8-188.9 452.4-430.3 477.4z",fill:"#2c2c2c"}));var B="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTQ3MiA5OTEuNmMtMTU3IDAtMzA0LjQtNzcuMi0zOTQuMy0yMDYuNi02LjktOS45LTcuNi0yMi45LTEuOC0zMy42IDUuOC0xMC43IDE3LjEtMTcuOCAyOS4yLTE2LjdsNy43LjRjMi40LjIgNC44LjMgNy4yLjMgMjI5LjQgMCA0MTYtMTg2LjYgNDE2LTQxNiAwLTg1LTI1LjctMTY3LTc0LjMtMjM2LjktNi45LTkuOS03LjYtMjIuOS0xLjgtMzMuNiA1LjgtMTAuNyAxNy4yLTE3LjYgMjkuMi0xNi43Qzc0OC43IDQxLjYgOTUyIDI1Mi4xIDk1MiA1MTEuNmMwIDI2NC43LTIxNS4zIDQ4MC00ODAgNDgwek0xNjkuNyA3OTcuMWM3OC4xIDgyLjcgMTg3LjIgMTMwLjYgMzAyLjMgMTMwLjYgMjI5LjQgMCA0MTYtMTg2LjYgNDE2LTQxNiAwLTIwNC0xNDQuOS0zNzMtMzM5LjctNDA4LjYgMzQgNjYuOSA1MS43IDE0MC43IDUxLjcgMjE2LjYgMCAyNDcuOC0xODguOSA0NTIuNC00MzAuMyA0NzcuNHoiIGZpbGw9IiMyYzJjMmMiLz48L3N2Zz4="},82843:function(te,Q,e){e.d(Q,{r:function(){return F}});var P=e(67294),u=Object.defineProperty,W=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,I=(Z,n,x)=>n in Z?u(Z,n,{enumerable:!0,configurable:!0,writable:!0,value:x}):Z[n]=x,J=(Z,n)=>{for(var x in n||(n={}))R.call(n,x)&&I(Z,x,n[x]);if(W)for(var x of W(n))H.call(n,x)&&I(Z,x,n[x]);return Z};const F=Z=>P.createElement("svg",J({className:"sun_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:200,height:200},Z),P.createElement("path",{d:"M522.88 874.667A21.333 21.333 0 0 1 544.213 896v85.333a21.333 21.333 0 0 1-21.333 21.334h-21.333a21.333 21.333 0 0 1-21.334-21.334V896a21.333 21.333 0 0 1 21.334-21.333h21.333zm268.416-107.52 60.352 60.352a21.333 21.333 0 0 1 0 30.165l-15.083 15.083a21.333 21.333 0 0 1-30.186 0l-60.331-60.352a21.333 21.333 0 0 1 0-30.166l15.083-15.082a21.333 21.333 0 0 1 30.165 0zm-527.957 0 15.082 15.082a21.333 21.333 0 0 1 0 30.166l-60.352 60.352a21.333 21.333 0 0 1-30.165 0l-15.083-15.083a21.333 21.333 0 0 1 0-30.165l60.331-60.352a21.333 21.333 0 0 1 30.187 0zM512 277.333c141.376 0 256 114.624 256 256s-114.624 256-256 256-256-114.624-256-256 114.624-256 256-256zm0 64a192 192 0 1 0 0 384 192 192 0 0 0 0-384zm448.213 160a21.333 21.333 0 0 1 21.334 21.334V544a21.333 21.333 0 0 1-21.334 21.333H874.88A21.333 21.333 0 0 1 853.547 544v-21.333a21.333 21.333 0 0 1 21.333-21.334h85.333zm-810.666 0a21.333 21.333 0 0 1 21.333 21.334V544a21.333 21.333 0 0 1-21.333 21.333H64.213A21.333 21.333 0 0 1 42.88 544v-21.333a21.333 21.333 0 0 1 21.333-21.334h85.334zm687.04-307.413 15.082 15.083a21.333 21.333 0 0 1 0 30.165l-60.352 60.352a21.333 21.333 0 0 1-30.165 0l-15.083-15.083a21.333 21.333 0 0 1 0-30.165L806.4 193.92a21.333 21.333 0 0 1 30.187 0zm-618.496 0 60.352 60.352a21.333 21.333 0 0 1 0 30.165L263.36 299.52a21.333 21.333 0 0 1-30.187 0l-60.352-60.373a21.333 21.333 0 0 1 0-30.166l15.083-15.082a21.333 21.333 0 0 1 30.165 0zM522.9 64a21.333 21.333 0 0 1 21.334 21.333v85.334A21.333 21.333 0 0 1 522.9 192h-21.333a21.333 21.333 0 0 1-21.333-21.333V85.333A21.333 21.333 0 0 1 501.568 64h21.333z",fill:"#ebebeb"}));var B="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTUyMi44OCA4NzQuNjY3QTIxLjMzMyAyMS4zMzMgMCAwIDEgNTQ0LjIxMyA4OTZ2ODUuMzMzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzMzIDIxLjMzNGgtMjEuMzMzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzM0LTIxLjMzNFY4OTZhMjEuMzMzIDIxLjMzMyAwIDAgMSAyMS4zMzQtMjEuMzMzaDIxLjMzM3ptMjY4LjQxNi0xMDcuNTIgNjAuMzUyIDYwLjM1MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDAgMzAuMTY1bC0xNS4wODMgMTUuMDgzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTg2IDBsLTYwLjMzMS02MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NmwxNS4wODMtMTUuMDgyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTY1IDB6bS01MjcuOTU3IDAgMTUuMDgyIDE1LjA4MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDAgMzAuMTY2bC02MC4zNTIgNjAuMzUyYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTY1IDBsLTE1LjA4My0xNS4wODNhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NWw2MC4zMzEtNjAuMzUyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTg3IDB6TTUxMiAyNzcuMzMzYzE0MS4zNzYgMCAyNTYgMTE0LjYyNCAyNTYgMjU2cy0xMTQuNjI0IDI1Ni0yNTYgMjU2LTI1Ni0xMTQuNjI0LTI1Ni0yNTYgMTE0LjYyNC0yNTYgMjU2LTI1NnptMCA2NGExOTIgMTkyIDAgMSAwIDAgMzg0IDE5MiAxOTIgMCAwIDAgMC0zODR6bTQ0OC4yMTMgMTYwYTIxLjMzMyAyMS4zMzMgMCAwIDEgMjEuMzM0IDIxLjMzNFY1NDRhMjEuMzMzIDIxLjMzMyAwIDAgMS0yMS4zMzQgMjEuMzMzSDg3NC44OEEyMS4zMzMgMjEuMzMzIDAgMCAxIDg1My41NDcgNTQ0di0yMS4zMzNhMjEuMzMzIDIxLjMzMyAwIDAgMSAyMS4zMzMtMjEuMzM0aDg1LjMzM3ptLTgxMC42NjYgMGEyMS4zMzMgMjEuMzMzIDAgMCAxIDIxLjMzMyAyMS4zMzRWNTQ0YTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzMzIDIxLjMzM0g2NC4yMTNBMjEuMzMzIDIxLjMzMyAwIDAgMSA0Mi44OCA1NDR2LTIxLjMzM2EyMS4zMzMgMjEuMzMzIDAgMCAxIDIxLjMzMy0yMS4zMzRoODUuMzM0em02ODcuMDQtMzA3LjQxMyAxNS4wODIgMTUuMDgzYTIxLjMzMyAyMS4zMzMgMCAwIDEgMCAzMC4xNjVsLTYwLjM1MiA2MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMS0zMC4xNjUgMGwtMTUuMDgzLTE1LjA4M2EyMS4zMzMgMjEuMzMzIDAgMCAxIDAtMzAuMTY1TDgwNi40IDE5My45MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDMwLjE4NyAwem0tNjE4LjQ5NiAwIDYwLjM1MiA2MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMSAwIDMwLjE2NUwyNjMuMzYgMjk5LjUyYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTg3IDBsLTYwLjM1Mi02MC4zNzNhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NmwxNS4wODMtMTUuMDgyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTY1IDB6TTUyMi45IDY0YTIxLjMzMyAyMS4zMzMgMCAwIDEgMjEuMzM0IDIxLjMzM3Y4NS4zMzRBMjEuMzMzIDIxLjMzMyAwIDAgMSA1MjIuOSAxOTJoLTIxLjMzM2EyMS4zMzMgMjEuMzMzIDAgMCAxLTIxLjMzMy0yMS4zMzNWODUuMzMzQTIxLjMzMyAyMS4zMzMgMCAwIDEgNTAxLjU2OCA2NGgyMS4zMzN6IiBmaWxsPSIjZWJlYmViIi8+PC9zdmc+"},99734:function(te,Q,e){te.exports=e.p+"static/about.6af660a8.md"},8938:function(te,Q,e){te.exports=e.p+"static/ui_interface.1e01ba33.c"},75112:function(te,Q,e){te.exports=e.p+"static/ui_interface.a365dcb1.h"},33562:function(te,Q,e){te.exports=e.p+"static/ui_types.c92a992c.h"},19293:function(te,Q,e){te.exports=e.p+"static/eula.61e7cc28.md"},25665:function(te,Q,e){te.exports=e.p+"static/background.d741a18b.png"}}]);
