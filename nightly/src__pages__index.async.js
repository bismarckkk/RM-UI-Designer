"use strict";var De=(ee,Q,e)=>new Promise((Y,d)=>{var P=C=>{try{H(e.next(C))}catch(W){d(W)}},T=C=>{try{H(e.throw(C))}catch(W){d(W)}},H=C=>C.done?Y(C.value):Promise.resolve(C.value).then(P,T);H((e=e.apply(ee,Q)).next())});(self.webpackChunk=self.webpackChunk||[]).push([[858],{62388:function(ee,Q,e){e.d(Q,{R:function(){return k},t:function(){return j}});var Y=e(32777),d=e(30789),P=Y.fabric.util.createClass(Y.fabric.Rect,{type:"UiRect",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(t){t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.lockRotation=!0,t.lockScalingFlip=!0,t.hasRotatingPoint=!1,t.width||(t.width=50/this.ratio),t.height||(t.height=50/this.ratio),t.left||(t.left=50/this.ratio),t.top||(t.top=50/this.ratio),t.strokeWidth||(t.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?t.stroke=d.E[this._color]:(t.stroke=d.E[t.team],this._color="main"),t.fill=null,this.callSuper("initialize",t),this.moveTo(t.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){this.set("width",Math.round(this.width*this.scaleX*this.ratio)/this.ratio),this.set("height",Math.round(this.height*this.scaleY*this.ratio)/this.ratio),this.set("left",Math.round(this.left*this.ratio)/this.ratio),this.set("top",Math.round(this.top*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,width:this.width*this.ratio,height:this.height*this.ratio,x:this.left*this.ratio,y:this.top*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("width",t.width/this.ratio),this.set("height",t.height/this.ratio),this.set("left",t.x/this.ratio),this.set("top",t.y/this.ratio),this.set("strokeWidth",t.lineWidth/this.ratio),this._color==="main"?this.set("stroke",d.E[this.team]):this.set("stroke",d.E[this._color]),this.moveTo(t.layer)},setRatio:function(t){this.set("width",this.width*this.ratio/t),this.set("height",this.height*this.ratio/t),this.set("left",this.left*this.ratio/t),this.set("top",this.top*this.ratio/t),this.set("strokeWidth",this.strokeWidth*this.ratio/t),this.ratio=t},setTeam:function(t){this.team=t,this._color==="main"&&this.set("stroke",d.E[this.team])}}),T=Y.fabric.util.createClass(Y.fabric.Line,{type:"UiLine",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(t){t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.lockRotation=!0,t.lockScalingFlip=!0,t.hasRotatingPoint=!1,t.x1||(t.x1=50/this.ratio),t.y1||(t.y1=50/this.ratio),t.x2||(t.x2=100/this.ratio),t.y2||(t.y2=100/this.ratio),t.strokeWidth||(t.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?t.stroke=d.E[this._color]:(t.stroke=d.E[t.team],this._color="main"),t.fill=null,this.callSuper("initialize",[t.x1,t.y1,t.x2,t.y2],t),this.moveTo(t.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){var t=this.left,g=this.top,x=Math.abs(Math.round((this.x2-this.x1)*this.scaleX)),u=Math.abs(Math.round((this.y2-this.y1)*this.scaleY));this.set("x1",Math.round(t*this.ratio)/this.ratio),this.set("y1",Math.round(g*this.ratio)/this.ratio),this.set("x2",Math.round((t+x)*this.ratio)/this.ratio),this.set("y2",Math.round((g+u)*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,x:this.x1*this.ratio,y:this.y1*this.ratio,x2:this.x2*this.ratio,y2:this.y2*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("x2",t.x2/this.ratio),this.set("y2",t.y2/this.ratio),this.set("x1",t.x/this.ratio),this.set("y1",t.y/this.ratio),this.set("strokeWidth",t.lineWidth/this.ratio),this._color==="main"?this.set("stroke",d.E[this.team]):this.set("stroke",d.E[this._color]),this.moveTo(t.layer)},setRatio:function(t){this.set("x1",this.x1*this.ratio/t),this.set("y1",this.y1*this.ratio/t),this.set("x2",this.x2*this.ratio/t),this.set("y2",this.y2*this.ratio/t),this.set("strokeWidth",this.strokeWidth*this.ratio/t),this.ratio=t},setTeam:function(t){this.team=t,this._color==="main"&&this.set("stroke",d.E[this.team])}}),H=Y.fabric.util.createClass(Y.fabric.Ellipse,{type:"UiEllipse",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(t){t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.lockRotation=!0,t.lockScalingFlip=!0,t.hasRotatingPoint=!1,t.rx||(t.rx=50/this.ratio),t.ry||(t.ry=50/this.ratio),t.left||(t.left=50/this.ratio),t.top||(t.top=50/this.ratio),t.strokeWidth||(t.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?t.stroke=d.E[this._color]:(t.stroke=d.E[t.team],this._color="main"),t.fill=null,this.callSuper("initialize",t),this.moveTo(t.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){this.set("rx",Math.round(this.rx*this.scaleX*this.ratio)/this.ratio),this.set("ry",Math.round(this.ry*this.scaleY*this.ratio)/this.ratio),this.set("left",Math.round(this.left*this.ratio)/this.ratio),this.set("top",Math.round(this.top*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,rx:this.rx*this.ratio,ry:this.ry*this.ratio,x:(this.left+this.rx)*this.ratio,y:(this.top+this.ry)*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("rx",t.rx/this.ratio),this.set("ry",t.ry/this.ratio),this.set("left",(t.x-t.rx)/this.ratio),this.set("top",(t.y-t.ry)/this.ratio),this.set("strokeWidth",t.lineWidth/this.ratio),this._color==="main"?this.set("stroke",d.E[this.team]):this.set("stroke",d.E[this._color]),this.moveTo(t.layer)},setRatio:function(t){this.set("rx",this.rx*this.ratio/t),this.set("ry",this.ry*this.ratio/t),this.set("left",this.left*this.ratio/t),this.set("top",this.top*this.ratio/t),this.set("strokeWidth",this.strokeWidth*this.ratio/t),this.ratio=t},setTeam:function(t){this.team=t,this._color==="main"&&this.set("stroke",d.E[this.team])}}),C=Y.fabric.util.createClass(H,{type:"UiRound",r:50,initialize:function(t){t||(t={}),t.r||(t.r=50/this.ratio),t.rx=t.r,t.ry=t.r,this.callSuper("initialize",t),this.setControlVisible("ml",!1),this.setControlVisible("mb",!1),this.setControlVisible("mr",!1),this.setControlVisible("mt",!1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,r:this.rx*this.ratio,x:(this.left+this.rx)*this.ratio,y:(this.top+this.ry)*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){t.rx=t.r,t.ry=t.r,this.callSuper("fromObject",t)}}),W=Y.fabric.util.createClass(H,{type:"UiArc",startAngle:0,endAngle:90,initialize:function(t){t||(t={}),t.startAngle||(t.startAngle=0),t.endAngle||(t.endAngle=90),this.callSuper("initialize",t),this.startAngle=t.startAngle,this.endAngle=t.endAngle,this.set("dirty",!0)},toObject:function(){return Y.fabric.util.object.extend(this.callSuper("toObject"),{startAngle:this.startAngle,endAngle:this.endAngle})},_render:function(t){var g=(this.startAngle-90)*(Math.PI/180),x=(this.endAngle-90)*(Math.PI/180);t.beginPath(),t.ellipse(0,0,this.rx,this.ry,0,g,x,!1),t.strokeStyle=this.stroke,t.lineWidth=this.strokeWidth,t.stroke()},fromObject:function(t){this.set("startAngle",t.startAngle),this.set("endAngle",t.endAngle),this.set("ry",1),this.callSuper("fromObject",t)}});function F(a,t){var g=F.canvas||(F.canvas=document.createElement("canvas")),x=g.getContext("2d");x.font=t;var u=x.measureText(a);return u.width}var G=Y.fabric.util.createClass(Y.fabric.Text,{type:"UiText",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(t){t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.flipY=!0,t.fontSize||(t.fontSize=20/this.ratio),t.fontFamily||(t.fontFamily="ds-digitalnormal"),t.text||(t.text="Text"),t.left||(t.left=50/this.ratio),t.top||(t.top=50/this.ratio),t.width||(t.width=F(t.text,t.fontSize+"px "+t.fontFamily)/this.ratio),this._color&&this._color!=="main"?t.fill=d.E[this._color]:(t.fill=d.E[t.team],this._color="main"),this.callSuper("initialize",t.text,t),this.moveTo(t.layer),this.setControlsVisibility({tl:!1,tr:!1,bl:!1,br:!1,ml:!1,mt:!1,mr:!1,mb:!1,mtr:!1})},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,fontSize:this.fontSize*this.ratio,x:this.left*this.ratio,y:this.top*this.ratio,text:this.text,color:this._color}},fromObject:function(t){this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("left",t.x/this.ratio),this.set("top",t.y/this.ratio),this.set("fontSize",t.fontSize/this.ratio),this.text=t.text,this.set("width",F(t.text,t.fontSize+"px "+this.fontFamily)/this.ratio),this._color==="main"?this.set("fill",d.E[this.team]):this.set("fill",d.E[this._color]),this.moveTo(t.layer),this.set("fontFamily","ds-digitalnormal")},setRatio:function(t){this.set("width",this.width*this.ratio/t),this.set("left",this.left*this.ratio/t),this.set("top",this.top*this.ratio/t),this.set("fontSize",this.fontSize*this.ratio/t),this.ratio=t},resizeScale:function(){},setTeam:function(t){this.team=t,this._color==="main"&&this.set("fill",d.E[this.team])}}),O=Y.fabric.util.createClass(G,{type:"UiNumber",number:12345,initialize:function(t){t||(t={}),this.number=t.number||12345,t.text=this.number.toString(),this.callSuper("initialize",t)},toObject:function(){var t=this.callSuper("toObject");return t.number=this.number,delete t.text,t},fromObject:function(t){this.number=parseInt(t.number),t.text=this.number.toString(),this.callSuper("fromObject",t)}}),r=Y.fabric.util.createClass(G,{type:"UiFloat",float:12.345,initialize:function(t){t||(t={}),this.float=t.float||12.345,t.text=this.float.toString(),this.callSuper("initialize",t)},toObject:function(){var t=this.callSuper("toObject");return t.float=this.float,delete t.text,t},fromObject:function(t){this.float=parseFloat(t.float),t.text=this.float.toString(),this.callSuper("fromObject",t)}}),M=e(28348),Z={Rect:P,Line:T,Round:C,Ellipse:H,Arc:W,Text:G,Number:O,Float:r},R=null;function k(a){var t={id:a.id,name:a.name,layer:a.layer,groupName:a.group,ratio:a.ratio,team:a.team},g=a.type.slice(2);return g==="Text"&&(R||(M.yw.warning("Text object is beta now, maybe not same with client!"),R=setTimeout(function(){R=null},2e3))),new Z[g](t)}function j(){for(var a=[],t=0,g=Object.keys(Z);t<g.length;t++){var x=g[t];a.push({key:"Insert-".concat(x),label:x})}return a}},83885:function(ee,Q,e){e.a(ee,function(Y,d){return De(this,null,function*(){try{var P=e(64599),T=e.n(P),H=e(12444),C=e.n(H),W=e(72004),F=e.n(W),G=e(73070),O=Y([G]);G=(O.then?(yield O)():O)[0];var r=function(){function M(Z,R,k){C()(this,M),this.name=Z,this.id=R,this.groups=[];var j={};for(var a in k){var t=k[a];t.group in j?j[t.group].push(t):j[t.group]=[t]}for(var g in j)this.groups.push(new G.Z(this.name,this.id,g,this.groups.length,j[g]))}return F()(M,[{key:"toSerialMsg",value:function(){var R=[],k=T()(this.groups),j;try{for(k.s();!(j=k.n()).done;){var a=j.value;R=R.concat(a.toSerialMsg())}}catch(t){k.e(t)}finally{k.f()}return console.log(R),R}},{key:"check",value:function(){var R=[],k=T()(this.groups),j;try{for(k.s();!(j=k.n()).done;){var a=j.value;R=R.concat(a.check())}}catch(t){k.e(t)}finally{k.f()}return R}}]),M}();Q.Z=r,d()}catch(M){d(M)}})})},10622:function(ee,Q,e){e.a(ee,function(Y,d){return De(this,null,function*(){try{var P=e(64599),T=e.n(P),H=e(12444),C=e.n(H),W=e(72004),F=e.n(W),G=e(5970),O=e(83885),r=Y([G,O]);[G,O]=r.then?(yield r)():r;var M=function(){function Z(R){C()(this,Z),this.frames=[];for(var k in R)this.frames.push(new O.Z(k,this.frames.length,R[k]))}return F()(Z,[{key:"toUiH",value:function(){return(0,G.LI)(this.frames)}},{key:"check",value:function(){var k=[],j=T()(this.frames),a;try{for(j.s();!(a=j.n()).done;){var t=a.value;k=k.concat(t.check())}}catch(g){j.e(g)}finally{j.f()}return k}},{key:"toSerialMsg",value:function(){var k={},j=T()(this.frames),a;try{for(j.s();!(a=j.n()).done;){var t=a.value;k[t.name]=t.toSerialMsg()}}catch(g){j.e(g)}finally{j.f()}return k}}]),Z}();Q.Z=M,d()}catch(Z){d(Z)}})})},73070:function(ee,Q,e){e.a(ee,function(Y,d){return De(this,null,function*(){try{var P=e(64599),T=e.n(P),H=e(12444),C=e.n(H),W=e(72004),F=e.n(W),G=e(66978),O=Y([G]);G=(O.then?(yield O)():O)[0];var r=function(){function M(Z,R,k,j,a){C()(this,M),this.frame_name=Z,this.frame_id=R,this.group_name=k,this.group_id=j,this.splits=[],this.errors=[];var t=0,g=new Set,x=T()(a),u;try{for(x.s();!(u=x.n()).done;){var c=u.value;/^[a-zA-Z_]+\w+$/.test(c.name)||this.errors.push({level:"error",info:'Name of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Object "').concat(c.name,'" does not compliant.')}),g.has(c.name)?this.errors.push({level:"error",info:'Name of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Object "').concat(c.name,'" is duplicate.')}):g.add(c.name),c.type==="UiText"&&(this.splits.push(new G.Z(this.frame_name,this.frame_id,this.group_name,this.group_id,this.splits.length,t,[c])),t+=1)}}catch(z){x.e(z)}finally{x.f()}for(var l=a.filter(function(z){return z.type!=="UiText"}),f=Math.ceil(l.length/7),v=0;v<f;v++)this.splits.push(new G.Z(this.frame_name,this.frame_id,this.group_name,this.group_id,this.splits.length,t,l.slice(v*7,(v+1)*7))),t+=7}return F()(M,[{key:"toSerialMsg",value:function(){var R=[],k=T()(this.splits),j;try{for(k.s();!(j=k.n()).done;){var a=j.value;R.push(a.toSerialMsg())}}catch(t){k.e(t)}finally{k.f()}return R}},{key:"check",value:function(){var R=this.errors,k=T()(this.splits),j;try{for(k.s();!(j=k.n()).done;){var a=j.value;R=R.concat(a.check())}}catch(t){k.e(t)}finally{k.f()}return R}}]),M}();Q.Z=r,d()}catch(M){d(M)}})})},66978:function(ee,Q,e){e.a(ee,function(Y,d){return De(this,null,function*(){try{var P=e(97857),T=e.n(P),H=e(64599),C=e.n(H),W=e(12444),F=e.n(W),G=e(72004),O=e.n(G),r=e(5970),M=e(52880),Z=Y([r]);r=(Z.then?(yield Z)():Z)[0];var R=function(){function k(j,a,t,g,x,u,c){var l=this;if(F()(this,k),this.frame_name=j,this.frame_id=a,this.group_name=t,this.group_id=g,this.split_id=x,this.start_id=u,this.objs=c,c[0].type==="UiText")this.toSplitC=function(){return(0,r.c0)(l.frame_name,l.frame_id,l.group_name,l.group_id,l.split_id,l.start_id,l.objs)};else{var f=7;c.length===1?f=1:c.length<=2?f=2:c.length<=5&&(f=5),this.toSplitC=function(){return(0,r.JP)(l.frame_name,l.frame_id,l.group_name,l.group_id,l.split_id,l.start_id,l.objs,f)}}this.toSplitH=function(){return(0,r.pj)(l.frame_name,l.group_name,l.split_id,l.objs)}}return O()(k,[{key:"toSerialMsg",value:function(){var a=[],t=C()(this.objs),g;try{for(t.s();!(g=t.n()).done;){var x=g.value,u=T()({},x);u.group="".concat(this.frame_name,"-").concat(this.split_id),a.push(u)}}catch(c){t.e(c)}finally{t.f()}return(0,M.h)(a)}},{key:"check",value:function(){return this.objs.length!==1&&this.objs.length!==2&&this.objs.length!==5&&this.objs.length!==7?[{level:"warning",info:'Length of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Split "').concat(this.split_id,'" is not 1 or 2 or 5 or 7.')}]:[]}}]),k}();Q.Z=R,d()}catch(k){d(k)}})})},5970:function(ee,Q,e){e.a(ee,function(Y,d){return De(this,null,function*(){try{let c=function(I,D,w){for(var A="",V=0;V<w;V++)A=A+`
#include "ui_`.concat(I,"_").concat(D,"_").concat(V,'.h"');for(var $=`
#define ui_init_`.concat(I,"_").concat(D,`() \\
`),J=`
#define ui_update_`.concat(I,"_").concat(D,`() \\
`),N=`
#define ui_remove_`.concat(I,"_").concat(D,`() \\
`),h=0;h<w;h++)$+="_ui_init_".concat(I,"_").concat(D,"_").concat(h,`(); \\
`),J+="_ui_update_".concat(I,"_").concat(D,"_").concat(h,`(); \\
`),N+="_ui_remove_".concat(I,"_").concat(D,"_").concat(h,`(); \\
`);return A+="".concat(r).concat($.slice(0,-4)).concat(r).concat(J.slice(0,-4)).concat(r).concat(N.slice(0,-4),`
    `),"".concat(A,`
`)},l=function(I,D){var w="",A=O()(D),V;try{for(A.s();!(V=A.n()).done;){var $=V.value;w+=c(I,$.group_name,$.splits.length)}}catch(J){A.e(J)}finally{A.f()}return w},f=function(I){var D="//".concat(r,"// Created by RM UI Designer").concat(r,"//").concat(r).concat(r,"#ifndef UI_H").concat(r,"#define UI_H").concat(r,"#ifdef __cplusplus").concat(r,'extern "C" {').concat(r,"#endif").concat(r).concat(r,'#include "ui_interface.h"').concat(r),w=O()(I),A;try{for(w.s();!(A=w.n()).done;){var V=A.value;D+=l(V.name,V.groups)}}catch($){w.e($)}finally{w.f()}return"".concat(D).concat(r).concat(r,"#ifdef __cplusplus").concat(r,"}").concat(r,"#endif").concat(r).concat(r,`#endif //UI_H
`)},v=function(I,D,w,A){var V="//".concat(r,"// Created by RM UI Designer").concat(r,"//").concat(r).concat(r,"#ifndef UI_").concat(I,"_").concat(D,"_").concat(w,"_H").concat(r,"#define UI_").concat(I,"_").concat(D,"_").concat(w,"_H").concat(r).concat(r,'#include "ui_interface.h"').concat(r).concat(r),$=O()(A),J;try{for($.s();!(J=$.n()).done;){var N=J.value;V+="extern ui_interface_".concat(M[N.type],"_t *ui_").concat(I,"_").concat(D,"_").concat(N.name,`;
`)}}catch(h){$.e(h)}finally{$.f()}return V+="".concat(r,"void _ui_init_").concat(I,"_").concat(D,"_").concat(w,"();").concat(r,"void _ui_update_").concat(I,"_").concat(D,"_").concat(w,"();").concat(r,"void _ui_remove_").concat(I,"_").concat(D,"_").concat(w,"();").concat(r).concat(r,"#endif //UI_").concat(I,"_").concat(D,"_").concat(w,"_H").concat(r),V},z=function(I,D,w){var A=F()({},w),V=Z[A.type],$=A.name;A.type==="UiFloat"&&(A.number=Math.round(A.float*1e3),delete A.float),A.type==="UiRect"&&(A.x2=A.x+A.width,A.y2=A.y+A.height,delete A.width,delete A.height),(A.type==="UiFloat"||A.type==="UiNumber")&&(A.lineWidth=Math.round(A.fontSize/10)),A.color=k[A.color],delete A.type,delete A.id,delete A.name,delete A.group;var J="ui_".concat(I,"_").concat(D,"_").concat($),N="    ".concat(J,"->figure_tpye = ").concat(V,`;
`);for(var h in A){var le=A[h];typeof le=="number"&&(le=Math.round(le)),N+="    ".concat(J,"->").concat(R[h]," = ").concat(le,`;
`)}return"".concat(N,`
`)},S=function(I,D,w,A,V,$,J,N){for(var h="".concat(I,"_").concat(w,"_").concat(V),le="//".concat(r,"// Created by RM UI Designer").concat(r,"//").concat(r).concat(r,'#include "ui_').concat(h,'.h"').concat(r).concat(r,"#define FRAME_ID ").concat(D).concat(r,"#define GROUP_ID ").concat(A).concat(r,"#define START_ID ").concat($).concat(r,"#define OBJ_NUM ").concat(J.length).concat(r,"#define FRAME_OBJ_NUM ").concat(N).concat(r).concat(r,"CAT(ui_, CAT(FRAME_OBJ_NUM, _frame_t)) ui_").concat(h,";").concat(r),ye=0;ye<J.length;ye++){var Me=M[J[ye].type],ze=J[ye].name;le+="ui_interface_".concat(Me,"_t *ui_").concat(I,"_").concat(w,"_").concat(ze," = ")+"(ui_interface_".concat(Me,"_t *)&(ui_").concat(h,".data[").concat(ye,`]);
`)}le+="".concat(r,"void _ui_init_").concat(h,"() {").concat(r,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(r,"        ui_").concat(h,".data[i].figure_name[0] = FRAME_ID;").concat(r,"        ui_").concat(h,".data[i].figure_name[1] = GROUP_ID;").concat(r,"        ui_").concat(h,".data[i].figure_name[2] = i + START_ID;").concat(r,"        ui_").concat(h,".data[i].operate_tpyel = 1;").concat(r,"    }").concat(r,"    for (int i = OBJ_NUM; i < FRAME_OBJ_NUM; i++) {").concat(r,"        ui_").concat(h,".data[i].operate_tpyel = 0;").concat(r,"    }").concat(r).concat(r);var ve=O()(J),ce;try{for(ve.s();!(ce=ve.n()).done;){var ie=ce.value;le+=z(I,w,ie)}}catch(se){ve.e(se)}finally{ve.f()}return le+="".concat(r,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(h,");").concat(r,"    SEND_MESSAGE((uint8_t *) &ui_").concat(h,", sizeof(ui_").concat(h,"));").concat(r,"}").concat(r).concat(r,"void _ui_update_").concat(h,"() {").concat(r,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(r,"        ui_").concat(h,".data[i].operate_tpyel = 2;").concat(r,"    }").concat(r).concat(r,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(h,");").concat(r,"    SEND_MESSAGE((uint8_t *) &ui_").concat(h,", sizeof(ui_").concat(h,"));").concat(r,"}").concat(r).concat(r,"void _ui_remove_").concat(h,"() {").concat(r,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(r,"        ui_").concat(h,".data[i].operate_tpyel = 3;").concat(r,"    }").concat(r).concat(r,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(h,");").concat(r,"    SEND_MESSAGE((uint8_t *) &ui_").concat(h,", sizeof(ui_").concat(h,"));").concat(r,"}").concat(r),le},m=function(I,D,w,A,V,$,J){var N="".concat(I,"_").concat(w,"_").concat(V),h=F()({},J[0]),le=h.name,ye=h.text;h.color=k[h.color],h.strLength=ye.length,h.lineWidth=Math.round(h.fontSize/10),delete h.text,delete h.type,delete h.id,delete h.name,delete h.group;var Me="//".concat(r,"// Created by RM UI Designer").concat(r,"//").concat(r).concat(r,'#include "ui_').concat(N,'.h"').concat(r,'#include "string.h"').concat(r).concat(r,"#define FRAME_ID ").concat(D).concat(r,"#define GROUP_ID ").concat(A).concat(r,"#define START_ID ").concat($).concat(r).concat(r,"ui_string_frame_t ui_").concat(N,";").concat(r).concat(r,"ui_interface_string_t* ui_").concat(I,"_").concat(w,"_").concat(le," = &ui_").concat(N,".option;").concat(r).concat(r,"void _ui_init_").concat(N,"() {").concat(r,"    ui_").concat(N,".option.figure_name[0] = FRAME_ID;").concat(r,"    ui_").concat(N,".option.figure_name[1] = GROUP_ID;").concat(r,"    ui_").concat(N,".option.figure_name[2] = START_ID;").concat(r,"    ui_").concat(N,".option.operate_tpyel = 1;").concat(r);Me+="    ui_".concat(N,".option.figure_tpye = ").concat(Z.UiText,`;
`);for(var ze in h){var ve=h[ze];typeof ve=="number"&&(ve=Math.round(ve)),Me+="    ui_".concat(N,".option.").concat(R[ze]," = ").concat(ve,`;
`)}return Me+="    strcpy(ui_".concat(I,"_").concat(w,"_").concat(le,'->string, "').concat(ye,'");').concat(r).concat(r,"    ui_proc_string_frame(&ui_").concat(N,");").concat(r,"    SEND_MESSAGE((uint8_t *) &ui_").concat(N,", sizeof(ui_").concat(N,"));").concat(r,"}").concat(r).concat(r,"void _ui_update_").concat(N,"() {").concat(r,"    ui_").concat(N,".option.operate_tpyel = 2;").concat(r).concat(r,"    ui_proc_string_frame(&ui_").concat(N,");").concat(r,"    SEND_MESSAGE((uint8_t *) &ui_").concat(N,", sizeof(ui_").concat(N,"));").concat(r,"}").concat(r).concat(r,"void _ui_remove_").concat(N,"() {").concat(r,"    ui_").concat(N,".option.operate_tpyel = 3;").concat(r).concat(r,"    ui_proc_string_frame(&ui_").concat(N,");").concat(r,"    SEND_MESSAGE((uint8_t *) &ui_").concat(N,", sizeof(ui_").concat(N,"));").concat(r,"}"),Me},y=function(){return b.apply(this,arguments)},b=function(){return b=C()(T()().mark(function I(){return T()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",{ui_interface:{h:g,c:x},ui_types:{h:u}});case 1:case"end":return w.stop()}},I)})),b.apply(this,arguments)};e.d(Q,{HC:function(){return y},JP:function(){return S},LI:function(){return f},c0:function(){return m},pj:function(){return v}});var P=e(15009),T=e.n(P),H=e(99289),C=e.n(H),W=e(97857),F=e.n(W),G=e(64599),O=e.n(G),r=`
`,M={UiArc:"arc",UiRound:"round",UiRect:"rect",UiLine:"line",UiEllipse:"ellipse",UiText:"string",UiNumber:"number",UiFloat:"number"},Z={UiLine:0,UiRect:1,UiRound:2,UiEllipse:3,UiArc:4,UiFloat:5,UiNumber:6,UiText:7},R={lineWidth:"width",layer:"layer",x:"start_x",y:"start_y",x2:"end_x",y2:"end_y",rx:"rx",ry:"ry",r:"r",startAngle:"start_angle",endAngle:"end_angle",number:"number",color:"color",fontSize:"font_size",strLength:"str_length"},k={main:0,yellow:1,green:2,orange:3,purple:4,pink:5,cyan:6,black:7,white:8},j=e(75112),a=e(8938),t=e(33562),g=yield(yield fetch(j)).text(),x=yield(yield fetch(a)).text(),u=yield(yield fetch(t)).text();d()}catch(c){d(c)}})},1)},44740:function(ee,Q,e){e.d(Q,{Z:function(){return l}});var Y=e(15009),d=e.n(Y),P=e(99289),T=e.n(P),H=e(12444),C=e.n(H),W=e(72004),F=e.n(W),G=e(9783),O=e.n(G),r=e(19632),M=e.n(r),Z=e(85378),R=function(){function f(){C()(this,f),O()(this,"messages",[]),O()(this,"enabled",!1)}return F()(f,[{key:"warn",value:function(z){this.enabled&&(this.messages.push({level:"warn",message:z,time:new Date}),console.warn(z)),this.messages.length>100&&(this.messages=this.messages.slice(-100))}},{key:"error",value:function(z){this.enabled&&(this.messages.push({level:"error",message:z,time:new Date}),console.error(z)),this.messages.length>100&&(this.messages=this.messages.slice(-100))}},{key:"clear",value:function(){this.messages=[]}},{key:"get",value:function(){return this.messages}}]),f}(),k=new R,j=k,a=[8,21,36,81,111,51],t=function(){function f(){C()(this,f),O()(this,"buffer",void 0),this.buffer=new Uint8Array(0)}return F()(f,[{key:"transform",value:function(z,S){for(this.buffer=Uint8Array.from([].concat(M()(this.buffer),M()(z)));this.buffer.length>7;){if(this.buffer[0]!==165){this.buffer=this.buffer.subarray(1);continue}if(this.buffer.length<7)break;var m=this.buffer[1]|this.buffer[2]<<8,y=this.buffer[3],b=this.buffer[4],I=this.buffer[5]|this.buffer[6]<<8,D=this.buffer.subarray(0,4);if((0,Z.d)(D)!==b){this.buffer=this.buffer.subarray(1),j.warn("crc8 error, calc: 0x".concat((0,Z.d)(D).toString(16),", msg: 0x").concat(b.toString(16)));continue}if(I!==769){this.buffer=this.buffer.subarray(1),j.warn("cmd_id 0x".concat(I.toString(16)," not match"));continue}if(!a.includes(m)){this.buffer=this.buffer.subarray(1),j.warn("length error, length: ".concat(m));continue}if(this.buffer.length<6+m+2)break;var w=this.buffer.subarray(7,7+m),A=this.buffer[7+m]|this.buffer[8+m]<<8;if((0,Z.I)(this.buffer.subarray(0,7+m))!==A){this.buffer=this.buffer.subarray(1),j.error("crc16 error, calc: 0x".concat((0,Z.I)(this.buffer.subarray(0,7+m)).toString(16),", msg: 0x").concat(A.toString(16)));continue}S.enqueue(w),this.buffer=this.buffer.subarray(7+m+2)}}}]),f}(),g=t,x=e(73676),u=e(28348),c=function(){function f(v,z){C()(this,f),O()(this,"options",{baudRate:115200,dataBits:8,stopBits:1,flowControl:"none",parity:"none"}),this.onEvent=v,this.onError=z,this.reader=null,this.transformer=new TransformStream(new g)}return F()(f,[{key:"connect",value:function(){var v=T()(d()().mark(function S(){return d()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if("serial"in navigator){y.next=3;break}return u.yw.error("Web Serial API not supported."),y.abrupt("return");case 3:return y.next=5,navigator.serial.requestPort();case 5:return this.port=y.sent,y.next=8,this.port.open(this.options);case 8:this.readableStreamClosed=this.port.readable.pipeTo(this.transformer.writable),this.reader=this.transformer.readable.getReader(),j.enabled=!0,j.clear(),this.readLoop();case 13:case"end":return y.stop()}},S,this)}));function z(){return v.apply(this,arguments)}return z}()},{key:"stop",value:function(){var v=T()(d()().mark(function S(){var m,y,b;return d()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return m=new TextEncoderStream,y=m.writable.getWriter(),b=m.readable.pipeTo(this.port.writable),this.reader.cancel(),D.next=6,this.readableStreamClosed.catch(function(){});case 6:return y.close(),D.next=9,b;case 9:return D.next=11,this.port.close();case 11:this.reader=null,this.transformer=new TransformStream(new g),j.enabled=!1;case 14:case"end":return D.stop()}},S,this)}));function z(){return v.apply(this,arguments)}return z}()},{key:"readLoop",value:function(){var v=T()(d()().mark(function S(){var m,y,b,I;return d()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:w.prev=0;case 1:return w.next=4,this.reader.read();case 4:if(m=w.sent,y=m.value,b=m.done,!b){w.next=10;break}return this.reader.releaseLock(),w.abrupt("break",20);case 10:if(I=(0,x.EY)(y),I.sender===u.eq){w.next=14;break}return j.error("Sender ".concat(I.sender," not match self ").concat(u.eq)),w.abrupt("continue",1);case 14:if(I.receiver===u.eq+256){w.next=17;break}return j.error("Receiver ".concat(I.receiver," not match self ").concat(u.eq)),w.abrupt("continue",1);case 17:this===null||this===void 0||this.onEvent(I),w.next=1;break;case 20:w.next=36;break;case 22:return w.prev=22,w.t0=w.catch(0),w.prev=24,w.next=27,this.stop();case 27:w.next=31;break;case 29:w.prev=29,w.t1=w.catch(24);case 31:this.reader=null,this.transformer=new TransformStream(new g),j.enabled=!1,j.clear(),this.onError(w.t0);case 36:case"end":return w.stop()}},S,this,[[0,22],[24,29]])}));function z(){return v.apply(this,arguments)}return z}()},{key:"getLog",value:function(){return j.get()}}]),f}(),l=c},56134:function(ee,Q,e){e.a(ee,function(Y,d){return De(this,null,function*(){try{var P=e(64599),T=e.n(P),H=e(15009),C=e.n(H),W=e(99289),F=e.n(W),G=e(12444),O=e.n(G),r=e(72004),M=e.n(r),Z=e(9783),R=e.n(Z),k=e(10622),j=e(52880),a=e(28348),t=Y([k]);k=(t.then?(yield t)():t)[0];var g=function(){function x(){O()(this,x),R()(this,"options",{baudRate:115200,dataBits:8,stopBits:1,flowControl:"none",parity:"none"}),R()(this,"writer",null)}return M()(x,[{key:"connect",value:function(){var u=F()(C()().mark(function l(){return C()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if("serial"in navigator){v.next=3;break}return a.yw.error("Web Serial API not supported."),v.abrupt("return");case 3:return v.next=5,navigator.serial.requestPort();case 5:return this.port=v.sent,v.next=8,this.port.open(this.options);case 8:this.writer=this.port.writable.getWriter();case 9:case"end":return v.stop()}},l,this)}));function c(){return u.apply(this,arguments)}return c}()},{key:"stop",value:function(){var u=F()(C()().mark(function l(){return C()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.writer.releaseLock();case 2:return this.writer=null,v.next=5,this.port.close();case 5:case"end":return v.stop()}},l,this)}));function c(){return u.apply(this,arguments)}return c}()},{key:"write",value:function(){var u=F()(C()().mark(function l(f){var v=this,z,S,m,y,b,I,D;return C()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(this.writer){A.next=3;break}return a.yw.error("Serial port is not open."),A.abrupt("return");case 3:z=0,setTimeout(function(){v.writer.write((0,j.r)())},z),z+=50,S=new k.Z(f.data),m=S.toSerialMsg(),y=m[f.selected],console.log(f),b=T()(y),A.prev=11,D=C()().mark(function V(){var $;return C()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:$=I.value,setTimeout(function(){v.writer.write($)},z),z+=50;case 3:case"end":return N.stop()}},V)}),b.s();case 14:if((I=b.n()).done){A.next=18;break}return A.delegateYield(D(),"t0",16);case 16:A.next=14;break;case 18:A.next=23;break;case 20:A.prev=20,A.t1=A.catch(11),b.e(A.t1);case 23:return A.prev=23,b.f(),A.finish(23);case 26:case"end":return A.stop()}},l,this,[[11,20,23,26]])}));function c(l){return u.apply(this,arguments)}return c}()}]),x}();Q.Z=g,d()}catch(x){d(x)}})})},30789:function(ee,Q,e){e.d(Q,{E:function(){return O},E4:function(){return M},GM:function(){return g},Gj:function(){return Z},UP:function(){return j},cT:function(){return u},jK:function(){return c},lZ:function(){return k},q7:function(){return R}});var Y=e(15009),d=e.n(Y),P=e(99289),T=e.n(P),H=e(17990),C=e(55733),W=e.n(C),F=document.createElement("a"),G=document.createElement("input");G.type="file";var O={yellow:"rgb(255, 238, 70)",green:"rgb(168, 255, 45)",orange:"rgb(255, 163, 8)",purple:"rgb(240, 41, 246)",pink:"rgb(255, 100, 142)",cyan:"rgb(69, 255, 242)",white:"#fff",black:"#000",blue:"rgb(47, 168, 223)",red:"rgb(255, 69, 70)"};function r(l){var f=l.split(".").pop();return{name:f+" file",extensions:[f]}}function M(l,f){if(j())T()(d()().mark(function S(){var m;return d()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,H.WZ.save({filters:[r(f)],defaultPath:f});case 2:if(m=b.sent,!(m!==null&&m.length>0)){b.next=6;break}return b.next=6,H.fs.writeTextFile(m,l);case 6:case"end":return b.stop()}},S)}))();else{var v=new Blob([l],{type:"text/plain;charset=utf-8"}),z=URL.createObjectURL(v);F.href=z,F.download=f,F.click(),URL.revokeObjectURL(z)}}function Z(l,f){if(j())T()(d()().mark(function z(){var S,m;return d()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,H.WZ.save({filters:[r(f)],defaultPath:f});case 2:if(S=b.sent,!(S!==null&&S.length>0)){b.next=9;break}return b.next=6,l.arrayBuffer();case 6:return m=b.sent,b.next=9,H.fs.writeBinaryFile(S,m);case 9:case"end":return b.stop()}},z)}))();else{var v=URL.createObjectURL(l);F.href=v,F.download=f,F.click(),URL.revokeObjectURL(v)}}function R(l,f,v){var z={version:2,data:l,selected:v},S=JSON.stringify(z);M(S,f)}function k(l){var f=null;return window.createObjcectURL!==void 0?f=window.createOjcectURL(l):window.URL!==void 0?f=window.URL.createObjectURL(l):window.webkitURL!==void 0&&(f=window.webkitURL.createObjectURL(l)),f}function j(){return window!==void 0&&window.__TAURI__!==void 0}function a(l){return t.apply(this,arguments)}function t(){return t=T()(d()().mark(function l(f){var v;return d()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return v=new(W()),f.forEach(function(m){v.file(m.fileName,m.content)}),S.next=4,v.generateAsync({type:"blob"});case 4:return S.abrupt("return",S.sent);case 5:case"end":return S.stop()}},l)})),t.apply(this,arguments)}function g(l){return x.apply(this,arguments)}function x(){return x=T()(d()().mark(function l(f){var v,z,S;return d()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:v=[];for(z in f)for(S in f[z])v.push({fileName:"".concat(z,".").concat(S),content:f[z][S]});return y.next=4,a(v);case 4:return y.abrupt("return",y.sent);case 5:case"end":return y.stop()}},l)})),x.apply(this,arguments)}function u(l){return new Promise(function(f,v){if(j()){var z=[l.slice(1)],S="".concat(z," file");l==="image/*"&&(z=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],S="image"),T()(d()().mark(function m(){var y,b,I,D,w;return d()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,H.WZ.open({multiple:!1,directory:!1,filters:[{name:S,extensions:z}]});case 2:if(y=V.sent,!(y!==null&&y.length>0)){V.next=16;break}return b=y.replace(/\\/g,"/"),I=b.split("/").pop(),V.t0=Blob,V.next=9,H.fs.readBinaryFile(y);case 9:V.t1=V.sent,V.t2=[V.t1],D=new V.t0(V.t2),w=new File([D],I),f(w),V.next=17;break;case 16:v();case 17:case"end":return V.stop()}},m)}))()}else G.accept=l,G.value="",G.onchange=function(){if(G.files.length>0){var m=G.files[0];f(m)}else v(new Error("No file selected"))},G.click()})}function c(l){return document.getElementById("content-in").contains(l)||l.getAttribute("contentEditable")==="true"?!0:l.tagName==="INPUT"||l.tagName==="TEXTAREA"}},54030:function(ee,Q,e){var Y=e(67294),d=e(28348),P=e(85893);function T(H){return(0,d.ZP)(),(0,P.jsx)("div",{})}Q.Z=T},7427:function(ee,Q,e){var Y=e(12444),d=e.n(Y),P=e(72004),T=e.n(P),H=e(31996),C=e.n(H),W=e(26037),F=e.n(W),G=e(67294),O=e(21797),r=e(2487),M=e(42075),Z=e(28058),R=e(18429),k=e(85893),j=function(a){C()(g,a);var t=F()(g);function g(){return d()(this,g),t.apply(this,arguments)}return T()(g,[{key:"render",value:function(){var u=this.props.errors.filter(function(f){return f.level==="warning"}),c=this.props.errors.filter(function(f){return f.level==="error"}),l=(0,k.jsx)(O.ZP,{status:"success",title:"Check Passed!",subTitle:"0 error, 0 warning!",style:{marginTop:"50px"}});return c.length+u.length>0&&(l=(0,k.jsxs)("div",{style:{color:"var(--ant-color-text)",height:"100%"},children:[(0,k.jsxs)("p",{children:["Found ",c.length," errors, ",u.length," warnings."]}),(0,k.jsx)("div",{style:{paddingBottom:10},className:"card-body",children:(0,k.jsx)(r.Z,{bordered:!0,dataSource:this.props.errors,renderItem:function(v){return(0,k.jsx)(r.Z.Item,{children:(0,k.jsxs)(M.Z,{size:"middle",children:[v.level==="warning"?(0,k.jsx)(Z.Z,{}):(0,k.jsx)(R.Z,{}),v.info]})})}})})]})),(0,k.jsxs)("div",{style:{width:"100%",height:"calc(100% - 50px)"},children:[(0,k.jsx)("h3",{style:{color:"var(--ant-color-text)"},children:"Check Data"}),l]})}}]),g}(G.Component);Q.Z=j},56296:function(ee,Q,e){e.a(ee,function(Y,d){return De(this,null,function*(){try{let h=function(ye){var Me="";return ye.h&&(Me+=".h"),ye.h&&ye.c&&(Me+=" and "),ye.c&&(Me+=".c"),Me},le=function(){var ye=document.querySelector(".rmui"),Me=getComputedStyle(ye),ze=Me.getPropertyValue("--ant-color-text-base");return ze==="#fff"};var P=e(19632),T=e.n(P),H=e(15009),C=e.n(H),W=e(64599),F=e.n(W),G=e(97857),O=e.n(G),r=e(99289),M=e.n(r),Z=e(12444),R=e.n(Z),k=e(72004),j=e.n(k),a=e(25098),t=e.n(a),g=e(31996),x=e.n(g),u=e(26037),c=e.n(u),l=e(9783),f=e.n(l),v=e(67294),z=e(49107),S=e(42075),m=e(14726),y=e(85265),b=e(42308),I=e(28348),D=e(24389),w=e(51376),A=e(30789),V=e(5970),$=e(85893),J=Y([V]);V=(J.then?(yield J)():J)[0];var N=function(ye){x()(ze,ye);var Me=c()(ze);function ze(){var ve;R()(this,ze);for(var ce=arguments.length,ie=new Array(ce),se=0;se<ce;se++)ie[se]=arguments[se];return ve=Me.call.apply(Me,[this].concat(ie)),f()(t()(ve),"state",{preview:null,fileName:""}),f()(t()(ve),"checked",[]),ve}return j()(ze,[{key:"review",value:function(ce,ie){this.setState({preview:this.props.code[ce][ie],fileName:"".concat(ce,".").concat(ie)})}},{key:"download",value:function(ce,ie){(0,A.E4)(this.props.code[ce][ie],"".concat(ce,".").concat(ie)),console.log(this.props.code[ce][ie])}},{key:"downloadChecked",value:function(){var ve=M()(C()().mark(function ie(){var se,me,E,ue,oe;return C()().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(this.checked.length!==0){he.next=3;break}return I.yw.error("Please select at least one file."),he.abrupt("return");case 3:return se={},he.t0=O(),he.t1=O()({},this.props.code),he.next=8,(0,V.HC)();case 8:he.t2=he.sent,me=(0,he.t0)(he.t1,he.t2),E=F()(this.checked);try{for(E.s();!(ue=E.n()).done;)oe=ue.value,se[oe]=me[oe]}catch(Ce){E.e(Ce)}finally{E.f()}(0,A.GM)(se).then(function(Ce){(0,A.Gj)(Ce,"codes.zip")});case 13:case"end":return he.stop()}},ie,this)}));function ce(){return ve.apply(this,arguments)}return ce}()},{key:"render",value:function(){var ce=this,ie=[{file:"ui base .h and .c",key:"_base"}];for(var se in this.props.code)ie.push({file:"".concat(se," ").concat(h(this.props.code[se])),key:se,h:this.props.code[se].h!==void 0,c:this.props.code[se].c!==void 0});return(0,$.jsxs)("div",{className:"full",style:{overflow:"hidden"},children:[(0,$.jsx)("h3",{style:{color:"var(--ant-color-text)",marginBottom:20},children:"Download Data"}),(0,$.jsx)("div",{style:{paddingBottom:36},className:"card-body",children:(0,$.jsx)(z.Z,{columns:[{title:"File",dataIndex:"file",key:"file"},{title:"Preview",dataIndex:"key",key:"preview",render:function(E,ue){return(0,$.jsxs)(S.Z,{children:[ue.h&&(0,$.jsx)(m.ZP,{type:"link",onClick:function(){ce.review(E,"h")},children:"Preview .h"}),ue.c&&(0,$.jsx)(m.ZP,{type:"link",onClick:function(){ce.review(E,"c")},children:"Preview .c"})]})}},{title:"Download",dataIndex:"key",key:"download",render:function(E,ue){return E!=="_base"?(0,$.jsxs)(S.Z,{children:[ue.h&&(0,$.jsx)(m.ZP,{type:"link",onClick:function(){ce.download(E,"h")},children:"Download .h"}),ue.c&&(0,$.jsx)(m.ZP,{type:"link",onClick:function(){ce.download(E,"c")},children:"Download .c"})]}):(0,$.jsx)(m.ZP,{type:"link",onClick:M()(C()().mark(function oe(){var Se,he;return C()().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,(0,V.HC)();case 2:return Se=Ie.sent,Ie.next=5,(0,A.GM)(Se);case 5:he=Ie.sent,(0,A.Gj)(he,"ui_base.zip");case 7:case"end":return Ie.stop()}},oe)})),children:"Download .zip"})}}],dataSource:ie,rowSelection:{type:"checkbox",onChange:function(E){var ue=T()(E);ue.includes("_base")&&(ue=ue.filter(function(oe){return oe!=="_base"}),ue.push("ui_types"),ue.push("ui_interface")),ce.checked=ue},getCheckboxProps:function(E){return{name:E.key}}},pagination:!1})}),(0,$.jsx)(y.Z,{onClose:function(){return ce.setState({preview:null})},open:this.state.preview!==null,title:this.state.fileName,size:"large",getContainer:document.getElementById("content-in"),rootStyle:{inset:"25px 0 0 0"},children:(0,$.jsx)("div",{style:{height:"100%",overflow:"auto"},children:(0,$.jsx)(b.ZP,{value:this.state.preview||"",theme:le()?D.ub:D.tR,extensions:[(0,w.N)()],onContextMenu:function(E){E.stopPropagation()}})})})]})}}]),ze}(v.Component);Q.Z=N,d()}catch(h){d(h)}})})},22312:function(ee,Q,e){e.a(ee,function(Y,d){return De(this,null,function*(){try{var P=e(64599),T=e.n(P),H=e(12444),C=e.n(H),W=e(72004),F=e.n(W),G=e(25098),O=e.n(G),r=e(31996),M=e.n(r),Z=e(26037),R=e.n(Z),k=e(9783),j=e.n(k),a=e(67294),t=e(14726),g=e(85265),x=e(7427),u=e(56296),c=e(10622),l=e(85893),f=Y([u,c]);[u,c]=f.then?(yield f)():f;var v=function(z){M()(m,z);var S=R()(m);function m(){var y;C()(this,m);for(var b=arguments.length,I=new Array(b),D=0;D<b;D++)I[D]=arguments[D];return y=S.call.apply(S,[this].concat(I)),j()(O()(y),"state",{show:!1,step:"check"}),j()(O()(y),"downloadRef",(0,a.createRef)()),j()(O()(y),"data",{}),j()(O()(y),"errors",[]),y}return F()(m,[{key:"gen",value:function(b){this.helper=new c.Z(b),this.data=b,this.code={ui:{h:this.helper.toUiH()}};var I=T()(this.helper.frames),D;try{for(I.s();!(D=I.n()).done;){var w=D.value,A=T()(w.groups),V;try{for(A.s();!(V=A.n()).done;){var $=V.value,J=T()($.splits),N;try{for(J.s();!(N=J.n()).done;){var h=N.value;this.code["ui_".concat(w.name,"_").concat($.group_name,"_").concat(h.split_id)]={c:h.toSplitC(),h:h.toSplitH()}}}catch(le){J.e(le)}finally{J.f()}}}catch(le){A.e(le)}finally{A.f()}}}catch(le){I.e(le)}finally{I.f()}this.errors=this.helper.check(),this.setState({show:!0,step:"check"})}},{key:"onClose",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var b=this,I=(0,l.jsx)(t.ZP,{type:"primary",onClick:function(){return b.setState({step:"generate"})},disabled:this.errors.filter(function(w){return w.level==="error"}).length>0,children:"Generate"}),D=(0,l.jsx)(t.ZP,{type:"primary",onClick:function(){var A;return(A=b.downloadRef)===null||A===void 0||(A=A.current)===null||A===void 0?void 0:A.downloadChecked()},children:"Download"});return(0,l.jsx)("div",{children:(0,l.jsx)(g.Z,{title:"C Code Generator",placement:"right",onClose:function(){return b.onClose()},open:this.state.show,size:"large",getContainer:document.getElementById("content-in"),rootStyle:{inset:"25px 0 0 0"},style:{borderTop:"3px var(--ant-line-type) var(--ant-color-split)"},footer:(0,l.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",padding:5},children:this.state.step==="check"?I:D}),children:this.state.step==="check"?(0,l.jsx)(x.Z,{errors:this.errors}):(0,l.jsx)(u.Z,{code:this.code,ref:this.downloadRef})})})}}]),m}(a.Component);Q.Z=v,d()}catch(z){d(z)}})})},9520:function(ee,Q,e){e.a(ee,function(Y,d){return De(this,null,function*(){try{var P=e(15009),T=e.n(P),H=e(99289),C=e.n(H),W=e(64599),F=e.n(W),G=e(12444),O=e.n(G),r=e(72004),M=e.n(r),Z=e(25098),R=e.n(Z),k=e(31996),j=e.n(k),a=e(26037),t=e.n(a),g=e(9783),x=e.n(g),u=e(67294),c=e(14726),l=e(86250),f=e(83159),v=e(40411),z=e(73711),S=e(27732),m=e(11713),y=e(1210),b=e(52745),I=e(97937),D=e(16165),w=e(48268),A=e(62388),V=e(3213),$=e(54349),J=e(13799),N=e(82843),h=e(23481),le=e(79476),ye=e(28348),Me=e(73344),ze=e(553),ve=e(30789),ce=e(22312),ie=e(44740),se=e(56134),me=e(37932),E=e(85893),ue=Y([ce,se]);[ce,se]=ue.then?(yield ue)():ue;var oe=[{key:"File-new",label:"New"},{key:"File-open",label:"Open"},{key:"File-save",label:"Save"},{key:"File-saveAs",label:"Save as"},{key:"File-autoSave",label:"Auto Save"},{type:"divider"},{key:"File-generate",label:"Generate Code",icon:(0,E.jsx)(z.Z,{})}],Se=[{key:"Edit-undo",label:"Undo"},{key:"Edit-redo",label:"Redo"},{key:"Edit-reset",label:"Reset History"}],he=[{key:"Simulate-from",label:"From Robot",children:[{key:"Simulate-from-start",label:"Start"},{key:"Simulate-from-stop",label:"Stop"},{key:"Simulate-from-log",label:"Debug Log"}]},{key:"Simulate-to",label:"To Referee",children:[{key:"Simulate-to-start",label:"Start"},{key:"Simulate-to-stop",label:"Stop"},{key:"Simulate-to-update",label:"Update"}]},{key:"Simulate-settings",label:"Settings"}],Ce=function(Ie){j()(ke,Ie);var be=t()(ke);function ke(){var de;O()(this,ke);for(var q=arguments.length,je=new Array(q),xe=0;xe<q;xe++)je[xe]=arguments[xe];return de=be.call.apply(be,[this].concat(je)),x()(R()(de),"state",{fullscreen:!1,frames:["default"],selectedFrame:"default",darkMode:!1,couldUndo:!1,couldRedo:!1,serialStart:!1,serialToStart:!1,autoSave:!1}),x()(R()(de),"formRef",(0,u.createRef)()),x()(R()(de),"aboutRef",(0,u.createRef)()),x()(R()(de),"generatorRef",(0,u.createRef)()),x()(R()(de),"logDrawerRef",(0,u.createRef)()),x()(R()(de),"serialModalRef",(0,u.createRef)()),x()(R()(de),"modeModalRef",(0,u.createRef)()),x()(R()(de),"tauri",(0,ve.UP)()),x()(R()(de),"serial",new ie.Z(function(Ae){return de.onSerialEvent(Ae)},function(Ae){return de.onSerialError(Ae)})),x()(R()(de),"serialTo",new se.Z),x()(R()(de),"fileHandler",null),de}return M()(ke,[{key:"onSerialEvent",value:function(q){var je=F()(q.events),xe;try{for(je.s();!(xe=je.n()).done;){var Ae=xe.value;this.props.onObjectEvent(Ae.type,Ae.obj)}}catch(pe){je.e(pe)}finally{je.f()}}},{key:"onSerialError",value:function(q){this.props.setEditable(!0),this.setState({serialStart:!1}),ye.yw.error(q.text)}},{key:"componentDidMount",value:function(){var de=C()(T()().mark(function je(){var xe=this,Ae,pe,ae,K,X;return T()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(ae=function(){return ae=C()(T()().mark(function o(){var p;return T()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,Me.G.isMaximized();case 2:p=B.sent,Ae.setState({fullscreen:p});case 4:case"end":return B.stop()}},o)})),ae.apply(this,arguments)},pe=function(){return ae.apply(this,arguments)},Ae=this,!this.tauri){s.next=8;break}return s.next=6,pe();case 6:return s.next=8,Me.G.onResized(function(i){return pe()});case 8:return s.next=11,(K=this.modeModalRef.current)===null||K===void 0?void 0:K.open();case 11:if(X=s.sent,X!=="new"){s.next=25;break}return this.fileHandler=new me.X(function(){return JSON.stringify({version:2,data:xe.props.getData(),selected:xe.state.selectedFrame})}),s.next=16,this.fileHandler.create();case 16:if(!s.sent){s.next=23;break}return s.t0=this.props,s.next=20,this.fileHandler.read();case 20:return s.t1=s.sent,s.t0.upload.call(s.t0,s.t1),s.abrupt("break",41);case 23:s.next=39;break;case 25:if(X!=="open"){s.next=38;break}return this.fileHandler=new me.X(function(){return JSON.stringify({version:2,data:xe.props.getData(),selected:xe.state.selectedFrame})}),s.next=29,this.fileHandler.open();case 29:if(!s.sent){s.next=36;break}return s.t2=this.props,s.next=33,this.fileHandler.read();case 33:return s.t3=s.sent,s.t2.upload.call(s.t2,s.t3),s.abrupt("break",41);case 36:s.next=39;break;case 38:return s.abrupt("break",41);case 39:s.next=8;break;case 41:case"end":return s.stop()}},je,this)}));function q(){return de.apply(this,arguments)}return q}()},{key:"setCouldDo",value:function(q){this.setState({couldUndo:q.couldPrevious,couldRedo:q.couldNext})}},{key:"fullScreen",value:function(){if(this.tauri)Me.G.maximize();else{var q=document.documentElement;q.requestFullscreen?q.requestFullscreen():q.msRequestFullscreen?q.msRequestFullscreen():q.mozRequestFullScreen?q.mozRequestFullScreen():q.webkitRequestFullscreen&&q.webkitRequestFullscreen()}this.setState({fullscreen:!0})}},{key:"exitFullscreen",value:function(){this.tauri?Me.G.unmaximize():document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),this.setState({fullscreen:!1})}},{key:"setFrames",value:function(q){this.setState({frames:q.frames,selectedFrame:q.selected})}},{key:"onMenuClick",value:function(){var de=C()(T()().mark(function je(xe){var Ae=this,pe,ae,K,X,L,s,i,o,p,U,B;return T()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(pe=xe.keyPath[xe.keyPath.length-1],pe.slice(0,6)!=="Insert"){n.next=7;break}ae=xe.key.slice(7),K={id:-1,name:"New".concat(ae),layer:0,group:"Ungroup",type:"Ui".concat(ae)},this.props.onObjectEvent("_add",K),n.next=173;break;case 7:if(pe!=="Edit-reset"){n.next=11;break}this.props.onHistoryEvent("resetNow"),n.next=173;break;case 11:if(pe!=="Edit-undo"){n.next=15;break}this.props.onHistoryEvent("previous"),n.next=173;break;case 15:if(pe!=="Edit-redo"){n.next=19;break}this.props.onHistoryEvent("next"),n.next=173;break;case 19:if(pe!=="File-new"){n.next=35;break}if(!this.fileHandler){n.next=31;break}return n.next=23,this.fileHandler.create();case 23:if(!n.sent){n.next=29;break}return n.t0=this.props,n.next=27,this.fileHandler.read();case 27:n.t1=n.sent,n.t0.upload.call(n.t0,n.t1);case 29:n.next=33;break;case 31:this.props.reset(),this.props.onHistoryEvent("reset");case 33:n.next=173;break;case 35:if(pe!=="File-save"){n.next=44;break}if(!this.fileHandler){n.next=41;break}return n.next=39,this.fileHandler.save();case 39:n.next=42;break;case 41:(0,ve.q7)(this.props.getData(),"ui.rmui",this.state.selectedFrame);case 42:n.next=173;break;case 44:if(pe!=="File-saveAs"){n.next=53;break}if(!this.fileHandler){n.next=51;break}return n.next=48,this.fileHandler.create();case 48:if(!n.sent){n.next=51;break}return n.next=51,this.fileHandler.save();case 51:n.next=173;break;case 53:if(pe!=="File-open"){n.next=68;break}if(!this.fileHandler){n.next=65;break}return n.next=57,this.fileHandler.open();case 57:if(!n.sent){n.next=63;break}return n.t2=this.props,n.next=61,this.fileHandler.read();case 61:n.t3=n.sent,n.t2.upload.call(n.t2,n.t3);case 63:n.next=66;break;case 65:(0,ve.cT)(".rmui").then(function(te){Ae.props.upload(te)}).catch(function(){});case 66:n.next=173;break;case 68:if(pe!=="File-generate"){n.next=72;break}(X=this.generatorRef.current)===null||X===void 0||X.gen(this.props.getData()),n.next=173;break;case 72:if(pe!=="FrameOp-add"){n.next=79;break}return n.next=75,this.formRef.current.open("New Frame",this.state.frames);case 75:L=n.sent,this.props.setFrame("add",L),n.next=173;break;case 79:if(pe!=="FrameOp-remove"){n.next=83;break}this.props.setFrame("remove",this.state.selectedFrame),n.next=173;break;case 83:if(pe!=="FrameOp-copy"){n.next=90;break}return n.next=86,this.formRef.current.open("Copy Frame To",this.state.frames);case 86:s=n.sent,this.props.setFrame("copy",s),n.next=173;break;case 90:if(pe!=="FrameOp-rename"){n.next=97;break}return n.next=93,this.formRef.current.open("Rename Frame To",this.state.frames);case 93:i=n.sent,this.props.setFrame("rename",i),n.next=173;break;case 97:if(pe!=="FrameOp-change"){n.next=102;break}o=xe.key.slice(7),this.props.setFrame("change",o),n.next=173;break;case 102:if(xe.key!=="Simulate-from-start"){n.next=115;break}return n.prev=103,n.next=106,this.serial.connect();case 106:this.props.setEditable(!1),this.setState({serialStart:!0}),n.next=113;break;case 110:n.prev=110,n.t4=n.catch(103),ye.yw.error(n.t4.text);case 113:n.next=173;break;case 115:if(xe.key!=="Simulate-from-stop"){n.next=128;break}return n.prev=116,n.next=119,this.serial.stop();case 119:this.props.setEditable(!0),this.setState({serialStart:!1}),n.next=126;break;case 123:n.prev=123,n.t5=n.catch(116),ye.yw.error(n.t5.text);case 126:n.next=173;break;case 128:if(xe.key!=="Simulate-from-log"){n.next=132;break}(p=this.logDrawerRef.current)===null||p===void 0||p.show(this.serial.getLog()),n.next=173;break;case 132:if(xe.key!=="Simulate-to-start"){n.next=145;break}return n.prev=133,n.next=136,this.serialTo.connect();case 136:ye.yw.warning("This Module is beta now, maybe not work!"),this.setState({serialToStart:!0}),n.next=143;break;case 140:n.prev=140,n.t6=n.catch(133),ye.yw.error(n.t6.text);case 143:n.next=173;break;case 145:if(xe.key!=="Simulate-to-stop"){n.next=157;break}return n.prev=146,n.next=149,this.serialTo.stop();case 149:this.setState({serialToStart:!1}),n.next=155;break;case 152:n.prev=152,n.t7=n.catch(146),ye.yw.error(n.t7.text);case 155:n.next=173;break;case 157:if(xe.key!=="Simulate-to-update"){n.next=168;break}return n.prev=158,n.next=161,this.serialTo.write({data:this.props.getData(),selected:this.state.selectedFrame});case 161:n.next=166;break;case 163:n.prev=163,n.t8=n.catch(158),ye.yw.error(n.t8.text);case 166:n.next=173;break;case 168:if(pe!=="Simulate-settings"){n.next=173;break}return n.next=171,(U=this.serialModalRef.current)===null||U===void 0?void 0:U.getOptions(this.serial.options);case 171:B=n.sent,B&&(this.serial.options=B);case 173:case"end":return n.stop()}},je,this,[[103,110],[116,123],[133,140],[146,152],[158,163]])}));function q(je){return de.apply(this,arguments)}return q}()},{key:"getFramesMenu",value:function(){var q=[{key:"FrameOp-add",label:"New Frame"},{key:"FrameOp-copy",label:"Copy This Frame"},{key:"FrameOp-rename",label:"Rename This Frame"},{key:"FrameOp-remove",label:"Remove This Frame"},{key:"FrameOp-change",label:"Change to",selectable:"true",children:[]}],je=F()(this.state.frames),xe;try{for(je.s();!(xe=je.n()).done;){var Ae=xe.value;q[4].children.push({key:"Frames-".concat(Ae),label:Ae})}}catch(pe){je.e(pe)}finally{je.f()}return q}},{key:"render",value:function(){var q=this,je=(0,E.jsx)(c.ZP,{type:"text",onClick:function(){return q.fullScreen()},size:"small",children:(0,E.jsx)(S.Z,{style:{color:"var(--ant-color-text)"}})}),xe=(0,E.jsx)(c.ZP,{type:"text",onClick:function(){return q.exitFullscreen()},size:"small",children:(0,E.jsx)(m.Z,{style:{color:"var(--ant-color-text)"}})}),Ae=(0,E.jsx)(c.ZP,{type:"text",onClick:function(){return q.props.setDarkMode(!0)},size:"small",children:(0,E.jsx)(D.Z,{component:J.r})}),pe=(0,E.jsx)(c.ZP,{type:"text",onClick:function(){return q.props.setDarkMode(!1)},size:"small",children:(0,E.jsx)(D.Z,{component:N.r})});return Se[0].disabled=!this.state.couldUndo,Se[1].disabled=!this.state.couldRedo,he[0].disabled=this.state.serialToStart,he[1].disabled=this.state.serialStart,he[2].disabled=this.state.serialStart||this.state.serialToStart,he[0].children[0].disabled=this.state.serialStart,he[0].children[1].disabled=!this.state.serialStart,he[1].children[0].disabled=this.state.serialToStart,he[1].children[1].disabled=!this.state.serialToStart,he[1].children[2].disabled=!this.state.serialToStart,oe[3].disabled=!this.fileHandler,oe[4].disabled=!0,(0,E.jsxs)("div",{style:{width:"100%",height:32,marginTop:-5,zIndex:2e3,position:"relative"},className:"solid-color","data-tauri-drag-region":!0,children:[(0,E.jsxs)(l.Z,{style:{width:"100vw",display:"flex",paddingTop:-5},justify:"flex-start",align:"center","data-tauri-drag-region":!0,children:[(0,E.jsx)("div",{style:{fontFamily:"YouSheBiaoTiHei",fontSize:20,paddingLeft:6,paddingRight:6,paddingTop:3,display:"flex",color:"var(--ant-color-text)",cursor:"default"},"data-tauri-drag-region":!0,children:"RoboMaster UI Designer"}),(0,E.jsx)(f.Z,{menu:{items:oe,onClick:function(K){return q.onMenuClick(K)}},children:(0,E.jsx)(c.ZP,{type:"text",size:"small",children:"File"})}),(0,E.jsx)(f.Z,{menu:{items:[].concat(Se),onClick:function(K){return q.onMenuClick(K)}},children:(0,E.jsx)(c.ZP,{type:"text",size:"small",children:"Edit"})}),(0,E.jsx)(f.Z,{menu:{items:(0,A.t)(),onClick:function(K){return q.onMenuClick(K)}},children:(0,E.jsx)(c.ZP,{type:"text",size:"small",children:"Insert"})}),(0,E.jsx)(f.Z,{menu:{items:this.getFramesMenu(),onClick:function(K){return q.onMenuClick(K)},selectedKeys:["Frames-".concat(this.state.selectedFrame)]},children:(0,E.jsx)(c.ZP,{type:"text",size:"small",children:"Frames"})}),(0,E.jsx)(f.Z,{menu:{items:[].concat(he),onClick:function(K){return q.onMenuClick(K)}},children:(0,E.jsxs)(c.ZP,{type:"text",size:"small",children:["Simulate\xA0",(0,E.jsx)(v.Z,{color:this.state.serialStart||this.state.serialToStart?"green":"red"})]})}),(0,E.jsx)(c.ZP,{type:"text",size:"small",onClick:function(){var K;(K=q.aboutRef.current)===null||K===void 0||K.show()},children:"About"}),(0,E.jsxs)("div",{style:{marginRight:5,justifyContent:"flex-end",marginLeft:"auto",marginTop:2},"data-tauri-drag-region":!0,children:[(0,E.jsxs)("div",{style:{display:"inline",marginRight:15,fontSize:10,cursor:"default",color:"var(--ant-color-text)"},"data-tauri-drag-region":!0,children:["Created by\xA0",(0,E.jsx)("a",{href:"https://github.com/bismarckkk",target:"_blank",children:(0,E.jsx)(c.ZP,{type:"link",style:{padding:0},size:"small","data-tauri-drag-region":!0,children:"Bismarckkk"})})]}),this.props.darkMode?pe:Ae,(0,E.jsx)("a",{href:"https://github.com/bismarckkk/RM-UI-Designer",target:"_blank",children:(0,E.jsx)(c.ZP,{type:"text",size:"small",children:(0,E.jsx)(y.Z,{style:{color:"var(--ant-color-text)"}})})}),(0,E.jsx)(c.ZP,{type:"text",size:"small",onClick:function(){return Me.G.minimize()},style:{display:this.tauri?"inline":"none"},children:(0,E.jsx)(b.Z,{style:{color:"var(--ant-color-text)"}})}),this.state.fullscreen?xe:je,(0,E.jsx)(c.ZP,{type:"text",size:"small",onClick:function(){return(0,ze.J)()},style:{display:this.tauri?"inline":"none"},children:(0,E.jsx)(I.Z,{style:{color:"var(--ant-color-text)"}})})]})]}),(0,E.jsx)(w.Z,{ref:this.formRef}),(0,E.jsx)(V.Z,{ref:this.aboutRef}),(0,E.jsx)(ce.Z,{ref:this.generatorRef}),(0,E.jsx)(le.Z,{ref:this.logDrawerRef}),(0,E.jsx)(h.Z,{ref:this.serialModalRef}),(0,E.jsx)($.Z,{ref:this.modeModalRef})]})}}]),ke}(u.Component);Q.Z=Ce,d()}catch(Ie){d(Ie)}})})},3213:function(ee,Q,e){var Y=e(97857),d=e.n(Y),P=e(13769),T=e.n(P),H=e(12444),C=e.n(H),W=e(72004),F=e.n(W),G=e(25098),O=e.n(G),r=e(31996),M=e.n(r),Z=e(26037),R=e.n(Z),k=e(9783),j=e.n(k),a=e(67294),t=e(85576),g=e(40249),x=e(21798),u=e(85893),c=["node"],l=function(f){M()(z,f);var v=R()(z);function z(){var S;C()(this,z);for(var m=arguments.length,y=new Array(m),b=0;b<m;b++)y[b]=arguments[b];return S=v.call.apply(v,[this].concat(y)),j()(O()(S),"state",{open:!1,content:null}),S}return F()(z,[{key:"show",value:function(){this.setState({open:!0})}},{key:"componentDidMount",value:function(){var m=this;fetch(e(99734)).then(function(y){return y.text()}).then(function(y){m.setState({content:y})})}},{key:"render",value:function(){var m=this;return(0,u.jsx)(t.Z,{title:"About",onOk:function(){return m.setState({open:!1})},onCancel:function(){return m.setState({open:!1})},footer:null,open:this.state.open,children:this.state.content?(0,u.jsx)(x.U,{components:{a:function(b){var I=b.node,D=T()(b,c);return(0,u.jsx)("a",d()(d()({},D),{},{target:"_blank"}))}},children:this.state.content}):(0,u.jsx)(g.Z,{})})}}]),z}(a.Component);Q.Z=l},41327:function(ee,Q,e){var Y=e(97857),d=e.n(Y),P=e(13769),T=e.n(P),H=e(12444),C=e.n(H),W=e(72004),F=e.n(W),G=e(25098),O=e.n(G),r=e(31996),M=e.n(r),Z=e(26037),R=e.n(Z),k=e(9783),j=e.n(k),a=e(67294),t=e(85576),g=e(42075),x=e(14726),u=e(40249),c=e(21798),l=e(85893),f=["node"],v=function(z){M()(m,z);var S=R()(m);function m(){var y;C()(this,m);for(var b=arguments.length,I=new Array(b),D=0;D<b;D++)I[D]=arguments[D];return y=S.call.apply(S,[this].concat(I)),j()(O()(y),"state",{open:!1,content:null}),y}return F()(m,[{key:"componentDidMount",value:function(){var b=this,I=localStorage.getItem("eula");(!I||!JSON.parse(I))&&(this.setState({open:!0}),fetch(e(19293)).then(function(D){return D.text()}).then(function(D){b.setState({content:D})}))}},{key:"dontShow",value:function(){localStorage.setItem("eula","true"),this.setState({open:!1})}},{key:"render",value:function(){var b=this;return(0,l.jsx)(t.Z,{title:"Welcome to RM UI Designer!",onOk:function(){return b.setState({open:!1})},onCancel:function(){return b.setState({open:!1})},footer:(0,l.jsxs)(g.Z,{children:[(0,l.jsx)(x.ZP,{onClick:this.dontShow.bind(this),children:"Don't show"}),(0,l.jsx)(x.ZP,{type:"primary",onClick:function(){return b.setState({open:!1})},children:"OK"})]}),open:this.state.open,children:this.state.content?(0,l.jsx)(c.U,{components:{a:function(D){var w=D.node,A=T()(D,f);return(0,l.jsx)("a",d()(d()({},A),{},{target:"_blank"}))}},children:this.state.content}):(0,l.jsx)(u.Z,{})})}}]),m}(a.Component);Q.Z=v},48268:function(ee,Q,e){var Y=e(64599),d=e.n(Y),P=e(15009),T=e.n(P),H=e(99289),C=e.n(H),W=e(12444),F=e.n(W),G=e(72004),O=e.n(G),r=e(25098),M=e.n(r),Z=e(31996),R=e.n(Z),k=e(26037),j=e.n(k),a=e(9783),t=e.n(a),g=e(67294),x=e(37476),u=e(5966),c=e(85893),l=function(f){R()(z,f);var v=j()(z);function z(){var S;F()(this,z);for(var m=arguments.length,y=new Array(m),b=0;b<m;b++)y[b]=arguments[b];return S=v.call.apply(v,[this].concat(y)),t()(M()(S),"state",{title:"",open:!1,frames:[]}),t()(M()(S),"promise",null),S}return O()(z,[{key:"open",value:function(m,y){var b=this;return new Promise(function(I,D){b.setState({title:m,open:!0,frames:y}),b.promise&&b.promise.reject(),b.promise={resolve:I,reject:D}})}},{key:"render",value:function(){var m=this;return(0,c.jsx)(x.Y,{title:this.state.title,autoFocusFirstInput:!0,width:240,open:this.state.open,onOpenChange:function(b){m.promise&&!b&&m.state.open&&m.promise.reject(),m.setState({open:b})},onFinish:function(){var y=C()(T()().mark(function b(I){return T()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return m.promise.resolve(I.frame),m.promise=null,w.abrupt("return",!0);case 3:case"end":return w.stop()}},b)}));return function(b){return y.apply(this,arguments)}}(),children:(0,c.jsx)(u.Z,{name:"frame",label:"New Frame Name",width:"sm",rules:[{required:!0,message:"Please input frame name!"},function(y){var b=y.getFieldValue,I=m;return{validator:function(w,A){{var V=!0,$=b("frame"),J=d()(I.state.frames),N;try{for(J.s();!(N=J.n()).done;){var h=N.value;if(h===$){V=!1;break}}}catch(le){J.e(le)}finally{J.f()}return V?Promise.resolve():Promise.reject(new Error("Cannot create same name frame!"))}}}}]})})}}]),z}(g.Component);Q.Z=l},79476:function(ee,Q,e){var Y=e(12444),d=e.n(Y),P=e(72004),T=e.n(P),H=e(25098),C=e.n(H),W=e(31996),F=e.n(W),G=e(26037),O=e.n(G),r=e(9783),M=e.n(r),Z=e(67294),R=e(21797),k=e(2487),j=e(42075),a=e(85265),t=e(28058),g=e(18429),x=e(85893),u=function(c){F()(f,c);var l=O()(f);function f(){var v;d()(this,f);for(var z=arguments.length,S=new Array(z),m=0;m<z;m++)S[m]=arguments[m];return v=l.call.apply(l,[this].concat(S)),M()(C()(v),"state",{show:!1,errors:[]}),v}return T()(f,[{key:"onClose",value:function(){this.setState({show:!1})}},{key:"show",value:function(z){this.setState({show:!0,errors:z})}},{key:"render",value:function(){var z=this,S=this.state.errors.filter(function(b){return b.level==="warn"}),m=this.state.errors.filter(function(b){return b.level==="error"}),y=(0,x.jsx)(R.ZP,{status:"success",title:"0 error, 0 warning!",style:{marginTop:"50px"}});return m.length+S.length>0&&(y=(0,x.jsxs)("div",{style:{color:"var(--ant-color-text)",height:"100%"},children:[(0,x.jsxs)("p",{children:["Logged ",m.length," errors, ",S.length," warnings."]}),(0,x.jsx)("div",{style:{paddingBottom:10},className:"card-body",children:(0,x.jsx)(k.Z,{bordered:!0,dataSource:this.state.errors,renderItem:function(I){return(0,x.jsx)(k.Z.Item,{children:(0,x.jsxs)(j.Z,{size:"middle",children:[I.level==="warn"?(0,x.jsx)(t.Z,{}):(0,x.jsx)(g.Z,{}),"".concat(I.time.toLocaleTimeString(),": ").concat(I.message)]})})}})})]})),(0,x.jsx)(a.Z,{title:"Serial Debug Log",placement:"right",onClose:function(){return z.onClose()},open:this.state.show,size:"large",getContainer:document.getElementById("content-in"),rootStyle:{inset:"25px 0 0 0"},style:{borderTop:"3px var(--ant-line-type) var(--ant-color-split)"},children:(0,x.jsx)("div",{style:{width:"100%",height:"calc(100% - 25px)"},children:y})})}}]),f}(Z.Component);Q.Z=u},54349:function(ee,Q,e){var Y=e(12444),d=e.n(Y),P=e(72004),T=e.n(P),H=e(25098),C=e.n(H),W=e(31996),F=e.n(W),G=e(26037),O=e.n(G),r=e(9783),M=e.n(r),Z=e(67294),R=e(85576),k=e(42075),j=e(14726),a=e(96074),t=e(37932),g=e(85893),x=function(u){F()(l,u);var c=O()(l);function l(){var f;d()(this,l);for(var v=arguments.length,z=new Array(v),S=0;S<v;S++)z[S]=arguments[S];return f=c.call.apply(c,[this].concat(z)),M()(C()(f),"state",{title:"",open:!1,frames:[]}),M()(C()(f),"promise",null),f}return T()(l,[{key:"open",value:function(){var v=this;return new Promise(function(z,S){v.setState({open:!0}),v.promise&&v.promise.reject(),v.promise={resolve:z,reject:S}})}},{key:"onClick",value:function(v){this.setState({open:!1}),this.promise.resolve(v),this.promise=null}},{key:"render",value:function(){var v=this,z=(0,t._)();return(0,g.jsx)(R.Z,{footer:null,maskClosable:!1,closeIcon:null,zIndex:800,open:this.state.open,children:(0,g.jsxs)(k.Z,{direction:"vertical",size:"middle",style:{width:"100%",padding:15},children:[(0,g.jsx)(j.ZP,{type:"primary",disabled:!z,style:{width:"100%"},size:"large",onClick:function(){return v.onClick("new")},children:"New Project"}),(0,g.jsx)(j.ZP,{type:"primary",disabled:!z,style:{width:"100%"},size:"large",onClick:function(){return v.onClick("open")},children:"Open Exist"}),(0,g.jsx)(a.Z,{}),(0,g.jsx)(j.ZP,{type:"primary",style:{width:"100%"},size:"large",onClick:function(){return v.onClick("use")},children:"Temporary Use"})]})})}}]),l}(Z.Component);Q.Z=x},23481:function(ee,Q,e){var Y=e(15009),d=e.n(Y),P=e(99289),T=e.n(P),H=e(12444),C=e.n(H),W=e(72004),F=e.n(W),G=e(25098),O=e.n(G),r=e(31996),M=e.n(r),Z=e(26037),R=e.n(Z),k=e(9783),j=e.n(k),a=e(67294),t=e(37476),g=e(64317),x=e(85893),u=[1152e3,1e6,921600,576e3,5e5,460800,230400,115200,74800,57600,38400,19200,9600,4800],c=function(l){M()(v,l);var f=R()(v);function v(){var z;C()(this,v);for(var S=arguments.length,m=new Array(S),y=0;y<S;y++)m[y]=arguments[y];return z=f.call.apply(f,[this].concat(m)),j()(O()(z),"state",{open:!1,defaultOptions:{}}),j()(O()(z),"promise",null),z}return F()(v,[{key:"getOptions",value:function(S){var m=this;return new Promise(function(y,b){m.setState({open:!0,defaultOptions:S}),m.promise&&m.promise.reject(),m.promise={resolve:y,reject:b}})}},{key:"onFinish",value:function(){var z=T()(d()().mark(function m(y){return d()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return this.promise.resolve(y),this.promise=null,I.abrupt("return",!0);case 3:case"end":return I.stop()}},m,this)}));function S(m){return z.apply(this,arguments)}return S}()},{key:"render",value:function(){var S=this;return(0,x.jsxs)(t.Y,{title:"Serial",width:400,open:this.state.open,onOpenChange:function(y){return S.setState({open:y})},onFinish:function(){var m=T()(d()().mark(function y(b){return d()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,S.onFinish(b);case 2:return D.abrupt("return",D.sent);case 3:case"end":return D.stop()}},y)}));return function(y){return m.apply(this,arguments)}}(),children:[(0,x.jsx)(g.Z,{name:"baudRate",label:"Baud Rate",width:"sm",initialValue:this.state.defaultOptions.baudRate,options:u.map(function(m){return{value:m,label:m.toString()}}),rules:[{required:!0}]}),(0,x.jsx)(g.Z,{name:"dataBits",label:"Data Bits",width:"sm",initialValue:this.state.defaultOptions.dataBits,options:[{value:8,label:"8"},{value:7,label:"7"}],rules:[{required:!0}]}),(0,x.jsx)(g.Z,{name:"stopBits",label:"Stop Bits",width:"sm",initialValue:this.state.defaultOptions.stopBits,options:[{value:1,label:"1"},{value:2,label:"2"}],rules:[{required:!0}]}),(0,x.jsx)(g.Z,{name:"parity",label:"Parity",width:"sm",initialValue:this.state.defaultOptions.parity,options:[{value:"none",label:"None"},{value:"even",label:"Even"},{value:"odd",label:"Odd"}],rules:[{required:!0}]}),(0,x.jsx)(g.Z,{name:"flowControl",label:"Flow Control",width:"sm",initialValue:this.state.defaultOptions.flowControl,options:[{value:"none",label:"None"},{value:"hardware",label:"Hardware"}],rules:[{required:!0}]})]})}}]),v}(a.Component);Q.Z=c},4585:function(ee,Q,e){e.d(Q,{Z:function(){return ze}});var Y=e(97857),d=e.n(Y),P=e(13769),T=e.n(P),H=e(15009),C=e.n(H),W=e(99289),F=e.n(W),G=e(12444),O=e.n(G),r=e(72004),M=e.n(r),Z=e(25098),R=e.n(Z),k=e(31996),j=e.n(k),a=e(26037),t=e.n(a),g=e(9783),x=e.n(g),u=e(67294),c=e(21797),l=e(42075),f=e(75081),v=e(85576),z=e(14726),S=e(92462),m=e(553),y=e(30789);function b(){return I.apply(this,arguments)}function I(){return I=F()(C()().mark(function ve(){var ce,ie,se,me,E,ue,oe,Se,he,Ce,Ie,be,ke;return C()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(!(0,y.UP)()){q.next=14;break}return q.next=3,(0,S.Py)();case 3:if(ce=q.sent,!ce.manifest){q.next=11;break}return ie=ce.manifest.version.slice(1).split(".").map(Number),se=localStorage.getItem("version_ignored"),se||(se="nightly 15d0df0"),me=se.slice(1).split(".").map(Number),E=ie[0]>me[0]||ie[1]>me[1]||ie[2]>me[2],q.abrupt("return",{shouldUpdate:E,manifest:ce.manifest});case 11:return q.abrupt("return",ce);case 14:return ue=Date.now(),q.next=17,fetch("https://ui.bismarck.xyz/update.json?".concat(ue));case 17:return oe=q.sent,q.next=20,oe.json();case 20:return Se=q.sent,he=Se.notes,Ce=Se.version.slice(1).split(".").map(Number),Ie=localStorage.getItem("version_ignored"),Ie||(Ie="nightly 15d0df0"),be=Ie.slice(1).split(".").map(Number),ke=Ce[0]>be[0]||Ce[1]>be[1]||Ce[2]>be[2],q.abrupt("return",{shouldUpdate:ke,manifest:{body:he,version:Se.version}});case 28:case"end":return q.stop()}},ve)})),I.apply(this,arguments)}function D(){return w.apply(this,arguments)}function w(){return w=F()(C()().mark(function ve(){return C()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(!(0,y.UP)()){ie.next=6;break}return ie.next=3,(0,S.F_)();case 3:return ie.abrupt("return",ie.sent);case 6:window.location.reload();case 7:case"end":return ie.stop()}},ve)})),w.apply(this,arguments)}var A={checkUpdate:b,installUpdate:D,relaunch:m.R},V=e(28348),$=e(21798),J=e(85893),N=["node"],h=A.checkUpdate,le=A.installUpdate,ye=A.relaunch,Me=function(ve){j()(ie,ve);var ce=t()(ie);function ie(){var se;O()(this,ie);for(var me=arguments.length,E=new Array(me),ue=0;ue<me;ue++)E[ue]=arguments[ue];return se=ce.call.apply(ce,[this].concat(E)),x()(R()(se),"state",{step:0,content:"",version:""}),se}return M()(ie,[{key:"handleClose",value:function(){this.setState({step:0})}},{key:"handleOk",value:function(){var se=F()(C()().mark(function E(){return C()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.prev=0,this.setState({step:2}),oe.next=4,le();case 4:if(oe.t0=!(0,y.UP)(),oe.t0){oe.next=9;break}return oe.next=8,ye();case 8:oe.t0=!oe.sent;case 9:if(!oe.t0){oe.next=11;break}this.setState({step:3});case 11:oe.next=16;break;case 13:oe.prev=13,oe.t1=oe.catch(0),this.setState({step:-1});case 16:case"end":return oe.stop()}},E,this,[[0,13]])}));function me(){return se.apply(this,arguments)}return me}()},{key:"check",value:function(){var me=this;return;var E,ue}},{key:"ignore",value:function(){localStorage.setItem("version_ignored",this.state.version),this.handleClose()}},{key:"componentDidMount",value:function(){this.check()}},{key:"render",value:function(){var me=(0,J.jsx)("div",{});return this.state.step===-1?me=(0,J.jsx)(c.ZP,{status:"error",title:"Update Failed"}):this.state.step===1?me=(0,J.jsx)($.U,{components:{a:function(ue){var oe=ue.node,Se=T()(ue,N);return(0,J.jsx)("a",d()(d()({},Se),{},{target:"_blank"}))}},children:this.state.content}):this.state.step===2?me=(0,J.jsx)("div",{style:{padding:40,textAlign:"center",color:"var(--ant-color-text)"},children:(0,J.jsxs)(l.Z,{direction:"vertical",children:[(0,J.jsx)(f.Z,{size:"large"}),(0,J.jsx)("h3",{children:"Updating..."})]})}):this.state.step===3&&(me=(0,J.jsx)(c.ZP,{status:"success",title:"Update Success",subTitle:"Please restart the app to apply the update."})),(0,J.jsx)(v.Z,{title:"Auto Update",open:this.state.step,closable:this.state.step>1,maskClosable:this.state.step>1,footer:this.state.step===1?(0,J.jsxs)(l.Z,{children:[(0,J.jsx)(z.ZP,{onClick:this.ignore.bind(this),children:"Ignore"}),(0,J.jsx)(z.ZP,{onClick:this.handleClose.bind(this),children:"Cancel"}),(0,J.jsx)(z.ZP,{type:"primary",onClick:this.handleOk.bind(this),children:"Update"})]}):null,children:me})}}]),ie}(u.Component),ze=Me},87159:function(ee,Q,e){e.d(Q,{Z:function(){return pe}});var Y=e(97857),d=e.n(Y),P=e(15009),T=e.n(P),H=e(64599),C=e.n(H),W=e(99289),F=e.n(W),G=e(19632),O=e.n(G),r=e(12444),M=e.n(r),Z=e(72004),R=e.n(Z),k=e(25098),j=e.n(k),a=e(31996),t=e.n(a),g=e(26037),x=e.n(g),u=e(9783),c=e.n(u),l=e(67294),f=e(63084),v=e(32983),z=e(42075),S=e(14726),m=e(28348),y=e(3909),b=e(56680),I=e(86250),D=e(83159),w=e(27847),A=e(90420),V=e(99611),$=e(94149),J=e(3355),N=e(80882),h=e(85893),le=function(ae){t()(X,ae);var K=x()(X);function X(){var L;M()(this,X);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return L=K.call.apply(K,[this].concat(i)),c()(j()(L),"state",{status:L.props.defaultStatus||!1}),L}return R()(X,[{key:"render",value:function(){var s=this;return(0,h.jsx)(S.ZP,{size:"small",type:"text",onClick:function(){s.props.onChange&&s.props.onChange(!s.state.status),s.setState({status:!s.state.status})},children:this.state.status?this.props.onNode||"ON":this.props.offNode||"OFF"})}}]),X}(l.Component),ye=le;function Me(ae){return ae.map(function(K){return K===-2?"window":"E-".concat(K)})}var ze=[{key:"D1-group-layer",label:"layer"},{key:"D1-group-group",label:"group"}],ve=function(ae){t()(X,ae);var K=x()(X);function X(){var L;M()(this,X);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return L=K.call.apply(K,[this].concat(i)),c()(j()(L),"state",{treeData:[],rightClickMenuOpen:!1,groupKey:"layer"}),c()(j()(L),"treeData",[]),L}return R()(X,[{key:"selectKey2id",value:function(s){var i=this,o=[],p=C()(s),U;try{var B=function(){var n=U.value;if(n==="window")o.push(-2);else if(n.startsWith("E-"))o.push(parseInt(n.slice(2)));else{var te=i.treeData.find(function(ge){return ge.key===n}).children.map(function(ge){return parseInt(ge.key.slice(2))}),re=C()(te),fe;try{for(re.s();!(fe=re.n()).done;){var ne=fe.value;o.includes(ne)||o.push(ne)}}catch(ge){re.e(ge)}finally{re.f()}}};for(p.s();!(U=p.n()).done;)B()}catch(_){p.e(_)}finally{p.f()}return o}},{key:"onElementMenuContainerClick",value:function(s){this.setState({rightClickMenuOpen:!1}),(s.target.classList.contains("ant-tree")||!s.ctrlKey&&!s.shiftKey)&&this.props.onSelect([])}},{key:"onElementMenuClick",value:function(s){var i=this;if(this.setState({rightClickMenuOpen:!1}),s.key==="D2-copy"){var o=null;s.target.localName!=="input"&&this.props.selectedId.length!==0&&this.props.selectedId[0]!==-2&&(s.preventDefault(),o=JSON.stringify(this.props.selectedId.map(function(_){return i.props.data[_]})),s.clipboardData.setData("text",o))}else if(s.key==="D2-delete"){var p=C()(this.props.selectedId),U;try{for(p.s();!(U=p.n()).done;){var B=U.value;this.props.onObjectEvent("remove",{id:B})}}catch(_){p.e(_)}finally{p.f()}}}},{key:"onElementRightClick",value:function(s){var i=this.selectKey2id([s.node.key]);i[0]in this.props.selectedId||this.props.onSelect(i)}},{key:"onSelect",value:function(s){if(s.length!==0){var i=this.selectKey2id(s);i.includes(-2)&&(i=[i[i.length-1]]),this.props.onSelect(i)}}},{key:"onMenuOpenChange",value:function(s){if(s){var i=this;setTimeout(function(){i.props.selectedId.length!==0&&i.props.selectedId[0]!==-2?i.setState({rightClickMenuOpen:!0}):i.setState({rightClickMenuOpen:!1})},100)}else this.setState({rightClickMenuOpen:!1})}},{key:"elementsMenuOnClick",value:function(s){var i=this;this.setState({groupKey:s.key.slice(9)},function(){return i.updateTree()})}},{key:"updateTree",value:function(){for(var s=this,i=this.state.groupKey,o=[],p=Object.keys(this.props.data),U=function(){for(var n=s.props.data[p[B]],te=-1,re=0;re<o.length;re++)if(o[re].key==="".concat(i,"-").concat(n[i])){te=re;break}te===-1&&(o.push({title:"".concat(i," ").concat(n[i]),key:"".concat(i,"-").concat(n[i]),children:[],isLeaf:!1}),te=o.length-1),o[te].children.push({title:(0,h.jsxs)(I.Z,{justify:"space-between",style:{width:"100%"},children:[n.name,(0,h.jsxs)(z.Z,{children:[(0,h.jsx)(ye,{onChange:function(ne){return s.props.onObjectEvent("setAttr",{id:n.id,payload:{visible:ne}})},defaultStatus:!0,offNode:(0,h.jsx)(A.Z,{}),onNode:(0,h.jsx)(V.Z,{})}),(0,h.jsx)(ye,{onChange:function(ne){return s.props.onObjectEvent("setAttr",{id:n.id,payload:{selectable:ne}})},defaultStatus:!0,offNode:(0,h.jsx)($.Z,{}),onNode:(0,h.jsx)(J.Z,{style:{transform:"scaleX(-1)"}})})]})]}),key:"E-".concat(p[B])})},B=0;B<p.length;B++)U();return o=o.sort(function(_,n){return _.key.toString().localeCompare(n.key.toString())}),o.unshift({title:"UI Window",key:"window"}),this.treeData=o,o}},{key:"render",value:function(){var s=this;return(0,h.jsx)(f.Z,{size:"small",title:"Elements",style:{height:"100%"},extra:(0,h.jsx)(D.Z,{menu:{items:ze,onClick:function(o){return s.elementsMenuOnClick(o)},selectable:!0,selectedKeys:["D1-group-".concat(this.state.groupKey)]},children:(0,h.jsxs)(z.Z,{style:{fontSize:11},children:["Group by",(0,h.jsx)(N.Z,{size:"small"})]})}),children:(0,h.jsx)("div",{className:"card-body",onMouseUp:function(o){return s.onElementMenuContainerClick(o)},children:(0,h.jsx)(D.Z,{menu:{items:[{key:"D2-copy",label:"Copy"},{key:"D2-delete",label:"Delete",danger:!0}],onClick:function(o){s.onElementMenuClick(o)}},trigger:["contextMenu"],open:this.state.rightClickMenuOpen,onOpenChange:function(o){s.onMenuOpenChange(o)},children:(0,h.jsx)(w.Z,{className:"full",treeData:this.updateTree(),onSelect:function(o){return s.onSelect(o)},selectedKeys:Me(this.props.selectedId),onRightClick:function(o){return s.onElementRightClick(o)},treeDefaultExpandAll:!0,showLine:!0,blockNode:!0,multiple:!0,selectable:this.props.editable})})})})}}]),X}(l.Component),ce=ve,ie=e(32777),se=e(30789),me=function(ae){t()(X,ae);var K=x()(X);function X(){return M()(this,X),K.apply(this,arguments)}return R()(X,[{key:"render",value:function(){return this.props.color==="Main"?(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{style:{border:"1px solid #aaa",height:16,width:16,borderRadius:"20%",display:"inline-flex"},children:[(0,h.jsx)("div",{style:{backgroundColor:"red",height:12,width:6,margin:"1px 0 1px 1px",borderTopLeftRadius:"20%",borderBottomLeftRadius:"20%",display:"inline-flex"}}),(0,h.jsx)("div",{style:{backgroundColor:"blue",height:12,width:6,margin:"1px 1px 1px 0",borderTopRightRadius:"20%",borderBottomRightRadius:"20%",display:"inline-flex"}})]}),"\xA0 Main"]}):(0,h.jsx)("div",{children:(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{style:{border:"1px solid #aaa",height:16,width:16,borderRadius:"20%",display:"inline-flex"},children:(0,h.jsx)("div",{style:{backgroundColor:se.E[this.props.color.toLowerCase()],height:12,width:12,margin:1,borderRadius:"20%",display:"inline-flex"}})}),"\xA0 ",this.props.color]})})}}]),X}(l.Component),E=me,ue={id:{title:"Id",key:"id",dataIndex:"id",valueType:"digit",editable:!1},name:{title:"Name",key:"name",dataIndex:"name"},group:{title:"Group",key:"group",dataIndex:"group"},kind:{title:"Kind",key:"kind",dataIndex:"kind",editable:!1},lineWidth:{title:"Line Width",key:"lineWidth",dataIndex:"lineWidth",valueType:"digit"},layer:{title:"Layer",key:"layer",dataIndex:"layer",valueType:"digit"},x:{title:"X",key:"x",dataIndex:"x",valueType:"digit"},y:{title:"Y",key:"y",dataIndex:"y",valueType:"digit"},x2:{title:"X2",key:"x2",dataIndex:"x2",valueType:"digit"},y2:{title:"Y2",key:"y2",dataIndex:"y2",valueType:"digit"},width:{title:"Width",key:"width",dataIndex:"width",valueType:"digit"},height:{title:"Height",key:"height",dataIndex:"height",valueType:"digit"},rx:{title:"Rx",key:"rx",dataIndex:"rx",valueType:"digit"},ry:{title:"Ry",key:"ry",dataIndex:"ry",valueType:"digit"},r:{title:"R",key:"r",dataIndex:"r",valueType:"digit"},startAngle:{title:"Start Angle",key:"startAngle",dataIndex:"startAngle",valueType:"digit"},endAngle:{title:"End Angle",key:"endAngle",dataIndex:"endAngle",valueType:"digit"},fontSize:{title:"Font Size",key:"fontSize",dataIndex:"fontSize",valueType:"digit"},float:{title:"Number",key:"float",dataIndex:"float",valueType:"digit"},number:{title:"Number",key:"number",dataIndex:"number",valueType:"digit"},text:{title:"Text",key:"text",dataIndex:"text",formItemProps:{rules:[{max:30},{type:"string"}]}},color:{title:"Color",key:"color",dataIndex:"color",valueType:"select",valueEnum:{main:(0,h.jsx)(E,{color:"Main"}),yellow:(0,h.jsx)(E,{color:"Yellow"}),green:(0,h.jsx)(E,{color:"Green"}),orange:(0,h.jsx)(E,{color:"Orange"}),purple:(0,h.jsx)(E,{color:"Purple"}),pink:(0,h.jsx)(E,{color:"Pink"}),cyan:(0,h.jsx)(E,{color:"Cyan"}),black:(0,h.jsx)(E,{color:"Black"}),white:(0,h.jsx)(E,{color:"White"})}},team:{title:"Team",key:"team",dataIndex:"team",valueType:"select",valueEnum:{red:(0,h.jsx)(E,{color:"Red"}),blue:(0,h.jsx)(E,{color:"Blue"})}},role:{title:"Role",key:"role",dataIndex:"role",valueType:"select",valueEnum:{1:"Hero",2:"Engineer",3:"No3. Infantry",4:"No4. Infantry",5:"No5. Infantry",6:"Drone"}},backgroundImage:{title:"Background Image",key:"backgroundImage",dataIndex:"backgroundImage",valueType:"switch"}};function oe(ae){for(var K=Object.keys(ae),X=[],L=0;L<K.length;L++)ue[K[L]]&&X.push(ue[K[L]]);return X}var Se=e(62388);function he(ae,K,X,L){return Ce.apply(this,arguments)}function Ce(){return Ce=F()(T()().mark(function ae(K,X,L,s){var i,o,p,U,B,_,n,te,re,fe;return T()().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:if(K){ge.next=2;break}return ge.abrupt("return");case 2:if(i=1,K.version&&(i=K.version),i!==1){ge.next=10;break}return ge.next=7,L("default");case 7:for(o=0,p=Object.keys(K);o<p.length;o++)U=p[o],X("_update",K[U]);ge.next=22;break;case 10:if(i!==2){ge.next=22;break}B=0,_=Object.keys(K.data);case 12:if(!(B<_.length)){ge.next=20;break}return n=_[B],ge.next=16,L(n);case 16:for(te=0,re=Object.keys(K.data[n]);te<re.length;te++)fe=re[te],X("_update",K.data[n][fe]);case 17:B++,ge.next=12;break;case 20:return ge.next=22,L(K.selected);case 22:s();case 23:case"end":return ge.stop()}},ae)})),Ce.apply(this,arguments)}var Ie=e(96486),be=e.n(Ie);function ke(ae){return ae.head>0?d()({},ae.data[ae.head-1]):null}function de(ae){return ae.head<ae.data.length-1?d()({},ae.data[ae.head+1]):null}var q=function(){function ae(){M()(this,ae),c()(this,"cacheTimer",null),c()(this,"updateTimer",null),c()(this,"now",null),c()(this,"_previous",null),c()(this,"_next",null),c()(this,"his",null),c()(this,"catchUpdate",!0);var K=localStorage.getItem("history"),X={data:[{}],head:0,version:1};K?X=JSON.parse(K):(K=localStorage.getItem("data"),K?X.data[0]=JSON.parse(K):X.data[0]={version:2,data:{default:{}},selected:"default"},localStorage.setItem("history",JSON.stringify(X))),this.now=X.data[X.head],this._previous=ke(X),this._next=de(X)}return R()(ae,[{key:"save",value:function(){var X=this;this.cacheTimer&&clearTimeout(this.cacheTimer),this.cacheTimer=setTimeout(function(){X.his.head>50&&(X.his.data=X.his.data.slice(X.his.head-50),X.his.head=50),X.his.head<X.his.data.length-20&&(X.his.data=X.his.data.slice(0,X.his.head+20)),localStorage.setItem("history",JSON.stringify(X.his)),X.his=null},2e3)}},{key:"read",value:function(){this.his||(this.his=JSON.parse(localStorage.getItem("history")))}},{key:"get",value:function(){return this.catchUpdate?{now:this.now,couldNext:this._next!==null,couldPrevious:this._previous!==null}:{now:this.now,couldNext:!1,couldPrevious:!1}}},{key:"reset",value:function(X){return this._previous=null,this._next=null,this.his={data:[X],head:0,version:1},this.save(),this.get()}},{key:"next",value:function(){return this._next&&(this._previous=this.now,this.now=this._next,this.read(),this.his.head++,this._next=de(this.his),this.save()),this.get()}},{key:"previous",value:function(){return this._previous&&(this._next=this.now,this.now=this._previous,this.read(),this.his.head--,this._previous=ke(this.his),this.save()),this.get()}},{key:"cancelUpdate",value:function(){this.updateTimer&&clearTimeout(this.updateTimer)}},{key:"update",value:function(X){var L=this;this.catchUpdate&&(this.updateTimer&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout(function(){be().isEqual(X,L.now)||(L._previous=L.now,L.now=X,L.read(),L.his.data=L.his.data.slice(0,L.his.head+1),L.his.data.push(X),L.his.head++,L._next=null,L.save())},500))}}]),ae}(),je=q,xe=e(30819),Ae=function(ae){t()(X,ae);var K=x()(X);function X(){var L;M()(this,X);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return L=K.call.apply(K,[this].concat(i)),c()(j()(L),"objects",{default:{}}),c()(j()(L),"data",{}),c()(j()(L),"state",{properties:null,selectedId:[],frame:"default",uiWindow:{height:1080,width:1920,ratio:1,team:"red",role:1,backgroundImage:!0},infoModalShow:!1,data:{},editable:!0}),c()(j()(L),"canvas",null),c()(j()(L),"canvasRef",(0,l.createRef)()),c()(j()(L),"propertiesRef",(0,l.createRef)()),c()(j()(L),"background",null),c()(j()(L),"his",new je),c()(j()(L),"moveTimer",null),c()(j()(L),"moveTimeout",null),L}return R()(X,[{key:"getNewDataId",value:function(){return Object.keys(this.state.data).length===0?0:Math.max.apply(Math,O()(Object.keys(this.state.data)))+1}},{key:"setEditable",value:function(){var L=F()(T()().mark(function i(o){var p,U,B,_,n;return T()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(this.setState({editable:o}),this.his.catchUpdate=o,this.canvas.selection=o,ie.fabric.Object.prototype.selectable=o,!o){re.next=9;break}return re.next=7,this.onHistoryEvent("refresh");case 7:re.next=15;break;case 9:return p=this.state.uiWindow.role,re.next=12,this.reset(!0);case 12:this.cancelHistoryUpdate(),this.props.setCouldDo({couldNext:!1,couldPrevious:!1}),this.setRobotId(p);case 15:U=this.canvas.getObjects(),B=C()(U);try{for(B.s();!(_=B.n()).done;)n=_.value,n.set("selectable",o)}catch(fe){B.e(fe)}finally{B.f()}this.select([]);case 19:case"end":return re.stop()}},i,this)}));function s(i){return L.apply(this,arguments)}return s}()},{key:"setRobotId",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;s===0&&(s=this.state.uiWindow.role),this.state.uiWindow.team==="blue"&&(s+=100),(0,m.ue)(s)}},{key:"cancelHistoryUpdate",value:function(){var s=this;this.his.cancelUpdate(),setTimeout(function(){s.his.cancelUpdate(),s.props.setCouldDo(s.his.get())},200)}},{key:"save",value:function(){(0,se.q7)(this.data,"ui.rmui",this.state.frame)}},{key:"updateHistory",value:function(){var s=this;setTimeout(function(){var i={version:2,data:s.data,selected:s.state.frame};be().isEqual(i,s.his.now)||(s.his.update(i),s.props.setCouldDo({couldNext:!1,couldPrevious:!0}))},100)}},{key:"getData",value:function(){return this.data}},{key:"select",value:function(s,i){var o=this;if(s.length===0)this.setState({properties:null,selectedId:[]}),this.canvas.discardActiveObject(),this.canvas.renderAll();else if(s[0]===-2)this.setState({properties:this.state.uiWindow,selectedId:[-2]}),this.canvas.discardActiveObject(),this.canvas.renderAll();else if(s.length===1)this.setState({properties:this.state.data[s[0]],selectedId:[s[0]]}),this.canvas.setActiveObject(this.objects[this.state.frame][s[0]]),this.canvas.renderAll();else if(this.setState({properties:null,selectedId:s}),!i){var p=s.map(function(B){return o.objects[o.state.frame][B]}),U=new ie.fabric.ActiveSelection(p,{canvas:this.canvas});this.canvas.setActiveObject(U),this.canvas.renderAll()}}},{key:"reset",value:function(){var L=F()(T()().mark(function i(){var o,p,U,B=arguments;return T()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=B.length>0&&B[0]!==void 0?B[0]:!1,o){p=this.canvas.getObjects();for(U in p)this.canvas.remove(p[U]);this.canvas.renderAll()}else this.canvas.clear(),this.setBackground(e(25665)),this.canvas.backgroundColor="#fff";if(Object.keys(this.objects).includes("default")){n.next=5;break}return n.next=5,this.onFrameEvent("add","default");case 5:return this.objects.default={},n.next=8,this.onFrameEvent("change","default");case 8:this.objects={default:{}},this.props.onFrameChange({frames:["default"],selected:"default"}),this.select([]),this.resetCanvasSize(),this.objectsToData();case 13:case"end":return n.stop()}},i,this)}));function s(){return L.apply(this,arguments)}return s}()},{key:"resetCanvasSize",value:function(){if(this.canvas){var s,i=this.canvasRef.current.clientWidth,o=this.canvasRef.current.clientHeight,p=d()({},this.state.uiWindow);i/o<p.width/p.height?(o=i*p.height/p.width,p.ratio=p.width/i):(i=o*p.width/p.height,p.ratio=p.height/o),this.setState({uiWindow:p}),this.canvas.setHeight(o),this.canvas.setWidth(i),this.canvas.viewportTransform[5]=o,this.canvas.viewportTransform[3]=-1;var U=this.canvasRef.current.clientWidth,B=this.canvasRef.current.clientHeight,_=U-i,n=B-o,te=document.getElementById("coordinateDisplay");te.style.right="".concat(_+12,"px"),te.style.bottom="".concat(n+25,"px");for(var re=0,fe=Object.keys(this.objects[this.state.frame]);re<fe.length;re++){var ne=fe[re];this.objects[this.state.frame][ne].setRatio(p.ratio)}(s=this.background)===null||s===void 0||s.set({scaleX:1/p.ratio,scaleY:1/p.ratio}),this.canvas.renderAll(),this.objectsToData(),this.setState({infoModalShow:!1})}}},{key:"onPropertiesChange",value:function(s,i){var o=this;if(this.state.selectedId[0]===-2){if(i.team!==this.state.uiWindow.team){for(var p=0,U=Object.keys(this.objects[this.state.frame]);p<U.length;p++){var B=U[p];this.objects[this.state.frame][B].setTeam(i.team)}this.canvas.renderAll(),this.objectsToData()}if(this.setState({uiWindow:i,properties:i},function(){o.resetCanvasSize(),o.setRobotId()}),i.backgroundImage!==this.state.uiWindow.backgroundImage)if(i.backgroundImage){var _,n=this.state.uiWindow.ratio;(_=this.background)===null||_===void 0||_.set({scaleX:1/n,scaleY:1/n}),this.canvas.setBackgroundImage(this.background),this.canvas.renderAll()}else this.canvas.setBackgroundImage(null),this.canvas.renderAll();(i.width!==this.state.uiWindow.width||i.height!==this.state.uiWindow.height)&&m.oC.warning({title:"Warning",content:"Modify UI window width and height may cause unknown error."})}else this.state.selectedId.length===1&&(this.objects[this.state.frame][this.state.selectedId[0]].fromObject(i),this.canvas.renderAll(),this.objectsToData(),this.updateHistory())}},{key:"setBackground",value:function(s){var i=this;ie.fabric.Image.fromURL(s,function(o,p){var U;i.background=o;var B=i.state.uiWindow.ratio;(U=i.background)===null||U===void 0||U.set({scaleX:1/B,scaleY:-1/B}),i.state.uiWindow.backgroundImage&&(i.canvas.setBackgroundImage(i.background),i.canvas.renderAll())})}},{key:"componentDidMount",value:function(){var s=this,i=this;this.canvas=new ie.fabric.Canvas("ui"),this.setBackground(e(25665)),this.canvas.backgroundColor="#fff",window.addEventListener("resize",function(){s.resetCanvasSize()},!1),window.addEventListener("copy",function(o){var p=null;console.log(o.target,(0,se.jK)(o.target)),!(0,se.jK)(o.target)&&i.state.selectedId.length!==0&&i.state.selectedId[0]!==-2&&(o.preventDefault(),p=JSON.stringify(i.state.selectedId.map(function(U){return i.state.data[U]})),o.clipboardData.setData("text",p))}),window.addEventListener("paste",function(o){for(var p=!1,U=o.clipboardData.items,B=0;B<U.length;B++)if(U[B].type.indexOf("image")===0){o.preventDefault(),p=!0;var _=U[B].getAsFile(),n=new FileReader;n.onload=function(Te){i.setBackground(Te.target.result)},n.readAsDataURL(_)}if(!p&&!(0,se.jK)(o.target))try{o.preventDefault();var te=o.clipboardData.getData("text"),re=JSON.parse(te);Array.isArray(re)||(re=[re]);var fe=[],ne=20,ge=C()(re),Re;try{var we=function(){var Ue=Re.value;setTimeout(function(){Ue.id=i.getNewDataId(),fe.push(Ue.id),i.onObjectEvent("_update",Ue)},ne),ne+=20};for(ge.s();!(Re=ge.n()).done;)we()}catch(Te){ge.e(Te)}finally{ge.f()}setTimeout(function(){i.select(fe),s.updateHistory()},ne)}catch(Te){m.yw.warning("Invalid data")}}),window.addEventListener("keydown",function(o){if(o.key==="Delete"&&i.state.selectedId.length!==0&&i.state.selectedId[0]!==-2){var p=C()(i.state.selectedId),U;try{for(p.s();!(U=p.n()).done;){var B=U.value;i.onObjectEvent("remove",{id:B})}}catch(te){p.e(te)}finally{p.f()}s.updateHistory()}if(o.ctrlKey&&o.key==="z"&&!o.shiftKey?(o.preventDefault(),s.onHistoryEvent("previous")):o.ctrlKey&&(0,xe.toLower)(o.key)==="z"&&o.shiftKey&&(o.preventDefault(),s.onHistoryEvent("next")),["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(o.key)&&!(0,se.jK)(o.target)){var _=function(re,fe){switch(fe*=i.state.uiWindow.ratio,re){case"ArrowUp":n.top+=fe;break;case"ArrowDown":n.top-=fe;break;case"ArrowLeft":n.left-=fe;break;case"ArrowRight":n.left+=fe;break}n instanceof ie.fabric.ActiveSelection?n.getObjects().forEach(function(ne){ne.setCoords(),ne.resizeScale()}):(n.setCoords(),n.resizeScale()),i.canvas.renderAll(),i.objectsToData(),i.updateHistory()},n=i.canvas.getActiveObject();if(!n)return;o.preventDefault(),_(o.key,2),s.moveTimeout&&clearTimeout(s.moveTimeout),s.moveTimer&&clearInterval(s.moveTimer),s.moveTimeout=setTimeout(function(){s.moveTimer=setInterval(function(){_(o.key,1)},500)},1500)}}),window.addEventListener("keyup",function(o){["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(o.key)&&(clearTimeout(s.moveTimeout),clearInterval(s.moveTimer))}),this.canvas.on({"mouse:up":function(){for(var p=0,U=Object.keys(i.objects[i.state.frame]);p<U.length;p++){var B=U[p];i.objects[i.state.frame][B].resizeScale()}i.canvas.renderAll(),i.objectsToData(),i.updateHistory();var _=i.canvas.getActiveObject();setTimeout(function(){if(_)if(_ instanceof ie.fabric.ActiveSelection){var n=_.getObjects().map(function(te){return te.id});i.select(n,!0)}else i.select([_.id]);else i.select([])},100)},"mouse:move":function(p){var U=s.canvas.getPointer(p.e),B=s.state.uiWindow.ratio,_=Math.round(U.x*B),n=Math.round(U.y*B),te=document.getElementById("coordinateDisplay");te.style.display="block",te.textContent="x: ".concat(_,", y: ").concat(n)},"mouse:out":function(){var p=document.getElementById("coordinateDisplay");p.style.display="none"}}),setTimeout(function(){var o=s.his.get();s.props.setCouldDo(o),he(o.now,function(p,U){return s.onObjectEvent(p,U)},function(p){return i.onFrameEvent("change",p)},function(){return s.canvas.renderAll()}).then(function(){s.setRobotId(),s.resetCanvasSize()}),s.cancelHistoryUpdate()},200)}},{key:"upload",value:function(s){var i=this,o=this,p=new FileReader;p.onload=function(){var U=F()(T()().mark(function B(_){return T()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,o.reset();case 2:return te.next=4,he(JSON.parse(_.target.result),function(re,fe){return o.onObjectEvent(re,fe)},function(re){return o.onFrameEvent("change",re)},function(){return o.canvas.renderAll()}).then(function(){i.setRobotId()});case 4:o.objectsToData(),o.his.reset({version:2,data:i.data,selected:i.state.frame});case 6:case"end":return te.stop()}},B)}));return function(B){return U.apply(this,arguments)}}(),p.readAsText(s)}},{key:"objectsToData",value:function(){for(var s=this,i={},o=0,p=Object.keys(this.objects);o<p.length;o++){var U=p[o];i[U]={};for(var B=0,_=Object.keys(this.objects[U]);B<_.length;B++){var n=_[B],te=this.objects[U][n].toObject();i[U][te.id]=te}}if(this.data=i,this.setState({data:i[this.state.frame]}),this.state.selectedId.length===1){var re;this.state.selectedId[0]===-2?re=this.state.uiWindow:re=i[this.state.frame][this.state.selectedId[0]],this.setState({properties:d()({},re)},function(){var fe;(fe=s.propertiesRef.current)===null||fe===void 0||fe.reload()})}}},{key:"onObjectEvent",value:function(s,i){var o=this;function p(te){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,fe={id:te.id,name:te.name,layer:te.layer,group:te.group,type:te.type,ratio:o.state.uiWindow.ratio,team:o.state.uiWindow.team},ne=(0,Se.R)(fe);o.objects[o.state.frame][te.id]=ne,re&&ne.fromObject(te),ne.setRatio(o.state.uiWindow.ratio);for(var ge=o.canvas.getObjects(),Re=!0,we=0,Te=Object.keys(ge);we<Te.length;we++){var Ue=Te[we];if(ge[Ue].id===ne.id){Re=!1;break}}o.canvas.add(ne)}if(s==="add")typeof i.id=="number"&&i.id>=0&&!this.objects[this.state.frame][i.id]?p(i,!0):console.log("id exists",i.id,this.objects[this.state.frame][i.id]);else if(s==="_add")i.id=this.getNewDataId(),i.ratio=this.state.uiWindow.ratio,i.team=this.state.uiWindow.team,p(i,!1);else if(s==="update")this.objects[this.state.frame][i.id]&&this.objects[this.state.frame][i.id].fromObject(i);else if(s==="_update")i.id>=0&&this.objects[this.state.frame][i.id]?this.objects[this.state.frame][i.id].fromObject(i):p(i);else if(s==="remove"){var U=i.id;this.objects[this.state.frame][U]&&(this.select([]),this.canvas.remove(this.objects[this.state.frame][U]),this.canvas.renderAll(),delete this.objects[this.state.frame][U],this.objectsToData())}else if(s==="setAttr")this.objects[this.state.frame][i.id]&&this.objects[this.state.frame][i.id].set(i.payload);else if(s==="removeLayer")for(var B=0,_=Object.keys(this.objects[this.state.frame]);B<_.length;B++){var n=_[B];this.objects[this.state.frame][n].layer===i.layer&&this.onObjectEvent("remove",{id:n})}else s==="removeAll"&&this.reset(!0);this.objectsToData(),this.canvas.renderAll()}},{key:"setFrame",value:function(s){this.objects[s]||(this.objects[s]={});for(var i=0,o=Object.keys(this.objects[this.state.frame]);i<o.length;i++){var p=o[i];this.canvas.remove(this.objects[this.state.frame][p])}this.canvas.renderAll();var U=this;return new Promise(function(B,_){U.setState({frame:s},function(){for(var n=U.canvas.getObjects(),te=0,re=Object.keys(U.objects[U.state.frame]);te<re.length;te++){for(var fe=re[te],ne=!0,ge=0,Re=Object.keys(n);ge<Re.length;ge++){var we=Re[ge];if(n[we].id===U.objects[U.state.frame][fe].id){ne=!1;break}}ne&&U.canvas.add(U.objects[U.state.frame][fe])}U.objectsToData(),U.select([]),U.canvas.renderAll(),B()})})}},{key:"onHistoryEvent",value:function(){var L=F()(T()().mark(function i(o){var p=this,U;return T()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(U=this.his.get(),o!=="update"){_.next=6;break}return this.updateHistory(),_.abrupt("return");case 6:if(o!=="reset"){_.next=12;break}return U=this.his.reset({version:2,data:{default:{}},selected:"default"}),this.props.setCouldDo(U),_.abrupt("return");case 12:if(o!=="resetNow"){_.next=16;break}return U=this.his.reset({version:2,data:this.data,selected:this.state.frame}),this.props.setCouldDo(U),_.abrupt("return");case 16:return o==="previous"?U=this.his.previous():o==="next"&&(U=this.his.next()),this.props.setCouldDo(U),_.next=20,this.reset(!0);case 20:return _.next=22,he(U.now,function(n,te){return p.onObjectEvent(n,te)},function(n){return p.onFrameEvent("change",n)},function(){return p.canvas.renderAll()}).then(function(){p.setRobotId()});case 22:this.cancelHistoryUpdate(),this.props.setCouldDo(U);case 24:case"end":return _.stop()}},i,this)}));function s(i){return L.apply(this,arguments)}return s}()},{key:"onFrameEvent",value:function(){var L=F()(T()().mark(function i(o,p){var U,B,_,n,te,re;return T()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(o!=="add"){ne.next=6;break}return this.objects[p]={},ne.next=4,this.setFrame(p);case 4:ne.next=40;break;case 6:if(o!=="remove"){ne.next=19;break}if(Object.keys(this.objects).length!==1){ne.next=10;break}return m.yw.error("Cannot remove last frame!"),ne.abrupt("return");case 10:if(U=p,this.state.frame!==p){ne.next=16;break}return p=Object.keys(this.objects)[0],p===U&&(p=Object.keys(this.objects)[1]),ne.next=16,this.setFrame(p);case 16:delete this.objects[U],ne.next=40;break;case 19:if(o!=="change"){ne.next=24;break}return ne.next=22,this.setFrame(p);case 22:ne.next=40;break;case 24:if(o!=="copy"){ne.next=34;break}return this.objects[p]={},B=this.objects[this.state.frame],ne.next=29,this.setFrame(p);case 29:for(_=0,n=Object.keys(B);_<n.length;_++)te=n[_],this.onObjectEvent("_update",B[te].toObject());this.objectsToData(),this.canvas.renderAll(),ne.next=40;break;case 34:if(o!=="rename"){ne.next=40;break}return re=this.state.frame,ne.next=38,this.onFrameEvent("copy",p);case 38:return ne.next=40,this.onFrameEvent("remove",re);case 40:this.props.onFrameChange({frames:Object.keys(this.objects),selected:p}),this.objectsToData(),this.updateHistory();case 43:case"end":return ne.stop()}},i,this)}));function s(i,o){return L.apply(this,arguments)}return s}()},{key:"render",value:function(){var s,i=this;return(s=this.canvas)===null||s===void 0||s.renderAll(),(0,h.jsx)("div",{style:{width:"100vw",height:"calc(100% - 20px)",padding:10},children:(0,h.jsxs)(y.eh,{autoSaveId:"container_h",className:"container",direction:"horizontal",children:[(0,h.jsx)(y.s_,{defaultSize:25,minSize:15,maxSize:45,order:1,children:(0,h.jsxs)(y.eh,{autoSaveId:"card_v",className:"full",direction:"vertical",children:[(0,h.jsx)(y.s_,{defaultSize:50,minSize:25,maxSize:75,children:(0,h.jsx)(ce,{onSelect:function(p){return i.select(p)},onObjectEvent:function(p,U){return i.onObjectEvent(p,U)},onReset:function(){return i.reset()},data:this.state.data,editable:this.state.editable,selectedId:this.state.selectedId})}),(0,h.jsx)(y.OT,{className:"panel-resize-handle",style:{height:6}}),(0,h.jsx)(y.s_,{defaultSize:50,children:(0,h.jsx)(f.Z,{size:"small",title:"Properties",style:{height:"100%"},children:(0,h.jsxs)("div",{className:"card-body",children:[this.state.properties?(0,h.jsx)(b.vY,{dataSource:this.state.properties,columns:oe(this.state.properties),ref:this.propertiesRef,editable:this.props.editable?{onSave:function(p,U){return i.onPropertiesChange(p,U)}}:null,column:1,style:{marginTop:4}},this.state.selectedId[0]):(0,h.jsx)(v.Z,{image:v.Z.PRESENTED_IMAGE_SIMPLE}),this.state.selectedId[0]===-2?(0,h.jsxs)(z.Z,{direction:"vertical",size:"middle",style:{display:"flex"},children:[(0,h.jsx)(S.ZP,{onClick:function(){return(0,se.cT)("image/*").then(function(p){i.setState({imageUploadShow:!1}),i.setBackground((0,se.lZ)(p))}).catch(function(p){})},children:"Upload Background"}),(0,h.jsx)(S.ZP,{onClick:function(){return i.setBackground(e(25665))},children:"Reset Background"})]}):(0,h.jsx)("div",{})]})})})]})}),(0,h.jsx)(y.OT,{className:"panel-resize-handle",style:{width:6}}),(0,h.jsx)(y.s_,{defaultSize:75,order:2,onResize:function(p){return setTimeout(function(){return i.resetCanvasSize()},100)},children:(0,h.jsxs)("div",{className:"full",ref:this.canvasRef,children:[(0,h.jsx)("canvas",{className:"full",id:"ui"}),(0,h.jsx)("div",{id:"coordinateDisplay",style:{bottom:0,right:0,display:"none",padding:"1px 6px 1px 6px"}})]})})]})})}}]),X}(l.Component),pe=Ae},12997:function(ee,Q,e){e.a(ee,function(Y,d){return De(this,null,function*(){try{e.r(Q);var P=e(12444),T=e.n(P),H=e(72004),C=e.n(H),W=e(25098),F=e.n(W),G=e(31996),O=e.n(G),r=e(26037),M=e.n(r),Z=e(9783),R=e.n(Z),k=e(67294),j=e(9361),a=e(28459),t=e(62338),g=e(65848),x=e(87159),u=e(4585),c=e(41327),l=e(9520),f=e(54030),v=e(28348),z=e(18253),S=e(85893),m=Y([l]);l=(m.then?(yield m)():m)[0];var y=j.Z.darkAlgorithm,b=j.Z.compactAlgorithm,I=function(D){O()(A,D);var w=M()(A);function A(){var V;T()(this,A);for(var $=arguments.length,J=new Array($),N=0;N<$;N++)J[N]=arguments[N];return V=w.call.apply(w,[this].concat(J)),R()(F()(V),"state",{simulate:!1,darkMode:V.isBrowserDarkMode()}),R()(F()(V),"modal",null),R()(F()(V),"renderRef",k.createRef()),R()(F()(V),"menuRef",k.createRef()),V}return C()(A,[{key:"isBrowserDarkMode",value:function(){try{return window.matchMedia("(prefers-color-scheme: dark)").matches}catch($){return!1}}},{key:"componentDidMount",value:function(){var $=this,J=0;window.addEventListener("drop",function(le){return le.preventDefault()},!1),window.addEventListener("dragover",function(le){return le.preventDefault()},!1),window.addEventListener("contextmenu",function(le){le.target.tagName.toLowerCase()!=="input"&&le.preventDefault()},!1);function N(le){!$.modal&&le<880&&le!==J&&(J=le,$.modal=v.oC.warning({title:"Display Aera too Small",content:"Cannot show all contents on this window. Please resize this window or rotate your phone.",footer:null})),$.modal&&le>=880&&($.modal.destroy(),$.modal=null)}setTimeout(function(){return N(window.innerWidth)},500),window.addEventListener("resize",function(){N(window.innerWidth)},!1);var h=window.matchMedia("(prefers-color-scheme: dark)");h.addEventListener("change",function(le){$.setState({darkMode:le.matches})})}},{key:"setDarkMode",value:function($){this.setState({darkMode:$})}},{key:"render",value:function(){var $=this;return(0,S.jsx)(a.ZP,{locale:z.Z,theme:{cssVar:{key:"rmui"},hashed:!1,algorithm:this.state.darkMode?[y,b]:b},children:(0,S.jsxs)(t.Z,{children:[(0,S.jsx)("div",{className:"rmui",children:(0,S.jsxs)("div",{className:"container background-color",style:{height:"100vh",paddingBottom:12,overflow:"hidden"},children:[(0,S.jsx)(l.Z,{save:function(){return $.renderRef.current.save()},onObjectEvent:function(N,h){return $.renderRef.current.onObjectEvent(N,h)},onHistoryEvent:function(N){return $.renderRef.current.onHistoryEvent(N)},reset:function(){return $.renderRef.current.reset()},setFrame:function(N,h){return $.renderRef.current.onFrameEvent(N,h)},upload:function(N){return $.renderRef.current.upload(N)},getData:function(){return $.renderRef.current.getData()},setEditable:function(N){return $.renderRef.current.setEditable(N)},setDarkMode:function(N){return $.setDarkMode(N)},ref:this.menuRef,darkMode:this.state.darkMode}),(0,S.jsx)(g.Z,{content:["RM Ui Designer","nightly 15d0df0"],zIndex:0,style:{height:"100%"},gap:[30,30],children:(0,S.jsx)("div",{id:"content-in",style:{width:"100vw",height:"100%",zIndex:2,position:"relative"},children:(0,S.jsx)(x.Z,{style:{width:"100vw",height:"100%"},editable:!0,ref:this.renderRef,onFrameChange:function(N){var h;return(h=$.menuRef.current)===null||h===void 0?void 0:h.setFrames(N)},setCouldDo:function(N){var h;(h=$.menuRef.current)===null||h===void 0||h.setCouldDo(N)},setRobotId:function(N){var h;(h=$.menuRef.current)===null||h===void 0||h.setRobotId(N)}})})})]})}),(0,S.jsx)(f.Z,{}),(0,S.jsx)(u.Z,{}),(0,S.jsx)(c.Z,{})]})})}}]),A}(k.Component);Q.default=I,d()}catch(D){d(D)}})})},28348:function(ee,Q,e){e.d(Q,{eq:function(){return H},oC:function(){return T},ue:function(){return C},yw:function(){return d}});var Y=e(62338),d,P,T,H=1;Q.ZP=function(){var W=Y.Z.useApp();return d=W.message,T=W.modal,P=W.notification,null};function C(W){H=parseInt(W)}},37932:function(ee,Q,e){e.d(Q,{X:function(){return k},_:function(){return j}});var Y=e(15009),d=e.n(Y),P=e(5574),T=e.n(P),H=e(99289),C=e.n(H),W=e(12444),F=e.n(W),G=e(72004),O=e.n(G),r=e(9783),M=e.n(r),Z=e(17990),R=e(30789),k=function(){function a(t){F()(this,a),M()(this,"getContentFunc",void 0),M()(this,"fileHandle",void 0),M()(this,"timerId",void 0),this.getContentFunc=t,this.fileHandle=null,this.timerId=null}return O()(a,[{key:"open",value:function(){var t=C()(d()().mark(function x(){var u,c,l;return d()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(this.fileHandle=null,v.prev=1,!(0,R.UP)()){v.next=9;break}return v.next=5,Z.WZ.open({multiple:!1,directory:!1,filters:[{name:"rmui file",extensions:["json","rmui"]}]});case 5:u=v.sent,u!==null&&u.length>0&&typeof u=="string"&&(this.fileHandle=u.replace(/\\/g,"/")),v.next=14;break;case 9:return v.next=11,window.showOpenFilePicker({types:[{description:"rmui file",accept:{"application/json":[".json",".rmui"]}}]});case 11:c=v.sent,l=T()(c,1),this.fileHandle=l[0];case 14:v.next=18;break;case 16:v.prev=16,v.t0=v.catch(1);case 18:return v.abrupt("return",this.fileHandle!==null);case 19:case"end":return v.stop()}},x,this,[[1,16]])}));function g(){return t.apply(this,arguments)}return g}()},{key:"create",value:function(){var t=C()(d()().mark(function x(){var u;return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this.fileHandle=null,l.prev=1,!(0,R.UP)()){l.next=9;break}return l.next=5,Z.WZ.save({filters:[{name:"rmui file",extensions:["rmui"]}]});case 5:u=l.sent,u!==null&&(this.fileHandle=u.replace(/\\/g,"/")),l.next=12;break;case 9:return l.next=11,window.showSaveFilePicker({types:[{description:"rmui file",accept:{"application/json":[".rmui"]}}]});case 11:this.fileHandle=l.sent;case 12:return l.next=14,this.write(JSON.stringify({version:2,data:{default:{}},selected:"default"}));case 14:l.next=18;break;case 16:l.prev=16,l.t0=l.catch(1);case 18:return l.abrupt("return",this.fileHandle!==null);case 19:case"end":return l.stop()}},x,this,[[1,16]])}));function g(){return t.apply(this,arguments)}return g}()},{key:"enableAutoSave",value:function(){var g=this;this.timerId=setInterval(C()(d()().mark(function x(){var u;return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return u=g.getContentFunc(),l.next=3,g.write(u);case 3:case"end":return l.stop()}},x)})),6e4)}},{key:"disableAutoSave",value:function(){this.timerId&&clearInterval(this.timerId)}},{key:"save",value:function(){var t=C()(d()().mark(function x(){var u;return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return u=this.getContentFunc(),l.next=3,this.write(u);case 3:case"end":return l.stop()}},x,this)}));function g(){return t.apply(this,arguments)}return g}()},{key:"write",value:function(){var t=C()(d()().mark(function x(u){var c;return d()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(this.fileHandle){f.next=2;break}throw new Error("File is not open");case 2:if(typeof this.fileHandle!="string"){f.next=7;break}return f.next=5,Z.fs.writeTextFile(this.fileHandle,u);case 5:f.next=14;break;case 7:return f.next=9,this.fileHandle.createWritable();case 9:return c=f.sent,f.next=12,c.write(u);case 12:return f.next=14,c.close();case 14:case"end":return f.stop()}},x,this)}));function g(x){return t.apply(this,arguments)}return g}()},{key:"read",value:function(){var t=C()(d()().mark(function x(){var u,c;return d()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(this.fileHandle){f.next=2;break}throw new Error("File is not open");case 2:if(typeof this.fileHandle!="string"){f.next=10;break}return f.next=5,Z.fs.readTextFile(this.fileHandle);case 5:return u=f.sent,c=new Blob([u],{type:"text/plain;charset=utf-8"}),f.abrupt("return",new File([c],this.fileHandle));case 10:return f.next=12,this.fileHandle.getFile();case 12:return f.abrupt("return",f.sent);case 13:case"end":return f.stop()}},x,this)}));function g(){return t.apply(this,arguments)}return g}()}]),a}();function j(){return"showOpenFilePicker"in window||(0,R.UP)()}},52880:function(ee,Q,e){e.d(Q,{r:function(){return j},h:function(){return k}});var Y=e(19632),d=e.n(Y),P=e(73676);function T(a){var t=new Uint8Array(15),g=0,x=a.group.split("-");t[g++]=Math.round(Number(x[0])),t[g++]=Math.round(Number(x[1])),t[g++]=Math.round(a.id);var u=Math.round(a.operate_tpyel)|Math.round(a.figure_tpye)<<3|Math.round(a.layer)<<6|Math.round(a.color)<<10|Math.round(a._a)<<14|Math.round(a._b)<<23;t[g++]=u&255,t[g++]=u>>8&255,t[g++]=u>>16&255,t[g++]=u>>24&255;var c=Math.round(a.width)|Math.round(a.start_x)<<10|Math.round(a.start_y)<<21;t[g++]=c&255,t[g++]=c>>8&255,t[g++]=c>>16&255,t[g++]=c>>24&255;var l=Math.round(a._c)|Math.round(a._d)<<10|Math.round(a._e)<<21;return t[g++]=l&255,t[g++]=l>>8&255,t[g++]=l>>16&255,t[g++]=l>>24&255,t}function H(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"add",g=a.group,x=a.id&255,u=P.i_.indexOf(a.type),c=P.JM.indexOf(a.color),l=a.layer,f;a.fontSize?f=Math.round(a.fontSize/10):f=a.lineWidth;var v=a.x,z=a.y,S=0,m=0,y=0,b=0,I=0;switch(a.type.slice(2)){case"Line":b=a.x2||0,I=a.y2||0;break;case"Rect":b=(a.width||0)+v,I=(a.height||0)+z;break;case"Round":y=a.r||0;break;case"Ellipse":b=a.rx||0,I=a.ry||0;break;case"Arc":S=a.startAngle||0,m=a.endAngle||0,b=a.rx||0,I=a.ry||0;break;case"Float":S=a.fontSize||0;var D=(a.float||0)*1e3;y=D&1023,b=D>>10&2047,I=D>>21&2047;break;case"Number":S=a.fontSize||0;var w=a.number||0;y=w&1023,b=w>>10&2047,I=w>>21&2047;break;case"Text":S=a.fontSize||0,m=(a.text||"").length;break}return{group:g,id:x,operate_tpyel:P.$m.indexOf(t),figure_tpye:u,layer:l,color:c,_a:S,_b:m,width:f,start_x:v,start_y:z,_c:y,_d:b,_e:I,number:y}}function C(a){return T(H(a))}var W=e(85378),F=e(28348);function G(a){var t=new Uint8Array(0);if(a.forEach(function(l){t=new Uint8Array([].concat(d()(t),d()(C(l))))}),2<a.length&&a.length<5){for(var g=new Uint8Array(15*(5-a.length)),x=0;x<15*(5-a.length);x++)g[x]=0;t=new Uint8Array([].concat(d()(t),d()(g)))}if(5<a.length&&a.length<7){for(var u=new Uint8Array(15*(7-a.length)),c=0;c<15*(7-a.length);c++)u[c]=0;t=new Uint8Array([].concat(d()(t),d()(u)))}return t}function O(a){var t=new Uint8Array([].concat(d()(C(a[0])),d()(new Uint8Array(30))));if(a[0].text)for(var g=15;g<a[0].text.length+15;g++)t[g]=a[0].text.charCodeAt(g);return t}function r(a){return a[0].text?O(a):G(a)}var M=0,Z=769;function R(a){var t=new Uint8Array(13),g=new Uint8Array(2);t[0]=165;var x=a.length+6;t[1]=x&255,t[2]=x>>8&255,t[3]=M,t[4]=(0,W.d)(t.subarray(0,4)),t[5]=Z&255,t[6]=Z>>8&255;var u=0;a.length===2?u=256:a.length===15?u=257:a.length===30?u=258:a.length===75?u=259:a.length===105?u=260:a.length===45&&(u=272),t[7]=u&255,t[8]=u>>8&255,t[9]=F.eq&255,t[10]=F.eq>>8&255,t[11]=F.eq+256&255,t[12]=F.eq+256>>8&255;var c=new Uint8Array([].concat(d()(t),d()(a),d()(g))),l=(0,W.I)(c.subarray(0,c.length-2));return c[c.length-2]=l&255,c[c.length-1]=l>>8&255,M++,M>=256&&(M=0),c}function k(a){var t=r(a);return R(t)}function j(){return R(new Uint8Array([2,0]))}},85378:function(ee,Q,e){e.d(Q,{I:function(){return T},d:function(){return d}});var Y=[0,94,188,226,97,63,221,131,194,156,126,32,163,253,31,65,157,195,33,127,252,162,64,30,95,1,227,189,62,96,130,220,35,125,159,193,66,28,254,160,225,191,93,3,128,222,60,98,190,224,2,92,223,129,99,61,124,34,192,158,29,67,161,255,70,24,250,164,39,121,155,197,132,218,56,102,229,187,89,7,219,133,103,57,186,228,6,88,25,71,165,251,120,38,196,154,101,59,217,135,4,90,184,230,167,249,27,69,198,152,122,36,248,166,68,26,153,199,37,123,58,100,134,216,91,5,231,185,140,210,48,110,237,179,81,15,78,16,242,172,47,113,147,205,17,79,173,243,112,46,204,146,211,141,111,49,178,236,14,80,175,241,19,77,206,144,114,44,109,51,209,143,12,82,176,238,50,108,142,208,83,13,239,177,240,174,76,18,145,207,45,115,202,148,118,40,171,245,23,73,8,86,180,234,105,55,213,139,87,9,235,181,54,104,138,212,149,203,41,119,244,170,72,22,233,183,85,11,136,214,52,106,43,117,151,201,74,20,246,168,116,42,200,150,21,75,169,247,182,232,10,84,215,137,107,53];function d(H){for(var C=255,W=0,F,G=H.byteLength;G--;)F=C^H[W],C=Y[F],W++;return C}var P=[0,4489,8978,12955,17956,22445,25910,29887,35912,40385,44890,48851,51820,56293,59774,63735,4225,264,13203,8730,22181,18220,30135,25662,40137,36160,49115,44626,56045,52068,63999,59510,8450,12427,528,5017,26406,30383,17460,21949,44362,48323,36440,40913,60270,64231,51324,55797,12675,8202,4753,792,30631,26158,21685,17724,48587,44098,40665,36688,64495,60006,55549,51572,16900,21389,24854,28831,1056,5545,10034,14011,52812,57285,60766,64727,34920,39393,43898,47859,21125,17164,29079,24606,5281,1320,14259,9786,57037,53060,64991,60502,39145,35168,48123,43634,25350,29327,16404,20893,9506,13483,1584,6073,61262,65223,52316,56789,43370,47331,35448,39921,29575,25102,20629,16668,13731,9258,5809,1848,65487,60998,56541,52564,47595,43106,39673,35696,33800,38273,42778,46739,49708,54181,57662,61623,2112,6601,11090,15067,20068,24557,28022,31999,38025,34048,47003,42514,53933,49956,61887,57398,6337,2376,15315,10842,24293,20332,32247,27774,42250,46211,34328,38801,58158,62119,49212,53685,10562,14539,2640,7129,28518,32495,19572,24061,46475,41986,38553,34576,62383,57894,53437,49460,14787,10314,6865,2904,32743,28270,23797,19836,50700,55173,58654,62615,32808,37281,41786,45747,19012,23501,26966,30943,3168,7657,12146,16123,54925,50948,62879,58390,37033,33056,46011,41522,23237,19276,31191,26718,7393,3432,16371,11898,59150,63111,50204,54677,41258,45219,33336,37809,27462,31439,18516,23005,11618,15595,3696,8185,63375,58886,54429,50452,45483,40994,37561,33584,31687,27214,22741,18780,15843,11370,7921,3960];function T(H){for(var C=65535,W,F=0,G=H.byteLength;G--;)W=H[F],C=C>>8^P[(C^W)&255],F++;return C}},73676:function(ee,Q,e){e.d(Q,{$m:function(){return H},EY:function(){return r},JM:function(){return T},i_:function(){return P}});var Y=e(19632),d=e.n(Y),P=["UiLine","UiRect","UiRound","UiEllipse","UiArc","UiFloat","UiNumber","UiText"],T=["main","yellow","green","orange","purple","pink","cyan","black","white"],H=["null","add","update","remove"],C={257:1,258:2,259:5,260:7},W=["null","removeLayer","removeAll"];function F(M,Z){return M[Z]|M[Z+1]<<8}function G(M,Z){return M[Z]|M[Z+1]<<8|M[Z+2]<<16|M[Z+3]<<24}function O(M){var Z=0,R=M[Z++],k=M[Z++],j="".concat(R,"-").concat(k),a=M[Z++]|k<<8|R<<16,t=G(M,Z);Z+=4;var g=t&7,x=t>>3&7,u=t>>6&15,c=t>>10&15,l=t>>14&511,f=t>>23&511,v=G(M,Z);Z+=4;var z=v&1023,S=v>>10&2047,m=v>>21&2047,y=G(M,Z),b=y&1023,I=y>>10&2047,D=y>>21&2047;return{group:j,id:a,operate_tpyel:g,figure_tpye:x,layer:u,color:c,_a:l,_b:f,width:z,start_x:S,start_y:m,_c:b,_d:I,_e:D,number:y}}function r(M){var Z=F(M,0),R=F(M,2),k=F(M,4),j=[];if(Z===256)j.push({type:W[M[6]],obj:{layer:M[7]}});else if(Z===272){var a=O(M.subarray(6,21)),t=String.fromCharCode.apply(String,d()(M.subarray(21,21+a._b)));j.push({type:H[a.operate_tpyel],obj:{layer:a.layer,group:a.group,type:P[a.figure_tpye],id:a.id,name:"".concat(P[a.figure_tpye],"_").concat(a.id&255),color:T[a.color],lineWidth:a.width,x:a.start_x,y:a.start_y,fontSize:a._a,text:t}})}else if(Z in C)for(var g=C[Z],x=0;x<g;x++){var u=O(M.subarray(6+x*15,6+(x+1)*15)),c={layer:u.layer,group:u.group,type:P[u.figure_tpye],id:u.id,name:"".concat(P[u.figure_tpye],"_").concat(u.id&255),color:T[u.color],lineWidth:u.width,x:u.start_x,y:u.start_y};switch(P[u.figure_tpye].slice(2)){case"Line":c.x2=u._d,c.y2=u._e;break;case"Rect":c.width=u._d-u.start_x,c.height=u._e-u.start_y;break;case"Round":c.r=u._c;break;case"Ellipse":c.rx=u._d,c.ry=u._e;break;case"Arc":c.startAngle=u._a,c.endAngle=u._b,c.rx=u._d,c.ry=u._e;break;case"Float":c.fontSize=u._a,c.float=u.number/1e3;break;case"Number":c.fontSize=u._a,c.number=u.number;break}j.push({type:H[u.operate_tpyel],obj:c})}else console.log("unknown sub_id",Z);return{sender:R,receiver:k,events:j}}},13799:function(ee,Q,e){e.d(Q,{r:function(){return F}});var Y=e(67294),d=Object.defineProperty,P=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,C=(O,r,M)=>r in O?d(O,r,{enumerable:!0,configurable:!0,writable:!0,value:M}):O[r]=M,W=(O,r)=>{for(var M in r||(r={}))T.call(r,M)&&C(O,M,r[M]);if(P)for(var M of P(r))H.call(r,M)&&C(O,M,r[M]);return O};const F=O=>Y.createElement("svg",W({className:"moon_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:200,height:200},O),Y.createElement("path",{d:"M472 991.6c-157 0-304.4-77.2-394.3-206.6-6.9-9.9-7.6-22.9-1.8-33.6 5.8-10.7 17.1-17.8 29.2-16.7l7.7.4c2.4.2 4.8.3 7.2.3 229.4 0 416-186.6 416-416 0-85-25.7-167-74.3-236.9-6.9-9.9-7.6-22.9-1.8-33.6 5.8-10.7 17.2-17.6 29.2-16.7C748.7 41.6 952 252.1 952 511.6c0 264.7-215.3 480-480 480zM169.7 797.1c78.1 82.7 187.2 130.6 302.3 130.6 229.4 0 416-186.6 416-416 0-204-144.9-373-339.7-408.6 34 66.9 51.7 140.7 51.7 216.6 0 247.8-188.9 452.4-430.3 477.4z",fill:"#2c2c2c"}));var G="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTQ3MiA5OTEuNmMtMTU3IDAtMzA0LjQtNzcuMi0zOTQuMy0yMDYuNi02LjktOS45LTcuNi0yMi45LTEuOC0zMy42IDUuOC0xMC43IDE3LjEtMTcuOCAyOS4yLTE2LjdsNy43LjRjMi40LjIgNC44LjMgNy4yLjMgMjI5LjQgMCA0MTYtMTg2LjYgNDE2LTQxNiAwLTg1LTI1LjctMTY3LTc0LjMtMjM2LjktNi45LTkuOS03LjYtMjIuOS0xLjgtMzMuNiA1LjgtMTAuNyAxNy4yLTE3LjYgMjkuMi0xNi43Qzc0OC43IDQxLjYgOTUyIDI1Mi4xIDk1MiA1MTEuNmMwIDI2NC43LTIxNS4zIDQ4MC00ODAgNDgwek0xNjkuNyA3OTcuMWM3OC4xIDgyLjcgMTg3LjIgMTMwLjYgMzAyLjMgMTMwLjYgMjI5LjQgMCA0MTYtMTg2LjYgNDE2LTQxNiAwLTIwNC0xNDQuOS0zNzMtMzM5LjctNDA4LjYgMzQgNjYuOSA1MS43IDE0MC43IDUxLjcgMjE2LjYgMCAyNDcuOC0xODguOSA0NTIuNC00MzAuMyA0NzcuNHoiIGZpbGw9IiMyYzJjMmMiLz48L3N2Zz4="},82843:function(ee,Q,e){e.d(Q,{r:function(){return F}});var Y=e(67294),d=Object.defineProperty,P=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,C=(O,r,M)=>r in O?d(O,r,{enumerable:!0,configurable:!0,writable:!0,value:M}):O[r]=M,W=(O,r)=>{for(var M in r||(r={}))T.call(r,M)&&C(O,M,r[M]);if(P)for(var M of P(r))H.call(r,M)&&C(O,M,r[M]);return O};const F=O=>Y.createElement("svg",W({className:"sun_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:200,height:200},O),Y.createElement("path",{d:"M522.88 874.667A21.333 21.333 0 0 1 544.213 896v85.333a21.333 21.333 0 0 1-21.333 21.334h-21.333a21.333 21.333 0 0 1-21.334-21.334V896a21.333 21.333 0 0 1 21.334-21.333h21.333zm268.416-107.52 60.352 60.352a21.333 21.333 0 0 1 0 30.165l-15.083 15.083a21.333 21.333 0 0 1-30.186 0l-60.331-60.352a21.333 21.333 0 0 1 0-30.166l15.083-15.082a21.333 21.333 0 0 1 30.165 0zm-527.957 0 15.082 15.082a21.333 21.333 0 0 1 0 30.166l-60.352 60.352a21.333 21.333 0 0 1-30.165 0l-15.083-15.083a21.333 21.333 0 0 1 0-30.165l60.331-60.352a21.333 21.333 0 0 1 30.187 0zM512 277.333c141.376 0 256 114.624 256 256s-114.624 256-256 256-256-114.624-256-256 114.624-256 256-256zm0 64a192 192 0 1 0 0 384 192 192 0 0 0 0-384zm448.213 160a21.333 21.333 0 0 1 21.334 21.334V544a21.333 21.333 0 0 1-21.334 21.333H874.88A21.333 21.333 0 0 1 853.547 544v-21.333a21.333 21.333 0 0 1 21.333-21.334h85.333zm-810.666 0a21.333 21.333 0 0 1 21.333 21.334V544a21.333 21.333 0 0 1-21.333 21.333H64.213A21.333 21.333 0 0 1 42.88 544v-21.333a21.333 21.333 0 0 1 21.333-21.334h85.334zm687.04-307.413 15.082 15.083a21.333 21.333 0 0 1 0 30.165l-60.352 60.352a21.333 21.333 0 0 1-30.165 0l-15.083-15.083a21.333 21.333 0 0 1 0-30.165L806.4 193.92a21.333 21.333 0 0 1 30.187 0zm-618.496 0 60.352 60.352a21.333 21.333 0 0 1 0 30.165L263.36 299.52a21.333 21.333 0 0 1-30.187 0l-60.352-60.373a21.333 21.333 0 0 1 0-30.166l15.083-15.082a21.333 21.333 0 0 1 30.165 0zM522.9 64a21.333 21.333 0 0 1 21.334 21.333v85.334A21.333 21.333 0 0 1 522.9 192h-21.333a21.333 21.333 0 0 1-21.333-21.333V85.333A21.333 21.333 0 0 1 501.568 64h21.333z",fill:"#ebebeb"}));var G="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTUyMi44OCA4NzQuNjY3QTIxLjMzMyAyMS4zMzMgMCAwIDEgNTQ0LjIxMyA4OTZ2ODUuMzMzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzMzIDIxLjMzNGgtMjEuMzMzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzM0LTIxLjMzNFY4OTZhMjEuMzMzIDIxLjMzMyAwIDAgMSAyMS4zMzQtMjEuMzMzaDIxLjMzM3ptMjY4LjQxNi0xMDcuNTIgNjAuMzUyIDYwLjM1MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDAgMzAuMTY1bC0xNS4wODMgMTUuMDgzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTg2IDBsLTYwLjMzMS02MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NmwxNS4wODMtMTUuMDgyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTY1IDB6bS01MjcuOTU3IDAgMTUuMDgyIDE1LjA4MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDAgMzAuMTY2bC02MC4zNTIgNjAuMzUyYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTY1IDBsLTE1LjA4My0xNS4wODNhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NWw2MC4zMzEtNjAuMzUyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTg3IDB6TTUxMiAyNzcuMzMzYzE0MS4zNzYgMCAyNTYgMTE0LjYyNCAyNTYgMjU2cy0xMTQuNjI0IDI1Ni0yNTYgMjU2LTI1Ni0xMTQuNjI0LTI1Ni0yNTYgMTE0LjYyNC0yNTYgMjU2LTI1NnptMCA2NGExOTIgMTkyIDAgMSAwIDAgMzg0IDE5MiAxOTIgMCAwIDAgMC0zODR6bTQ0OC4yMTMgMTYwYTIxLjMzMyAyMS4zMzMgMCAwIDEgMjEuMzM0IDIxLjMzNFY1NDRhMjEuMzMzIDIxLjMzMyAwIDAgMS0yMS4zMzQgMjEuMzMzSDg3NC44OEEyMS4zMzMgMjEuMzMzIDAgMCAxIDg1My41NDcgNTQ0di0yMS4zMzNhMjEuMzMzIDIxLjMzMyAwIDAgMSAyMS4zMzMtMjEuMzM0aDg1LjMzM3ptLTgxMC42NjYgMGEyMS4zMzMgMjEuMzMzIDAgMCAxIDIxLjMzMyAyMS4zMzRWNTQ0YTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzMzIDIxLjMzM0g2NC4yMTNBMjEuMzMzIDIxLjMzMyAwIDAgMSA0Mi44OCA1NDR2LTIxLjMzM2EyMS4zMzMgMjEuMzMzIDAgMCAxIDIxLjMzMy0yMS4zMzRoODUuMzM0em02ODcuMDQtMzA3LjQxMyAxNS4wODIgMTUuMDgzYTIxLjMzMyAyMS4zMzMgMCAwIDEgMCAzMC4xNjVsLTYwLjM1MiA2MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMS0zMC4xNjUgMGwtMTUuMDgzLTE1LjA4M2EyMS4zMzMgMjEuMzMzIDAgMCAxIDAtMzAuMTY1TDgwNi40IDE5My45MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDMwLjE4NyAwem0tNjE4LjQ5NiAwIDYwLjM1MiA2MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMSAwIDMwLjE2NUwyNjMuMzYgMjk5LjUyYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTg3IDBsLTYwLjM1Mi02MC4zNzNhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NmwxNS4wODMtMTUuMDgyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTY1IDB6TTUyMi45IDY0YTIxLjMzMyAyMS4zMzMgMCAwIDEgMjEuMzM0IDIxLjMzM3Y4NS4zMzRBMjEuMzMzIDIxLjMzMyAwIDAgMSA1MjIuOSAxOTJoLTIxLjMzM2EyMS4zMzMgMjEuMzMzIDAgMCAxLTIxLjMzMy0yMS4zMzNWODUuMzMzQTIxLjMzMyAyMS4zMzMgMCAwIDEgNTAxLjU2OCA2NGgyMS4zMzN6IiBmaWxsPSIjZWJlYmViIi8+PC9zdmc+"},99734:function(ee,Q,e){ee.exports=e.p+"static/about.6af660a8.md"},8938:function(ee,Q,e){ee.exports=e.p+"static/ui_interface.1e01ba33.c"},75112:function(ee,Q,e){ee.exports=e.p+"static/ui_interface.a365dcb1.h"},33562:function(ee,Q,e){ee.exports=e.p+"static/ui_types.c92a992c.h"},19293:function(ee,Q,e){ee.exports=e.p+"static/eula.61e7cc28.md"},25665:function(ee,Q,e){ee.exports=e.p+"static/background.d741a18b.png"}}]);
