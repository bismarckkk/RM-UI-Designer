"use strict";var De=(te,Q,e)=>new Promise((Y,d)=>{var W=I=>{try{H(e.next(I))}catch(J){d(J)}},R=I=>{try{H(e.throw(I))}catch(J){d(J)}},H=I=>I.done?Y(I.value):Promise.resolve(I.value).then(W,R);H((e=e.apply(te,Q)).next())});(self.webpackChunk=self.webpackChunk||[]).push([[858],{62388:function(te,Q,e){e.d(Q,{R:function(){return w},t:function(){return z}});var Y=e(32777),d=e(30789),W=Y.fabric.util.createClass(Y.fabric.Rect,{type:"UiRect",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(t){t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.lockRotation=!0,t.lockScalingFlip=!0,t.hasRotatingPoint=!1,t.width||(t.width=50/this.ratio),t.height||(t.height=50/this.ratio),t.left||(t.left=50/this.ratio),t.top||(t.top=50/this.ratio),t.strokeWidth||(t.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?t.stroke=d.E[this._color]:(t.stroke=d.E[t.team],this._color="main"),t.fill=null,this.callSuper("initialize",t),this.moveTo(t.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){this.set("width",Math.round(this.width*this.scaleX*this.ratio)/this.ratio),this.set("height",Math.round(this.height*this.scaleY*this.ratio)/this.ratio),this.set("left",Math.round(this.left*this.ratio)/this.ratio),this.set("top",Math.round(this.top*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,width:this.width*this.ratio,height:this.height*this.ratio,x:this.left*this.ratio,y:this.top*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("width",t.width/this.ratio),this.set("height",t.height/this.ratio),this.set("left",t.x/this.ratio),this.set("top",t.y/this.ratio),this.set("strokeWidth",t.lineWidth/this.ratio),this._color==="main"?this.set("stroke",d.E[this.team]):this.set("stroke",d.E[this._color]),this.moveTo(t.layer)},setRatio:function(t){this.set("width",this.width*this.ratio/t),this.set("height",this.height*this.ratio/t),this.set("left",this.left*this.ratio/t),this.set("top",this.top*this.ratio/t),this.set("strokeWidth",this.strokeWidth*this.ratio/t),this.ratio=t},setTeam:function(t){this.team=t,this._color==="main"&&this.set("stroke",d.E[this.team])}}),R=Y.fabric.util.createClass(Y.fabric.Line,{type:"UiLine",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(t){t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.lockRotation=!0,t.lockScalingFlip=!0,t.hasRotatingPoint=!1,t.x1||(t.x1=50/this.ratio),t.y1||(t.y1=50/this.ratio),t.x2||(t.x2=100/this.ratio),t.y2||(t.y2=100/this.ratio),t.strokeWidth||(t.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?t.stroke=d.E[this._color]:(t.stroke=d.E[t.team],this._color="main"),t.fill=null,this.callSuper("initialize",[t.x1,t.y1,t.x2,t.y2],t),this.moveTo(t.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){var t=Math.min(this.x1,this.x2),o=Math.min(this.y1,this.y2),p=this.left-t,j=this.top-o;if(this.x1<this.x2){var g=Math.round((this.x2-this.x1)*this.scaleX);this.set("x1",Math.round((this.x1+p)*this.ratio)/this.ratio),this.set("x2",Math.round((this.x1+g)*this.ratio)/this.ratio)}else{var l=Math.round((this.x1-this.x2)*this.scaleX);this.set("x2",Math.round((this.x2+p)*this.ratio)/this.ratio),this.set("x1",Math.round((this.x2+l)*this.ratio)/this.ratio)}if(this.y1<this.y2){var c=Math.round((this.y2-this.y1)*this.scaleY);this.set("y1",Math.round((this.y1+j)*this.ratio)/this.ratio),this.set("y2",Math.round((this.y1+c)*this.ratio)/this.ratio)}else{var m=Math.round((this.y1-this.y2)*this.scaleY);this.set("y2",Math.round((this.y2+j)*this.ratio)/this.ratio),this.set("y1",Math.round((this.y2+m)*this.ratio)/this.ratio)}this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,x:this.x1*this.ratio,y:this.y1*this.ratio,x2:this.x2*this.ratio,y2:this.y2*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("x2",t.x2/this.ratio),this.set("y2",t.y2/this.ratio),this.set("x1",t.x/this.ratio),this.set("y1",t.y/this.ratio),this.set("strokeWidth",t.lineWidth/this.ratio),this._color==="main"?this.set("stroke",d.E[this.team]):this.set("stroke",d.E[this._color]),this.moveTo(t.layer)},setRatio:function(t){this.set("x1",this.x1*this.ratio/t),this.set("y1",this.y1*this.ratio/t),this.set("x2",this.x2*this.ratio/t),this.set("y2",this.y2*this.ratio/t),this.set("strokeWidth",this.strokeWidth*this.ratio/t),this.ratio=t},setTeam:function(t){this.team=t,this._color==="main"&&this.set("stroke",d.E[this.team])}}),H=Y.fabric.util.createClass(Y.fabric.Ellipse,{type:"UiEllipse",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(t){t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.lockRotation=!0,t.lockScalingFlip=!0,t.hasRotatingPoint=!1,t.rx||(t.rx=50/this.ratio),t.ry||(t.ry=50/this.ratio),t.left||(t.left=50/this.ratio),t.top||(t.top=50/this.ratio),t.strokeWidth||(t.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?t.stroke=d.E[this._color]:(t.stroke=d.E[t.team],this._color="main"),t.fill=null,this.callSuper("initialize",t),this.moveTo(t.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){this.set("rx",Math.round(this.rx*this.scaleX*this.ratio)/this.ratio),this.set("ry",Math.round(this.ry*this.scaleY*this.ratio)/this.ratio),this.set("left",Math.round(this.left*this.ratio)/this.ratio),this.set("top",Math.round(this.top*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,rx:this.rx*this.ratio,ry:this.ry*this.ratio,x:(this.left+this.rx)*this.ratio,y:(this.top+this.ry)*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("rx",t.rx/this.ratio),this.set("ry",t.ry/this.ratio),this.set("left",(t.x-t.rx)/this.ratio),this.set("top",(t.y-t.ry)/this.ratio),this.set("strokeWidth",t.lineWidth/this.ratio),this._color==="main"?this.set("stroke",d.E[this.team]):this.set("stroke",d.E[this._color]),this.moveTo(t.layer)},setRatio:function(t){this.set("rx",this.rx*this.ratio/t),this.set("ry",this.ry*this.ratio/t),this.set("left",this.left*this.ratio/t),this.set("top",this.top*this.ratio/t),this.set("strokeWidth",this.strokeWidth*this.ratio/t),this.ratio=t},setTeam:function(t){this.team=t,this._color==="main"&&this.set("stroke",d.E[this.team])}}),I=Y.fabric.util.createClass(H,{type:"UiRound",r:50,initialize:function(t){t||(t={}),t.r||(t.r=50/this.ratio),t.rx=t.r,t.ry=t.r,this.callSuper("initialize",t),this.setControlVisible("ml",!1),this.setControlVisible("mb",!1),this.setControlVisible("mr",!1),this.setControlVisible("mt",!1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,r:this.rx*this.ratio,x:(this.left+this.rx)*this.ratio,y:(this.top+this.ry)*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){t.rx=t.r,t.ry=t.r,this.callSuper("fromObject",t)}}),J=Y.fabric.util.createClass(H,{type:"UiArc",startAngle:0,endAngle:90,initialize:function(t){t||(t={}),t.startAngle||(t.startAngle=0),t.endAngle||(t.endAngle=90),this.callSuper("initialize",t),this.startAngle=t.startAngle,this.endAngle=t.endAngle,this.set("dirty",!0)},toObject:function(){return Y.fabric.util.object.extend(this.callSuper("toObject"),{startAngle:this.startAngle,endAngle:this.endAngle})},_render:function(t){var o=(this.startAngle-90)*(Math.PI/180),p=(this.endAngle-90)*(Math.PI/180);t.beginPath(),t.ellipse(0,0,this.rx,this.ry,0,o,p,!1),t.strokeStyle=this.stroke,t.lineWidth=this.strokeWidth,t.stroke()},fromObject:function(t){this.set("startAngle",t.startAngle),this.set("endAngle",t.endAngle),this.set("ry",1),this.callSuper("fromObject",t)}});function F(s,t){var o=F.canvas||(F.canvas=document.createElement("canvas")),p=o.getContext("2d");p.font=t;var j=p.measureText(s);return j.width}var P=1.25,O=Y.fabric.util.createClass(Y.fabric.Text,{type:"UiText",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(t){var o=this;t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.flipY=!0,t.fontSize||(t.fontSize=20/this.ratio),t.fontSize*=P,t.fontFamily||(t.fontFamily="ds-digitalnormal"),t.text||(t.text="Text"),t.left||(t.left=50/this.ratio),t.top||(t.top=50/this.ratio),t.top-=t.fontSize/this.ratio*2,t.width||(t.width=F(t.text,t.fontSize+"px "+t.fontFamily)*this.ratio),console.log(t.width,this.ratio),this._color&&this._color!=="main"?t.fill=d.E[this._color]:(t.fill=d.E[t.team],this._color="main"),this.callSuper("initialize",t.text,t),this.moveTo(t.layer),this.setControlsVisibility({tl:!1,tr:!1,bl:!1,br:!1,ml:!1,mt:!1,mr:!1,mb:!1,mtr:!1}),setTimeout(function(){o.set("width",F(t.text,t.fontSize+"px "+t.fontFamily)*o.ratio)},100)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,fontSize:this.fontSize*this.ratio/P,x:this.left*this.ratio,y:this.top*this.ratio+this.fontSize*2,text:this.text,color:this._color}},fromObject:function(t){this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("fontSize",t.fontSize/this.ratio*P),this.set("left",t.x/this.ratio),this.set("top",t.y/this.ratio-this.fontSize/this.ratio*2),this.text=t.text,this.set("width",F(t.text,t.fontSize*P+"px "+this.fontFamily)*this.ratio),this._color==="main"?this.set("fill",d.E[this.team]):this.set("fill",d.E[this._color]),this.moveTo(t.layer),this.set("fontFamily","ds-digitalnormal")},setRatio:function(t){this.set("width",this.width*this.ratio/t),this.set("left",this.left*this.ratio/t),this.set("top",this.top*this.ratio/t),this.set("fontSize",this.fontSize*this.ratio/t),this.ratio=t},resizeScale:function(){},setTeam:function(t){this.team=t,this._color==="main"&&this.set("fill",d.E[this.team])}}),r=Y.fabric.util.createClass(O,{type:"UiNumber",number:12345,initialize:function(t){t||(t={}),this.number=t.number||12345,t.text=this.number.toString(),this.callSuper("initialize",t)},toObject:function(){var t=this.callSuper("toObject");return t.number=this.number,delete t.text,t},fromObject:function(t){this.number=parseInt(t.number),t.text=this.number.toString(),this.callSuper("fromObject",t)}}),M=Y.fabric.util.createClass(O,{type:"UiFloat",float:12.345,initialize:function(t){t||(t={}),this.float=t.float||12.345,t.text=this.float.toString(),this.callSuper("initialize",t)},toObject:function(){var t=this.callSuper("toObject");return t.float=this.float,delete t.text,t},fromObject:function(t){this.float=parseFloat(t.float),t.text=this.float.toString(),this.callSuper("fromObject",t)}}),Z={Rect:W,Line:R,Round:I,Ellipse:H,Arc:J,Text:O,Number:r,Float:M};function w(s){var t={id:s.id,name:s.name,layer:s.layer,groupName:s.group,ratio:s.ratio,team:s.team},o=s.type.slice(2);return new Z[o](t)}function z(){for(var s=[],t=0,o=Object.keys(Z);t<o.length;t++){var p=o[t];s.push({key:"Insert-".concat(p),label:p})}return s}},83885:function(te,Q,e){e.a(te,function(Y,d){return De(this,null,function*(){try{var W=e(64599),R=e.n(W),H=e(12444),I=e.n(H),J=e(72004),F=e.n(J),P=e(73070),O=Y([P]);P=(O.then?(yield O)():O)[0];var r=function(){function M(Z,w,z){I()(this,M),this.name=Z,this.id=w,this.groups=[];var s={};for(var t in z){var o=z[t];o.group in s?s[o.group].push(o):s[o.group]=[o]}for(var p in s)this.groups.push(new P.Z(this.name,this.id,p,this.groups.length,s[p]))}return F()(M,[{key:"toSerialMsg",value:function(){var w=[],z=R()(this.groups),s;try{for(z.s();!(s=z.n()).done;){var t=s.value;w=w.concat(t.toSerialMsg())}}catch(o){z.e(o)}finally{z.f()}return console.log(w),w}},{key:"check",value:function(){var w=[],z=R()(this.groups),s;try{for(z.s();!(s=z.n()).done;){var t=s.value;w=w.concat(t.check())}}catch(o){z.e(o)}finally{z.f()}return w}}]),M}();Q.Z=r,d()}catch(M){d(M)}})})},10622:function(te,Q,e){e.a(te,function(Y,d){return De(this,null,function*(){try{var W=e(64599),R=e.n(W),H=e(12444),I=e.n(H),J=e(72004),F=e.n(J),P=e(5970),O=e(83885),r=Y([P,O]);[P,O]=r.then?(yield r)():r;var M=function(){function Z(w){I()(this,Z),this.frames=[];for(var z in w)this.frames.push(new O.Z(z,this.frames.length,w[z]))}return F()(Z,[{key:"toUiH",value:function(){return(0,P.LI)(this.frames)}},{key:"check",value:function(){var z=[],s=R()(this.frames),t;try{for(s.s();!(t=s.n()).done;){var o=t.value;z=z.concat(o.check())}}catch(p){s.e(p)}finally{s.f()}return z}},{key:"toSerialMsg",value:function(){var z={},s=R()(this.frames),t;try{for(s.s();!(t=s.n()).done;){var o=t.value;z[o.name]=o.toSerialMsg()}}catch(p){s.e(p)}finally{s.f()}return z}}]),Z}();Q.Z=M,d()}catch(Z){d(Z)}})})},73070:function(te,Q,e){e.a(te,function(Y,d){return De(this,null,function*(){try{var W=e(64599),R=e.n(W),H=e(12444),I=e.n(H),J=e(72004),F=e.n(J),P=e(66978),O=Y([P]);P=(O.then?(yield O)():O)[0];var r=function(){function M(Z,w,z,s,t){I()(this,M),this.frame_name=Z,this.frame_id=w,this.group_name=z,this.group_id=s,this.splits=[],this.errors=[];var o=0,p=new Set,j=R()(t),g;try{for(j.s();!(g=j.n()).done;){var l=g.value;/^[a-zA-Z_]+\w+$/.test(l.name)||this.errors.push({level:"error",info:'Name of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Object "').concat(l.name,'" does not compliant.')}),p.has(l.name)?this.errors.push({level:"error",info:'Name of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Object "').concat(l.name,'" is duplicate.')}):p.add(l.name),l.type==="UiText"&&(this.splits.push(new P.Z(this.frame_name,this.frame_id,this.group_name,this.group_id,this.splits.length,o,[l])),o+=1)}}catch(y){j.e(y)}finally{j.f()}for(var c=t.filter(function(y){return y.type!=="UiText"}),m=Math.ceil(c.length/7),f=0;f<m;f++)this.splits.push(new P.Z(this.frame_name,this.frame_id,this.group_name,this.group_id,this.splits.length,o,c.slice(f*7,(f+1)*7))),o+=7}return F()(M,[{key:"toSerialMsg",value:function(){var w=[],z=R()(this.splits),s;try{for(z.s();!(s=z.n()).done;){var t=s.value;w.push(t.toSerialMsg())}}catch(o){z.e(o)}finally{z.f()}return w}},{key:"check",value:function(){var w=this.errors,z=R()(this.splits),s;try{for(z.s();!(s=z.n()).done;){var t=s.value;w=w.concat(t.check())}}catch(o){z.e(o)}finally{z.f()}return w}}]),M}();Q.Z=r,d()}catch(M){d(M)}})})},66978:function(te,Q,e){e.a(te,function(Y,d){return De(this,null,function*(){try{var W=e(97857),R=e.n(W),H=e(64599),I=e.n(H),J=e(12444),F=e.n(J),P=e(72004),O=e.n(P),r=e(5970),M=e(52880),Z=Y([r]);r=(Z.then?(yield Z)():Z)[0];var w=function(){function z(s,t,o,p,j,g,l){var c=this;if(F()(this,z),this.frame_name=s,this.frame_id=t,this.group_name=o,this.group_id=p,this.split_id=j,this.start_id=g,this.objs=l,l[0].type==="UiText")this.toSplitC=function(){return(0,r.c0)(c.frame_name,c.frame_id,c.group_name,c.group_id,c.split_id,c.start_id,c.objs)};else{var m=7;l.length===1?m=1:l.length<=2?m=2:l.length<=5&&(m=5),this.toSplitC=function(){return(0,r.JP)(c.frame_name,c.frame_id,c.group_name,c.group_id,c.split_id,c.start_id,c.objs,m)}}this.toSplitH=function(){return(0,r.pj)(c.frame_name,c.group_name,c.split_id,c.objs)}}return O()(z,[{key:"toSerialMsg",value:function(){var t=[],o=I()(this.objs),p;try{for(o.s();!(p=o.n()).done;){var j=p.value,g=R()({},j);g.group="".concat(this.frame_name,"-").concat(this.split_id),t.push(g)}}catch(l){o.e(l)}finally{o.f()}return(0,M.h)(t)}},{key:"check",value:function(){return this.objs.length!==1&&this.objs.length!==2&&this.objs.length!==5&&this.objs.length!==7?[{level:"warning",info:'Length of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Split "').concat(this.split_id,'" is not 1 or 2 or 5 or 7.')}]:[]}}]),z}();Q.Z=w,d()}catch(z){d(z)}})})},5970:function(te,Q,e){e.a(te,function(Y,d){return De(this,null,function*(){try{let l=function(C,T,U){for(var k="",q=0;q<U;q++)k=k+`
#include "ui_`.concat(C,"_").concat(T,"_").concat(q,'.h"');for(var _=`
#define ui_init_`.concat(C,"_").concat(T,`() \\
`),G=`
#define ui_update_`.concat(C,"_").concat(T,`() \\
`),B=`
#define ui_remove_`.concat(C,"_").concat(T,`() \\
`),h=0;h<U;h++)_+="_ui_init_".concat(C,"_").concat(T,"_").concat(h,`(); \\
`),G+="_ui_update_".concat(C,"_").concat(T,"_").concat(h,`(); \\
`),B+="_ui_remove_".concat(C,"_").concat(T,"_").concat(h,`(); \\
`);return k+="".concat(r).concat(_.slice(0,-4)).concat(r).concat(G.slice(0,-4)).concat(r).concat(B.slice(0,-4),`
    `),"".concat(k,`
`)},c=function(C,T){var U="",k=O()(T),q;try{for(k.s();!(q=k.n()).done;){var _=q.value;U+=l(C,_.group_name,_.splits.length)}}catch(G){k.e(G)}finally{k.f()}return U},m=function(C){var T="//".concat(r,"// Created by RM UI Designer").concat(r,"//").concat(r).concat(r,"#ifndef UI_H").concat(r,"#define UI_H").concat(r,"#ifdef __cplusplus").concat(r,'extern "C" {').concat(r,"#endif").concat(r).concat(r,'#include "ui_interface.h"').concat(r),U=O()(C),k;try{for(U.s();!(k=U.n()).done;){var q=k.value;T+=c(q.name,q.groups)}}catch(_){U.e(_)}finally{U.f()}return"".concat(T).concat(r).concat(r,"#ifdef __cplusplus").concat(r,"}").concat(r,"#endif").concat(r).concat(r,`#endif //UI_H
`)},f=function(C,T,U,k){var q="//".concat(r,"// Created by RM UI Designer").concat(r,"//").concat(r).concat(r,"#ifndef UI_").concat(C,"_").concat(T,"_").concat(U,"_H").concat(r,"#define UI_").concat(C,"_").concat(T,"_").concat(U,"_H").concat(r).concat(r,'#include "ui_interface.h"').concat(r).concat(r),_=O()(k),G;try{for(_.s();!(G=_.n()).done;){var B=G.value;q+="extern ui_interface_".concat(M[B.type],"_t *ui_").concat(C,"_").concat(T,"_").concat(B.name,`;
`)}}catch(h){_.e(h)}finally{_.f()}return q+="".concat(r,"void _ui_init_").concat(C,"_").concat(T,"_").concat(U,"();").concat(r,"void _ui_update_").concat(C,"_").concat(T,"_").concat(U,"();").concat(r,"void _ui_remove_").concat(C,"_").concat(T,"_").concat(U,"();").concat(r).concat(r,"#endif //UI_").concat(C,"_").concat(T,"_").concat(U,"_H").concat(r),q},y=function(C,T,U){var k=F()({},U),q=Z[k.type],_=k.name;k.type==="UiFloat"&&(k.number=Math.round(k.float*1e3),delete k.float),k.type==="UiRect"&&(k.x2=k.x+k.width,k.y2=k.y+k.height,delete k.width,delete k.height),(k.type==="UiFloat"||k.type==="UiNumber")&&(k.lineWidth=Math.round(k.fontSize/10)),k.color=z[k.color],delete k.type,delete k.id,delete k.name,delete k.group;var G="ui_".concat(C,"_").concat(T,"_").concat(_),B="    ".concat(G,"->figure_tpye = ").concat(q,`;
`);for(var h in k){var ne=k[h];typeof ne=="number"&&(ne=Math.round(ne)),B+="    ".concat(G,"->").concat(w[h]," = ").concat(ne,`;
`)}return"".concat(B,`
`)},A=function(C,T,U,k,q,_,G,B){for(var h="".concat(C,"_").concat(U,"_").concat(q),ne="//".concat(r,"// Created by RM UI Designer").concat(r,"//").concat(r).concat(r,'#include "ui_').concat(h,'.h"').concat(r).concat(r,"#define FRAME_ID ").concat(T).concat(r,"#define GROUP_ID ").concat(k).concat(r,"#define START_ID ").concat(_).concat(r,"#define OBJ_NUM ").concat(G.length).concat(r,"#define FRAME_OBJ_NUM ").concat(B).concat(r).concat(r,"CAT(ui_, CAT(FRAME_OBJ_NUM, _frame_t)) ui_").concat(h,";").concat(r),Me=0;Me<G.length;Me++){var oe=M[G[Me].type],be=G[Me].name;ne+="ui_interface_".concat(oe,"_t *ui_").concat(C,"_").concat(U,"_").concat(be," = ")+"(ui_interface_".concat(oe,"_t *)&(ui_").concat(h,".data[").concat(Me,`]);
`)}ne+="".concat(r,"void _ui_init_").concat(h,"() {").concat(r,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(r,"        ui_").concat(h,".data[i].figure_name[0] = FRAME_ID;").concat(r,"        ui_").concat(h,".data[i].figure_name[1] = GROUP_ID;").concat(r,"        ui_").concat(h,".data[i].figure_name[2] = i + START_ID;").concat(r,"        ui_").concat(h,".data[i].operate_tpyel = 1;").concat(r,"    }").concat(r,"    for (int i = OBJ_NUM; i < FRAME_OBJ_NUM; i++) {").concat(r,"        ui_").concat(h,".data[i].operate_tpyel = 0;").concat(r,"    }").concat(r).concat(r);var pe=O()(G),de;try{for(pe.s();!(de=pe.n()).done;){var ie=de.value;ne+=y(C,U,ie)}}catch(ue){pe.e(ue)}finally{pe.f()}return ne+="".concat(r,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(h,");").concat(r,"    SEND_MESSAGE((uint8_t *) &ui_").concat(h,", sizeof(ui_").concat(h,"));").concat(r,"}").concat(r).concat(r,"void _ui_update_").concat(h,"() {").concat(r,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(r,"        ui_").concat(h,".data[i].operate_tpyel = 2;").concat(r,"    }").concat(r).concat(r,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(h,");").concat(r,"    SEND_MESSAGE((uint8_t *) &ui_").concat(h,", sizeof(ui_").concat(h,"));").concat(r,"}").concat(r).concat(r,"void _ui_remove_").concat(h,"() {").concat(r,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(r,"        ui_").concat(h,".data[i].operate_tpyel = 3;").concat(r,"    }").concat(r).concat(r,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(h,");").concat(r,"    SEND_MESSAGE((uint8_t *) &ui_").concat(h,", sizeof(ui_").concat(h,"));").concat(r,"}").concat(r),ne},u=function(C,T,U,k,q,_,G){var B="".concat(C,"_").concat(U,"_").concat(q),h=F()({},G[0]),ne=h.name,Me=h.text;h.color=z[h.color],h.strLength=Me.length,h.lineWidth=Math.round(h.fontSize/10),delete h.text,delete h.type,delete h.id,delete h.name,delete h.group;var oe="//".concat(r,"// Created by RM UI Designer").concat(r,"//").concat(r).concat(r,'#include "ui_').concat(B,'.h"').concat(r,'#include "string.h"').concat(r).concat(r,"#define FRAME_ID ").concat(T).concat(r,"#define GROUP_ID ").concat(k).concat(r,"#define START_ID ").concat(_).concat(r).concat(r,"ui_string_frame_t ui_").concat(B,";").concat(r).concat(r,"ui_interface_string_t* ui_").concat(C,"_").concat(U,"_").concat(ne," = &ui_").concat(B,".option;").concat(r).concat(r,"void _ui_init_").concat(B,"() {").concat(r,"    ui_").concat(B,".option.figure_name[0] = FRAME_ID;").concat(r,"    ui_").concat(B,".option.figure_name[1] = GROUP_ID;").concat(r,"    ui_").concat(B,".option.figure_name[2] = START_ID;").concat(r,"    ui_").concat(B,".option.operate_tpyel = 1;").concat(r);oe+="    ui_".concat(B,".option.figure_tpye = ").concat(Z.UiText,`;
`);for(var be in h){var pe=h[be];typeof pe=="number"&&(pe=Math.round(pe)),oe+="    ui_".concat(B,".option.").concat(w[be]," = ").concat(pe,`;
`)}return oe+="    strcpy(ui_".concat(C,"_").concat(U,"_").concat(ne,'->string, "').concat(Me,'");').concat(r).concat(r,"    ui_proc_string_frame(&ui_").concat(B,");").concat(r,"    SEND_MESSAGE((uint8_t *) &ui_").concat(B,", sizeof(ui_").concat(B,"));").concat(r,"}").concat(r).concat(r,"void _ui_update_").concat(B,"() {").concat(r,"    ui_").concat(B,".option.operate_tpyel = 2;").concat(r).concat(r,"    ui_proc_string_frame(&ui_").concat(B,");").concat(r,"    SEND_MESSAGE((uint8_t *) &ui_").concat(B,", sizeof(ui_").concat(B,"));").concat(r,"}").concat(r).concat(r,"void _ui_remove_").concat(B,"() {").concat(r,"    ui_").concat(B,".option.operate_tpyel = 3;").concat(r).concat(r,"    ui_proc_string_frame(&ui_").concat(B,");").concat(r,"    SEND_MESSAGE((uint8_t *) &ui_").concat(B,", sizeof(ui_").concat(B,"));").concat(r,"}"),oe},b=function(){return S.apply(this,arguments)},S=function(){return S=I()(R()().mark(function C(){return R()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",{ui_interface:{h:p,c:j},ui_types:{h:g}});case 1:case"end":return U.stop()}},C)})),S.apply(this,arguments)};e.d(Q,{HC:function(){return b},JP:function(){return A},LI:function(){return m},c0:function(){return u},pj:function(){return f}});var W=e(15009),R=e.n(W),H=e(99289),I=e.n(H),J=e(97857),F=e.n(J),P=e(64599),O=e.n(P),r=`
`,M={UiArc:"arc",UiRound:"round",UiRect:"rect",UiLine:"line",UiEllipse:"ellipse",UiText:"string",UiNumber:"number",UiFloat:"number"},Z={UiLine:0,UiRect:1,UiRound:2,UiEllipse:3,UiArc:4,UiFloat:5,UiNumber:6,UiText:7},w={lineWidth:"width",layer:"layer",x:"start_x",y:"start_y",x2:"end_x",y2:"end_y",rx:"rx",ry:"ry",r:"r",startAngle:"start_angle",endAngle:"end_angle",number:"number",color:"color",fontSize:"font_size",strLength:"str_length"},z={main:0,yellow:1,green:2,orange:3,purple:4,pink:5,cyan:6,black:7,white:8},s=e(75112),t=e(8938),o=e(33562),p=yield(yield fetch(s)).text(),j=yield(yield fetch(t)).text(),g=yield(yield fetch(o)).text();d()}catch(l){d(l)}})},1)},44740:function(te,Q,e){e.d(Q,{Z:function(){return c}});var Y=e(15009),d=e.n(Y),W=e(99289),R=e.n(W),H=e(12444),I=e.n(H),J=e(72004),F=e.n(J),P=e(9783),O=e.n(P),r=e(19632),M=e.n(r),Z=e(85378),w=function(){function m(){I()(this,m),O()(this,"messages",[]),O()(this,"enabled",!1)}return F()(m,[{key:"warn",value:function(y){this.enabled&&(this.messages.push({level:"warn",message:y,time:new Date}),console.warn(y)),this.messages.length>100&&(this.messages=this.messages.slice(-100))}},{key:"error",value:function(y){this.enabled&&(this.messages.push({level:"error",message:y,time:new Date}),console.error(y)),this.messages.length>100&&(this.messages=this.messages.slice(-100))}},{key:"clear",value:function(){this.messages=[]}},{key:"get",value:function(){return this.messages}}]),m}(),z=new w,s=z,t=[8,21,36,81,111,51],o=function(){function m(){I()(this,m),O()(this,"buffer",void 0),this.buffer=new Uint8Array(0)}return F()(m,[{key:"transform",value:function(y,A){for(this.buffer=Uint8Array.from([].concat(M()(this.buffer),M()(y)));this.buffer.length>7;){if(this.buffer[0]!==165){this.buffer=this.buffer.subarray(1);continue}if(this.buffer.length<7)break;var u=this.buffer[1]|this.buffer[2]<<8,b=this.buffer[3],S=this.buffer[4],C=this.buffer[5]|this.buffer[6]<<8,T=this.buffer.subarray(0,4);if((0,Z.d)(T)!==S){this.buffer=this.buffer.subarray(1),s.warn("crc8 error, calc: 0x".concat((0,Z.d)(T).toString(16),", msg: 0x").concat(S.toString(16)));continue}if(C!==769){this.buffer=this.buffer.subarray(1),s.warn("cmd_id 0x".concat(C.toString(16)," not match"));continue}if(!t.includes(u)){this.buffer=this.buffer.subarray(1),s.warn("length error, length: ".concat(u));continue}if(this.buffer.length<6+u+2)break;var U=this.buffer.subarray(7,7+u),k=this.buffer[7+u]|this.buffer[8+u]<<8;if((0,Z.I)(this.buffer.subarray(0,7+u))!==k){this.buffer=this.buffer.subarray(1),s.error("crc16 error, calc: 0x".concat((0,Z.I)(this.buffer.subarray(0,7+u)).toString(16),", msg: 0x").concat(k.toString(16)));continue}A.enqueue(U),this.buffer=this.buffer.subarray(7+u+2)}}}]),m}(),p=o,j=e(73676),g=e(28348),l=function(){function m(f,y){I()(this,m),O()(this,"options",{baudRate:115200,dataBits:8,stopBits:1,flowControl:"none",parity:"none"}),this.onEvent=f,this.onError=y,this.reader=null,this.transformer=new TransformStream(new p)}return F()(m,[{key:"connect",value:function(){var f=R()(d()().mark(function A(){return d()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if("serial"in navigator){b.next=3;break}return g.yw.error("Web Serial API not supported."),b.abrupt("return");case 3:return b.next=5,navigator.serial.requestPort();case 5:return this.port=b.sent,b.next=8,this.port.open(this.options);case 8:this.readableStreamClosed=this.port.readable.pipeTo(this.transformer.writable),this.reader=this.transformer.readable.getReader(),s.enabled=!0,s.clear(),this.readLoop();case 13:case"end":return b.stop()}},A,this)}));function y(){return f.apply(this,arguments)}return y}()},{key:"stop",value:function(){var f=R()(d()().mark(function A(){var u,b,S;return d()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return u=new TextEncoderStream,b=u.writable.getWriter(),S=u.readable.pipeTo(this.port.writable),this.reader.cancel(),T.next=6,this.readableStreamClosed.catch(function(){});case 6:return b.close(),T.next=9,S;case 9:return T.next=11,this.port.close();case 11:this.reader=null,this.transformer=new TransformStream(new p),s.enabled=!1;case 14:case"end":return T.stop()}},A,this)}));function y(){return f.apply(this,arguments)}return y}()},{key:"readLoop",value:function(){var f=R()(d()().mark(function A(){var u,b,S,C;return d()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:U.prev=0;case 1:return U.next=4,this.reader.read();case 4:if(u=U.sent,b=u.value,S=u.done,!S){U.next=10;break}return this.reader.releaseLock(),U.abrupt("break",20);case 10:if(C=(0,j.EY)(b),C.sender===g.eq){U.next=14;break}return s.error("Sender ".concat(C.sender," not match self ").concat(g.eq)),U.abrupt("continue",1);case 14:if(C.receiver===g.eq+256){U.next=17;break}return s.error("Receiver ".concat(C.receiver," not match self ").concat(g.eq)),U.abrupt("continue",1);case 17:this===null||this===void 0||this.onEvent(C),U.next=1;break;case 20:U.next=36;break;case 22:return U.prev=22,U.t0=U.catch(0),U.prev=24,U.next=27,this.stop();case 27:U.next=31;break;case 29:U.prev=29,U.t1=U.catch(24);case 31:this.reader=null,this.transformer=new TransformStream(new p),s.enabled=!1,s.clear(),this.onError(U.t0);case 36:case"end":return U.stop()}},A,this,[[0,22],[24,29]])}));function y(){return f.apply(this,arguments)}return y}()},{key:"getLog",value:function(){return s.get()}}]),m}(),c=l},56134:function(te,Q,e){e.a(te,function(Y,d){return De(this,null,function*(){try{var W=e(64599),R=e.n(W),H=e(15009),I=e.n(H),J=e(99289),F=e.n(J),P=e(12444),O=e.n(P),r=e(72004),M=e.n(r),Z=e(9783),w=e.n(Z),z=e(10622),s=e(52880),t=e(28348),o=Y([z]);z=(o.then?(yield o)():o)[0];var p=function(){function j(){O()(this,j),w()(this,"options",{baudRate:115200,dataBits:8,stopBits:1,flowControl:"none",parity:"none"}),w()(this,"writer",null)}return M()(j,[{key:"connect",value:function(){var g=F()(I()().mark(function c(){return I()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if("serial"in navigator){f.next=3;break}return t.yw.error("Web Serial API not supported."),f.abrupt("return");case 3:return f.next=5,navigator.serial.requestPort();case 5:return this.port=f.sent,f.next=8,this.port.open(this.options);case 8:this.writer=this.port.writable.getWriter();case 9:case"end":return f.stop()}},c,this)}));function l(){return g.apply(this,arguments)}return l}()},{key:"stop",value:function(){var g=F()(I()().mark(function c(){return I()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.writer.releaseLock();case 2:return this.writer=null,f.next=5,this.port.close();case 5:case"end":return f.stop()}},c,this)}));function l(){return g.apply(this,arguments)}return l}()},{key:"write",value:function(){var g=F()(I()().mark(function c(m){var f=this,y,A,u,b,S,C,T;return I()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(this.writer){k.next=3;break}return t.yw.error("Serial port is not open."),k.abrupt("return");case 3:y=0,setTimeout(function(){f.writer.write((0,s.r)())},y),y+=50,A=new z.Z(m.data),u=A.toSerialMsg(),b=u[m.selected],console.log(m),S=R()(b),k.prev=11,T=I()().mark(function q(){var _;return I()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:_=C.value,setTimeout(function(){f.writer.write(_)},y),y+=50;case 3:case"end":return B.stop()}},q)}),S.s();case 14:if((C=S.n()).done){k.next=18;break}return k.delegateYield(T(),"t0",16);case 16:k.next=14;break;case 18:k.next=23;break;case 20:k.prev=20,k.t1=k.catch(11),S.e(k.t1);case 23:return k.prev=23,S.f(),k.finish(23);case 26:case"end":return k.stop()}},c,this,[[11,20,23,26]])}));function l(c){return g.apply(this,arguments)}return l}()}]),j}();Q.Z=p,d()}catch(j){d(j)}})})},30789:function(te,Q,e){e.d(Q,{E:function(){return O},E4:function(){return M},GM:function(){return p},Gj:function(){return Z},UP:function(){return s},cT:function(){return g},jK:function(){return l},lZ:function(){return z},q7:function(){return w}});var Y=e(15009),d=e.n(Y),W=e(99289),R=e.n(W),H=e(17990),I=e(55733),J=e.n(I),F=document.createElement("a"),P=document.createElement("input");P.type="file";var O={yellow:"rgb(255, 238, 70)",green:"rgb(168, 255, 45)",orange:"rgb(255, 163, 8)",purple:"rgb(240, 41, 246)",pink:"rgb(255, 100, 142)",cyan:"rgb(69, 255, 242)",white:"#fff",black:"#000",blue:"rgb(47, 168, 223)",red:"rgb(255, 69, 70)"};function r(c){var m=c.split(".").pop();return{name:m+" file",extensions:[m]}}function M(c,m){if(s())R()(d()().mark(function A(){var u;return d()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,H.WZ.save({filters:[r(m)],defaultPath:m});case 2:if(u=S.sent,!(u!==null&&u.length>0)){S.next=6;break}return S.next=6,H.fs.writeTextFile(u,c);case 6:case"end":return S.stop()}},A)}))();else{var f=new Blob([c],{type:"text/plain;charset=utf-8"}),y=URL.createObjectURL(f);F.href=y,F.download=m,F.click(),URL.revokeObjectURL(y)}}function Z(c,m){if(s())R()(d()().mark(function y(){var A,u;return d()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,H.WZ.save({filters:[r(m)],defaultPath:m});case 2:if(A=S.sent,!(A!==null&&A.length>0)){S.next=9;break}return S.next=6,c.arrayBuffer();case 6:return u=S.sent,S.next=9,H.fs.writeBinaryFile(A,u);case 9:case"end":return S.stop()}},y)}))();else{var f=URL.createObjectURL(c);F.href=f,F.download=m,F.click(),URL.revokeObjectURL(f)}}function w(c,m,f){var y={version:2,data:c,selected:f},A=JSON.stringify(y);M(A,m)}function z(c){var m=null;return window.createObjcectURL!==void 0?m=window.createOjcectURL(c):window.URL!==void 0?m=window.URL.createObjectURL(c):window.webkitURL!==void 0&&(m=window.webkitURL.createObjectURL(c)),m}function s(){return window!==void 0&&window.__TAURI__!==void 0}function t(c){return o.apply(this,arguments)}function o(){return o=R()(d()().mark(function c(m){var f;return d()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return f=new(J()),m.forEach(function(u){f.file(u.fileName,u.content)}),A.next=4,f.generateAsync({type:"blob"});case 4:return A.abrupt("return",A.sent);case 5:case"end":return A.stop()}},c)})),o.apply(this,arguments)}function p(c){return j.apply(this,arguments)}function j(){return j=R()(d()().mark(function c(m){var f,y,A;return d()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:f=[];for(y in m)for(A in m[y])f.push({fileName:"".concat(y,".").concat(A),content:m[y][A]});return b.next=4,t(f);case 4:return b.abrupt("return",b.sent);case 5:case"end":return b.stop()}},c)})),j.apply(this,arguments)}function g(c){return new Promise(function(m,f){if(s()){var y=[c.slice(1)],A="".concat(y," file");c==="image/*"&&(y=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],A="image"),R()(d()().mark(function u(){var b,S,C,T,U;return d()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,H.WZ.open({multiple:!1,directory:!1,filters:[{name:A,extensions:y}]});case 2:if(b=q.sent,!(b!==null&&b.length>0)){q.next=16;break}return S=b.replace(/\\/g,"/"),C=S.split("/").pop(),q.t0=Blob,q.next=9,H.fs.readBinaryFile(b);case 9:q.t1=q.sent,q.t2=[q.t1],T=new q.t0(q.t2),U=new File([T],C),m(U),q.next=17;break;case 16:f();case 17:case"end":return q.stop()}},u)}))()}else P.accept=c,P.value="",P.onchange=function(){if(P.files.length>0){var u=P.files[0];m(u)}else f(new Error("No file selected"))},P.click()})}function l(c){return document.getElementById("content-in").contains(c)||c.getAttribute("contentEditable")==="true"?!0:c.tagName==="INPUT"||c.tagName==="TEXTAREA"}},54030:function(te,Q,e){var Y=e(67294),d=e(28348),W=e(85893);function R(H){return(0,d.ZP)(),(0,W.jsx)("div",{})}Q.Z=R},7427:function(te,Q,e){var Y=e(12444),d=e.n(Y),W=e(72004),R=e.n(W),H=e(31996),I=e.n(H),J=e(26037),F=e.n(J),P=e(67294),O=e(21797),r=e(2487),M=e(42075),Z=e(28058),w=e(18429),z=e(85893),s=function(t){I()(p,t);var o=F()(p);function p(){return d()(this,p),o.apply(this,arguments)}return R()(p,[{key:"render",value:function(){var g=this.props.errors.filter(function(m){return m.level==="warning"}),l=this.props.errors.filter(function(m){return m.level==="error"}),c=(0,z.jsx)(O.ZP,{status:"success",title:"Check Passed!",subTitle:"0 error, 0 warning!",style:{marginTop:"50px"}});return l.length+g.length>0&&(c=(0,z.jsxs)("div",{style:{color:"var(--ant-color-text)",height:"100%"},children:[(0,z.jsxs)("p",{children:["Found ",l.length," errors, ",g.length," warnings."]}),(0,z.jsx)("div",{style:{paddingBottom:10},className:"card-body",children:(0,z.jsx)(r.Z,{bordered:!0,dataSource:this.props.errors,renderItem:function(f){return(0,z.jsx)(r.Z.Item,{children:(0,z.jsxs)(M.Z,{size:"middle",children:[f.level==="warning"?(0,z.jsx)(Z.Z,{}):(0,z.jsx)(w.Z,{}),f.info]})})}})})]})),(0,z.jsxs)("div",{style:{width:"100%",height:"calc(100% - 50px)"},children:[(0,z.jsx)("h3",{style:{color:"var(--ant-color-text)"},children:"Check Data"}),c]})}}]),p}(P.Component);Q.Z=s},56296:function(te,Q,e){e.a(te,function(Y,d){return De(this,null,function*(){try{let h=function(Me){var oe="";return Me.h&&(oe+=".h"),Me.h&&Me.c&&(oe+=" and "),Me.c&&(oe+=".c"),oe},ne=function(){var Me=document.querySelector(".rmui"),oe=getComputedStyle(Me),be=oe.getPropertyValue("--ant-color-text-base");return be==="#fff"};var W=e(19632),R=e.n(W),H=e(15009),I=e.n(H),J=e(64599),F=e.n(J),P=e(97857),O=e.n(P),r=e(99289),M=e.n(r),Z=e(12444),w=e.n(Z),z=e(72004),s=e.n(z),t=e(25098),o=e.n(t),p=e(31996),j=e.n(p),g=e(26037),l=e.n(g),c=e(9783),m=e.n(c),f=e(67294),y=e(49107),A=e(42075),u=e(14726),b=e(85265),S=e(42308),C=e(28348),T=e(24389),U=e(51376),k=e(30789),q=e(5970),_=e(85893),G=Y([q]);q=(G.then?(yield G)():G)[0];var B=function(Me){j()(be,Me);var oe=l()(be);function be(){var pe;w()(this,be);for(var de=arguments.length,ie=new Array(de),ue=0;ue<de;ue++)ie[ue]=arguments[ue];return pe=oe.call.apply(oe,[this].concat(ie)),m()(o()(pe),"state",{preview:null,fileName:""}),m()(o()(pe),"checked",[]),pe}return s()(be,[{key:"review",value:function(de,ie){this.setState({preview:this.props.code[de][ie],fileName:"".concat(de,".").concat(ie)})}},{key:"download",value:function(de,ie){(0,k.E4)(this.props.code[de][ie],"".concat(de,".").concat(ie)),console.log(this.props.code[de][ie])}},{key:"downloadChecked",value:function(){var pe=M()(I()().mark(function ie(){var ue,me,le,$,ce;return I()().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:if(this.checked.length!==0){ge.next=3;break}return C.yw.error("Please select at least one file."),ge.abrupt("return");case 3:return ue={},ge.t0=O(),ge.t1=O()({},this.props.code),ge.next=8,(0,q.HC)();case 8:ge.t2=ge.sent,me=(0,ge.t0)(ge.t1,ge.t2),le=F()(this.checked);try{for(le.s();!($=le.n()).done;)ce=$.value,ue[ce]=me[ce]}catch(xe){le.e(xe)}finally{le.f()}(0,k.GM)(ue).then(function(xe){(0,k.Gj)(xe,"codes.zip")});case 13:case"end":return ge.stop()}},ie,this)}));function de(){return pe.apply(this,arguments)}return de}()},{key:"render",value:function(){var de=this,ie=[{file:"ui base .h and .c",key:"_base"}];for(var ue in this.props.code)ie.push({file:"".concat(ue," ").concat(h(this.props.code[ue])),key:ue,h:this.props.code[ue].h!==void 0,c:this.props.code[ue].c!==void 0});return(0,_.jsxs)("div",{className:"full",style:{overflow:"hidden"},children:[(0,_.jsx)("h3",{style:{color:"var(--ant-color-text)",marginBottom:20},children:"Download Data"}),(0,_.jsx)("div",{style:{paddingBottom:36},className:"card-body",children:(0,_.jsx)(y.Z,{columns:[{title:"File",dataIndex:"file",key:"file"},{title:"Preview",dataIndex:"key",key:"preview",render:function(le,$){return(0,_.jsxs)(A.Z,{children:[$.h&&(0,_.jsx)(u.ZP,{type:"link",onClick:function(){de.review(le,"h")},children:"Preview .h"}),$.c&&(0,_.jsx)(u.ZP,{type:"link",onClick:function(){de.review(le,"c")},children:"Preview .c"})]})}},{title:"Download",dataIndex:"key",key:"download",render:function(le,$){return le!=="_base"?(0,_.jsxs)(A.Z,{children:[$.h&&(0,_.jsx)(u.ZP,{type:"link",onClick:function(){de.download(le,"h")},children:"Download .h"}),$.c&&(0,_.jsx)(u.ZP,{type:"link",onClick:function(){de.download(le,"c")},children:"Download .c"})]}):(0,_.jsx)(u.ZP,{type:"link",onClick:M()(I()().mark(function ce(){var Se,ge;return I()().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return ze.next=2,(0,q.HC)();case 2:return Se=ze.sent,ze.next=5,(0,k.GM)(Se);case 5:ge=ze.sent,(0,k.Gj)(ge,"ui_base.zip");case 7:case"end":return ze.stop()}},ce)})),children:"Download .zip"})}}],dataSource:ie,rowSelection:{type:"checkbox",onChange:function(le){var $=R()(le);$.includes("_base")&&($=$.filter(function(ce){return ce!=="_base"}),$.push("ui_types"),$.push("ui_interface")),de.checked=$},getCheckboxProps:function(le){return{name:le.key}}},pagination:!1})}),(0,_.jsx)(b.Z,{onClose:function(){return de.setState({preview:null})},open:this.state.preview!==null,title:this.state.fileName,size:"large",getContainer:document.getElementById("content-in"),rootStyle:{inset:"25px 0 0 0"},children:(0,_.jsx)("div",{style:{height:"100%",overflow:"auto"},children:(0,_.jsx)(S.ZP,{value:this.state.preview||"",theme:ne()?T.ub:T.tR,extensions:[(0,U.N)()],onContextMenu:function(le){le.stopPropagation()}})})})]})}}]),be}(f.Component);Q.Z=B,d()}catch(h){d(h)}})})},22312:function(te,Q,e){e.a(te,function(Y,d){return De(this,null,function*(){try{var W=e(64599),R=e.n(W),H=e(12444),I=e.n(H),J=e(72004),F=e.n(J),P=e(25098),O=e.n(P),r=e(31996),M=e.n(r),Z=e(26037),w=e.n(Z),z=e(9783),s=e.n(z),t=e(67294),o=e(14726),p=e(85265),j=e(7427),g=e(56296),l=e(10622),c=e(85893),m=Y([g,l]);[g,l]=m.then?(yield m)():m;var f=function(y){M()(u,y);var A=w()(u);function u(){var b;I()(this,u);for(var S=arguments.length,C=new Array(S),T=0;T<S;T++)C[T]=arguments[T];return b=A.call.apply(A,[this].concat(C)),s()(O()(b),"state",{show:!1,step:"check"}),s()(O()(b),"downloadRef",(0,t.createRef)()),s()(O()(b),"data",{}),s()(O()(b),"errors",[]),b}return F()(u,[{key:"gen",value:function(S){this.helper=new l.Z(S),this.data=S,this.code={ui:{h:this.helper.toUiH()}};var C=R()(this.helper.frames),T;try{for(C.s();!(T=C.n()).done;){var U=T.value,k=R()(U.groups),q;try{for(k.s();!(q=k.n()).done;){var _=q.value,G=R()(_.splits),B;try{for(G.s();!(B=G.n()).done;){var h=B.value;this.code["ui_".concat(U.name,"_").concat(_.group_name,"_").concat(h.split_id)]={c:h.toSplitC(),h:h.toSplitH()}}}catch(ne){G.e(ne)}finally{G.f()}}}catch(ne){k.e(ne)}finally{k.f()}}}catch(ne){C.e(ne)}finally{C.f()}this.errors=this.helper.check(),this.setState({show:!0,step:"check"})}},{key:"onClose",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var S=this,C=(0,c.jsx)(o.ZP,{type:"primary",onClick:function(){return S.setState({step:"generate"})},disabled:this.errors.filter(function(U){return U.level==="error"}).length>0,children:"Generate"}),T=(0,c.jsx)(o.ZP,{type:"primary",onClick:function(){var k;return(k=S.downloadRef)===null||k===void 0||(k=k.current)===null||k===void 0?void 0:k.downloadChecked()},children:"Download"});return(0,c.jsx)("div",{children:(0,c.jsx)(p.Z,{title:"C Code Generator",placement:"right",onClose:function(){return S.onClose()},open:this.state.show,size:"large",getContainer:document.getElementById("content-in"),rootStyle:{inset:"25px 0 0 0"},style:{borderTop:"3px var(--ant-line-type) var(--ant-color-split)"},footer:(0,c.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",padding:5},children:this.state.step==="check"?C:T}),children:this.state.step==="check"?(0,c.jsx)(j.Z,{errors:this.errors}):(0,c.jsx)(g.Z,{code:this.code,ref:this.downloadRef})})})}}]),u}(t.Component);Q.Z=f,d()}catch(y){d(y)}})})},54433:function(te,Q,e){var Y=e(12444),d=e.n(Y),W=e(72004),R=e.n(W),H=e(31996),I=e.n(H),J=e(26037),F=e.n(J),P=e(67294),O=e(86250),r=e(63606),M=e(85893),Z=function(w){I()(s,w);var z=F()(s);function s(){return d()(this,s),z.apply(this,arguments)}return R()(s,[{key:"render",value:function(){return(0,M.jsxs)(O.Z,{style:{width:"100%"},justify:"space-between",children:[this.props.children,(0,M.jsx)("div",{children:this.props.checked&&(0,M.jsx)(r.Z,{})})]})}}]),s}(P.Component);Q.Z=Z},58377:function(te,Q,e){e.a(te,function(Y,d){return De(this,null,function*(){try{var W=e(15009),R=e.n(W),H=e(99289),I=e.n(H),J=e(64599),F=e.n(J),P=e(12444),O=e.n(P),r=e(72004),M=e.n(r),Z=e(25098),w=e.n(Z),z=e(31996),s=e.n(z),t=e(26037),o=e.n(t),p=e(9783),j=e.n(p),g=e(67294),l=e(14726),c=e(86250),m=e(83159),f=e(40411),y=e(73711),A=e(27732),u=e(11713),b=e(1210),S=e(52745),C=e(97937),T=e(16165),U=e(48268),k=e(62388),q=e(3213),_=e(54349),G=e(13799),B=e(82843),h=e(23481),ne=e(79476),Me=e(54433),oe=e(28348),be=e(73344),pe=e(553),de=e(30789),ie=e(22312),ue=e(44740),me=e(56134),le=e(37932),$=e(85893),ce=Y([ie,me]);[ie,me]=ce.then?(yield ce)():ce;var Se=[{key:"File-new",label:"New"},{key:"File-open",label:"Open"},{key:"File-save",label:"Save"},{key:"File-saveAs",label:"Save as"},{key:"File-autoSave",label:"Auto Save"},{type:"divider"},{key:"File-generate",label:"Generate Code",icon:(0,$.jsx)(y.Z,{})}],ge=[{key:"Edit-undo",label:"Undo"},{key:"Edit-redo",label:"Redo"},{key:"Edit-reset",label:"Reset History"}],xe=[{key:"Simulate-from",label:"From Robot",children:[{key:"Simulate-from-start",label:"Start"},{key:"Simulate-from-stop",label:"Stop"},{key:"Simulate-from-log",label:"Debug Log"}]},{key:"Simulate-to",label:"To Referee",children:[{key:"Simulate-to-start",label:"Start"},{key:"Simulate-to-stop",label:"Stop"},{key:"Simulate-to-update",label:"Update"}]},{key:"Simulate-settings",label:"Settings"}],ze=function(je){s()(Ae,je);var Re=o()(Ae);function Ae(){var ae;O()(this,Ae);for(var he=arguments.length,Ie=new Array(he),fe=0;fe<he;fe++)Ie[fe]=arguments[fe];return ae=Re.call.apply(Re,[this].concat(Ie)),j()(w()(ae),"state",{fullscreen:!1,frames:["default"],selectedFrame:"default",darkMode:!1,couldUndo:!1,couldRedo:!1,serialStart:!1,serialToStart:!1,autoSave:!0}),j()(w()(ae),"formRef",(0,g.createRef)()),j()(w()(ae),"aboutRef",(0,g.createRef)()),j()(w()(ae),"generatorRef",(0,g.createRef)()),j()(w()(ae),"logDrawerRef",(0,g.createRef)()),j()(w()(ae),"serialModalRef",(0,g.createRef)()),j()(w()(ae),"modeModalRef",(0,g.createRef)()),j()(w()(ae),"tauri",(0,de.UP)()),j()(w()(ae),"serial",new ue.Z(function(Ce){return ae.onSerialEvent(Ce)},function(Ce){return ae.onSerialError(Ce)})),j()(w()(ae),"serialTo",new me.Z),j()(w()(ae),"fileHandler",null),ae}return M()(Ae,[{key:"onSerialEvent",value:function(he){var Ie=F()(he.events),fe;try{for(Ie.s();!(fe=Ie.n()).done;){var Ce=fe.value;this.props.onObjectEvent(Ce.type,Ce.obj)}}catch(ee){Ie.e(ee)}finally{Ie.f()}}},{key:"onSerialError",value:function(he){this.props.setEditable(!0),this.setState({serialStart:!1}),oe.yw.error(he.text)}},{key:"componentDidMount",value:function(){var ae=I()(R()().mark(function Ie(){var fe=this,Ce,ee,K,L,E;return R()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(K=function(){return K=I()(R()().mark(function x(){var D;return R()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,be.G.isMaximized();case 2:D=N.sent,Ce.setState({fullscreen:D});case 4:case"end":return N.stop()}},x)})),K.apply(this,arguments)},ee=function(){return K.apply(this,arguments)},Ce=this,!this.tauri){a.next=8;break}return a.next=6,ee();case 6:return a.next=8,be.G.onResized(function(i){return ee()});case 8:return a.next=11,(L=this.modeModalRef.current)===null||L===void 0?void 0:L.open();case 11:if(E=a.sent,E!=="new"){a.next=25;break}return this.fileHandler=new le.X(function(){return JSON.stringify({version:2,data:fe.props.getData(),selected:fe.state.selectedFrame})}),a.next=16,this.fileHandler.create();case 16:if(!a.sent){a.next=23;break}return a.t0=this.props,a.next=20,this.fileHandler.read();case 20:return a.t1=a.sent,a.t0.upload.call(a.t0,a.t1),a.abrupt("break",42);case 23:a.next=40;break;case 25:if(E!=="open"){a.next=38;break}return this.fileHandler=new le.X(function(){return JSON.stringify({version:2,data:fe.props.getData(),selected:fe.state.selectedFrame})}),a.next=29,this.fileHandler.open();case 29:if(!a.sent){a.next=36;break}return a.t2=this.props,a.next=33,this.fileHandler.read();case 33:return a.t3=a.sent,a.t2.upload.call(a.t2,a.t3),a.abrupt("break",42);case 36:a.next=40;break;case 38:return this.setState({autoSave:!1}),a.abrupt("break",42);case 40:a.next=8;break;case 42:window.addEventListener("keydown",function(){var i=I()(R()().mark(function x(D){return R()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(!(D.ctrlKey&&D.key==="s")){N.next=8;break}if(D.preventDefault(),!fe.fileHandler){N.next=7;break}return N.next=5,fe.fileHandler.save();case 5:N.next=8;break;case 7:(0,de.q7)(fe.props.getData(),"ui.rmui",fe.state.selectedFrame);case 8:case"end":return N.stop()}},x)}));return function(x){return i.apply(this,arguments)}}());case 43:case"end":return a.stop()}},Ie,this)}));function he(){return ae.apply(this,arguments)}return he}()},{key:"setCouldDo",value:function(he){this.setState({couldUndo:he.couldPrevious,couldRedo:he.couldNext}),this.fileHandler&&this.state.autoSave&&this.fileHandler.update()}},{key:"fullScreen",value:function(){if(this.tauri)be.G.maximize();else{var he=document.documentElement;he.requestFullscreen?he.requestFullscreen():he.msRequestFullscreen?he.msRequestFullscreen():he.mozRequestFullScreen?he.mozRequestFullScreen():he.webkitRequestFullscreen&&he.webkitRequestFullscreen()}this.setState({fullscreen:!0})}},{key:"exitFullscreen",value:function(){this.tauri?be.G.unmaximize():document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),this.setState({fullscreen:!1})}},{key:"setFrames",value:function(he){this.setState({frames:he.frames,selectedFrame:he.selected})}},{key:"onMenuClick",value:function(){var ae=I()(R()().mark(function Ie(fe){var Ce=this,ee,K,L,E,v,a,i,x,D,V,N;return R()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(ee=fe.keyPath[fe.keyPath.length-1],ee.slice(0,6)!=="Insert"){n.next=7;break}K=fe.key.slice(7),L={id:-1,name:"New".concat(K),layer:0,group:"Ungroup",type:"Ui".concat(K)},this.props.onObjectEvent("_add",L),n.next=199;break;case 7:if(ee!=="Edit-reset"){n.next=11;break}this.props.onHistoryEvent("resetNow"),n.next=199;break;case 11:if(ee!=="Edit-undo"){n.next=15;break}this.props.onHistoryEvent("previous"),n.next=199;break;case 15:if(ee!=="Edit-redo"){n.next=19;break}this.props.onHistoryEvent("next"),n.next=199;break;case 19:if(ee!=="File-new"){n.next=40;break}if(!this.fileHandler){n.next=36;break}return n.next=23,this.fileHandler.disableAutoSave();case 23:return this.setState({autoSave:!1}),n.next=26,this.fileHandler.create();case 26:if(!n.sent){n.next=34;break}return n.t0=this.props,n.next=30,this.fileHandler.read();case 30:n.t1=n.sent,n.t0.upload.call(n.t0,n.t1),this.fileHandler.enableAutoSave(),this.setState({autoSave:!0});case 34:n.next=38;break;case 36:this.props.reset(),this.props.onHistoryEvent("reset");case 38:n.next=199;break;case 40:if(ee!=="File-save"){n.next=49;break}if(!this.fileHandler){n.next=46;break}return n.next=44,this.fileHandler.save();case 44:n.next=47;break;case 46:(0,de.q7)(this.props.getData(),"ui.rmui",this.state.selectedFrame);case 47:n.next=199;break;case 49:if(ee!=="File-saveAs"){n.next=63;break}if(!this.fileHandler){n.next=61;break}return n.next=53,this.fileHandler.disableAutoSave();case 53:return this.setState({autoSave:!1}),n.next=56,this.fileHandler.create();case 56:if(!n.sent){n.next=61;break}return n.next=59,this.fileHandler.save();case 59:this.fileHandler.enableAutoSave(),this.setState({autoSave:!0});case 61:n.next=199;break;case 63:if(ee!=="File-autoSave"){n.next=74;break}if(!this.fileHandler){n.next=72;break}if(!this.state.autoSave){n.next=70;break}return n.next=68,this.fileHandler.disableAutoSave();case 68:n.next=71;break;case 70:this.fileHandler.enableAutoSave();case 71:this.setState({autoSave:!this.state.autoSave});case 72:n.next=199;break;case 74:if(ee!=="File-open"){n.next=94;break}if(!this.fileHandler){n.next=91;break}return n.next=78,this.fileHandler.disableAutoSave();case 78:return this.setState({autoSave:!1}),n.next=81,this.fileHandler.open();case 81:if(!n.sent){n.next=89;break}return n.t2=this.props,n.next=85,this.fileHandler.read();case 85:n.t3=n.sent,n.t2.upload.call(n.t2,n.t3),this.fileHandler.enableAutoSave(),this.setState({autoSave:!0});case 89:n.next=92;break;case 91:(0,de.cT)(".rmui").then(function(re){Ce.props.upload(re)}).catch(function(){});case 92:n.next=199;break;case 94:if(ee!=="File-generate"){n.next=98;break}(E=this.generatorRef.current)===null||E===void 0||E.gen(this.props.getData()),n.next=199;break;case 98:if(ee!=="FrameOp-add"){n.next=105;break}return n.next=101,this.formRef.current.open("New Frame",this.state.frames);case 101:v=n.sent,this.props.setFrame("add",v),n.next=199;break;case 105:if(ee!=="FrameOp-remove"){n.next=109;break}this.props.setFrame("remove",this.state.selectedFrame),n.next=199;break;case 109:if(ee!=="FrameOp-copy"){n.next=116;break}return n.next=112,this.formRef.current.open("Copy Frame To",this.state.frames);case 112:a=n.sent,this.props.setFrame("copy",a),n.next=199;break;case 116:if(ee!=="FrameOp-rename"){n.next=123;break}return n.next=119,this.formRef.current.open("Rename Frame To",this.state.frames);case 119:i=n.sent,this.props.setFrame("rename",i),n.next=199;break;case 123:if(ee!=="FrameOp-change"){n.next=128;break}x=fe.key.slice(7),this.props.setFrame("change",x),n.next=199;break;case 128:if(fe.key!=="Simulate-from-start"){n.next=141;break}return n.prev=129,n.next=132,this.serial.connect();case 132:this.props.setEditable(!1),this.setState({serialStart:!0}),n.next=139;break;case 136:n.prev=136,n.t4=n.catch(129),oe.yw.error(n.t4.text);case 139:n.next=199;break;case 141:if(fe.key!=="Simulate-from-stop"){n.next=154;break}return n.prev=142,n.next=145,this.serial.stop();case 145:this.props.setEditable(!0),this.setState({serialStart:!1}),n.next=152;break;case 149:n.prev=149,n.t5=n.catch(142),oe.yw.error(n.t5.text);case 152:n.next=199;break;case 154:if(fe.key!=="Simulate-from-log"){n.next=158;break}(D=this.logDrawerRef.current)===null||D===void 0||D.show(this.serial.getLog()),n.next=199;break;case 158:if(fe.key!=="Simulate-to-start"){n.next=171;break}return n.prev=159,n.next=162,this.serialTo.connect();case 162:oe.yw.warning("This Module is beta now, maybe not work!"),this.setState({serialToStart:!0}),n.next=169;break;case 166:n.prev=166,n.t6=n.catch(159),oe.yw.error(n.t6.text);case 169:n.next=199;break;case 171:if(fe.key!=="Simulate-to-stop"){n.next=183;break}return n.prev=172,n.next=175,this.serialTo.stop();case 175:this.setState({serialToStart:!1}),n.next=181;break;case 178:n.prev=178,n.t7=n.catch(172),oe.yw.error(n.t7.text);case 181:n.next=199;break;case 183:if(fe.key!=="Simulate-to-update"){n.next=194;break}return n.prev=184,n.next=187,this.serialTo.write({data:this.props.getData(),selected:this.state.selectedFrame});case 187:n.next=192;break;case 189:n.prev=189,n.t8=n.catch(184),oe.yw.error(n.t8.text);case 192:n.next=199;break;case 194:if(ee!=="Simulate-settings"){n.next=199;break}return n.next=197,(V=this.serialModalRef.current)===null||V===void 0?void 0:V.getOptions(this.serial.options);case 197:N=n.sent,N&&(this.serial.options=N);case 199:case"end":return n.stop()}},Ie,this,[[129,136],[142,149],[159,166],[172,178],[184,189]])}));function he(Ie){return ae.apply(this,arguments)}return he}()},{key:"getFramesMenu",value:function(){var he=[{key:"FrameOp-add",label:"New Frame"},{key:"FrameOp-copy",label:"Copy This Frame"},{key:"FrameOp-rename",label:"Rename This Frame"},{key:"FrameOp-remove",label:"Remove This Frame"},{key:"FrameOp-change",label:"Change to",selectable:"true",children:[]}],Ie=F()(this.state.frames),fe;try{for(Ie.s();!(fe=Ie.n()).done;){var Ce=fe.value;he[4].children.push({key:"Frames-".concat(Ce),label:Ce})}}catch(ee){Ie.e(ee)}finally{Ie.f()}return he}},{key:"render",value:function(){var he=this,Ie=(0,$.jsx)(l.ZP,{type:"text",onClick:function(){return he.fullScreen()},size:"small",children:(0,$.jsx)(A.Z,{style:{color:"var(--ant-color-text)"}})}),fe=(0,$.jsx)(l.ZP,{type:"text",onClick:function(){return he.exitFullscreen()},size:"small",children:(0,$.jsx)(u.Z,{style:{color:"var(--ant-color-text)"}})}),Ce=(0,$.jsx)(l.ZP,{type:"text",onClick:function(){return he.props.setDarkMode(!0)},size:"small",children:(0,$.jsx)(T.Z,{component:G.r})}),ee=(0,$.jsx)(l.ZP,{type:"text",onClick:function(){return he.props.setDarkMode(!1)},size:"small",children:(0,$.jsx)(T.Z,{component:B.r})});return ge[0].disabled=!this.state.couldUndo,ge[1].disabled=!this.state.couldRedo,xe[0].disabled=this.state.serialToStart,xe[1].disabled=this.state.serialStart,xe[2].disabled=this.state.serialStart||this.state.serialToStart,xe[0].children[0].disabled=this.state.serialStart,xe[0].children[1].disabled=!this.state.serialStart,xe[1].children[0].disabled=this.state.serialToStart,xe[1].children[1].disabled=!this.state.serialToStart,xe[1].children[2].disabled=!this.state.serialToStart,Se[3].disabled=!this.fileHandler,Se[4].disabled=!this.fileHandler,Se[4].label=(0,$.jsx)(Me.Z,{checked:this.state.autoSave,children:"Auto Save"}),(0,$.jsxs)("div",{style:{width:"100%",height:32,marginTop:-5,zIndex:2e3,position:"relative"},className:"solid-color","data-tauri-drag-region":!0,children:[(0,$.jsxs)(c.Z,{style:{width:"100vw",display:"flex",paddingTop:-5},justify:"flex-start",align:"center","data-tauri-drag-region":!0,children:[(0,$.jsx)("div",{style:{fontFamily:"YouSheBiaoTiHei",fontSize:20,paddingLeft:6,paddingRight:6,paddingTop:3,display:"flex",color:"var(--ant-color-text)",cursor:"default"},"data-tauri-drag-region":!0,children:"RoboMaster UI Designer"}),(0,$.jsx)(m.Z,{menu:{items:[].concat(Se),onClick:function(L){return he.onMenuClick(L)}},children:(0,$.jsx)(l.ZP,{type:"text",size:"small",children:"File"})}),(0,$.jsx)(m.Z,{menu:{items:[].concat(ge),onClick:function(L){return he.onMenuClick(L)}},children:(0,$.jsx)(l.ZP,{type:"text",size:"small",children:"Edit"})}),(0,$.jsx)(m.Z,{menu:{items:(0,k.t)(),onClick:function(L){return he.onMenuClick(L)}},children:(0,$.jsx)(l.ZP,{type:"text",size:"small",children:"Insert"})}),(0,$.jsx)(m.Z,{menu:{items:this.getFramesMenu(),onClick:function(L){return he.onMenuClick(L)},selectedKeys:["Frames-".concat(this.state.selectedFrame)]},children:(0,$.jsx)(l.ZP,{type:"text",size:"small",children:"Frames"})}),(0,$.jsx)(m.Z,{menu:{items:[].concat(xe),onClick:function(L){return he.onMenuClick(L)}},children:(0,$.jsxs)(l.ZP,{type:"text",size:"small",children:["Simulate\xA0",(0,$.jsx)(f.Z,{color:this.state.serialStart||this.state.serialToStart?"green":"red"})]})}),(0,$.jsx)(l.ZP,{type:"text",size:"small",onClick:function(){var L;(L=he.aboutRef.current)===null||L===void 0||L.show()},children:"About"}),(0,$.jsxs)("div",{style:{marginRight:5,justifyContent:"flex-end",marginLeft:"auto",marginTop:2},"data-tauri-drag-region":!0,children:[(0,$.jsxs)("div",{style:{display:"inline",marginRight:15,fontSize:10,cursor:"default",color:"var(--ant-color-text)"},"data-tauri-drag-region":!0,children:["Created by\xA0",(0,$.jsx)("a",{href:"https://github.com/bismarckkk",target:"_blank",children:(0,$.jsx)(l.ZP,{type:"link",style:{padding:0},size:"small","data-tauri-drag-region":!0,children:"Bismarckkk"})})]}),this.props.darkMode?ee:Ce,(0,$.jsx)("a",{href:"https://github.com/bismarckkk/RM-UI-Designer",target:"_blank",children:(0,$.jsx)(l.ZP,{type:"text",size:"small",children:(0,$.jsx)(b.Z,{style:{color:"var(--ant-color-text)"}})})}),(0,$.jsx)(l.ZP,{type:"text",size:"small",onClick:function(){return be.G.minimize()},style:{display:this.tauri?"inline":"none"},children:(0,$.jsx)(S.Z,{style:{color:"var(--ant-color-text)"}})}),this.state.fullscreen?fe:Ie,(0,$.jsx)(l.ZP,{type:"text",size:"small",onClick:function(){return(0,pe.J)()},style:{display:this.tauri?"inline":"none"},children:(0,$.jsx)(C.Z,{style:{color:"var(--ant-color-text)"}})})]})]}),(0,$.jsx)(U.Z,{ref:this.formRef}),(0,$.jsx)(q.Z,{ref:this.aboutRef}),(0,$.jsx)(ie.Z,{ref:this.generatorRef}),(0,$.jsx)(ne.Z,{ref:this.logDrawerRef}),(0,$.jsx)(h.Z,{ref:this.serialModalRef}),(0,$.jsx)(_.Z,{ref:this.modeModalRef})]})}}]),Ae}(g.Component);Q.Z=ze,d()}catch(je){d(je)}})})},3213:function(te,Q,e){var Y=e(97857),d=e.n(Y),W=e(13769),R=e.n(W),H=e(12444),I=e.n(H),J=e(72004),F=e.n(J),P=e(25098),O=e.n(P),r=e(31996),M=e.n(r),Z=e(26037),w=e.n(Z),z=e(9783),s=e.n(z),t=e(67294),o=e(85576),p=e(40249),j=e(21798),g=e(85893),l=["node"],c=function(m){M()(y,m);var f=w()(y);function y(){var A;I()(this,y);for(var u=arguments.length,b=new Array(u),S=0;S<u;S++)b[S]=arguments[S];return A=f.call.apply(f,[this].concat(b)),s()(O()(A),"state",{open:!1,content:null}),A}return F()(y,[{key:"show",value:function(){this.setState({open:!0})}},{key:"componentDidMount",value:function(){var u=this;fetch(e(99734)).then(function(b){return b.text()}).then(function(b){u.setState({content:b})})}},{key:"render",value:function(){var u=this;return(0,g.jsx)(o.Z,{title:"About",onOk:function(){return u.setState({open:!1})},onCancel:function(){return u.setState({open:!1})},footer:null,open:this.state.open,children:this.state.content?(0,g.jsx)(j.U,{components:{a:function(S){var C=S.node,T=R()(S,l);return(0,g.jsx)("a",d()(d()({},T),{},{target:"_blank"}))}},children:this.state.content}):(0,g.jsx)(p.Z,{})})}}]),y}(t.Component);Q.Z=c},41327:function(te,Q,e){var Y=e(97857),d=e.n(Y),W=e(13769),R=e.n(W),H=e(12444),I=e.n(H),J=e(72004),F=e.n(J),P=e(25098),O=e.n(P),r=e(31996),M=e.n(r),Z=e(26037),w=e.n(Z),z=e(9783),s=e.n(z),t=e(67294),o=e(85576),p=e(42075),j=e(14726),g=e(40249),l=e(21798),c=e(85893),m=["node"],f=function(y){M()(u,y);var A=w()(u);function u(){var b;I()(this,u);for(var S=arguments.length,C=new Array(S),T=0;T<S;T++)C[T]=arguments[T];return b=A.call.apply(A,[this].concat(C)),s()(O()(b),"state",{open:!1,content:null}),b}return F()(u,[{key:"componentDidMount",value:function(){var S=this,C=localStorage.getItem("eula");(!C||!JSON.parse(C))&&(this.setState({open:!0}),fetch(e(19293)).then(function(T){return T.text()}).then(function(T){S.setState({content:T})}))}},{key:"dontShow",value:function(){localStorage.setItem("eula","true"),this.setState({open:!1})}},{key:"render",value:function(){var S=this;return(0,c.jsx)(o.Z,{title:"Welcome to RM UI Designer!",onOk:function(){return S.setState({open:!1})},onCancel:function(){return S.setState({open:!1})},footer:(0,c.jsxs)(p.Z,{children:[(0,c.jsx)(j.ZP,{onClick:this.dontShow.bind(this),children:"Don't show"}),(0,c.jsx)(j.ZP,{type:"primary",onClick:function(){return S.setState({open:!1})},children:"OK"})]}),open:this.state.open,zIndex:2200,children:this.state.content?(0,c.jsx)(l.U,{components:{a:function(T){var U=T.node,k=R()(T,m);return(0,c.jsx)("a",d()(d()({},k),{},{target:"_blank"}))}},children:this.state.content}):(0,c.jsx)(g.Z,{})})}}]),u}(t.Component);Q.Z=f},48268:function(te,Q,e){var Y=e(64599),d=e.n(Y),W=e(15009),R=e.n(W),H=e(99289),I=e.n(H),J=e(12444),F=e.n(J),P=e(72004),O=e.n(P),r=e(25098),M=e.n(r),Z=e(31996),w=e.n(Z),z=e(26037),s=e.n(z),t=e(9783),o=e.n(t),p=e(67294),j=e(37476),g=e(5966),l=e(85893),c=function(m){w()(y,m);var f=s()(y);function y(){var A;F()(this,y);for(var u=arguments.length,b=new Array(u),S=0;S<u;S++)b[S]=arguments[S];return A=f.call.apply(f,[this].concat(b)),o()(M()(A),"state",{title:"",open:!1,frames:[]}),o()(M()(A),"promise",null),A}return O()(y,[{key:"open",value:function(u,b){var S=this;return new Promise(function(C,T){S.setState({title:u,open:!0,frames:b}),S.promise&&S.promise.reject(),S.promise={resolve:C,reject:T}})}},{key:"render",value:function(){var u=this;return(0,l.jsx)(j.Y,{title:this.state.title,autoFocusFirstInput:!0,width:240,open:this.state.open,onOpenChange:function(S){u.promise&&!S&&u.state.open&&u.promise.reject(),u.setState({open:S})},onFinish:function(){var b=I()(R()().mark(function S(C){return R()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return u.promise.resolve(C.frame),u.promise=null,U.abrupt("return",!0);case 3:case"end":return U.stop()}},S)}));return function(S){return b.apply(this,arguments)}}(),children:(0,l.jsx)(g.Z,{name:"frame",label:"New Frame Name",width:"sm",rules:[{required:!0,message:"Please input frame name!"},function(b){var S=b.getFieldValue,C=u;return{validator:function(U,k){{var q=!0,_=S("frame"),G=d()(C.state.frames),B;try{for(G.s();!(B=G.n()).done;){var h=B.value;if(h===_){q=!1;break}}}catch(ne){G.e(ne)}finally{G.f()}return q?Promise.resolve():Promise.reject(new Error("Cannot create same name frame!"))}}}}]})})}}]),y}(p.Component);Q.Z=c},79476:function(te,Q,e){var Y=e(12444),d=e.n(Y),W=e(72004),R=e.n(W),H=e(25098),I=e.n(H),J=e(31996),F=e.n(J),P=e(26037),O=e.n(P),r=e(9783),M=e.n(r),Z=e(67294),w=e(21797),z=e(2487),s=e(42075),t=e(85265),o=e(28058),p=e(18429),j=e(85893),g=function(l){F()(m,l);var c=O()(m);function m(){var f;d()(this,m);for(var y=arguments.length,A=new Array(y),u=0;u<y;u++)A[u]=arguments[u];return f=c.call.apply(c,[this].concat(A)),M()(I()(f),"state",{show:!1,errors:[]}),f}return R()(m,[{key:"onClose",value:function(){this.setState({show:!1})}},{key:"show",value:function(y){this.setState({show:!0,errors:y})}},{key:"render",value:function(){var y=this,A=this.state.errors.filter(function(S){return S.level==="warn"}),u=this.state.errors.filter(function(S){return S.level==="error"}),b=(0,j.jsx)(w.ZP,{status:"success",title:"0 error, 0 warning!",style:{marginTop:"50px"}});return u.length+A.length>0&&(b=(0,j.jsxs)("div",{style:{color:"var(--ant-color-text)",height:"100%"},children:[(0,j.jsxs)("p",{children:["Logged ",u.length," errors, ",A.length," warnings."]}),(0,j.jsx)("div",{style:{paddingBottom:10},className:"card-body",children:(0,j.jsx)(z.Z,{bordered:!0,dataSource:this.state.errors,renderItem:function(C){return(0,j.jsx)(z.Z.Item,{children:(0,j.jsxs)(s.Z,{size:"middle",children:[C.level==="warn"?(0,j.jsx)(o.Z,{}):(0,j.jsx)(p.Z,{}),"".concat(C.time.toLocaleTimeString(),": ").concat(C.message)]})})}})})]})),(0,j.jsx)(t.Z,{title:"Serial Debug Log",placement:"right",onClose:function(){return y.onClose()},open:this.state.show,size:"large",getContainer:document.getElementById("content-in"),rootStyle:{inset:"25px 0 0 0"},style:{borderTop:"3px var(--ant-line-type) var(--ant-color-split)"},children:(0,j.jsx)("div",{style:{width:"100%",height:"calc(100% - 25px)"},children:b})})}}]),m}(Z.Component);Q.Z=g},54349:function(te,Q,e){var Y=e(12444),d=e.n(Y),W=e(72004),R=e.n(W),H=e(25098),I=e.n(H),J=e(31996),F=e.n(J),P=e(26037),O=e.n(P),r=e(9783),M=e.n(r),Z=e(67294),w=e(85576),z=e(42075),s=e(14726),t=e(96074),o=e(37932),p=e(85893),j=function(g){F()(c,g);var l=O()(c);function c(){var m;d()(this,c);for(var f=arguments.length,y=new Array(f),A=0;A<f;A++)y[A]=arguments[A];return m=l.call.apply(l,[this].concat(y)),M()(I()(m),"state",{title:"",open:!1,frames:[]}),M()(I()(m),"promise",null),m}return R()(c,[{key:"open",value:function(){var f=this;return new Promise(function(y,A){f.setState({open:!0}),f.promise&&f.promise.reject(),f.promise={resolve:y,reject:A}})}},{key:"onClick",value:function(f){this.setState({open:!1}),this.promise.resolve(f),this.promise=null}},{key:"render",value:function(){var f=this,y=(0,o._)();return(0,p.jsx)(w.Z,{footer:null,maskClosable:!1,closeIcon:null,zIndex:2050,open:this.state.open,children:(0,p.jsxs)(z.Z,{direction:"vertical",size:"middle",style:{width:"100%",padding:15},children:[(0,p.jsx)(s.ZP,{type:"primary",disabled:!y,style:{width:"100%"},size:"large",onClick:function(){return f.onClick("new")},children:"New Project"}),(0,p.jsx)(s.ZP,{type:"primary",disabled:!y,style:{width:"100%"},size:"large",onClick:function(){return f.onClick("open")},children:"Open Exist"}),(0,p.jsx)(t.Z,{}),(0,p.jsx)(s.ZP,{type:"primary",style:{width:"100%"},size:"large",onClick:function(){return f.onClick("use")},children:"Temporary Use"})]})})}}]),c}(Z.Component);Q.Z=j},23481:function(te,Q,e){var Y=e(15009),d=e.n(Y),W=e(99289),R=e.n(W),H=e(12444),I=e.n(H),J=e(72004),F=e.n(J),P=e(25098),O=e.n(P),r=e(31996),M=e.n(r),Z=e(26037),w=e.n(Z),z=e(9783),s=e.n(z),t=e(67294),o=e(37476),p=e(64317),j=e(85893),g=[1152e3,1e6,921600,576e3,5e5,460800,230400,115200,74800,57600,38400,19200,9600,4800],l=function(c){M()(f,c);var m=w()(f);function f(){var y;I()(this,f);for(var A=arguments.length,u=new Array(A),b=0;b<A;b++)u[b]=arguments[b];return y=m.call.apply(m,[this].concat(u)),s()(O()(y),"state",{open:!1,defaultOptions:{}}),s()(O()(y),"promise",null),y}return F()(f,[{key:"getOptions",value:function(A){var u=this;return new Promise(function(b,S){u.setState({open:!0,defaultOptions:A}),u.promise&&u.promise.reject(),u.promise={resolve:b,reject:S}})}},{key:"onFinish",value:function(){var y=R()(d()().mark(function u(b){return d()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.promise.resolve(b),this.promise=null,C.abrupt("return",!0);case 3:case"end":return C.stop()}},u,this)}));function A(u){return y.apply(this,arguments)}return A}()},{key:"render",value:function(){var A=this;return(0,j.jsxs)(o.Y,{title:"Serial",width:400,open:this.state.open,onOpenChange:function(b){return A.setState({open:b})},onFinish:function(){var u=R()(d()().mark(function b(S){return d()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,A.onFinish(S);case 2:return T.abrupt("return",T.sent);case 3:case"end":return T.stop()}},b)}));return function(b){return u.apply(this,arguments)}}(),children:[(0,j.jsx)(p.Z,{name:"baudRate",label:"Baud Rate",width:"sm",initialValue:this.state.defaultOptions.baudRate,options:g.map(function(u){return{value:u,label:u.toString()}}),rules:[{required:!0}]}),(0,j.jsx)(p.Z,{name:"dataBits",label:"Data Bits",width:"sm",initialValue:this.state.defaultOptions.dataBits,options:[{value:8,label:"8"},{value:7,label:"7"}],rules:[{required:!0}]}),(0,j.jsx)(p.Z,{name:"stopBits",label:"Stop Bits",width:"sm",initialValue:this.state.defaultOptions.stopBits,options:[{value:1,label:"1"},{value:2,label:"2"}],rules:[{required:!0}]}),(0,j.jsx)(p.Z,{name:"parity",label:"Parity",width:"sm",initialValue:this.state.defaultOptions.parity,options:[{value:"none",label:"None"},{value:"even",label:"Even"},{value:"odd",label:"Odd"}],rules:[{required:!0}]}),(0,j.jsx)(p.Z,{name:"flowControl",label:"Flow Control",width:"sm",initialValue:this.state.defaultOptions.flowControl,options:[{value:"none",label:"None"},{value:"hardware",label:"Hardware"}],rules:[{required:!0}]})]})}}]),f}(t.Component);Q.Z=l},4585:function(te,Q,e){e.d(Q,{Z:function(){return be}});var Y=e(97857),d=e.n(Y),W=e(13769),R=e.n(W),H=e(15009),I=e.n(H),J=e(99289),F=e.n(J),P=e(12444),O=e.n(P),r=e(72004),M=e.n(r),Z=e(25098),w=e.n(Z),z=e(31996),s=e.n(z),t=e(26037),o=e.n(t),p=e(9783),j=e.n(p),g=e(67294),l=e(21797),c=e(42075),m=e(75081),f=e(85576),y=e(14726),A=e(92462),u=e(553),b=e(30789);function S(){return C.apply(this,arguments)}function C(){return C=F()(I()().mark(function pe(){var de,ie,ue,me,le,$,ce,Se,ge,xe,ze,je,Re;return I()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(!(0,b.UP)()){ae.next=14;break}return ae.next=3,(0,A.Py)();case 3:if(de=ae.sent,!de.manifest){ae.next=11;break}return ie=de.manifest.version.slice(1).split(".").map(Number),ue=localStorage.getItem("version_ignored"),ue||(ue="nightly e45f917"),me=ue.slice(1).split(".").map(Number),le=ie[0]>me[0]||ie[1]>me[1]||ie[2]>me[2],ae.abrupt("return",{shouldUpdate:le,manifest:de.manifest});case 11:return ae.abrupt("return",de);case 14:return $=Date.now(),ae.next=17,fetch("https://ui.bismarck.xyz/update.json?".concat($));case 17:return ce=ae.sent,ae.next=20,ce.json();case 20:return Se=ae.sent,ge=Se.notes,xe=Se.version.slice(1).split(".").map(Number),ze=localStorage.getItem("version_ignored"),ze||(ze="nightly e45f917"),je=ze.slice(1).split(".").map(Number),Re=xe[0]>je[0]||xe[1]>je[1]||xe[2]>je[2],ae.abrupt("return",{shouldUpdate:Re,manifest:{body:ge,version:Se.version}});case 28:case"end":return ae.stop()}},pe)})),C.apply(this,arguments)}function T(){return U.apply(this,arguments)}function U(){return U=F()(I()().mark(function pe(){return I()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(!(0,b.UP)()){ie.next=6;break}return ie.next=3,(0,A.F_)();case 3:return ie.abrupt("return",ie.sent);case 6:window.location.reload();case 7:case"end":return ie.stop()}},pe)})),U.apply(this,arguments)}var k={checkUpdate:S,installUpdate:T,relaunch:u.R},q=e(28348),_=e(21798),G=e(85893),B=["node"],h=k.checkUpdate,ne=k.installUpdate,Me=k.relaunch,oe=function(pe){s()(ie,pe);var de=o()(ie);function ie(){var ue;O()(this,ie);for(var me=arguments.length,le=new Array(me),$=0;$<me;$++)le[$]=arguments[$];return ue=de.call.apply(de,[this].concat(le)),j()(w()(ue),"state",{step:0,content:"",version:""}),ue}return M()(ie,[{key:"handleClose",value:function(){this.setState({step:0})}},{key:"handleOk",value:function(){var ue=F()(I()().mark(function le(){return I()().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.prev=0,this.setState({step:2}),ce.next=4,ne();case 4:if(ce.t0=!(0,b.UP)(),ce.t0){ce.next=9;break}return ce.next=8,Me();case 8:ce.t0=!ce.sent;case 9:if(!ce.t0){ce.next=11;break}this.setState({step:3});case 11:ce.next=16;break;case 13:ce.prev=13,ce.t1=ce.catch(0),this.setState({step:-1});case 16:case"end":return ce.stop()}},le,this,[[0,13]])}));function me(){return ue.apply(this,arguments)}return me}()},{key:"check",value:function(){var me=this;return;var le,$}},{key:"ignore",value:function(){localStorage.setItem("version_ignored",this.state.version),this.handleClose()}},{key:"componentDidMount",value:function(){this.check()}},{key:"render",value:function(){var me=(0,G.jsx)("div",{});return this.state.step===-1?me=(0,G.jsx)(l.ZP,{status:"error",title:"Update Failed"}):this.state.step===1?me=(0,G.jsx)(_.U,{components:{a:function($){var ce=$.node,Se=R()($,B);return(0,G.jsx)("a",d()(d()({},Se),{},{target:"_blank"}))}},children:this.state.content}):this.state.step===2?me=(0,G.jsx)("div",{style:{padding:40,textAlign:"center",color:"var(--ant-color-text)"},children:(0,G.jsxs)(c.Z,{direction:"vertical",children:[(0,G.jsx)(m.Z,{size:"large"}),(0,G.jsx)("h3",{children:"Updating..."})]})}):this.state.step===3&&(me=(0,G.jsx)(l.ZP,{status:"success",title:"Update Success",subTitle:"Please restart the app to apply the update."})),(0,G.jsx)(f.Z,{title:"Auto Update",open:this.state.step,closable:this.state.step>1,maskClosable:this.state.step>1,zIndex:2100,footer:this.state.step===1?(0,G.jsxs)(c.Z,{children:[(0,G.jsx)(y.ZP,{onClick:this.ignore.bind(this),children:"Ignore"}),(0,G.jsx)(y.ZP,{onClick:this.handleClose.bind(this),children:"Cancel"}),(0,G.jsx)(y.ZP,{type:"primary",onClick:this.handleOk.bind(this),children:"Update"})]}):null,children:me})}}]),ie}(g.Component),be=oe},87159:function(te,Q,e){e.d(Q,{Z:function(){return Ce}});var Y=e(97857),d=e.n(Y),W=e(15009),R=e.n(W),H=e(64599),I=e.n(H),J=e(99289),F=e.n(J),P=e(19632),O=e.n(P),r=e(12444),M=e.n(r),Z=e(72004),w=e.n(Z),z=e(25098),s=e.n(z),t=e(31996),o=e.n(t),p=e(26037),j=e.n(p),g=e(9783),l=e.n(g),c=e(67294),m=e(63084),f=e(32983),y=e(42075),A=e(14726),u=e(28348),b=e(3909),S=e(84754),C=e(86250),T=e(83159),U=e(27847),k=e(90420),q=e(99611),_=e(94149),G=e(3355),B=e(80882),h=e(85893),ne=function(ee){o()(L,ee);var K=j()(L);function L(){var E;M()(this,L);for(var v=arguments.length,a=new Array(v),i=0;i<v;i++)a[i]=arguments[i];return E=K.call.apply(K,[this].concat(a)),l()(s()(E),"state",{status:E.props.defaultStatus||!1}),E}return w()(L,[{key:"render",value:function(){var v=this;return(0,h.jsx)(A.ZP,{size:"small",type:"text",onClick:function(){v.props.onChange&&v.props.onChange(!v.state.status),v.setState({status:!v.state.status})},children:this.state.status?this.props.onNode||"ON":this.props.offNode||"OFF"})}}]),L}(c.Component),Me=ne;function oe(ee){return ee.map(function(K){return K===-2?"window":"E-".concat(K)})}var be=[{key:"D1-group-layer",label:"layer"},{key:"D1-group-group",label:"group"}],pe=function(ee){o()(L,ee);var K=j()(L);function L(){var E;M()(this,L);for(var v=arguments.length,a=new Array(v),i=0;i<v;i++)a[i]=arguments[i];return E=K.call.apply(K,[this].concat(a)),l()(s()(E),"state",{treeData:[],rightClickMenuOpen:!1,groupKey:"layer"}),l()(s()(E),"treeData",[]),E}return w()(L,[{key:"selectKey2id",value:function(v){var a=this,i=[],x=I()(v),D;try{var V=function(){var X=D.value;if(X==="window")i.push(-2);else if(X.startsWith("E-"))i.push(parseInt(X.slice(2)));else{var n=a.treeData.find(function(ye){return ye.key===X}).children.map(function(ye){return parseInt(ye.key.slice(2))}),re=I()(n),ve;try{for(re.s();!(ve=re.n()).done;){var se=ve.value;i.includes(se)||i.push(se)}}catch(ye){re.e(ye)}finally{re.f()}}};for(x.s();!(D=x.n()).done;)V()}catch(N){x.e(N)}finally{x.f()}return i}},{key:"onElementMenuContainerClick",value:function(v){this.setState({rightClickMenuOpen:!1}),(v.target.classList.contains("ant-tree")||!v.ctrlKey&&!v.shiftKey)&&this.props.onSelect([])}},{key:"onElementMenuClick",value:function(v){var a=this;if(this.setState({rightClickMenuOpen:!1}),v.key==="D2-copy"){var i=null;v.target.localName!=="input"&&this.props.selectedId.length!==0&&this.props.selectedId[0]!==-2&&(v.preventDefault(),i=JSON.stringify(this.props.selectedId.map(function(N){return a.props.data[N]})),v.clipboardData.setData("text",i))}else if(v.key==="D2-delete"){var x=I()(this.props.selectedId),D;try{for(x.s();!(D=x.n()).done;){var V=D.value;this.props.onObjectEvent("remove",{id:V})}}catch(N){x.e(N)}finally{x.f()}}}},{key:"onElementRightClick",value:function(v){var a=this.selectKey2id([v.node.key]);a[0]in this.props.selectedId||this.props.onSelect(a)}},{key:"onSelect",value:function(v){if(v.length!==0){var a=this.selectKey2id(v);a.includes(-2)&&(a=[a[a.length-1]]),this.props.onSelect(a)}}},{key:"onMenuOpenChange",value:function(v){if(v){var a=this;setTimeout(function(){a.props.selectedId.length!==0&&a.props.selectedId[0]!==-2?a.setState({rightClickMenuOpen:!0}):a.setState({rightClickMenuOpen:!1})},100)}else this.setState({rightClickMenuOpen:!1})}},{key:"elementsMenuOnClick",value:function(v){var a=this;this.setState({groupKey:v.key.slice(9)},function(){return a.updateTree()})}},{key:"updateTree",value:function(){for(var v=this,a=this.state.groupKey,i=[],x=Object.keys(this.props.data),D=function(){for(var X=v.props.data[x[V]],n=-1,re=0;re<i.length;re++)if(i[re].key==="".concat(a,"-").concat(X[a])){n=re;break}n===-1&&(i.push({title:"".concat(a," ").concat(X[a]),key:"".concat(a,"-").concat(X[a]),children:[],isLeaf:!1}),n=i.length-1),i[n].children.push({title:(0,h.jsxs)(C.Z,{justify:"space-between",style:{width:"100%"},children:[X.name,(0,h.jsxs)(y.Z,{children:[(0,h.jsx)(Me,{onChange:function(se){return v.props.onObjectEvent("setAttr",{id:X.id,payload:{visible:se}})},defaultStatus:!0,offNode:(0,h.jsx)(k.Z,{}),onNode:(0,h.jsx)(q.Z,{})}),(0,h.jsx)(Me,{onChange:function(se){return v.props.onObjectEvent("setAttr",{id:X.id,payload:{selectable:se}})},defaultStatus:!0,offNode:(0,h.jsx)(_.Z,{}),onNode:(0,h.jsx)(G.Z,{style:{transform:"scaleX(-1)"}})})]})]}),key:"E-".concat(x[V])})},V=0;V<x.length;V++)D();return i=i.sort(function(N,X){return N.key.toString().localeCompare(X.key.toString())}),i.unshift({title:"UI Window",key:"window"}),this.treeData=i,i}},{key:"render",value:function(){var v=this;return(0,h.jsx)(m.Z,{size:"small",title:"Elements",style:{height:"100%"},extra:(0,h.jsx)(T.Z,{menu:{items:be,onClick:function(i){return v.elementsMenuOnClick(i)},selectable:!0,selectedKeys:["D1-group-".concat(this.state.groupKey)]},children:(0,h.jsxs)(y.Z,{style:{fontSize:11},children:["Group by",(0,h.jsx)(B.Z,{size:"small"})]})}),children:(0,h.jsx)("div",{className:"card-body",onMouseUp:function(i){return v.onElementMenuContainerClick(i)},children:(0,h.jsx)(T.Z,{menu:{items:[{key:"D2-copy",label:"Copy"},{key:"D2-delete",label:"Delete",danger:!0}],onClick:function(i){v.onElementMenuClick(i)}},trigger:["contextMenu"],open:this.state.rightClickMenuOpen,onOpenChange:function(i){v.onMenuOpenChange(i)},children:(0,h.jsx)(U.Z,{className:"full",treeData:this.updateTree(),onSelect:function(i){return v.onSelect(i)},selectedKeys:oe(this.props.selectedId),onRightClick:function(i){return v.onElementRightClick(i)},treeDefaultExpandAll:!0,showLine:!0,blockNode:!0,multiple:!0,selectable:this.props.editable})})})})}}]),L}(c.Component),de=pe,ie=e(32777),ue=e(30789),me=function(ee){o()(L,ee);var K=j()(L);function L(){return M()(this,L),K.apply(this,arguments)}return w()(L,[{key:"render",value:function(){return this.props.color==="Main"?(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{style:{border:"1px solid #aaa",height:16,width:16,borderRadius:"20%",display:"inline-flex"},children:[(0,h.jsx)("div",{style:{backgroundColor:"red",height:12,width:6,margin:"1px 0 1px 1px",borderTopLeftRadius:"20%",borderBottomLeftRadius:"20%",display:"inline-flex"}}),(0,h.jsx)("div",{style:{backgroundColor:"blue",height:12,width:6,margin:"1px 1px 1px 0",borderTopRightRadius:"20%",borderBottomRightRadius:"20%",display:"inline-flex"}})]}),"\xA0 Main"]}):(0,h.jsx)("div",{children:(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{style:{border:"1px solid #aaa",height:16,width:16,borderRadius:"20%",display:"inline-flex"},children:(0,h.jsx)("div",{style:{backgroundColor:ue.E[this.props.color.toLowerCase()],height:12,width:12,margin:1,borderRadius:"20%",display:"inline-flex"}})}),"\xA0 ",this.props.color]})})}}]),L}(c.Component),le=me,$={id:{title:"Id",key:"id",dataIndex:"id",valueType:"digit",editable:!1},name:{title:"Name",key:"name",dataIndex:"name"},group:{title:"Group",key:"group",dataIndex:"group"},kind:{title:"Kind",key:"kind",dataIndex:"kind",editable:!1},lineWidth:{title:"Line Width",key:"lineWidth",dataIndex:"lineWidth",valueType:"digit"},layer:{title:"Layer",key:"layer",dataIndex:"layer",valueType:"digit"},x:{title:"X",key:"x",dataIndex:"x",valueType:"digit"},y:{title:"Y",key:"y",dataIndex:"y",valueType:"digit"},x2:{title:"X2",key:"x2",dataIndex:"x2",valueType:"digit"},y2:{title:"Y2",key:"y2",dataIndex:"y2",valueType:"digit"},width:{title:"Width",key:"width",dataIndex:"width",valueType:"digit"},height:{title:"Height",key:"height",dataIndex:"height",valueType:"digit"},rx:{title:"Rx",key:"rx",dataIndex:"rx",valueType:"digit"},ry:{title:"Ry",key:"ry",dataIndex:"ry",valueType:"digit"},r:{title:"R",key:"r",dataIndex:"r",valueType:"digit"},startAngle:{title:"Start Angle",key:"startAngle",dataIndex:"startAngle",valueType:"digit"},endAngle:{title:"End Angle",key:"endAngle",dataIndex:"endAngle",valueType:"digit"},fontSize:{title:"Font Size",key:"fontSize",dataIndex:"fontSize",valueType:"digit"},float:{title:"Number",key:"float",dataIndex:"float",valueType:"digit"},number:{title:"Number",key:"number",dataIndex:"number",valueType:"digit"},text:{title:"Text",key:"text",dataIndex:"text",formItemProps:{rules:[{max:30},{type:"string"}]}},color:{title:"Color",key:"color",dataIndex:"color",valueType:"select",valueEnum:{main:(0,h.jsx)(le,{color:"Main"}),yellow:(0,h.jsx)(le,{color:"Yellow"}),green:(0,h.jsx)(le,{color:"Green"}),orange:(0,h.jsx)(le,{color:"Orange"}),purple:(0,h.jsx)(le,{color:"Purple"}),pink:(0,h.jsx)(le,{color:"Pink"}),cyan:(0,h.jsx)(le,{color:"Cyan"}),black:(0,h.jsx)(le,{color:"Black"}),white:(0,h.jsx)(le,{color:"White"})}},team:{title:"Team",key:"team",dataIndex:"team",valueType:"select",valueEnum:{red:(0,h.jsx)(le,{color:"Red"}),blue:(0,h.jsx)(le,{color:"Blue"})}},role:{title:"Role",key:"role",dataIndex:"role",valueType:"select",valueEnum:{1:"Hero",2:"Engineer",3:"No3. Infantry",4:"No4. Infantry",5:"No5. Infantry",6:"Drone"}},backgroundImage:{title:"Background Image",key:"backgroundImage",dataIndex:"backgroundImage",valueType:"switch"}};function ce(ee){for(var K=Object.keys(ee),L=[],E=0;E<K.length;E++)$[K[E]]&&L.push($[K[E]]);return L}var Se=e(62388);function ge(ee,K,L,E){return xe.apply(this,arguments)}function xe(){return xe=F()(R()().mark(function ee(K,L,E,v){var a,i,x,D,V,N,X,n,re,ve;return R()().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(K){ye.next=2;break}return ye.abrupt("return");case 2:if(a=1,K.version&&(a=K.version),a!==1){ye.next=10;break}return ye.next=7,E("default");case 7:for(i=0,x=Object.keys(K);i<x.length;i++)D=x[i],L("_update",K[D]);ye.next=22;break;case 10:if(a!==2){ye.next=22;break}V=0,N=Object.keys(K.data);case 12:if(!(V<N.length)){ye.next=20;break}return X=N[V],ye.next=16,E(X);case 16:for(n=0,re=Object.keys(K.data[X]);n<re.length;n++)ve=re[n],L("_update",K.data[X][ve]);case 17:V++,ye.next=12;break;case 20:return ye.next=22,E(K.selected);case 22:v();case 23:case"end":return ye.stop()}},ee)})),xe.apply(this,arguments)}var ze=e(96486),je=e.n(ze);function Re(ee){return ee.head>0?d()({},ee.data[ee.head-1]):null}function Ae(ee){return ee.head<ee.data.length-1?d()({},ee.data[ee.head+1]):null}var ae=function(){function ee(){M()(this,ee),l()(this,"cacheTimer",null),l()(this,"updateTimer",null),l()(this,"now",null),l()(this,"_previous",null),l()(this,"_next",null),l()(this,"his",null),l()(this,"catchUpdate",!0);var K=localStorage.getItem("history"),L={data:[{}],head:0,version:1};K?L=JSON.parse(K):(K=localStorage.getItem("data"),K?L.data[0]=JSON.parse(K):L.data[0]={version:2,data:{default:{}},selected:"default"},localStorage.setItem("history",JSON.stringify(L))),this.now=L.data[L.head],this._previous=Re(L),this._next=Ae(L)}return w()(ee,[{key:"save",value:function(){var L=this;this.cacheTimer&&clearTimeout(this.cacheTimer),this.cacheTimer=setTimeout(function(){L.his.head>50&&(L.his.data=L.his.data.slice(L.his.head-50),L.his.head=50),L.his.head<L.his.data.length-20&&(L.his.data=L.his.data.slice(0,L.his.head+20)),localStorage.setItem("history",JSON.stringify(L.his)),L.his=null},2e3)}},{key:"read",value:function(){this.his||(this.his=JSON.parse(localStorage.getItem("history")))}},{key:"get",value:function(){return this.catchUpdate?{now:this.now,couldNext:this._next!==null,couldPrevious:this._previous!==null}:{now:this.now,couldNext:!1,couldPrevious:!1}}},{key:"reset",value:function(L){return this._previous=null,this._next=null,this.his={data:[L],head:0,version:1},this.save(),this.get()}},{key:"next",value:function(){return this._next&&(this._previous=this.now,this.now=this._next,this.read(),this.his.head++,this._next=Ae(this.his),this.save()),this.get()}},{key:"previous",value:function(){return this._previous&&(this._next=this.now,this.now=this._previous,this.read(),this.his.head--,this._previous=Re(this.his),this.save()),this.get()}},{key:"cancelUpdate",value:function(){this.updateTimer&&clearTimeout(this.updateTimer)}},{key:"update",value:function(L){var E=this;this.catchUpdate&&(this.updateTimer&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout(function(){je().isEqual(L,E.now)||(E._previous=E.now,E.now=L,E.read(),E.his.data=E.his.data.slice(0,E.his.head+1),E.his.data.push(L),E.his.head++,E._next=null,E.save())},500))}}]),ee}(),he=ae,Ie=e(30819),fe=function(ee){o()(L,ee);var K=j()(L);function L(){var E;M()(this,L);for(var v=arguments.length,a=new Array(v),i=0;i<v;i++)a[i]=arguments[i];return E=K.call.apply(K,[this].concat(a)),l()(s()(E),"objects",{default:{}}),l()(s()(E),"data",{}),l()(s()(E),"state",{properties:null,selectedId:[],frame:"default",uiWindow:{height:1080,width:1920,ratio:1,team:"red",role:1,backgroundImage:!0},infoModalShow:!1,data:{},editable:!0}),l()(s()(E),"canvas",null),l()(s()(E),"canvasRef",(0,c.createRef)()),l()(s()(E),"propertiesRef",(0,c.createRef)()),l()(s()(E),"background",null),l()(s()(E),"his",new he),l()(s()(E),"moveTimer",null),l()(s()(E),"moveTimeout",null),E}return w()(L,[{key:"getNewDataId",value:function(){return Object.keys(this.state.data).length===0?0:Math.max.apply(Math,O()(Object.keys(this.state.data)))+1}},{key:"setEditable",value:function(){var E=F()(R()().mark(function a(i){var x,D,V,N,X;return R()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(this.setState({editable:i}),this.his.catchUpdate=i,this.canvas.selection=i,ie.fabric.Object.prototype.selectable=i,!i){re.next=9;break}return re.next=7,this.onHistoryEvent("refresh");case 7:re.next=15;break;case 9:return x=this.state.uiWindow.role,re.next=12,this.reset(!0);case 12:this.cancelHistoryUpdate(),this.props.setCouldDo({couldNext:!1,couldPrevious:!1}),this.setRobotId(x);case 15:D=this.canvas.getObjects(),V=I()(D);try{for(V.s();!(N=V.n()).done;)X=N.value,X.set("selectable",i)}catch(ve){V.e(ve)}finally{V.f()}this.select([]);case 19:case"end":return re.stop()}},a,this)}));function v(a){return E.apply(this,arguments)}return v}()},{key:"setRobotId",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;v===0&&(v=this.state.uiWindow.role),this.state.uiWindow.team==="blue"&&(v+=100),(0,u.ue)(v)}},{key:"cancelHistoryUpdate",value:function(){var v=this;this.his.cancelUpdate(),setTimeout(function(){v.his.cancelUpdate(),v.props.setCouldDo(v.his.get())},200)}},{key:"save",value:function(){(0,ue.q7)(this.data,"ui.rmui",this.state.frame)}},{key:"updateHistory",value:function(){var v=this;setTimeout(function(){var a={version:2,data:v.data,selected:v.state.frame};je().isEqual(a,v.his.now)||(v.his.update(a),v.props.setCouldDo({couldNext:!1,couldPrevious:!0}))},100)}},{key:"getData",value:function(){return this.data}},{key:"select",value:function(v,a){var i=this;if(v.length===0)this.setState({properties:null,selectedId:[]}),this.canvas.discardActiveObject(),this.canvas.renderAll();else if(v[0]===-2)this.setState({properties:this.state.uiWindow,selectedId:[-2]}),this.canvas.discardActiveObject(),this.canvas.renderAll();else if(v.length===1)this.setState({properties:this.state.data[v[0]],selectedId:[v[0]]}),this.canvas.setActiveObject(this.objects[this.state.frame][v[0]]),this.canvas.renderAll();else if(this.setState({properties:null,selectedId:v}),!a){var x=v.map(function(V){return i.objects[i.state.frame][V]}),D=new ie.fabric.ActiveSelection(x,{canvas:this.canvas});this.canvas.setActiveObject(D),this.canvas.renderAll()}}},{key:"reset",value:function(){var E=F()(R()().mark(function a(){var i,x,D,V=arguments;return R()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(i=V.length>0&&V[0]!==void 0?V[0]:!1,i){x=this.canvas.getObjects();for(D in x)this.canvas.remove(x[D]);this.canvas.renderAll()}else this.canvas.clear(),this.setBackground(e(25665)),this.canvas.backgroundColor="#fff";if(Object.keys(this.objects).includes("default")){X.next=5;break}return X.next=5,this.onFrameEvent("add","default");case 5:return this.objects.default={},X.next=8,this.onFrameEvent("change","default");case 8:this.objects={default:{}},this.props.onFrameChange({frames:["default"],selected:"default"}),this.select([]),this.resetCanvasSize(),this.objectsToData();case 13:case"end":return X.stop()}},a,this)}));function v(){return E.apply(this,arguments)}return v}()},{key:"resetCanvasSize",value:function(){if(this.canvas){var v,a=this.canvasRef.current.clientWidth,i=this.canvasRef.current.clientHeight,x=d()({},this.state.uiWindow);a/i<x.width/x.height?(i=a*x.height/x.width,x.ratio=x.width/a):(a=i*x.width/x.height,x.ratio=x.height/i),this.setState({uiWindow:x}),this.canvas.setHeight(i),this.canvas.setWidth(a),this.canvas.viewportTransform[5]=i,this.canvas.viewportTransform[3]=-1;var D=this.canvasRef.current.clientWidth,V=this.canvasRef.current.clientHeight,N=D-a,X=V-i,n=document.getElementById("coordinateDisplay");n.style.right="".concat(N+12,"px"),n.style.bottom="".concat(X+25,"px");for(var re=0,ve=Object.keys(this.objects[this.state.frame]);re<ve.length;re++){var se=ve[re];this.objects[this.state.frame][se].setRatio(x.ratio)}(v=this.background)===null||v===void 0||v.set({scaleX:1/x.ratio,scaleY:1/x.ratio}),this.canvas.renderAll(),this.objectsToData(),this.setState({infoModalShow:!1})}}},{key:"onPropertiesChange",value:function(v,a){var i=this;if(this.state.selectedId[0]===-2){if(a.team!==this.state.uiWindow.team){for(var x=0,D=Object.keys(this.objects[this.state.frame]);x<D.length;x++){var V=D[x];this.objects[this.state.frame][V].setTeam(a.team)}this.canvas.renderAll(),this.objectsToData()}if(this.setState({uiWindow:a,properties:a},function(){i.resetCanvasSize(),i.setRobotId()}),a.backgroundImage!==this.state.uiWindow.backgroundImage)if(a.backgroundImage){var N,X=this.state.uiWindow.ratio;(N=this.background)===null||N===void 0||N.set({scaleX:1/X,scaleY:1/X}),this.canvas.setBackgroundImage(this.background),this.canvas.renderAll()}else this.canvas.setBackgroundImage(null),this.canvas.renderAll();(a.width!==this.state.uiWindow.width||a.height!==this.state.uiWindow.height)&&u.oC.warning({title:"Warning",content:"Modify UI window width and height may cause unknown error."})}else this.state.selectedId.length===1&&(this.objects[this.state.frame][this.state.selectedId[0]].fromObject(a),this.canvas.renderAll(),this.objectsToData(),this.updateHistory())}},{key:"setBackground",value:function(v){var a=this;ie.fabric.Image.fromURL(v,function(i,x){var D;a.background=i;var V=a.state.uiWindow.ratio;(D=a.background)===null||D===void 0||D.set({scaleX:1/V,scaleY:-1/V}),a.state.uiWindow.backgroundImage&&(a.canvas.setBackgroundImage(a.background),a.canvas.renderAll())})}},{key:"componentDidMount",value:function(){var v=this,a=this;this.canvas=new ie.fabric.Canvas("ui"),this.setBackground(e(25665)),this.canvas.backgroundColor="#fff",window.addEventListener("resize",function(){v.resetCanvasSize()},!1),window.addEventListener("copy",function(i){var x=null;console.log(i.target,(0,ue.jK)(i.target)),!(0,ue.jK)(i.target)&&a.state.selectedId.length!==0&&a.state.selectedId[0]!==-2&&(i.preventDefault(),x=JSON.stringify(a.state.selectedId.map(function(D){return a.state.data[D]})),i.clipboardData.setData("text",x))}),window.addEventListener("paste",function(i){for(var x=!1,D=i.clipboardData.items,V=0;V<D.length;V++)if(D[V].type.indexOf("image")===0){i.preventDefault(),x=!0;var N=D[V].getAsFile(),X=new FileReader;X.onload=function(Te){a.setBackground(Te.target.result)},X.readAsDataURL(N)}if(!x&&!(0,ue.jK)(i.target))try{i.preventDefault();var n=i.clipboardData.getData("text"),re=JSON.parse(n);Array.isArray(re)||(re=[re]);var ve=[],se=20,ye=I()(re),ke;try{var Ue=function(){var we=ke.value;setTimeout(function(){we.id=a.getNewDataId(),ve.push(we.id),a.onObjectEvent("_update",we)},se),se+=20};for(ye.s();!(ke=ye.n()).done;)Ue()}catch(Te){ye.e(Te)}finally{ye.f()}setTimeout(function(){a.select(ve),v.updateHistory()},se)}catch(Te){u.yw.warning("Invalid data")}}),window.addEventListener("keydown",function(i){if(i.key==="Delete"&&a.state.selectedId.length!==0&&a.state.selectedId[0]!==-2){var x=I()(a.state.selectedId),D;try{for(x.s();!(D=x.n()).done;){var V=D.value;a.onObjectEvent("remove",{id:V})}}catch(n){x.e(n)}finally{x.f()}v.updateHistory()}if(i.ctrlKey&&i.key==="z"&&!i.shiftKey?(i.preventDefault(),v.onHistoryEvent("previous")):i.ctrlKey&&(0,Ie.toLower)(i.key)==="z"&&i.shiftKey&&(i.preventDefault(),v.onHistoryEvent("next")),["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(i.key)&&!(0,ue.jK)(i.target)){var N=function(re,ve){switch(ve*=a.state.uiWindow.ratio,re){case"ArrowUp":X.top+=ve;break;case"ArrowDown":X.top-=ve;break;case"ArrowLeft":X.left-=ve;break;case"ArrowRight":X.left+=ve;break}X instanceof ie.fabric.ActiveSelection?X.getObjects().forEach(function(se){se.setCoords(),se.resizeScale()}):(X.setCoords(),X.resizeScale()),a.canvas.renderAll(),a.objectsToData(),a.updateHistory()},X=a.canvas.getActiveObject();if(!X)return;i.preventDefault(),N(i.key,2),v.moveTimeout&&clearTimeout(v.moveTimeout),v.moveTimer&&clearInterval(v.moveTimer),v.moveTimeout=setTimeout(function(){v.moveTimer=setInterval(function(){N(i.key,1)},500)},1500)}}),window.addEventListener("keyup",function(i){["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(i.key)&&(clearTimeout(v.moveTimeout),clearInterval(v.moveTimer))}),this.canvas.on({"mouse:up":function(){for(var x=0,D=Object.keys(a.objects[a.state.frame]);x<D.length;x++){var V=D[x];a.objects[a.state.frame][V].resizeScale()}a.canvas.renderAll(),a.objectsToData(),a.updateHistory();var N=a.canvas.getActiveObject();setTimeout(function(){if(N)if(N instanceof ie.fabric.ActiveSelection){var X=N.getObjects().map(function(n){return n.id});a.select(X,!0)}else a.select([N.id]);else a.select([])},100)},"mouse:move":function(x){var D=v.canvas.getPointer(x.e),V=v.state.uiWindow.ratio,N=Math.round(D.x*V),X=Math.round(D.y*V),n=document.getElementById("coordinateDisplay");n.style.display="block",n.textContent="x: ".concat(N,", y: ").concat(X)},"mouse:out":function(){var x=document.getElementById("coordinateDisplay");x.style.display="none"}}),setTimeout(function(){var i=v.his.get();v.props.setCouldDo(i),ge(i.now,function(x,D){return v.onObjectEvent(x,D)},function(x){return a.onFrameEvent("change",x)},function(){return v.canvas.renderAll()}).then(function(){v.setRobotId(),v.resetCanvasSize()}),v.cancelHistoryUpdate()},50),setTimeout(function(){var i=v.his.get();v.props.setCouldDo(i),ge(i.now,function(x,D){return v.onObjectEvent(x,D)},function(x){return a.onFrameEvent("change",x)},function(){return v.canvas.renderAll()}).then(function(){v.setRobotId(),v.resetCanvasSize()}),v.cancelHistoryUpdate()},200)}},{key:"upload",value:function(v){var a=this,i=this,x=new FileReader;x.onload=function(){var D=F()(R()().mark(function V(N){return R()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.reset();case 2:return n.next=4,ge(JSON.parse(N.target.result),function(re,ve){return i.onObjectEvent(re,ve)},function(re){return i.onFrameEvent("change",re)},function(){return i.canvas.renderAll()}).then(function(){a.setRobotId()});case 4:i.objectsToData(),i.his.reset({version:2,data:a.data,selected:a.state.frame});case 6:case"end":return n.stop()}},V)}));return function(V){return D.apply(this,arguments)}}(),x.readAsText(v)}},{key:"objectsToData",value:function(){for(var v=this,a={},i=0,x=Object.keys(this.objects);i<x.length;i++){var D=x[i];a[D]={};for(var V=0,N=Object.keys(this.objects[D]);V<N.length;V++){var X=N[V],n=this.objects[D][X].toObject();a[D][n.id]=n}}if(this.data=a,this.setState({data:a[this.state.frame]}),this.state.selectedId.length===1){var re;this.state.selectedId[0]===-2?re=this.state.uiWindow:re=a[this.state.frame][this.state.selectedId[0]],this.setState({properties:d()({},re)},function(){var ve;(ve=v.propertiesRef.current)===null||ve===void 0||ve.reload()})}}},{key:"onObjectEvent",value:function(v,a){var i=this;function x(n){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ve={id:n.id,name:n.name,layer:n.layer,group:n.group,type:n.type,ratio:i.state.uiWindow.ratio,team:i.state.uiWindow.team},se=(0,Se.R)(ve);i.objects[i.state.frame][n.id]=se,re&&se.fromObject(n),se.setRatio(i.state.uiWindow.ratio);for(var ye=i.canvas.getObjects(),ke=!0,Ue=0,Te=Object.keys(ye);Ue<Te.length;Ue++){var we=Te[Ue];if(ye[we].id===se.id){ke=!1;break}}i.canvas.add(se)}if(v==="add")typeof a.id=="number"&&a.id>=0&&!this.objects[this.state.frame][a.id]?x(a,!0):console.log("id exists",a.id,this.objects[this.state.frame][a.id]);else if(v==="_add")a.id=this.getNewDataId(),a.ratio=this.state.uiWindow.ratio,a.team=this.state.uiWindow.team,x(a,!1);else if(v==="update")this.objects[this.state.frame][a.id]&&this.objects[this.state.frame][a.id].fromObject(a);else if(v==="_update")a.id>=0&&this.objects[this.state.frame][a.id]?this.objects[this.state.frame][a.id].fromObject(a):x(a);else if(v==="remove"){var D=a.id;this.objects[this.state.frame][D]&&(this.select([]),this.canvas.remove(this.objects[this.state.frame][D]),this.canvas.renderAll(),delete this.objects[this.state.frame][D],this.objectsToData())}else if(v==="setAttr")this.objects[this.state.frame][a.id]&&this.objects[this.state.frame][a.id].set(a.payload);else if(v==="removeLayer")for(var V=0,N=Object.keys(this.objects[this.state.frame]);V<N.length;V++){var X=N[V];this.objects[this.state.frame][X].layer===a.layer&&this.onObjectEvent("remove",{id:X})}else v==="removeAll"&&this.reset(!0);this.objectsToData(),this.canvas.renderAll()}},{key:"setFrame",value:function(v){this.objects[v]||(this.objects[v]={});for(var a=0,i=Object.keys(this.objects[this.state.frame]);a<i.length;a++){var x=i[a];this.canvas.remove(this.objects[this.state.frame][x])}this.canvas.renderAll();var D=this;return new Promise(function(V,N){D.setState({frame:v},function(){for(var X=D.canvas.getObjects(),n=0,re=Object.keys(D.objects[D.state.frame]);n<re.length;n++){for(var ve=re[n],se=!0,ye=0,ke=Object.keys(X);ye<ke.length;ye++){var Ue=ke[ye];if(X[Ue].id===D.objects[D.state.frame][ve].id){se=!1;break}}se&&D.canvas.add(D.objects[D.state.frame][ve])}D.objectsToData(),D.select([]),D.canvas.renderAll(),V()})})}},{key:"onHistoryEvent",value:function(){var E=F()(R()().mark(function a(i){var x=this,D;return R()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(D=this.his.get(),i!=="update"){N.next=6;break}return this.updateHistory(),N.abrupt("return");case 6:if(i!=="reset"){N.next=12;break}return D=this.his.reset({version:2,data:{default:{}},selected:"default"}),this.props.setCouldDo(D),N.abrupt("return");case 12:if(i!=="resetNow"){N.next=16;break}return D=this.his.reset({version:2,data:this.data,selected:this.state.frame}),this.props.setCouldDo(D),N.abrupt("return");case 16:return i==="previous"?D=this.his.previous():i==="next"&&(D=this.his.next()),this.props.setCouldDo(D),N.next=20,this.reset(!0);case 20:return N.next=22,ge(D.now,function(X,n){return x.onObjectEvent(X,n)},function(X){return x.onFrameEvent("change",X)},function(){return x.canvas.renderAll()}).then(function(){x.setRobotId()});case 22:this.cancelHistoryUpdate(),this.props.setCouldDo(D);case 24:case"end":return N.stop()}},a,this)}));function v(a){return E.apply(this,arguments)}return v}()},{key:"onFrameEvent",value:function(){var E=F()(R()().mark(function a(i,x){var D,V,N,X,n,re;return R()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(i!=="add"){se.next=6;break}return this.objects[x]={},se.next=4,this.setFrame(x);case 4:se.next=40;break;case 6:if(i!=="remove"){se.next=19;break}if(Object.keys(this.objects).length!==1){se.next=10;break}return u.yw.error("Cannot remove last frame!"),se.abrupt("return");case 10:if(D=x,this.state.frame!==x){se.next=16;break}return x=Object.keys(this.objects)[0],x===D&&(x=Object.keys(this.objects)[1]),se.next=16,this.setFrame(x);case 16:delete this.objects[D],se.next=40;break;case 19:if(i!=="change"){se.next=24;break}return se.next=22,this.setFrame(x);case 22:se.next=40;break;case 24:if(i!=="copy"){se.next=34;break}return this.objects[x]={},V=this.objects[this.state.frame],se.next=29,this.setFrame(x);case 29:for(N=0,X=Object.keys(V);N<X.length;N++)n=X[N],this.onObjectEvent("_update",V[n].toObject());this.objectsToData(),this.canvas.renderAll(),se.next=40;break;case 34:if(i!=="rename"){se.next=40;break}return re=this.state.frame,se.next=38,this.onFrameEvent("copy",x);case 38:return se.next=40,this.onFrameEvent("remove",re);case 40:this.props.onFrameChange({frames:Object.keys(this.objects),selected:x}),this.objectsToData(),this.updateHistory();case 43:case"end":return se.stop()}},a,this)}));function v(a,i){return E.apply(this,arguments)}return v}()},{key:"render",value:function(){var v,a=this;return(v=this.canvas)===null||v===void 0||v.renderAll(),(0,h.jsx)("div",{style:{width:"100vw",height:"calc(100% - 20px)",padding:10},children:(0,h.jsxs)(b.eh,{autoSaveId:"container_h",className:"container",direction:"horizontal",children:[(0,h.jsx)(b.s_,{defaultSize:25,minSize:15,maxSize:45,order:1,children:(0,h.jsxs)(b.eh,{autoSaveId:"card_v",className:"full",direction:"vertical",children:[(0,h.jsx)(b.s_,{defaultSize:50,minSize:25,maxSize:75,children:(0,h.jsx)(de,{onSelect:function(x){return a.select(x)},onObjectEvent:function(x,D){return a.onObjectEvent(x,D)},onReset:function(){return a.reset()},data:this.state.data,editable:this.state.editable,selectedId:this.state.selectedId})}),(0,h.jsx)(b.OT,{className:"panel-resize-handle",style:{height:6}}),(0,h.jsx)(b.s_,{defaultSize:50,children:(0,h.jsx)(m.Z,{size:"small",title:"Properties",style:{height:"100%"},children:(0,h.jsxs)("div",{className:"card-body",children:[this.state.properties?(0,h.jsx)(S.vY,{dataSource:this.state.properties,columns:ce(this.state.properties),ref:this.propertiesRef,editable:this.props.editable?{onSave:function(x,D){return a.onPropertiesChange(x,D)}}:null,column:1,style:{marginTop:4}},this.state.selectedId[0]):(0,h.jsx)(f.Z,{image:f.Z.PRESENTED_IMAGE_SIMPLE}),this.state.selectedId[0]===-2?(0,h.jsxs)(y.Z,{direction:"vertical",size:"middle",style:{display:"flex"},children:[(0,h.jsx)(A.ZP,{onClick:function(){return(0,ue.cT)("image/*").then(function(x){a.setState({imageUploadShow:!1}),a.setBackground((0,ue.lZ)(x))}).catch(function(x){})},children:"Upload Background"}),(0,h.jsx)(A.ZP,{onClick:function(){return a.setBackground(e(25665))},children:"Reset Background"})]}):(0,h.jsx)("div",{})]})})})]})}),(0,h.jsx)(b.OT,{className:"panel-resize-handle",style:{width:6}}),(0,h.jsx)(b.s_,{defaultSize:75,order:2,onResize:function(x){return setTimeout(function(){return a.resetCanvasSize()},100)},children:(0,h.jsxs)("div",{className:"full",ref:this.canvasRef,children:[(0,h.jsx)("canvas",{className:"full",id:"ui"}),(0,h.jsx)("div",{id:"coordinateDisplay",style:{bottom:0,right:0,display:"none",padding:"1px 6px 1px 6px"}})]})})]})})}}]),L}(c.Component),Ce=fe},12997:function(te,Q,e){e.a(te,function(Y,d){return De(this,null,function*(){try{e.r(Q);var W=e(12444),R=e.n(W),H=e(72004),I=e.n(H),J=e(25098),F=e.n(J),P=e(31996),O=e.n(P),r=e(26037),M=e.n(r),Z=e(9783),w=e.n(Z),z=e(67294),s=e(9361),t=e(28459),o=e(62338),p=e(65848),j=e(87159),g=e(4585),l=e(41327),c=e(40249),m=e(58377),f=e(54030),y=e(28348),A=e(18253),u=e(85893),b=Y([m]);m=(b.then?(yield b)():b)[0];var S=s.Z.darkAlgorithm,C=s.Z.compactAlgorithm,T=function(U){O()(q,U);var k=M()(q);function q(){var _;R()(this,q);for(var G=arguments.length,B=new Array(G),h=0;h<G;h++)B[h]=arguments[h];return _=k.call.apply(k,[this].concat(B)),w()(F()(_),"state",{simulate:!1,darkMode:_.isBrowserDarkMode(),isMounted:!1}),w()(F()(_),"modal",null),w()(F()(_),"renderRef",z.createRef()),w()(F()(_),"menuRef",z.createRef()),_}return I()(q,[{key:"isBrowserDarkMode",value:function(){try{return window.matchMedia("(prefers-color-scheme: dark)").matches}catch(G){return!1}}},{key:"componentDidMount",value:function(){var G=this,B=this,h=0;window.addEventListener("drop",function(oe){return oe.preventDefault()},!1),window.addEventListener("dragover",function(oe){return oe.preventDefault()},!1),window.addEventListener("contextmenu",function(oe){oe.target.tagName.toLowerCase()!=="input"&&oe.preventDefault()},!1);function ne(oe){!B.modal&&oe<880&&oe!==h&&(h=oe,B.modal=y.oC.warning({title:"Display Aera too Small",content:"Cannot show all contents on this window. Please resize this window or rotate your phone.",footer:null,zIndex:2500})),B.modal&&oe>=880&&(B.modal.destroy(),B.modal=null)}setTimeout(function(){return ne(window.innerWidth)},500),window.addEventListener("resize",function(){ne(window.innerWidth)},!1);var Me=window.matchMedia("(prefers-color-scheme: dark)");Me.addEventListener("change",function(oe){B.setState({darkMode:oe.matches})}),setTimeout(function(){G.setState({isMounted:!0})},500)}},{key:"setDarkMode",value:function(G){this.setState({darkMode:G})}},{key:"render",value:function(){var G=this;return this.state.isMounted?(0,u.jsx)(t.ZP,{locale:A.Z,theme:{cssVar:{key:"rmui"},hashed:!1,algorithm:this.state.darkMode?[S,C]:C},children:(0,u.jsxs)(o.Z,{children:[(0,u.jsx)("div",{className:"rmui",children:(0,u.jsxs)("div",{className:"container background-color",style:{height:"100vh",paddingBottom:12,overflow:"hidden"},children:[(0,u.jsx)(m.Z,{save:function(){return G.renderRef.current.save()},onObjectEvent:function(h,ne){return G.renderRef.current.onObjectEvent(h,ne)},onHistoryEvent:function(h){return G.renderRef.current.onHistoryEvent(h)},reset:function(){return G.renderRef.current.reset()},setFrame:function(h,ne){return G.renderRef.current.onFrameEvent(h,ne)},upload:function(h){return G.renderRef.current.upload(h)},getData:function(){return G.renderRef.current.getData()},setEditable:function(h){return G.renderRef.current.setEditable(h)},setDarkMode:function(h){return G.setDarkMode(h)},ref:this.menuRef,darkMode:this.state.darkMode}),(0,u.jsx)(p.Z,{content:["RM Ui Designer","nightly e45f917"],zIndex:0,style:{height:"100%"},gap:[30,30],children:(0,u.jsx)("div",{id:"content-in",style:{width:"100vw",height:"100%",zIndex:2,position:"relative"},children:(0,u.jsx)(j.Z,{style:{width:"100vw",height:"100%"},editable:!0,ref:this.renderRef,onFrameChange:function(h){var ne;return(ne=G.menuRef.current)===null||ne===void 0?void 0:ne.setFrames(h)},setCouldDo:function(h){var ne;(ne=G.menuRef.current)===null||ne===void 0||ne.setCouldDo(h)},setRobotId:function(h){var ne;(ne=G.menuRef.current)===null||ne===void 0||ne.setRobotId(h)}})})})]})}),(0,u.jsx)(f.Z,{}),(0,u.jsx)(g.Z,{}),(0,u.jsx)(l.Z,{})]})}):(0,u.jsx)(c.Z,{})}}]),q}(z.Component);Q.default=T,d()}catch(U){d(U)}})})},28348:function(te,Q,e){e.d(Q,{eq:function(){return H},oC:function(){return R},ue:function(){return I},yw:function(){return d}});var Y=e(62338),d,W,R,H=1;Q.ZP=function(){var J=Y.Z.useApp();return d=J.message,R=J.modal,W=J.notification,null};function I(J){H=parseInt(J)}},37932:function(te,Q,e){e.d(Q,{X:function(){return s},_:function(){return t}});var Y=e(15009),d=e.n(Y),W=e(5574),R=e.n(W),H=e(99289),I=e.n(H),J=e(12444),F=e.n(J),P=e(72004),O=e.n(P),r=e(9783),M=e.n(r),Z=e(17990),w=e(28348),z=e(30789),s=function(){function o(p){F()(this,o),M()(this,"getContentFunc",void 0),M()(this,"fileHandle",void 0),M()(this,"timerId",void 0),M()(this,"updateTimerId",void 0),this.getContentFunc=p,this.fileHandle=null,this.timerId=null,this.updateTimerId=null}return O()(o,[{key:"open",value:function(){var p=I()(d()().mark(function g(){var l,c,m,f,y;return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.fileHandle=null,u.prev=1,!(0,z.UP)()){u.next=9;break}return u.next=5,Z.WZ.open({multiple:!1,directory:!1,filters:[{name:"rmui file",extensions:["json","rmui"]}]});case 5:l=u.sent,l!==null&&l.length>0&&typeof l=="string"&&(this.fileHandle=l.replace(/\\/g,"/"),c=this.fileHandle.split("/").pop(),document.title="".concat(c," - RM UI Designer")),u.next=18;break;case 9:return u.next=11,window.showOpenFilePicker({types:[{description:"rmui file",accept:{"application/json":[".json",".rmui"]}}]});case 11:return m=u.sent,f=R()(m,1),this.fileHandle=f[0],u.next=16,this.fileHandle.getFile();case 16:y=u.sent.name,document.title="".concat(y," - RM UI Designer");case 18:this.enableAutoSave(),u.next=23;break;case 21:u.prev=21,u.t0=u.catch(1);case 23:return u.abrupt("return",this.fileHandle!==null);case 24:case"end":return u.stop()}},g,this,[[1,21]])}));function j(){return p.apply(this,arguments)}return j}()},{key:"create",value:function(){var p=I()(d()().mark(function g(){var l,c,m;return d()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(this.fileHandle=null,y.prev=1,!(0,z.UP)()){y.next=9;break}return y.next=5,Z.WZ.save({filters:[{name:"rmui file",extensions:["rmui"]}]});case 5:l=y.sent,l!==null&&(this.fileHandle=l.replace(/\\/g,"/"),c=this.fileHandle.split("/").pop(),document.title="".concat(c," - RM UI Designer")),y.next=16;break;case 9:return y.next=11,window.showSaveFilePicker({types:[{description:"rmui file",accept:{"application/json":[".rmui"]}}]});case 11:return this.fileHandle=y.sent,y.next=14,this.fileHandle.getFile();case 14:m=y.sent.name,document.title="".concat(m," - RM UI Designer");case 16:return y.next=18,this.write(JSON.stringify({version:2,data:{default:{}},selected:"default"}));case 18:this.enableAutoSave(),y.next=23;break;case 21:y.prev=21,y.t0=y.catch(1);case 23:return y.abrupt("return",this.fileHandle!==null);case 24:case"end":return y.stop()}},g,this,[[1,21]])}));function j(){return p.apply(this,arguments)}return j}()},{key:"enableAutoSave",value:function(){var j=this;this.timerId=setInterval(I()(d()().mark(function g(){var l;return d()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return l=j.getContentFunc(),m.next=3,j.write(l);case 3:case"end":return m.stop()}},g)})),6e4),w.yw.success("Auto save enabled")}},{key:"disableAutoSave",value:function(){var p=I()(d()().mark(function g(){return d()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.save();case 2:this.timerId&&(clearInterval(this.timerId),this.timerId=null),this.updateTimerId&&(clearTimeout(this.updateTimerId),this.updateTimerId=null),w.yw.warning("Auto save disabled");case 5:case"end":return c.stop()}},g,this)}));function j(){return p.apply(this,arguments)}return j}()},{key:"update",value:function(){var j=this;this.timerId!==null&&(this.updateTimerId!==null&&(clearTimeout(this.updateTimerId),this.updateTimerId=null),this.updateTimerId=setTimeout(I()(d()().mark(function g(){var l;return d()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return l=j.getContentFunc(),m.next=3,j.write(l);case 3:case"end":return m.stop()}},g)})),2e3))}},{key:"save",value:function(){var p=I()(d()().mark(function g(){var l;return d()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return l=this.getContentFunc(),m.next=3,this.write(l);case 3:case"end":return m.stop()}},g,this)}));function j(){return p.apply(this,arguments)}return j}()},{key:"write",value:function(){var p=I()(d()().mark(function g(l){var c;return d()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(this.fileHandle){f.next=2;break}throw new Error("File is not open");case 2:if(typeof this.fileHandle!="string"){f.next=7;break}return f.next=5,Z.fs.writeTextFile(this.fileHandle,l);case 5:f.next=14;break;case 7:return f.next=9,this.fileHandle.createWritable();case 9:return c=f.sent,f.next=12,c.write(l);case 12:return f.next=14,c.close();case 14:case"end":return f.stop()}},g,this)}));function j(g){return p.apply(this,arguments)}return j}()},{key:"read",value:function(){var p=I()(d()().mark(function g(){var l,c;return d()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(this.fileHandle){f.next=2;break}throw new Error("File is not open");case 2:if(typeof this.fileHandle!="string"){f.next=10;break}return f.next=5,Z.fs.readTextFile(this.fileHandle);case 5:return l=f.sent,c=new Blob([l],{type:"text/plain;charset=utf-8"}),f.abrupt("return",new File([c],this.fileHandle));case 10:return f.next=12,this.fileHandle.getFile();case 12:return f.abrupt("return",f.sent);case 13:case"end":return f.stop()}},g,this)}));function j(){return p.apply(this,arguments)}return j}()}]),o}();function t(){return"showOpenFilePicker"in window||(0,z.UP)()}},52880:function(te,Q,e){e.d(Q,{r:function(){return s},h:function(){return z}});var Y=e(19632),d=e.n(Y),W=e(73676);function R(t){var o=new Uint8Array(15),p=0,j=t.group.split("-");o[p++]=Math.round(Number(j[0])),o[p++]=Math.round(Number(j[1])),o[p++]=Math.round(t.id);var g=Math.round(t.operate_tpyel)|Math.round(t.figure_tpye)<<3|Math.round(t.layer)<<6|Math.round(t.color)<<10|Math.round(t._a)<<14|Math.round(t._b)<<23;o[p++]=g&255,o[p++]=g>>8&255,o[p++]=g>>16&255,o[p++]=g>>24&255;var l=Math.round(t.width)|Math.round(t.start_x)<<10|Math.round(t.start_y)<<21;o[p++]=l&255,o[p++]=l>>8&255,o[p++]=l>>16&255,o[p++]=l>>24&255;var c=Math.round(t._c)|Math.round(t._d)<<10|Math.round(t._e)<<21;return o[p++]=c&255,o[p++]=c>>8&255,o[p++]=c>>16&255,o[p++]=c>>24&255,o}function H(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"add",p=t.group,j=t.id&255,g=W.i_.indexOf(t.type),l=W.JM.indexOf(t.color),c=t.layer,m;t.fontSize?m=Math.round(t.fontSize/10):m=t.lineWidth;var f=t.x,y=t.y,A=0,u=0,b=0,S=0,C=0;switch(t.type.slice(2)){case"Line":S=t.x2||0,C=t.y2||0;break;case"Rect":S=(t.width||0)+f,C=(t.height||0)+y;break;case"Round":b=t.r||0;break;case"Ellipse":S=t.rx||0,C=t.ry||0;break;case"Arc":A=t.startAngle||0,u=t.endAngle||0,S=t.rx||0,C=t.ry||0;break;case"Float":A=t.fontSize||0;var T=(t.float||0)*1e3;b=T&1023,S=T>>10&2047,C=T>>21&2047;break;case"Number":A=t.fontSize||0;var U=t.number||0;b=U&1023,S=U>>10&2047,C=U>>21&2047;break;case"Text":A=t.fontSize||0,u=(t.text||"").length;break}return{group:p,id:j,operate_tpyel:W.$m.indexOf(o),figure_tpye:g,layer:c,color:l,_a:A,_b:u,width:m,start_x:f,start_y:y,_c:b,_d:S,_e:C,number:b}}function I(t){return R(H(t))}var J=e(85378),F=e(28348);function P(t){var o=new Uint8Array(0);if(t.forEach(function(c){o=new Uint8Array([].concat(d()(o),d()(I(c))))}),2<t.length&&t.length<5){for(var p=new Uint8Array(15*(5-t.length)),j=0;j<15*(5-t.length);j++)p[j]=0;o=new Uint8Array([].concat(d()(o),d()(p)))}if(5<t.length&&t.length<7){for(var g=new Uint8Array(15*(7-t.length)),l=0;l<15*(7-t.length);l++)g[l]=0;o=new Uint8Array([].concat(d()(o),d()(g)))}return o}function O(t){var o=new Uint8Array([].concat(d()(I(t[0])),d()(new Uint8Array(30))));if(t[0].text)for(var p=15;p<t[0].text.length+15;p++)o[p]=t[0].text.charCodeAt(p);return o}function r(t){return t[0].text?O(t):P(t)}var M=0,Z=769;function w(t){var o=new Uint8Array(13),p=new Uint8Array(2);o[0]=165;var j=t.length+6;o[1]=j&255,o[2]=j>>8&255,o[3]=M,o[4]=(0,J.d)(o.subarray(0,4)),o[5]=Z&255,o[6]=Z>>8&255;var g=0;t.length===2?g=256:t.length===15?g=257:t.length===30?g=258:t.length===75?g=259:t.length===105?g=260:t.length===45&&(g=272),o[7]=g&255,o[8]=g>>8&255,o[9]=F.eq&255,o[10]=F.eq>>8&255,o[11]=F.eq+256&255,o[12]=F.eq+256>>8&255;var l=new Uint8Array([].concat(d()(o),d()(t),d()(p))),c=(0,J.I)(l.subarray(0,l.length-2));return l[l.length-2]=c&255,l[l.length-1]=c>>8&255,M++,M>=256&&(M=0),l}function z(t){var o=r(t);return w(o)}function s(){return w(new Uint8Array([2,0]))}},85378:function(te,Q,e){e.d(Q,{I:function(){return R},d:function(){return d}});var Y=[0,94,188,226,97,63,221,131,194,156,126,32,163,253,31,65,157,195,33,127,252,162,64,30,95,1,227,189,62,96,130,220,35,125,159,193,66,28,254,160,225,191,93,3,128,222,60,98,190,224,2,92,223,129,99,61,124,34,192,158,29,67,161,255,70,24,250,164,39,121,155,197,132,218,56,102,229,187,89,7,219,133,103,57,186,228,6,88,25,71,165,251,120,38,196,154,101,59,217,135,4,90,184,230,167,249,27,69,198,152,122,36,248,166,68,26,153,199,37,123,58,100,134,216,91,5,231,185,140,210,48,110,237,179,81,15,78,16,242,172,47,113,147,205,17,79,173,243,112,46,204,146,211,141,111,49,178,236,14,80,175,241,19,77,206,144,114,44,109,51,209,143,12,82,176,238,50,108,142,208,83,13,239,177,240,174,76,18,145,207,45,115,202,148,118,40,171,245,23,73,8,86,180,234,105,55,213,139,87,9,235,181,54,104,138,212,149,203,41,119,244,170,72,22,233,183,85,11,136,214,52,106,43,117,151,201,74,20,246,168,116,42,200,150,21,75,169,247,182,232,10,84,215,137,107,53];function d(H){for(var I=255,J=0,F,P=H.byteLength;P--;)F=I^H[J],I=Y[F],J++;return I}var W=[0,4489,8978,12955,17956,22445,25910,29887,35912,40385,44890,48851,51820,56293,59774,63735,4225,264,13203,8730,22181,18220,30135,25662,40137,36160,49115,44626,56045,52068,63999,59510,8450,12427,528,5017,26406,30383,17460,21949,44362,48323,36440,40913,60270,64231,51324,55797,12675,8202,4753,792,30631,26158,21685,17724,48587,44098,40665,36688,64495,60006,55549,51572,16900,21389,24854,28831,1056,5545,10034,14011,52812,57285,60766,64727,34920,39393,43898,47859,21125,17164,29079,24606,5281,1320,14259,9786,57037,53060,64991,60502,39145,35168,48123,43634,25350,29327,16404,20893,9506,13483,1584,6073,61262,65223,52316,56789,43370,47331,35448,39921,29575,25102,20629,16668,13731,9258,5809,1848,65487,60998,56541,52564,47595,43106,39673,35696,33800,38273,42778,46739,49708,54181,57662,61623,2112,6601,11090,15067,20068,24557,28022,31999,38025,34048,47003,42514,53933,49956,61887,57398,6337,2376,15315,10842,24293,20332,32247,27774,42250,46211,34328,38801,58158,62119,49212,53685,10562,14539,2640,7129,28518,32495,19572,24061,46475,41986,38553,34576,62383,57894,53437,49460,14787,10314,6865,2904,32743,28270,23797,19836,50700,55173,58654,62615,32808,37281,41786,45747,19012,23501,26966,30943,3168,7657,12146,16123,54925,50948,62879,58390,37033,33056,46011,41522,23237,19276,31191,26718,7393,3432,16371,11898,59150,63111,50204,54677,41258,45219,33336,37809,27462,31439,18516,23005,11618,15595,3696,8185,63375,58886,54429,50452,45483,40994,37561,33584,31687,27214,22741,18780,15843,11370,7921,3960];function R(H){for(var I=65535,J,F=0,P=H.byteLength;P--;)J=H[F],I=I>>8^W[(I^J)&255],F++;return I}},73676:function(te,Q,e){e.d(Q,{$m:function(){return H},EY:function(){return r},JM:function(){return R},i_:function(){return W}});var Y=e(19632),d=e.n(Y),W=["UiLine","UiRect","UiRound","UiEllipse","UiArc","UiFloat","UiNumber","UiText"],R=["main","yellow","green","orange","purple","pink","cyan","black","white"],H=["null","add","update","remove"],I={257:1,258:2,259:5,260:7},J=["null","removeLayer","removeAll"];function F(M,Z){return M[Z]|M[Z+1]<<8}function P(M,Z){return M[Z]|M[Z+1]<<8|M[Z+2]<<16|M[Z+3]<<24}function O(M){var Z=0,w=M[Z++],z=M[Z++],s="".concat(w,"-").concat(z),t=M[Z++]|z<<8|w<<16,o=P(M,Z);Z+=4;var p=o&7,j=o>>3&7,g=o>>6&15,l=o>>10&15,c=o>>14&511,m=o>>23&511,f=P(M,Z);Z+=4;var y=f&1023,A=f>>10&2047,u=f>>21&2047,b=P(M,Z),S=b&1023,C=b>>10&2047,T=b>>21&2047;return{group:s,id:t,operate_tpyel:p,figure_tpye:j,layer:g,color:l,_a:c,_b:m,width:y,start_x:A,start_y:u,_c:S,_d:C,_e:T,number:b}}function r(M){var Z=F(M,0),w=F(M,2),z=F(M,4),s=[];if(Z===256)s.push({type:J[M[6]],obj:{layer:M[7]}});else if(Z===272){var t=O(M.subarray(6,21)),o=String.fromCharCode.apply(String,d()(M.subarray(21,21+t._b)));s.push({type:H[t.operate_tpyel],obj:{layer:t.layer,group:t.group,type:W[t.figure_tpye],id:t.id,name:"".concat(W[t.figure_tpye],"_").concat(t.id&255),color:R[t.color],lineWidth:t.width,x:t.start_x,y:t.start_y,fontSize:t._a,text:o}})}else if(Z in I)for(var p=I[Z],j=0;j<p;j++){var g=O(M.subarray(6+j*15,6+(j+1)*15)),l={layer:g.layer,group:g.group,type:W[g.figure_tpye],id:g.id,name:"".concat(W[g.figure_tpye],"_").concat(g.id&255),color:R[g.color],lineWidth:g.width,x:g.start_x,y:g.start_y};switch(W[g.figure_tpye].slice(2)){case"Line":l.x2=g._d,l.y2=g._e;break;case"Rect":l.width=g._d-g.start_x,l.height=g._e-g.start_y;break;case"Round":l.r=g._c;break;case"Ellipse":l.rx=g._d,l.ry=g._e;break;case"Arc":l.startAngle=g._a,l.endAngle=g._b,l.rx=g._d,l.ry=g._e;break;case"Float":l.fontSize=g._a,l.float=g.number/1e3;break;case"Number":l.fontSize=g._a,l.number=g.number;break}s.push({type:H[g.operate_tpyel],obj:l})}else console.log("unknown sub_id",Z);return{sender:w,receiver:z,events:s}}},13799:function(te,Q,e){e.d(Q,{r:function(){return F}});var Y=e(67294),d=Object.defineProperty,W=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,I=(O,r,M)=>r in O?d(O,r,{enumerable:!0,configurable:!0,writable:!0,value:M}):O[r]=M,J=(O,r)=>{for(var M in r||(r={}))R.call(r,M)&&I(O,M,r[M]);if(W)for(var M of W(r))H.call(r,M)&&I(O,M,r[M]);return O};const F=O=>Y.createElement("svg",J({className:"moon_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:200,height:200},O),Y.createElement("path",{d:"M472 991.6c-157 0-304.4-77.2-394.3-206.6-6.9-9.9-7.6-22.9-1.8-33.6 5.8-10.7 17.1-17.8 29.2-16.7l7.7.4c2.4.2 4.8.3 7.2.3 229.4 0 416-186.6 416-416 0-85-25.7-167-74.3-236.9-6.9-9.9-7.6-22.9-1.8-33.6 5.8-10.7 17.2-17.6 29.2-16.7C748.7 41.6 952 252.1 952 511.6c0 264.7-215.3 480-480 480zM169.7 797.1c78.1 82.7 187.2 130.6 302.3 130.6 229.4 0 416-186.6 416-416 0-204-144.9-373-339.7-408.6 34 66.9 51.7 140.7 51.7 216.6 0 247.8-188.9 452.4-430.3 477.4z",fill:"#2c2c2c"}));var P="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTQ3MiA5OTEuNmMtMTU3IDAtMzA0LjQtNzcuMi0zOTQuMy0yMDYuNi02LjktOS45LTcuNi0yMi45LTEuOC0zMy42IDUuOC0xMC43IDE3LjEtMTcuOCAyOS4yLTE2LjdsNy43LjRjMi40LjIgNC44LjMgNy4yLjMgMjI5LjQgMCA0MTYtMTg2LjYgNDE2LTQxNiAwLTg1LTI1LjctMTY3LTc0LjMtMjM2LjktNi45LTkuOS03LjYtMjIuOS0xLjgtMzMuNiA1LjgtMTAuNyAxNy4yLTE3LjYgMjkuMi0xNi43Qzc0OC43IDQxLjYgOTUyIDI1Mi4xIDk1MiA1MTEuNmMwIDI2NC43LTIxNS4zIDQ4MC00ODAgNDgwek0xNjkuNyA3OTcuMWM3OC4xIDgyLjcgMTg3LjIgMTMwLjYgMzAyLjMgMTMwLjYgMjI5LjQgMCA0MTYtMTg2LjYgNDE2LTQxNiAwLTIwNC0xNDQuOS0zNzMtMzM5LjctNDA4LjYgMzQgNjYuOSA1MS43IDE0MC43IDUxLjcgMjE2LjYgMCAyNDcuOC0xODguOSA0NTIuNC00MzAuMyA0NzcuNHoiIGZpbGw9IiMyYzJjMmMiLz48L3N2Zz4="},82843:function(te,Q,e){e.d(Q,{r:function(){return F}});var Y=e(67294),d=Object.defineProperty,W=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,I=(O,r,M)=>r in O?d(O,r,{enumerable:!0,configurable:!0,writable:!0,value:M}):O[r]=M,J=(O,r)=>{for(var M in r||(r={}))R.call(r,M)&&I(O,M,r[M]);if(W)for(var M of W(r))H.call(r,M)&&I(O,M,r[M]);return O};const F=O=>Y.createElement("svg",J({className:"sun_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:200,height:200},O),Y.createElement("path",{d:"M522.88 874.667A21.333 21.333 0 0 1 544.213 896v85.333a21.333 21.333 0 0 1-21.333 21.334h-21.333a21.333 21.333 0 0 1-21.334-21.334V896a21.333 21.333 0 0 1 21.334-21.333h21.333zm268.416-107.52 60.352 60.352a21.333 21.333 0 0 1 0 30.165l-15.083 15.083a21.333 21.333 0 0 1-30.186 0l-60.331-60.352a21.333 21.333 0 0 1 0-30.166l15.083-15.082a21.333 21.333 0 0 1 30.165 0zm-527.957 0 15.082 15.082a21.333 21.333 0 0 1 0 30.166l-60.352 60.352a21.333 21.333 0 0 1-30.165 0l-15.083-15.083a21.333 21.333 0 0 1 0-30.165l60.331-60.352a21.333 21.333 0 0 1 30.187 0zM512 277.333c141.376 0 256 114.624 256 256s-114.624 256-256 256-256-114.624-256-256 114.624-256 256-256zm0 64a192 192 0 1 0 0 384 192 192 0 0 0 0-384zm448.213 160a21.333 21.333 0 0 1 21.334 21.334V544a21.333 21.333 0 0 1-21.334 21.333H874.88A21.333 21.333 0 0 1 853.547 544v-21.333a21.333 21.333 0 0 1 21.333-21.334h85.333zm-810.666 0a21.333 21.333 0 0 1 21.333 21.334V544a21.333 21.333 0 0 1-21.333 21.333H64.213A21.333 21.333 0 0 1 42.88 544v-21.333a21.333 21.333 0 0 1 21.333-21.334h85.334zm687.04-307.413 15.082 15.083a21.333 21.333 0 0 1 0 30.165l-60.352 60.352a21.333 21.333 0 0 1-30.165 0l-15.083-15.083a21.333 21.333 0 0 1 0-30.165L806.4 193.92a21.333 21.333 0 0 1 30.187 0zm-618.496 0 60.352 60.352a21.333 21.333 0 0 1 0 30.165L263.36 299.52a21.333 21.333 0 0 1-30.187 0l-60.352-60.373a21.333 21.333 0 0 1 0-30.166l15.083-15.082a21.333 21.333 0 0 1 30.165 0zM522.9 64a21.333 21.333 0 0 1 21.334 21.333v85.334A21.333 21.333 0 0 1 522.9 192h-21.333a21.333 21.333 0 0 1-21.333-21.333V85.333A21.333 21.333 0 0 1 501.568 64h21.333z",fill:"#ebebeb"}));var P="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTUyMi44OCA4NzQuNjY3QTIxLjMzMyAyMS4zMzMgMCAwIDEgNTQ0LjIxMyA4OTZ2ODUuMzMzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzMzIDIxLjMzNGgtMjEuMzMzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzM0LTIxLjMzNFY4OTZhMjEuMzMzIDIxLjMzMyAwIDAgMSAyMS4zMzQtMjEuMzMzaDIxLjMzM3ptMjY4LjQxNi0xMDcuNTIgNjAuMzUyIDYwLjM1MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDAgMzAuMTY1bC0xNS4wODMgMTUuMDgzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTg2IDBsLTYwLjMzMS02MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NmwxNS4wODMtMTUuMDgyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTY1IDB6bS01MjcuOTU3IDAgMTUuMDgyIDE1LjA4MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDAgMzAuMTY2bC02MC4zNTIgNjAuMzUyYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTY1IDBsLTE1LjA4My0xNS4wODNhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NWw2MC4zMzEtNjAuMzUyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTg3IDB6TTUxMiAyNzcuMzMzYzE0MS4zNzYgMCAyNTYgMTE0LjYyNCAyNTYgMjU2cy0xMTQuNjI0IDI1Ni0yNTYgMjU2LTI1Ni0xMTQuNjI0LTI1Ni0yNTYgMTE0LjYyNC0yNTYgMjU2LTI1NnptMCA2NGExOTIgMTkyIDAgMSAwIDAgMzg0IDE5MiAxOTIgMCAwIDAgMC0zODR6bTQ0OC4yMTMgMTYwYTIxLjMzMyAyMS4zMzMgMCAwIDEgMjEuMzM0IDIxLjMzNFY1NDRhMjEuMzMzIDIxLjMzMyAwIDAgMS0yMS4zMzQgMjEuMzMzSDg3NC44OEEyMS4zMzMgMjEuMzMzIDAgMCAxIDg1My41NDcgNTQ0di0yMS4zMzNhMjEuMzMzIDIxLjMzMyAwIDAgMSAyMS4zMzMtMjEuMzM0aDg1LjMzM3ptLTgxMC42NjYgMGEyMS4zMzMgMjEuMzMzIDAgMCAxIDIxLjMzMyAyMS4zMzRWNTQ0YTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzMzIDIxLjMzM0g2NC4yMTNBMjEuMzMzIDIxLjMzMyAwIDAgMSA0Mi44OCA1NDR2LTIxLjMzM2EyMS4zMzMgMjEuMzMzIDAgMCAxIDIxLjMzMy0yMS4zMzRoODUuMzM0em02ODcuMDQtMzA3LjQxMyAxNS4wODIgMTUuMDgzYTIxLjMzMyAyMS4zMzMgMCAwIDEgMCAzMC4xNjVsLTYwLjM1MiA2MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMS0zMC4xNjUgMGwtMTUuMDgzLTE1LjA4M2EyMS4zMzMgMjEuMzMzIDAgMCAxIDAtMzAuMTY1TDgwNi40IDE5My45MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDMwLjE4NyAwem0tNjE4LjQ5NiAwIDYwLjM1MiA2MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMSAwIDMwLjE2NUwyNjMuMzYgMjk5LjUyYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTg3IDBsLTYwLjM1Mi02MC4zNzNhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NmwxNS4wODMtMTUuMDgyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTY1IDB6TTUyMi45IDY0YTIxLjMzMyAyMS4zMzMgMCAwIDEgMjEuMzM0IDIxLjMzM3Y4NS4zMzRBMjEuMzMzIDIxLjMzMyAwIDAgMSA1MjIuOSAxOTJoLTIxLjMzM2EyMS4zMzMgMjEuMzMzIDAgMCAxLTIxLjMzMy0yMS4zMzNWODUuMzMzQTIxLjMzMyAyMS4zMzMgMCAwIDEgNTAxLjU2OCA2NGgyMS4zMzN6IiBmaWxsPSIjZWJlYmViIi8+PC9zdmc+"},99734:function(te,Q,e){te.exports=e.p+"static/about.6af660a8.md"},8938:function(te,Q,e){te.exports=e.p+"static/ui_interface.1e01ba33.c"},75112:function(te,Q,e){te.exports=e.p+"static/ui_interface.a365dcb1.h"},33562:function(te,Q,e){te.exports=e.p+"static/ui_types.c92a992c.h"},19293:function(te,Q,e){te.exports=e.p+"static/eula.61e7cc28.md"},25665:function(te,Q,e){te.exports=e.p+"static/background.d741a18b.png"}}]);
