"use strict";var De=(te,Q,e)=>new Promise((P,u)=>{var W=S=>{try{H(e.next(S))}catch(J){u(J)}},R=S=>{try{H(e.throw(S))}catch(J){u(J)}},H=S=>S.done?P(S.value):Promise.resolve(S.value).then(W,R);H((e=e.apply(te,Q)).next())});(self.webpackChunk=self.webpackChunk||[]).push([[858],{62388:function(te,Q,e){e.d(Q,{R:function(){return A},t:function(){return x}});var P=e(32777),u=e(30789),W=P.fabric.util.createClass(P.fabric.Rect,{type:"UiRect",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(t){t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.lockRotation=!0,t.lockScalingFlip=!0,t.hasRotatingPoint=!1,t.width||(t.width=50/this.ratio),t.height||(t.height=50/this.ratio),t.left||(t.left=50/this.ratio),t.top||(t.top=50/this.ratio),t.strokeWidth||(t.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?t.stroke=u.E[this._color]:(t.stroke=u.E[t.team],this._color="main"),t.fill=null,this.callSuper("initialize",t),this.moveTo(t.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){this.set("width",Math.round(this.width*this.scaleX*this.ratio)/this.ratio),this.set("height",Math.round(this.height*this.scaleY*this.ratio)/this.ratio),this.set("left",Math.round(this.left*this.ratio)/this.ratio),this.set("top",Math.round(this.top*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,width:this.width*this.ratio,height:this.height*this.ratio,x:this.left*this.ratio,y:this.top*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("width",t.width/this.ratio),this.set("height",t.height/this.ratio),this.set("left",t.x/this.ratio),this.set("top",t.y/this.ratio),this.set("strokeWidth",t.lineWidth/this.ratio),this._color==="main"?this.set("stroke",u.E[this.team]):this.set("stroke",u.E[this._color]),this.moveTo(t.layer)},setRatio:function(t){this.set("width",this.width*this.ratio/t),this.set("height",this.height*this.ratio/t),this.set("left",this.left*this.ratio/t),this.set("top",this.top*this.ratio/t),this.set("strokeWidth",this.strokeWidth*this.ratio/t),this.ratio=t},setTeam:function(t){this.team=t,this._color==="main"&&this.set("stroke",u.E[this.team])}}),R=P.fabric.util.createClass(P.fabric.Line,{type:"UiLine",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(t){t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.lockRotation=!0,t.lockScalingFlip=!0,t.hasRotatingPoint=!1,t.x1||(t.x1=50/this.ratio),t.y1||(t.y1=50/this.ratio),t.x2||(t.x2=100/this.ratio),t.y2||(t.y2=100/this.ratio),t.strokeWidth||(t.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?t.stroke=u.E[this._color]:(t.stroke=u.E[t.team],this._color="main"),t.fill=null,this.callSuper("initialize",[t.x1,t.y1,t.x2,t.y2],t),this.moveTo(t.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){var t=this.left,m=this.top,g=Math.abs(Math.round((this.x2-this.x1)*this.scaleX)),c=Math.abs(Math.round((this.y2-this.y1)*this.scaleY));this.set("x1",Math.round(t*this.ratio)/this.ratio),this.set("y1",Math.round(m*this.ratio)/this.ratio),this.set("x2",Math.round((t+g)*this.ratio)/this.ratio),this.set("y2",Math.round((m+c)*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,x:this.x1*this.ratio,y:this.y1*this.ratio,x2:this.x2*this.ratio,y2:this.y2*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("x2",t.x2/this.ratio),this.set("y2",t.y2/this.ratio),this.set("x1",t.x/this.ratio),this.set("y1",t.y/this.ratio),this.set("strokeWidth",t.lineWidth/this.ratio),this._color==="main"?this.set("stroke",u.E[this.team]):this.set("stroke",u.E[this._color]),this.moveTo(t.layer)},setRatio:function(t){this.set("x1",this.x1*this.ratio/t),this.set("y1",this.y1*this.ratio/t),this.set("x2",this.x2*this.ratio/t),this.set("y2",this.y2*this.ratio/t),this.set("strokeWidth",this.strokeWidth*this.ratio/t),this.ratio=t},setTeam:function(t){this.team=t,this._color==="main"&&this.set("stroke",u.E[this.team])}}),H=P.fabric.util.createClass(P.fabric.Ellipse,{type:"UiEllipse",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(t){t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.lockRotation=!0,t.lockScalingFlip=!0,t.hasRotatingPoint=!1,t.rx||(t.rx=50/this.ratio),t.ry||(t.ry=50/this.ratio),t.left||(t.left=50/this.ratio),t.top||(t.top=50/this.ratio),t.strokeWidth||(t.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?t.stroke=u.E[this._color]:(t.stroke=u.E[t.team],this._color="main"),t.fill=null,this.callSuper("initialize",t),this.moveTo(t.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){this.set("rx",Math.round(this.rx*this.scaleX*this.ratio)/this.ratio),this.set("ry",Math.round(this.ry*this.scaleY*this.ratio)/this.ratio),this.set("left",Math.round(this.left*this.ratio)/this.ratio),this.set("top",Math.round(this.top*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,rx:this.rx*this.ratio,ry:this.ry*this.ratio,x:(this.left+this.rx)*this.ratio,y:(this.top+this.ry)*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("rx",t.rx/this.ratio),this.set("ry",t.ry/this.ratio),this.set("left",(t.x-t.rx)/this.ratio),this.set("top",(t.y-t.ry)/this.ratio),this.set("strokeWidth",t.lineWidth/this.ratio),this._color==="main"?this.set("stroke",u.E[this.team]):this.set("stroke",u.E[this._color]),this.moveTo(t.layer)},setRatio:function(t){this.set("rx",this.rx*this.ratio/t),this.set("ry",this.ry*this.ratio/t),this.set("left",this.left*this.ratio/t),this.set("top",this.top*this.ratio/t),this.set("strokeWidth",this.strokeWidth*this.ratio/t),this.ratio=t},setTeam:function(t){this.team=t,this._color==="main"&&this.set("stroke",u.E[this.team])}}),S=P.fabric.util.createClass(H,{type:"UiRound",r:50,initialize:function(t){t||(t={}),t.r||(t.r=50/this.ratio),t.rx=t.r,t.ry=t.r,this.callSuper("initialize",t),this.setControlVisible("ml",!1),this.setControlVisible("mb",!1),this.setControlVisible("mr",!1),this.setControlVisible("mt",!1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,r:this.rx*this.ratio,x:(this.left+this.rx)*this.ratio,y:(this.top+this.ry)*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){t.rx=t.r,t.ry=t.r,this.callSuper("fromObject",t)}}),J=P.fabric.util.createClass(H,{type:"UiArc",startAngle:0,endAngle:90,initialize:function(t){t||(t={}),t.startAngle||(t.startAngle=0),t.endAngle||(t.endAngle=90),this.callSuper("initialize",t),this.startAngle=t.startAngle,this.endAngle=t.endAngle,this.set("dirty",!0)},toObject:function(){return P.fabric.util.object.extend(this.callSuper("toObject"),{startAngle:this.startAngle,endAngle:this.endAngle})},_render:function(t){var m=(this.startAngle-90)*(Math.PI/180),g=(this.endAngle-90)*(Math.PI/180);t.beginPath(),t.ellipse(0,0,this.rx,this.ry,0,m,g,!1),t.strokeStyle=this.stroke,t.lineWidth=this.strokeWidth,t.stroke()},fromObject:function(t){this.set("startAngle",t.startAngle),this.set("endAngle",t.endAngle),this.set("ry",1),this.callSuper("fromObject",t)}});function F(a,t){var m=F.canvas||(F.canvas=document.createElement("canvas")),g=m.getContext("2d");g.font=t;var c=g.measureText(a);return c.width}var B=P.fabric.util.createClass(P.fabric.Text,{type:"UiText",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(t){t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.flipY=!0,t.fontSize||(t.fontSize=20/this.ratio),t.fontFamily||(t.fontFamily="ds-digitalnormal"),t.text||(t.text="Text"),t.left||(t.left=50/this.ratio),t.top||(t.top=50/this.ratio),t.width||(t.width=F(t.text,t.fontSize+"px "+t.fontFamily)/this.ratio),this._color&&this._color!=="main"?t.fill=u.E[this._color]:(t.fill=u.E[t.team],this._color="main"),this.callSuper("initialize",t.text,t),this.moveTo(t.layer),this.setControlsVisibility({tl:!1,tr:!1,bl:!1,br:!1,ml:!1,mt:!1,mr:!1,mb:!1,mtr:!1})},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,fontSize:this.fontSize*this.ratio,x:this.left*this.ratio,y:this.top*this.ratio,text:this.text,color:this._color}},fromObject:function(t){this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("left",t.x/this.ratio),this.set("top",t.y/this.ratio),this.set("fontSize",t.fontSize/this.ratio),this.text=t.text,this.set("width",F(t.text,t.fontSize+"px "+this.fontFamily)/this.ratio),this._color==="main"?this.set("fill",u.E[this.team]):this.set("fill",u.E[this._color]),this.moveTo(t.layer),this.set("fontFamily","ds-digitalnormal")},setRatio:function(t){this.set("width",this.width*this.ratio/t),this.set("left",this.left*this.ratio/t),this.set("top",this.top*this.ratio/t),this.set("fontSize",this.fontSize*this.ratio/t),this.ratio=t},resizeScale:function(){},setTeam:function(t){this.team=t,this._color==="main"&&this.set("fill",u.E[this.team])}}),Z=P.fabric.util.createClass(B,{type:"UiNumber",number:12345,initialize:function(t){t||(t={}),this.number=t.number||12345,t.text=this.number.toString(),this.callSuper("initialize",t)},toObject:function(){var t=this.callSuper("toObject");return t.number=this.number,delete t.text,t},fromObject:function(t){this.number=parseInt(t.number),t.text=this.number.toString(),this.callSuper("fromObject",t)}}),n=P.fabric.util.createClass(B,{type:"UiFloat",float:12.345,initialize:function(t){t||(t={}),this.float=t.float||12.345,t.text=this.float.toString(),this.callSuper("initialize",t)},toObject:function(){var t=this.callSuper("toObject");return t.float=this.float,delete t.text,t},fromObject:function(t){this.float=parseFloat(t.float),t.text=this.float.toString(),this.callSuper("fromObject",t)}}),p=e(28348),O={Rect:W,Line:R,Round:S,Ellipse:H,Arc:J,Text:B,Number:Z,Float:n},T=null;function A(a){var t={id:a.id,name:a.name,layer:a.layer,groupName:a.group,ratio:a.ratio,team:a.team},m=a.type.slice(2);return m==="Text"&&(T||(p.yw.warning("Text object is beta now, maybe not same with client!"),T=setTimeout(function(){T=null},2e3))),new O[m](t)}function x(){for(var a=[],t=0,m=Object.keys(O);t<m.length;t++){var g=m[t];a.push({key:"Insert-".concat(g),label:g})}return a}},83885:function(te,Q,e){e.a(te,function(P,u){return De(this,null,function*(){try{var W=e(64599),R=e.n(W),H=e(12444),S=e.n(H),J=e(72004),F=e.n(J),B=e(73070),Z=P([B]);B=(Z.then?(yield Z)():Z)[0];var n=function(){function p(O,T,A){S()(this,p),this.name=O,this.id=T,this.groups=[];var x={};for(var a in A){var t=A[a];t.group in x?x[t.group].push(t):x[t.group]=[t]}for(var m in x)this.groups.push(new B.Z(this.name,this.id,m,this.groups.length,x[m]))}return F()(p,[{key:"toSerialMsg",value:function(){var T=[],A=R()(this.groups),x;try{for(A.s();!(x=A.n()).done;){var a=x.value;T=T.concat(a.toSerialMsg())}}catch(t){A.e(t)}finally{A.f()}return console.log(T),T}},{key:"check",value:function(){var T=[],A=R()(this.groups),x;try{for(A.s();!(x=A.n()).done;){var a=x.value;T=T.concat(a.check())}}catch(t){A.e(t)}finally{A.f()}return T}}]),p}();Q.Z=n,u()}catch(p){u(p)}})})},10622:function(te,Q,e){e.a(te,function(P,u){return De(this,null,function*(){try{var W=e(64599),R=e.n(W),H=e(12444),S=e.n(H),J=e(72004),F=e.n(J),B=e(5970),Z=e(83885),n=P([B,Z]);[B,Z]=n.then?(yield n)():n;var p=function(){function O(T){S()(this,O),this.frames=[];for(var A in T)this.frames.push(new Z.Z(A,this.frames.length,T[A]))}return F()(O,[{key:"toUiH",value:function(){return(0,B.LI)(this.frames)}},{key:"check",value:function(){var A=[],x=R()(this.frames),a;try{for(x.s();!(a=x.n()).done;){var t=a.value;A=A.concat(t.check())}}catch(m){x.e(m)}finally{x.f()}return A}},{key:"toSerialMsg",value:function(){var A={},x=R()(this.frames),a;try{for(x.s();!(a=x.n()).done;){var t=a.value;A[t.name]=t.toSerialMsg()}}catch(m){x.e(m)}finally{x.f()}return A}}]),O}();Q.Z=p,u()}catch(O){u(O)}})})},73070:function(te,Q,e){e.a(te,function(P,u){return De(this,null,function*(){try{var W=e(64599),R=e.n(W),H=e(12444),S=e.n(H),J=e(72004),F=e.n(J),B=e(66978),Z=P([B]);B=(Z.then?(yield Z)():Z)[0];var n=function(){function p(O,T,A,x,a){S()(this,p),this.frame_name=O,this.frame_id=T,this.group_name=A,this.group_id=x,this.splits=[],this.errors=[];var t=0,m=new Set,g=R()(a),c;try{for(g.s();!(c=g.n()).done;){var o=c.value;/^[a-zA-Z_]+\w+$/.test(o.name)||this.errors.push({level:"error",info:'Name of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Object "').concat(o.name,'" does not compliant.')}),m.has(o.name)?this.errors.push({level:"error",info:'Name of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Object "').concat(o.name,'" is duplicate.')}):m.add(o.name),o.type==="UiText"&&(this.splits.push(new B.Z(this.frame_name,this.frame_id,this.group_name,this.group_id,this.splits.length,t,[o])),t+=1)}}catch(z){g.e(z)}finally{g.f()}for(var i=a.filter(function(z){return z.type!=="UiText"}),f=Math.ceil(i.length/7),v=0;v<f;v++)this.splits.push(new B.Z(this.frame_name,this.frame_id,this.group_name,this.group_id,this.splits.length,t,i.slice(v*7,(v+1)*7))),t+=7}return F()(p,[{key:"toSerialMsg",value:function(){var T=[],A=R()(this.splits),x;try{for(A.s();!(x=A.n()).done;){var a=x.value;T.push(a.toSerialMsg())}}catch(t){A.e(t)}finally{A.f()}return T}},{key:"check",value:function(){var T=this.errors,A=R()(this.splits),x;try{for(A.s();!(x=A.n()).done;){var a=x.value;T=T.concat(a.check())}}catch(t){A.e(t)}finally{A.f()}return T}}]),p}();Q.Z=n,u()}catch(p){u(p)}})})},66978:function(te,Q,e){e.a(te,function(P,u){return De(this,null,function*(){try{var W=e(97857),R=e.n(W),H=e(64599),S=e.n(H),J=e(12444),F=e.n(J),B=e(72004),Z=e.n(B),n=e(5970),p=e(52880),O=P([n]);n=(O.then?(yield O)():O)[0];var T=function(){function A(x,a,t,m,g,c,o){var i=this;if(F()(this,A),this.frame_name=x,this.frame_id=a,this.group_name=t,this.group_id=m,this.split_id=g,this.start_id=c,this.objs=o,o[0].type==="UiText")this.toSplitC=function(){return(0,n.c0)(i.frame_name,i.frame_id,i.group_name,i.group_id,i.split_id,i.start_id,i.objs)};else{var f=7;o.length===1?f=1:o.length<=2?f=2:o.length<=5&&(f=5),this.toSplitC=function(){return(0,n.JP)(i.frame_name,i.frame_id,i.group_name,i.group_id,i.split_id,i.start_id,i.objs,f)}}this.toSplitH=function(){return(0,n.pj)(i.frame_name,i.group_name,i.split_id,i.objs)}}return Z()(A,[{key:"toSerialMsg",value:function(){var a=[],t=S()(this.objs),m;try{for(t.s();!(m=t.n()).done;){var g=m.value,c=R()({},g);c.group="".concat(this.frame_name,"-").concat(this.split_id),a.push(c)}}catch(o){t.e(o)}finally{t.f()}return(0,p.h)(a)}},{key:"check",value:function(){return this.objs.length!==1&&this.objs.length!==2&&this.objs.length!==5&&this.objs.length!==7?[{level:"warning",info:'Length of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Split "').concat(this.split_id,'" is not 1 or 2 or 5 or 7.')}]:[]}}]),A}();Q.Z=T,u()}catch(A){u(A)}})})},5970:function(te,Q,e){e.a(te,function(P,u){return De(this,null,function*(){try{let o=function(C,k,U){for(var D="",q=0;q<U;q++)D=D+`
#include "ui_`.concat(C,"_").concat(k,"_").concat(q,'.h"');for(var G=`
#define ui_init_`.concat(C,"_").concat(k,`() \\
`),V=`
#define ui_update_`.concat(C,"_").concat(k,`() \\
`),Y=`
#define ui_remove_`.concat(C,"_").concat(k,`() \\
`),h=0;h<U;h++)G+="_ui_init_".concat(C,"_").concat(k,"_").concat(h,`(); \\
`),V+="_ui_update_".concat(C,"_").concat(k,"_").concat(h,`(); \\
`),Y+="_ui_remove_".concat(C,"_").concat(k,"_").concat(h,`(); \\
`);return D+="".concat(n).concat(G.slice(0,-4)).concat(n).concat(V.slice(0,-4)).concat(n).concat(Y.slice(0,-4),`
    `),"".concat(D,`
`)},i=function(C,k){var U="",D=Z()(k),q;try{for(D.s();!(q=D.n()).done;){var G=q.value;U+=o(C,G.group_name,G.splits.length)}}catch(V){D.e(V)}finally{D.f()}return U},f=function(C){var k="//".concat(n,"// Created by RM UI Designer").concat(n,"//").concat(n).concat(n,"#ifndef UI_H").concat(n,"#define UI_H").concat(n,"#ifdef __cplusplus").concat(n,'extern "C" {').concat(n,"#endif").concat(n).concat(n,'#include "ui_interface.h"').concat(n),U=Z()(C),D;try{for(U.s();!(D=U.n()).done;){var q=D.value;k+=i(q.name,q.groups)}}catch(G){U.e(G)}finally{U.f()}return"".concat(k).concat(n).concat(n,"#ifdef __cplusplus").concat(n,"}").concat(n,"#endif").concat(n).concat(n,`#endif //UI_H
`)},v=function(C,k,U,D){var q="//".concat(n,"// Created by RM UI Designer").concat(n,"//").concat(n).concat(n,"#ifndef UI_").concat(C,"_").concat(k,"_").concat(U,"_H").concat(n,"#define UI_").concat(C,"_").concat(k,"_").concat(U,"_H").concat(n).concat(n,'#include "ui_interface.h"').concat(n).concat(n),G=Z()(D),V;try{for(G.s();!(V=G.n()).done;){var Y=V.value;q+="extern ui_interface_".concat(p[Y.type],"_t *ui_").concat(C,"_").concat(k,"_").concat(Y.name,`;
`)}}catch(h){G.e(h)}finally{G.f()}return q+="".concat(n,"void _ui_init_").concat(C,"_").concat(k,"_").concat(U,"();").concat(n,"void _ui_update_").concat(C,"_").concat(k,"_").concat(U,"();").concat(n,"void _ui_remove_").concat(C,"_").concat(k,"_").concat(U,"();").concat(n).concat(n,"#endif //UI_").concat(C,"_").concat(k,"_").concat(U,"_H").concat(n),q},z=function(C,k,U){var D=F()({},U),q=O[D.type],G=D.name;D.type==="UiFloat"&&(D.number=Math.round(D.float*1e3),delete D.float),D.type==="UiRect"&&(D.x2=D.x+D.width,D.y2=D.y+D.height,delete D.width,delete D.height),(D.type==="UiFloat"||D.type==="UiNumber")&&(D.lineWidth=Math.round(D.fontSize/10)),D.color=A[D.color],delete D.type,delete D.id,delete D.name,delete D.group;var V="ui_".concat(C,"_").concat(k,"_").concat(G),Y="    ".concat(V,"->figure_tpye = ").concat(q,`;
`);for(var h in D){var le=D[h];typeof le=="number"&&(le=Math.round(le)),Y+="    ".concat(V,"->").concat(T[h]," = ").concat(le,`;
`)}return"".concat(Y,`
`)},I=function(C,k,U,D,q,G,V,Y){for(var h="".concat(C,"_").concat(U,"_").concat(q),le="//".concat(n,"// Created by RM UI Designer").concat(n,"//").concat(n).concat(n,'#include "ui_').concat(h,'.h"').concat(n).concat(n,"#define FRAME_ID ").concat(k).concat(n,"#define GROUP_ID ").concat(D).concat(n,"#define START_ID ").concat(G).concat(n,"#define OBJ_NUM ").concat(V.length).concat(n,"#define FRAME_OBJ_NUM ").concat(Y).concat(n).concat(n,"CAT(ui_, CAT(FRAME_OBJ_NUM, _frame_t)) ui_").concat(h,";").concat(n),Me=0;Me<V.length;Me++){var ye=p[V[Me].type],be=V[Me].name;le+="ui_interface_".concat(ye,"_t *ui_").concat(C,"_").concat(U,"_").concat(be," = ")+"(ui_interface_".concat(ye,"_t *)&(ui_").concat(h,".data[").concat(Me,`]);
`)}le+="".concat(n,"void _ui_init_").concat(h,"() {").concat(n,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(n,"        ui_").concat(h,".data[i].figure_name[0] = FRAME_ID;").concat(n,"        ui_").concat(h,".data[i].figure_name[1] = GROUP_ID;").concat(n,"        ui_").concat(h,".data[i].figure_name[2] = i + START_ID;").concat(n,"        ui_").concat(h,".data[i].operate_tpyel = 1;").concat(n,"    }").concat(n,"    for (int i = OBJ_NUM; i < FRAME_OBJ_NUM; i++) {").concat(n,"        ui_").concat(h,".data[i].operate_tpyel = 0;").concat(n,"    }").concat(n).concat(n);var pe=Z()(V),he;try{for(pe.s();!(he=pe.n()).done;){var se=he.value;le+=z(C,U,se)}}catch(oe){pe.e(oe)}finally{pe.f()}return le+="".concat(n,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(h,");").concat(n,"    SEND_MESSAGE((uint8_t *) &ui_").concat(h,", sizeof(ui_").concat(h,"));").concat(n,"}").concat(n).concat(n,"void _ui_update_").concat(h,"() {").concat(n,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(n,"        ui_").concat(h,".data[i].operate_tpyel = 2;").concat(n,"    }").concat(n).concat(n,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(h,");").concat(n,"    SEND_MESSAGE((uint8_t *) &ui_").concat(h,", sizeof(ui_").concat(h,"));").concat(n,"}").concat(n).concat(n,"void _ui_remove_").concat(h,"() {").concat(n,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(n,"        ui_").concat(h,".data[i].operate_tpyel = 3;").concat(n,"    }").concat(n).concat(n,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(h,");").concat(n,"    SEND_MESSAGE((uint8_t *) &ui_").concat(h,", sizeof(ui_").concat(h,"));").concat(n,"}").concat(n),le},y=function(C,k,U,D,q,G,V){var Y="".concat(C,"_").concat(U,"_").concat(q),h=F()({},V[0]),le=h.name,Me=h.text;h.color=A[h.color],h.strLength=Me.length,h.lineWidth=Math.round(h.fontSize/10),delete h.text,delete h.type,delete h.id,delete h.name,delete h.group;var ye="//".concat(n,"// Created by RM UI Designer").concat(n,"//").concat(n).concat(n,'#include "ui_').concat(Y,'.h"').concat(n,'#include "string.h"').concat(n).concat(n,"#define FRAME_ID ").concat(k).concat(n,"#define GROUP_ID ").concat(D).concat(n,"#define START_ID ").concat(G).concat(n).concat(n,"ui_string_frame_t ui_").concat(Y,";").concat(n).concat(n,"ui_interface_string_t* ui_").concat(C,"_").concat(U,"_").concat(le," = &ui_").concat(Y,".option;").concat(n).concat(n,"void _ui_init_").concat(Y,"() {").concat(n,"    ui_").concat(Y,".option.figure_name[0] = FRAME_ID;").concat(n,"    ui_").concat(Y,".option.figure_name[1] = GROUP_ID;").concat(n,"    ui_").concat(Y,".option.figure_name[2] = START_ID;").concat(n,"    ui_").concat(Y,".option.operate_tpyel = 1;").concat(n);ye+="    ui_".concat(Y,".option.figure_tpye = ").concat(O.UiText,`;
`);for(var be in h){var pe=h[be];typeof pe=="number"&&(pe=Math.round(pe)),ye+="    ui_".concat(Y,".option.").concat(T[be]," = ").concat(pe,`;
`)}return ye+="    strcpy(ui_".concat(C,"_").concat(U,"_").concat(le,'->string, "').concat(Me,'");').concat(n).concat(n,"    ui_proc_string_frame(&ui_").concat(Y,");").concat(n,"    SEND_MESSAGE((uint8_t *) &ui_").concat(Y,", sizeof(ui_").concat(Y,"));").concat(n,"}").concat(n).concat(n,"void _ui_update_").concat(Y,"() {").concat(n,"    ui_").concat(Y,".option.operate_tpyel = 2;").concat(n).concat(n,"    ui_proc_string_frame(&ui_").concat(Y,");").concat(n,"    SEND_MESSAGE((uint8_t *) &ui_").concat(Y,", sizeof(ui_").concat(Y,"));").concat(n,"}").concat(n).concat(n,"void _ui_remove_").concat(Y,"() {").concat(n,"    ui_").concat(Y,".option.operate_tpyel = 3;").concat(n).concat(n,"    ui_proc_string_frame(&ui_").concat(Y,");").concat(n,"    SEND_MESSAGE((uint8_t *) &ui_").concat(Y,", sizeof(ui_").concat(Y,"));").concat(n,"}"),ye},M=function(){return j.apply(this,arguments)},j=function(){return j=S()(R()().mark(function C(){return R()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",{ui_interface:{h:m,c:g},ui_types:{h:c}});case 1:case"end":return U.stop()}},C)})),j.apply(this,arguments)};e.d(Q,{HC:function(){return M},JP:function(){return I},LI:function(){return f},c0:function(){return y},pj:function(){return v}});var W=e(15009),R=e.n(W),H=e(99289),S=e.n(H),J=e(97857),F=e.n(J),B=e(64599),Z=e.n(B),n=`
`,p={UiArc:"arc",UiRound:"round",UiRect:"rect",UiLine:"line",UiEllipse:"ellipse",UiText:"string",UiNumber:"number",UiFloat:"number"},O={UiLine:0,UiRect:1,UiRound:2,UiEllipse:3,UiArc:4,UiFloat:5,UiNumber:6,UiText:7},T={lineWidth:"width",layer:"layer",x:"start_x",y:"start_y",x2:"end_x",y2:"end_y",rx:"rx",ry:"ry",r:"r",startAngle:"start_angle",endAngle:"end_angle",number:"number",color:"color",fontSize:"font_size",strLength:"str_length"},A={main:0,yellow:1,green:2,orange:3,purple:4,pink:5,cyan:6,black:7,white:8},x=e(75112),a=e(8938),t=e(33562),m=yield(yield fetch(x)).text(),g=yield(yield fetch(a)).text(),c=yield(yield fetch(t)).text();u()}catch(o){u(o)}})},1)},44740:function(te,Q,e){e.d(Q,{Z:function(){return i}});var P=e(15009),u=e.n(P),W=e(99289),R=e.n(W),H=e(12444),S=e.n(H),J=e(72004),F=e.n(J),B=e(9783),Z=e.n(B),n=e(19632),p=e.n(n),O=e(85378),T=function(){function f(){S()(this,f),Z()(this,"messages",[]),Z()(this,"enabled",!1)}return F()(f,[{key:"warn",value:function(z){this.enabled&&(this.messages.push({level:"warn",message:z,time:new Date}),console.warn(z)),this.messages.length>100&&(this.messages=this.messages.slice(-100))}},{key:"error",value:function(z){this.enabled&&(this.messages.push({level:"error",message:z,time:new Date}),console.error(z)),this.messages.length>100&&(this.messages=this.messages.slice(-100))}},{key:"clear",value:function(){this.messages=[]}},{key:"get",value:function(){return this.messages}}]),f}(),A=new T,x=A,a=[8,21,36,81,111,51],t=function(){function f(){S()(this,f),Z()(this,"buffer",void 0),this.buffer=new Uint8Array(0)}return F()(f,[{key:"transform",value:function(z,I){for(this.buffer=Uint8Array.from([].concat(p()(this.buffer),p()(z)));this.buffer.length>7;){if(this.buffer[0]!==165){this.buffer=this.buffer.subarray(1);continue}if(this.buffer.length<7)break;var y=this.buffer[1]|this.buffer[2]<<8,M=this.buffer[3],j=this.buffer[4],C=this.buffer[5]|this.buffer[6]<<8,k=this.buffer.subarray(0,4);if((0,O.d)(k)!==j){this.buffer=this.buffer.subarray(1),x.warn("crc8 error, calc: 0x".concat((0,O.d)(k).toString(16),", msg: 0x").concat(j.toString(16)));continue}if(C!==769){this.buffer=this.buffer.subarray(1),x.warn("cmd_id 0x".concat(C.toString(16)," not match"));continue}if(!a.includes(y)){this.buffer=this.buffer.subarray(1),x.warn("length error, length: ".concat(y));continue}if(this.buffer.length<6+y+2)break;var U=this.buffer.subarray(7,7+y),D=this.buffer[7+y]|this.buffer[8+y]<<8;if((0,O.I)(this.buffer.subarray(0,7+y))!==D){this.buffer=this.buffer.subarray(1),x.error("crc16 error, calc: 0x".concat((0,O.I)(this.buffer.subarray(0,7+y)).toString(16),", msg: 0x").concat(D.toString(16)));continue}I.enqueue(U),this.buffer=this.buffer.subarray(7+y+2)}}}]),f}(),m=t,g=e(73676),c=e(28348),o=function(){function f(v,z){S()(this,f),Z()(this,"options",{baudRate:115200,dataBits:8,stopBits:1,flowControl:"none",parity:"none"}),this.onEvent=v,this.onError=z,this.reader=null,this.transformer=new TransformStream(new m)}return F()(f,[{key:"connect",value:function(){var v=R()(u()().mark(function I(){return u()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if("serial"in navigator){M.next=3;break}return c.yw.error("Web Serial API not supported."),M.abrupt("return");case 3:return M.next=5,navigator.serial.requestPort();case 5:return this.port=M.sent,M.next=8,this.port.open(this.options);case 8:this.readableStreamClosed=this.port.readable.pipeTo(this.transformer.writable),this.reader=this.transformer.readable.getReader(),x.enabled=!0,x.clear(),this.readLoop();case 13:case"end":return M.stop()}},I,this)}));function z(){return v.apply(this,arguments)}return z}()},{key:"stop",value:function(){var v=R()(u()().mark(function I(){var y,M,j;return u()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return y=new TextEncoderStream,M=y.writable.getWriter(),j=y.readable.pipeTo(this.port.writable),this.reader.cancel(),k.next=6,this.readableStreamClosed.catch(function(){});case 6:return M.close(),k.next=9,j;case 9:return k.next=11,this.port.close();case 11:this.reader=null,this.transformer=new TransformStream(new m),x.enabled=!1;case 14:case"end":return k.stop()}},I,this)}));function z(){return v.apply(this,arguments)}return z}()},{key:"readLoop",value:function(){var v=R()(u()().mark(function I(){var y,M,j,C;return u()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:U.prev=0;case 1:return U.next=4,this.reader.read();case 4:if(y=U.sent,M=y.value,j=y.done,!j){U.next=10;break}return this.reader.releaseLock(),U.abrupt("break",20);case 10:if(C=(0,g.EY)(M),C.sender===c.eq){U.next=14;break}return x.error("Sender ".concat(C.sender," not match self ").concat(c.eq)),U.abrupt("continue",1);case 14:if(C.receiver===c.eq+256){U.next=17;break}return x.error("Receiver ".concat(C.receiver," not match self ").concat(c.eq)),U.abrupt("continue",1);case 17:this===null||this===void 0||this.onEvent(C),U.next=1;break;case 20:U.next=36;break;case 22:return U.prev=22,U.t0=U.catch(0),U.prev=24,U.next=27,this.stop();case 27:U.next=31;break;case 29:U.prev=29,U.t1=U.catch(24);case 31:this.reader=null,this.transformer=new TransformStream(new m),x.enabled=!1,x.clear(),this.onError(U.t0);case 36:case"end":return U.stop()}},I,this,[[0,22],[24,29]])}));function z(){return v.apply(this,arguments)}return z}()},{key:"getLog",value:function(){return x.get()}}]),f}(),i=o},56134:function(te,Q,e){e.a(te,function(P,u){return De(this,null,function*(){try{var W=e(64599),R=e.n(W),H=e(15009),S=e.n(H),J=e(99289),F=e.n(J),B=e(12444),Z=e.n(B),n=e(72004),p=e.n(n),O=e(9783),T=e.n(O),A=e(10622),x=e(52880),a=e(28348),t=P([A]);A=(t.then?(yield t)():t)[0];var m=function(){function g(){Z()(this,g),T()(this,"options",{baudRate:115200,dataBits:8,stopBits:1,flowControl:"none",parity:"none"}),T()(this,"writer",null)}return p()(g,[{key:"connect",value:function(){var c=F()(S()().mark(function i(){return S()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if("serial"in navigator){v.next=3;break}return a.yw.error("Web Serial API not supported."),v.abrupt("return");case 3:return v.next=5,navigator.serial.requestPort();case 5:return this.port=v.sent,v.next=8,this.port.open(this.options);case 8:this.writer=this.port.writable.getWriter();case 9:case"end":return v.stop()}},i,this)}));function o(){return c.apply(this,arguments)}return o}()},{key:"stop",value:function(){var c=F()(S()().mark(function i(){return S()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.writer.releaseLock();case 2:return this.writer=null,v.next=5,this.port.close();case 5:case"end":return v.stop()}},i,this)}));function o(){return c.apply(this,arguments)}return o}()},{key:"write",value:function(){var c=F()(S()().mark(function i(f){var v=this,z,I,y,M,j,C,k;return S()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(this.writer){D.next=3;break}return a.yw.error("Serial port is not open."),D.abrupt("return");case 3:z=0,setTimeout(function(){v.writer.write((0,x.r)())},z),z+=50,I=new A.Z(f.data),y=I.toSerialMsg(),M=y[f.selected],console.log(f),j=R()(M),D.prev=11,k=S()().mark(function q(){var G;return S()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:G=C.value,setTimeout(function(){v.writer.write(G)},z),z+=50;case 3:case"end":return Y.stop()}},q)}),j.s();case 14:if((C=j.n()).done){D.next=18;break}return D.delegateYield(k(),"t0",16);case 16:D.next=14;break;case 18:D.next=23;break;case 20:D.prev=20,D.t1=D.catch(11),j.e(D.t1);case 23:return D.prev=23,j.f(),D.finish(23);case 26:case"end":return D.stop()}},i,this,[[11,20,23,26]])}));function o(i){return c.apply(this,arguments)}return o}()}]),g}();Q.Z=m,u()}catch(g){u(g)}})})},30789:function(te,Q,e){e.d(Q,{E:function(){return Z},E4:function(){return p},GM:function(){return m},Gj:function(){return O},UP:function(){return x},cT:function(){return c},jK:function(){return o},lZ:function(){return A},q7:function(){return T}});var P=e(15009),u=e.n(P),W=e(99289),R=e.n(W),H=e(17990),S=e(55733),J=e.n(S),F=document.createElement("a"),B=document.createElement("input");B.type="file";var Z={yellow:"rgb(255, 238, 70)",green:"rgb(168, 255, 45)",orange:"rgb(255, 163, 8)",purple:"rgb(240, 41, 246)",pink:"rgb(255, 100, 142)",cyan:"rgb(69, 255, 242)",white:"#fff",black:"#000",blue:"rgb(47, 168, 223)",red:"rgb(255, 69, 70)"};function n(i){var f=i.split(".").pop();return{name:f+" file",extensions:[f]}}function p(i,f){if(x())R()(u()().mark(function I(){var y;return u()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,H.WZ.save({filters:[n(f)],defaultPath:f});case 2:if(y=j.sent,!(y!==null&&y.length>0)){j.next=6;break}return j.next=6,H.fs.writeTextFile(y,i);case 6:case"end":return j.stop()}},I)}))();else{var v=new Blob([i],{type:"text/plain;charset=utf-8"}),z=URL.createObjectURL(v);F.href=z,F.download=f,F.click(),URL.revokeObjectURL(z)}}function O(i,f){if(x())R()(u()().mark(function z(){var I,y;return u()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,H.WZ.save({filters:[n(f)],defaultPath:f});case 2:if(I=j.sent,!(I!==null&&I.length>0)){j.next=9;break}return j.next=6,i.arrayBuffer();case 6:return y=j.sent,j.next=9,H.fs.writeBinaryFile(I,y);case 9:case"end":return j.stop()}},z)}))();else{var v=URL.createObjectURL(i);F.href=v,F.download=f,F.click(),URL.revokeObjectURL(v)}}function T(i,f,v){var z={version:2,data:i,selected:v},I=JSON.stringify(z);p(I,f)}function A(i){var f=null;return window.createObjcectURL!==void 0?f=window.createOjcectURL(i):window.URL!==void 0?f=window.URL.createObjectURL(i):window.webkitURL!==void 0&&(f=window.webkitURL.createObjectURL(i)),f}function x(){return window!==void 0&&window.__TAURI__!==void 0}function a(i){return t.apply(this,arguments)}function t(){return t=R()(u()().mark(function i(f){var v;return u()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return v=new(J()),f.forEach(function(y){v.file(y.fileName,y.content)}),I.next=4,v.generateAsync({type:"blob"});case 4:return I.abrupt("return",I.sent);case 5:case"end":return I.stop()}},i)})),t.apply(this,arguments)}function m(i){return g.apply(this,arguments)}function g(){return g=R()(u()().mark(function i(f){var v,z,I;return u()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:v=[];for(z in f)for(I in f[z])v.push({fileName:"".concat(z,".").concat(I),content:f[z][I]});return M.next=4,a(v);case 4:return M.abrupt("return",M.sent);case 5:case"end":return M.stop()}},i)})),g.apply(this,arguments)}function c(i){return new Promise(function(f,v){if(x()){var z=[i.slice(1)],I="".concat(z," file");i==="image/*"&&(z=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],I="image"),R()(u()().mark(function y(){var M,j,C,k,U;return u()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,H.WZ.open({multiple:!1,directory:!1,filters:[{name:I,extensions:z}]});case 2:if(M=q.sent,!(M!==null&&M.length>0)){q.next=16;break}return j=M.replace(/\\/g,"/"),C=j.split("/").pop(),q.t0=Blob,q.next=9,H.fs.readBinaryFile(M);case 9:q.t1=q.sent,q.t2=[q.t1],k=new q.t0(q.t2),U=new File([k],C),f(U),q.next=17;break;case 16:v();case 17:case"end":return q.stop()}},y)}))()}else B.accept=i,B.value="",B.onchange=function(){if(B.files.length>0){var y=B.files[0];f(y)}else v(new Error("No file selected"))},B.click()})}function o(i){return document.getElementById("content-in").contains(i)||i.getAttribute("contentEditable")==="true"?!0:i.tagName==="INPUT"||i.tagName==="TEXTAREA"}},54030:function(te,Q,e){var P=e(67294),u=e(28348),W=e(85893);function R(H){return(0,u.ZP)(),(0,W.jsx)("div",{})}Q.Z=R},7427:function(te,Q,e){var P=e(12444),u=e.n(P),W=e(72004),R=e.n(W),H=e(31996),S=e.n(H),J=e(26037),F=e.n(J),B=e(67294),Z=e(21797),n=e(2487),p=e(42075),O=e(28058),T=e(18429),A=e(85893),x=function(a){S()(m,a);var t=F()(m);function m(){return u()(this,m),t.apply(this,arguments)}return R()(m,[{key:"render",value:function(){var c=this.props.errors.filter(function(f){return f.level==="warning"}),o=this.props.errors.filter(function(f){return f.level==="error"}),i=(0,A.jsx)(Z.ZP,{status:"success",title:"Check Passed!",subTitle:"0 error, 0 warning!",style:{marginTop:"50px"}});return o.length+c.length>0&&(i=(0,A.jsxs)("div",{style:{color:"var(--ant-color-text)",height:"100%"},children:[(0,A.jsxs)("p",{children:["Found ",o.length," errors, ",c.length," warnings."]}),(0,A.jsx)("div",{style:{paddingBottom:10},className:"card-body",children:(0,A.jsx)(n.Z,{bordered:!0,dataSource:this.props.errors,renderItem:function(v){return(0,A.jsx)(n.Z.Item,{children:(0,A.jsxs)(p.Z,{size:"middle",children:[v.level==="warning"?(0,A.jsx)(O.Z,{}):(0,A.jsx)(T.Z,{}),v.info]})})}})})]})),(0,A.jsxs)("div",{style:{width:"100%",height:"calc(100% - 50px)"},children:[(0,A.jsx)("h3",{style:{color:"var(--ant-color-text)"},children:"Check Data"}),i]})}}]),m}(B.Component);Q.Z=x},56296:function(te,Q,e){e.a(te,function(P,u){return De(this,null,function*(){try{let h=function(Me){var ye="";return Me.h&&(ye+=".h"),Me.h&&Me.c&&(ye+=" and "),Me.c&&(ye+=".c"),ye},le=function(){var Me=document.querySelector(".rmui"),ye=getComputedStyle(Me),be=ye.getPropertyValue("--ant-color-text-base");return be==="#fff"};var W=e(19632),R=e.n(W),H=e(15009),S=e.n(H),J=e(64599),F=e.n(J),B=e(97857),Z=e.n(B),n=e(99289),p=e.n(n),O=e(12444),T=e.n(O),A=e(72004),x=e.n(A),a=e(25098),t=e.n(a),m=e(31996),g=e.n(m),c=e(26037),o=e.n(c),i=e(9783),f=e.n(i),v=e(67294),z=e(49107),I=e(42075),y=e(14726),M=e(85265),j=e(42308),C=e(28348),k=e(24389),U=e(51376),D=e(30789),q=e(5970),G=e(85893),V=P([q]);q=(V.then?(yield V)():V)[0];var Y=function(Me){g()(be,Me);var ye=o()(be);function be(){var pe;T()(this,be);for(var he=arguments.length,se=new Array(he),oe=0;oe<he;oe++)se[oe]=arguments[oe];return pe=ye.call.apply(ye,[this].concat(se)),f()(t()(pe),"state",{preview:null,fileName:""}),f()(t()(pe),"checked",[]),pe}return x()(be,[{key:"review",value:function(he,se){this.setState({preview:this.props.code[he][se],fileName:"".concat(he,".").concat(se)})}},{key:"download",value:function(he,se){(0,D.E4)(this.props.code[he][se],"".concat(he,".").concat(se)),console.log(this.props.code[he][se])}},{key:"downloadChecked",value:function(){var pe=p()(S()().mark(function se(){var oe,ve,ie,$,ue;return S()().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:if(this.checked.length!==0){ge.next=3;break}return C.yw.error("Please select at least one file."),ge.abrupt("return");case 3:return oe={},ge.t0=Z(),ge.t1=Z()({},this.props.code),ge.next=8,(0,q.HC)();case 8:ge.t2=ge.sent,ve=(0,ge.t0)(ge.t1,ge.t2),ie=F()(this.checked);try{for(ie.s();!($=ie.n()).done;)ue=$.value,oe[ue]=ve[ue]}catch(xe){ie.e(xe)}finally{ie.f()}(0,D.GM)(oe).then(function(xe){(0,D.Gj)(xe,"codes.zip")});case 13:case"end":return ge.stop()}},se,this)}));function he(){return pe.apply(this,arguments)}return he}()},{key:"render",value:function(){var he=this,se=[{file:"ui base .h and .c",key:"_base"}];for(var oe in this.props.code)se.push({file:"".concat(oe," ").concat(h(this.props.code[oe])),key:oe,h:this.props.code[oe].h!==void 0,c:this.props.code[oe].c!==void 0});return(0,G.jsxs)("div",{className:"full",style:{overflow:"hidden"},children:[(0,G.jsx)("h3",{style:{color:"var(--ant-color-text)",marginBottom:20},children:"Download Data"}),(0,G.jsx)("div",{style:{paddingBottom:36},className:"card-body",children:(0,G.jsx)(z.Z,{columns:[{title:"File",dataIndex:"file",key:"file"},{title:"Preview",dataIndex:"key",key:"preview",render:function(ie,$){return(0,G.jsxs)(I.Z,{children:[$.h&&(0,G.jsx)(y.ZP,{type:"link",onClick:function(){he.review(ie,"h")},children:"Preview .h"}),$.c&&(0,G.jsx)(y.ZP,{type:"link",onClick:function(){he.review(ie,"c")},children:"Preview .c"})]})}},{title:"Download",dataIndex:"key",key:"download",render:function(ie,$){return ie!=="_base"?(0,G.jsxs)(I.Z,{children:[$.h&&(0,G.jsx)(y.ZP,{type:"link",onClick:function(){he.download(ie,"h")},children:"Download .h"}),$.c&&(0,G.jsx)(y.ZP,{type:"link",onClick:function(){he.download(ie,"c")},children:"Download .c"})]}):(0,G.jsx)(y.ZP,{type:"link",onClick:p()(S()().mark(function ue(){var Se,ge;return S()().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return ze.next=2,(0,q.HC)();case 2:return Se=ze.sent,ze.next=5,(0,D.GM)(Se);case 5:ge=ze.sent,(0,D.Gj)(ge,"ui_base.zip");case 7:case"end":return ze.stop()}},ue)})),children:"Download .zip"})}}],dataSource:se,rowSelection:{type:"checkbox",onChange:function(ie){var $=R()(ie);$.includes("_base")&&($=$.filter(function(ue){return ue!=="_base"}),$.push("ui_types"),$.push("ui_interface")),he.checked=$},getCheckboxProps:function(ie){return{name:ie.key}}},pagination:!1})}),(0,G.jsx)(M.Z,{onClose:function(){return he.setState({preview:null})},open:this.state.preview!==null,title:this.state.fileName,size:"large",getContainer:document.getElementById("content-in"),rootStyle:{inset:"25px 0 0 0"},children:(0,G.jsx)("div",{style:{height:"100%",overflow:"auto"},children:(0,G.jsx)(j.ZP,{value:this.state.preview||"",theme:le()?k.ub:k.tR,extensions:[(0,U.N)()],onContextMenu:function(ie){ie.stopPropagation()}})})})]})}}]),be}(v.Component);Q.Z=Y,u()}catch(h){u(h)}})})},22312:function(te,Q,e){e.a(te,function(P,u){return De(this,null,function*(){try{var W=e(64599),R=e.n(W),H=e(12444),S=e.n(H),J=e(72004),F=e.n(J),B=e(25098),Z=e.n(B),n=e(31996),p=e.n(n),O=e(26037),T=e.n(O),A=e(9783),x=e.n(A),a=e(67294),t=e(14726),m=e(85265),g=e(7427),c=e(56296),o=e(10622),i=e(85893),f=P([c,o]);[c,o]=f.then?(yield f)():f;var v=function(z){p()(y,z);var I=T()(y);function y(){var M;S()(this,y);for(var j=arguments.length,C=new Array(j),k=0;k<j;k++)C[k]=arguments[k];return M=I.call.apply(I,[this].concat(C)),x()(Z()(M),"state",{show:!1,step:"check"}),x()(Z()(M),"downloadRef",(0,a.createRef)()),x()(Z()(M),"data",{}),x()(Z()(M),"errors",[]),M}return F()(y,[{key:"gen",value:function(j){this.helper=new o.Z(j),this.data=j,this.code={ui:{h:this.helper.toUiH()}};var C=R()(this.helper.frames),k;try{for(C.s();!(k=C.n()).done;){var U=k.value,D=R()(U.groups),q;try{for(D.s();!(q=D.n()).done;){var G=q.value,V=R()(G.splits),Y;try{for(V.s();!(Y=V.n()).done;){var h=Y.value;this.code["ui_".concat(U.name,"_").concat(G.group_name,"_").concat(h.split_id)]={c:h.toSplitC(),h:h.toSplitH()}}}catch(le){V.e(le)}finally{V.f()}}}catch(le){D.e(le)}finally{D.f()}}}catch(le){C.e(le)}finally{C.f()}this.errors=this.helper.check(),this.setState({show:!0,step:"check"})}},{key:"onClose",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var j=this,C=(0,i.jsx)(t.ZP,{type:"primary",onClick:function(){return j.setState({step:"generate"})},disabled:this.errors.filter(function(U){return U.level==="error"}).length>0,children:"Generate"}),k=(0,i.jsx)(t.ZP,{type:"primary",onClick:function(){var D;return(D=j.downloadRef)===null||D===void 0||(D=D.current)===null||D===void 0?void 0:D.downloadChecked()},children:"Download"});return(0,i.jsx)("div",{children:(0,i.jsx)(m.Z,{title:"C Code Generator",placement:"right",onClose:function(){return j.onClose()},open:this.state.show,size:"large",getContainer:document.getElementById("content-in"),rootStyle:{inset:"25px 0 0 0"},style:{borderTop:"3px var(--ant-line-type) var(--ant-color-split)"},footer:(0,i.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",padding:5},children:this.state.step==="check"?C:k}),children:this.state.step==="check"?(0,i.jsx)(g.Z,{errors:this.errors}):(0,i.jsx)(c.Z,{code:this.code,ref:this.downloadRef})})})}}]),y}(a.Component);Q.Z=v,u()}catch(z){u(z)}})})},54433:function(te,Q,e){var P=e(12444),u=e.n(P),W=e(72004),R=e.n(W),H=e(31996),S=e.n(H),J=e(26037),F=e.n(J),B=e(67294),Z=e(86250),n=e(63606),p=e(85893),O=function(T){S()(x,T);var A=F()(x);function x(){return u()(this,x),A.apply(this,arguments)}return R()(x,[{key:"render",value:function(){return(0,p.jsxs)(Z.Z,{style:{width:"100%"},justify:"space-between",children:[this.props.children,(0,p.jsx)("div",{children:this.props.checked&&(0,p.jsx)(n.Z,{})})]})}}]),x}(B.Component);Q.Z=O},58377:function(te,Q,e){e.a(te,function(P,u){return De(this,null,function*(){try{var W=e(15009),R=e.n(W),H=e(99289),S=e.n(H),J=e(64599),F=e.n(J),B=e(12444),Z=e.n(B),n=e(72004),p=e.n(n),O=e(25098),T=e.n(O),A=e(31996),x=e.n(A),a=e(26037),t=e.n(a),m=e(9783),g=e.n(m),c=e(67294),o=e(14726),i=e(86250),f=e(83159),v=e(40411),z=e(73711),I=e(27732),y=e(11713),M=e(1210),j=e(52745),C=e(97937),k=e(16165),U=e(48268),D=e(62388),q=e(3213),G=e(54349),V=e(13799),Y=e(82843),h=e(23481),le=e(79476),Me=e(54433),ye=e(28348),be=e(73344),pe=e(553),he=e(30789),se=e(22312),oe=e(44740),ve=e(56134),ie=e(37932),$=e(85893),ue=P([se,ve]);[se,ve]=ue.then?(yield ue)():ue;var Se=[{key:"File-new",label:"New"},{key:"File-open",label:"Open"},{key:"File-save",label:"Save"},{key:"File-saveAs",label:"Save as"},{key:"File-autoSave",label:"Auto Save"},{type:"divider"},{key:"File-generate",label:"Generate Code",icon:(0,$.jsx)(z.Z,{})}],ge=[{key:"Edit-undo",label:"Undo"},{key:"Edit-redo",label:"Redo"},{key:"Edit-reset",label:"Reset History"}],xe=[{key:"Simulate-from",label:"From Robot",children:[{key:"Simulate-from-start",label:"Start"},{key:"Simulate-from-stop",label:"Stop"},{key:"Simulate-from-log",label:"Debug Log"}]},{key:"Simulate-to",label:"To Referee",children:[{key:"Simulate-to-start",label:"Start"},{key:"Simulate-to-stop",label:"Stop"},{key:"Simulate-to-update",label:"Update"}]},{key:"Simulate-settings",label:"Settings"}],ze=function(je){x()(Ae,je);var ke=t()(Ae);function Ae(){var ae;Z()(this,Ae);for(var ce=arguments.length,Ie=new Array(ce),de=0;de<ce;de++)Ie[de]=arguments[de];return ae=ke.call.apply(ke,[this].concat(Ie)),g()(T()(ae),"state",{fullscreen:!1,frames:["default"],selectedFrame:"default",darkMode:!1,couldUndo:!1,couldRedo:!1,serialStart:!1,serialToStart:!1,autoSave:!0}),g()(T()(ae),"formRef",(0,c.createRef)()),g()(T()(ae),"aboutRef",(0,c.createRef)()),g()(T()(ae),"generatorRef",(0,c.createRef)()),g()(T()(ae),"logDrawerRef",(0,c.createRef)()),g()(T()(ae),"serialModalRef",(0,c.createRef)()),g()(T()(ae),"modeModalRef",(0,c.createRef)()),g()(T()(ae),"tauri",(0,he.UP)()),g()(T()(ae),"serial",new oe.Z(function(Ce){return ae.onSerialEvent(Ce)},function(Ce){return ae.onSerialError(Ce)})),g()(T()(ae),"serialTo",new ve.Z),g()(T()(ae),"fileHandler",null),ae}return p()(Ae,[{key:"onSerialEvent",value:function(ce){var Ie=F()(ce.events),de;try{for(Ie.s();!(de=Ie.n()).done;){var Ce=de.value;this.props.onObjectEvent(Ce.type,Ce.obj)}}catch(ee){Ie.e(ee)}finally{Ie.f()}}},{key:"onSerialError",value:function(ce){this.props.setEditable(!0),this.setState({serialStart:!1}),ye.yw.error(ce.text)}},{key:"componentDidMount",value:function(){var ae=S()(R()().mark(function Ie(){var de=this,Ce,ee,_,L,E;return R()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(_=function(){return _=S()(R()().mark(function b(){var w;return R()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,be.G.isMaximized();case 2:w=N.sent,Ce.setState({fullscreen:w});case 4:case"end":return N.stop()}},b)})),_.apply(this,arguments)},ee=function(){return _.apply(this,arguments)},Ce=this,!this.tauri){r.next=8;break}return r.next=6,ee();case 6:return r.next=8,be.G.onResized(function(l){return ee()});case 8:return r.next=11,(L=this.modeModalRef.current)===null||L===void 0?void 0:L.open();case 11:if(E=r.sent,E!=="new"){r.next=25;break}return this.fileHandler=new ie.X(function(){return JSON.stringify({version:2,data:de.props.getData(),selected:de.state.selectedFrame})}),r.next=16,this.fileHandler.create();case 16:if(!r.sent){r.next=23;break}return r.t0=this.props,r.next=20,this.fileHandler.read();case 20:return r.t1=r.sent,r.t0.upload.call(r.t0,r.t1),r.abrupt("break",42);case 23:r.next=40;break;case 25:if(E!=="open"){r.next=38;break}return this.fileHandler=new ie.X(function(){return JSON.stringify({version:2,data:de.props.getData(),selected:de.state.selectedFrame})}),r.next=29,this.fileHandler.open();case 29:if(!r.sent){r.next=36;break}return r.t2=this.props,r.next=33,this.fileHandler.read();case 33:return r.t3=r.sent,r.t2.upload.call(r.t2,r.t3),r.abrupt("break",42);case 36:r.next=40;break;case 38:return this.setState({autoSave:!1}),r.abrupt("break",42);case 40:r.next=8;break;case 42:window.addEventListener("keydown",function(){var l=S()(R()().mark(function b(w){return R()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(!(w.ctrlKey&&w.key==="s")){N.next=8;break}if(w.preventDefault(),!de.fileHandler){N.next=7;break}return N.next=5,de.fileHandler.save();case 5:N.next=8;break;case 7:(0,he.q7)(de.props.getData(),"ui.rmui",de.state.selectedFrame);case 8:case"end":return N.stop()}},b)}));return function(b){return l.apply(this,arguments)}}());case 43:case"end":return r.stop()}},Ie,this)}));function ce(){return ae.apply(this,arguments)}return ce}()},{key:"setCouldDo",value:function(ce){this.setState({couldUndo:ce.couldPrevious,couldRedo:ce.couldNext}),this.fileHandler&&this.state.autoSave&&this.fileHandler.update()}},{key:"fullScreen",value:function(){if(this.tauri)be.G.maximize();else{var ce=document.documentElement;ce.requestFullscreen?ce.requestFullscreen():ce.msRequestFullscreen?ce.msRequestFullscreen():ce.mozRequestFullScreen?ce.mozRequestFullScreen():ce.webkitRequestFullscreen&&ce.webkitRequestFullscreen()}this.setState({fullscreen:!0})}},{key:"exitFullscreen",value:function(){this.tauri?be.G.unmaximize():document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),this.setState({fullscreen:!1})}},{key:"setFrames",value:function(ce){this.setState({frames:ce.frames,selectedFrame:ce.selected})}},{key:"onMenuClick",value:function(){var ae=S()(R()().mark(function Ie(de){var Ce=this,ee,_,L,E,d,r,l,b,w,X,N;return R()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(ee=de.keyPath[de.keyPath.length-1],ee.slice(0,6)!=="Insert"){s.next=7;break}_=de.key.slice(7),L={id:-1,name:"New".concat(_),layer:0,group:"Ungroup",type:"Ui".concat(_)},this.props.onObjectEvent("_add",L),s.next=199;break;case 7:if(ee!=="Edit-reset"){s.next=11;break}this.props.onHistoryEvent("resetNow"),s.next=199;break;case 11:if(ee!=="Edit-undo"){s.next=15;break}this.props.onHistoryEvent("previous"),s.next=199;break;case 15:if(ee!=="Edit-redo"){s.next=19;break}this.props.onHistoryEvent("next"),s.next=199;break;case 19:if(ee!=="File-new"){s.next=40;break}if(!this.fileHandler){s.next=36;break}return s.next=23,this.fileHandler.disableAutoSave();case 23:return this.setState({autoSave:!1}),s.next=26,this.fileHandler.create();case 26:if(!s.sent){s.next=34;break}return s.t0=this.props,s.next=30,this.fileHandler.read();case 30:s.t1=s.sent,s.t0.upload.call(s.t0,s.t1),this.fileHandler.enableAutoSave(),this.setState({autoSave:!0});case 34:s.next=38;break;case 36:this.props.reset(),this.props.onHistoryEvent("reset");case 38:s.next=199;break;case 40:if(ee!=="File-save"){s.next=49;break}if(!this.fileHandler){s.next=46;break}return s.next=44,this.fileHandler.save();case 44:s.next=47;break;case 46:(0,he.q7)(this.props.getData(),"ui.rmui",this.state.selectedFrame);case 47:s.next=199;break;case 49:if(ee!=="File-saveAs"){s.next=63;break}if(!this.fileHandler){s.next=61;break}return s.next=53,this.fileHandler.disableAutoSave();case 53:return this.setState({autoSave:!1}),s.next=56,this.fileHandler.create();case 56:if(!s.sent){s.next=61;break}return s.next=59,this.fileHandler.save();case 59:this.fileHandler.enableAutoSave(),this.setState({autoSave:!0});case 61:s.next=199;break;case 63:if(ee!=="File-autoSave"){s.next=74;break}if(!this.fileHandler){s.next=72;break}if(!this.state.autoSave){s.next=70;break}return s.next=68,this.fileHandler.disableAutoSave();case 68:s.next=71;break;case 70:this.fileHandler.enableAutoSave();case 71:this.setState({autoSave:!this.state.autoSave});case 72:s.next=199;break;case 74:if(ee!=="File-open"){s.next=94;break}if(!this.fileHandler){s.next=91;break}return s.next=78,this.fileHandler.disableAutoSave();case 78:return this.setState({autoSave:!1}),s.next=81,this.fileHandler.open();case 81:if(!s.sent){s.next=89;break}return s.t2=this.props,s.next=85,this.fileHandler.read();case 85:s.t3=s.sent,s.t2.upload.call(s.t2,s.t3),this.fileHandler.enableAutoSave(),this.setState({autoSave:!0});case 89:s.next=92;break;case 91:(0,he.cT)(".rmui").then(function(re){Ce.props.upload(re)}).catch(function(){});case 92:s.next=199;break;case 94:if(ee!=="File-generate"){s.next=98;break}(E=this.generatorRef.current)===null||E===void 0||E.gen(this.props.getData()),s.next=199;break;case 98:if(ee!=="FrameOp-add"){s.next=105;break}return s.next=101,this.formRef.current.open("New Frame",this.state.frames);case 101:d=s.sent,this.props.setFrame("add",d),s.next=199;break;case 105:if(ee!=="FrameOp-remove"){s.next=109;break}this.props.setFrame("remove",this.state.selectedFrame),s.next=199;break;case 109:if(ee!=="FrameOp-copy"){s.next=116;break}return s.next=112,this.formRef.current.open("Copy Frame To",this.state.frames);case 112:r=s.sent,this.props.setFrame("copy",r),s.next=199;break;case 116:if(ee!=="FrameOp-rename"){s.next=123;break}return s.next=119,this.formRef.current.open("Rename Frame To",this.state.frames);case 119:l=s.sent,this.props.setFrame("rename",l),s.next=199;break;case 123:if(ee!=="FrameOp-change"){s.next=128;break}b=de.key.slice(7),this.props.setFrame("change",b),s.next=199;break;case 128:if(de.key!=="Simulate-from-start"){s.next=141;break}return s.prev=129,s.next=132,this.serial.connect();case 132:this.props.setEditable(!1),this.setState({serialStart:!0}),s.next=139;break;case 136:s.prev=136,s.t4=s.catch(129),ye.yw.error(s.t4.text);case 139:s.next=199;break;case 141:if(de.key!=="Simulate-from-stop"){s.next=154;break}return s.prev=142,s.next=145,this.serial.stop();case 145:this.props.setEditable(!0),this.setState({serialStart:!1}),s.next=152;break;case 149:s.prev=149,s.t5=s.catch(142),ye.yw.error(s.t5.text);case 152:s.next=199;break;case 154:if(de.key!=="Simulate-from-log"){s.next=158;break}(w=this.logDrawerRef.current)===null||w===void 0||w.show(this.serial.getLog()),s.next=199;break;case 158:if(de.key!=="Simulate-to-start"){s.next=171;break}return s.prev=159,s.next=162,this.serialTo.connect();case 162:ye.yw.warning("This Module is beta now, maybe not work!"),this.setState({serialToStart:!0}),s.next=169;break;case 166:s.prev=166,s.t6=s.catch(159),ye.yw.error(s.t6.text);case 169:s.next=199;break;case 171:if(de.key!=="Simulate-to-stop"){s.next=183;break}return s.prev=172,s.next=175,this.serialTo.stop();case 175:this.setState({serialToStart:!1}),s.next=181;break;case 178:s.prev=178,s.t7=s.catch(172),ye.yw.error(s.t7.text);case 181:s.next=199;break;case 183:if(de.key!=="Simulate-to-update"){s.next=194;break}return s.prev=184,s.next=187,this.serialTo.write({data:this.props.getData(),selected:this.state.selectedFrame});case 187:s.next=192;break;case 189:s.prev=189,s.t8=s.catch(184),ye.yw.error(s.t8.text);case 192:s.next=199;break;case 194:if(ee!=="Simulate-settings"){s.next=199;break}return s.next=197,(X=this.serialModalRef.current)===null||X===void 0?void 0:X.getOptions(this.serial.options);case 197:N=s.sent,N&&(this.serial.options=N);case 199:case"end":return s.stop()}},Ie,this,[[129,136],[142,149],[159,166],[172,178],[184,189]])}));function ce(Ie){return ae.apply(this,arguments)}return ce}()},{key:"getFramesMenu",value:function(){var ce=[{key:"FrameOp-add",label:"New Frame"},{key:"FrameOp-copy",label:"Copy This Frame"},{key:"FrameOp-rename",label:"Rename This Frame"},{key:"FrameOp-remove",label:"Remove This Frame"},{key:"FrameOp-change",label:"Change to",selectable:"true",children:[]}],Ie=F()(this.state.frames),de;try{for(Ie.s();!(de=Ie.n()).done;){var Ce=de.value;ce[4].children.push({key:"Frames-".concat(Ce),label:Ce})}}catch(ee){Ie.e(ee)}finally{Ie.f()}return ce}},{key:"render",value:function(){var ce=this,Ie=(0,$.jsx)(o.ZP,{type:"text",onClick:function(){return ce.fullScreen()},size:"small",children:(0,$.jsx)(I.Z,{style:{color:"var(--ant-color-text)"}})}),de=(0,$.jsx)(o.ZP,{type:"text",onClick:function(){return ce.exitFullscreen()},size:"small",children:(0,$.jsx)(y.Z,{style:{color:"var(--ant-color-text)"}})}),Ce=(0,$.jsx)(o.ZP,{type:"text",onClick:function(){return ce.props.setDarkMode(!0)},size:"small",children:(0,$.jsx)(k.Z,{component:V.r})}),ee=(0,$.jsx)(o.ZP,{type:"text",onClick:function(){return ce.props.setDarkMode(!1)},size:"small",children:(0,$.jsx)(k.Z,{component:Y.r})});return ge[0].disabled=!this.state.couldUndo,ge[1].disabled=!this.state.couldRedo,xe[0].disabled=this.state.serialToStart,xe[1].disabled=this.state.serialStart,xe[2].disabled=this.state.serialStart||this.state.serialToStart,xe[0].children[0].disabled=this.state.serialStart,xe[0].children[1].disabled=!this.state.serialStart,xe[1].children[0].disabled=this.state.serialToStart,xe[1].children[1].disabled=!this.state.serialToStart,xe[1].children[2].disabled=!this.state.serialToStart,Se[3].disabled=!this.fileHandler,Se[4].disabled=!this.fileHandler,Se[4].label=(0,$.jsx)(Me.Z,{checked:this.state.autoSave,children:"Auto Save"}),(0,$.jsxs)("div",{style:{width:"100%",height:32,marginTop:-5,zIndex:2e3,position:"relative"},className:"solid-color","data-tauri-drag-region":!0,children:[(0,$.jsxs)(i.Z,{style:{width:"100vw",display:"flex",paddingTop:-5},justify:"flex-start",align:"center","data-tauri-drag-region":!0,children:[(0,$.jsx)("div",{style:{fontFamily:"YouSheBiaoTiHei",fontSize:20,paddingLeft:6,paddingRight:6,paddingTop:3,display:"flex",color:"var(--ant-color-text)",cursor:"default"},"data-tauri-drag-region":!0,children:"RoboMaster UI Designer"}),(0,$.jsx)(f.Z,{menu:{items:[].concat(Se),onClick:function(L){return ce.onMenuClick(L)}},children:(0,$.jsx)(o.ZP,{type:"text",size:"small",children:"File"})}),(0,$.jsx)(f.Z,{menu:{items:[].concat(ge),onClick:function(L){return ce.onMenuClick(L)}},children:(0,$.jsx)(o.ZP,{type:"text",size:"small",children:"Edit"})}),(0,$.jsx)(f.Z,{menu:{items:(0,D.t)(),onClick:function(L){return ce.onMenuClick(L)}},children:(0,$.jsx)(o.ZP,{type:"text",size:"small",children:"Insert"})}),(0,$.jsx)(f.Z,{menu:{items:this.getFramesMenu(),onClick:function(L){return ce.onMenuClick(L)},selectedKeys:["Frames-".concat(this.state.selectedFrame)]},children:(0,$.jsx)(o.ZP,{type:"text",size:"small",children:"Frames"})}),(0,$.jsx)(f.Z,{menu:{items:[].concat(xe),onClick:function(L){return ce.onMenuClick(L)}},children:(0,$.jsxs)(o.ZP,{type:"text",size:"small",children:["Simulate\xA0",(0,$.jsx)(v.Z,{color:this.state.serialStart||this.state.serialToStart?"green":"red"})]})}),(0,$.jsx)(o.ZP,{type:"text",size:"small",onClick:function(){var L;(L=ce.aboutRef.current)===null||L===void 0||L.show()},children:"About"}),(0,$.jsxs)("div",{style:{marginRight:5,justifyContent:"flex-end",marginLeft:"auto",marginTop:2},"data-tauri-drag-region":!0,children:[(0,$.jsxs)("div",{style:{display:"inline",marginRight:15,fontSize:10,cursor:"default",color:"var(--ant-color-text)"},"data-tauri-drag-region":!0,children:["Created by\xA0",(0,$.jsx)("a",{href:"https://github.com/bismarckkk",target:"_blank",children:(0,$.jsx)(o.ZP,{type:"link",style:{padding:0},size:"small","data-tauri-drag-region":!0,children:"Bismarckkk"})})]}),this.props.darkMode?ee:Ce,(0,$.jsx)("a",{href:"https://github.com/bismarckkk/RM-UI-Designer",target:"_blank",children:(0,$.jsx)(o.ZP,{type:"text",size:"small",children:(0,$.jsx)(M.Z,{style:{color:"var(--ant-color-text)"}})})}),(0,$.jsx)(o.ZP,{type:"text",size:"small",onClick:function(){return be.G.minimize()},style:{display:this.tauri?"inline":"none"},children:(0,$.jsx)(j.Z,{style:{color:"var(--ant-color-text)"}})}),this.state.fullscreen?de:Ie,(0,$.jsx)(o.ZP,{type:"text",size:"small",onClick:function(){return(0,pe.J)()},style:{display:this.tauri?"inline":"none"},children:(0,$.jsx)(C.Z,{style:{color:"var(--ant-color-text)"}})})]})]}),(0,$.jsx)(U.Z,{ref:this.formRef}),(0,$.jsx)(q.Z,{ref:this.aboutRef}),(0,$.jsx)(se.Z,{ref:this.generatorRef}),(0,$.jsx)(le.Z,{ref:this.logDrawerRef}),(0,$.jsx)(h.Z,{ref:this.serialModalRef}),(0,$.jsx)(G.Z,{ref:this.modeModalRef})]})}}]),Ae}(c.Component);Q.Z=ze,u()}catch(je){u(je)}})})},3213:function(te,Q,e){var P=e(97857),u=e.n(P),W=e(13769),R=e.n(W),H=e(12444),S=e.n(H),J=e(72004),F=e.n(J),B=e(25098),Z=e.n(B),n=e(31996),p=e.n(n),O=e(26037),T=e.n(O),A=e(9783),x=e.n(A),a=e(67294),t=e(85576),m=e(40249),g=e(21798),c=e(85893),o=["node"],i=function(f){p()(z,f);var v=T()(z);function z(){var I;S()(this,z);for(var y=arguments.length,M=new Array(y),j=0;j<y;j++)M[j]=arguments[j];return I=v.call.apply(v,[this].concat(M)),x()(Z()(I),"state",{open:!1,content:null}),I}return F()(z,[{key:"show",value:function(){this.setState({open:!0})}},{key:"componentDidMount",value:function(){var y=this;fetch(e(99734)).then(function(M){return M.text()}).then(function(M){y.setState({content:M})})}},{key:"render",value:function(){var y=this;return(0,c.jsx)(t.Z,{title:"About",onOk:function(){return y.setState({open:!1})},onCancel:function(){return y.setState({open:!1})},footer:null,open:this.state.open,children:this.state.content?(0,c.jsx)(g.U,{components:{a:function(j){var C=j.node,k=R()(j,o);return(0,c.jsx)("a",u()(u()({},k),{},{target:"_blank"}))}},children:this.state.content}):(0,c.jsx)(m.Z,{})})}}]),z}(a.Component);Q.Z=i},41327:function(te,Q,e){var P=e(97857),u=e.n(P),W=e(13769),R=e.n(W),H=e(12444),S=e.n(H),J=e(72004),F=e.n(J),B=e(25098),Z=e.n(B),n=e(31996),p=e.n(n),O=e(26037),T=e.n(O),A=e(9783),x=e.n(A),a=e(67294),t=e(85576),m=e(42075),g=e(14726),c=e(40249),o=e(21798),i=e(85893),f=["node"],v=function(z){p()(y,z);var I=T()(y);function y(){var M;S()(this,y);for(var j=arguments.length,C=new Array(j),k=0;k<j;k++)C[k]=arguments[k];return M=I.call.apply(I,[this].concat(C)),x()(Z()(M),"state",{open:!1,content:null}),M}return F()(y,[{key:"componentDidMount",value:function(){var j=this,C=localStorage.getItem("eula");(!C||!JSON.parse(C))&&(this.setState({open:!0}),fetch(e(19293)).then(function(k){return k.text()}).then(function(k){j.setState({content:k})}))}},{key:"dontShow",value:function(){localStorage.setItem("eula","true"),this.setState({open:!1})}},{key:"render",value:function(){var j=this;return(0,i.jsx)(t.Z,{title:"Welcome to RM UI Designer!",onOk:function(){return j.setState({open:!1})},onCancel:function(){return j.setState({open:!1})},footer:(0,i.jsxs)(m.Z,{children:[(0,i.jsx)(g.ZP,{onClick:this.dontShow.bind(this),children:"Don't show"}),(0,i.jsx)(g.ZP,{type:"primary",onClick:function(){return j.setState({open:!1})},children:"OK"})]}),open:this.state.open,zIndex:2200,children:this.state.content?(0,i.jsx)(o.U,{components:{a:function(k){var U=k.node,D=R()(k,f);return(0,i.jsx)("a",u()(u()({},D),{},{target:"_blank"}))}},children:this.state.content}):(0,i.jsx)(c.Z,{})})}}]),y}(a.Component);Q.Z=v},48268:function(te,Q,e){var P=e(64599),u=e.n(P),W=e(15009),R=e.n(W),H=e(99289),S=e.n(H),J=e(12444),F=e.n(J),B=e(72004),Z=e.n(B),n=e(25098),p=e.n(n),O=e(31996),T=e.n(O),A=e(26037),x=e.n(A),a=e(9783),t=e.n(a),m=e(67294),g=e(37476),c=e(5966),o=e(85893),i=function(f){T()(z,f);var v=x()(z);function z(){var I;F()(this,z);for(var y=arguments.length,M=new Array(y),j=0;j<y;j++)M[j]=arguments[j];return I=v.call.apply(v,[this].concat(M)),t()(p()(I),"state",{title:"",open:!1,frames:[]}),t()(p()(I),"promise",null),I}return Z()(z,[{key:"open",value:function(y,M){var j=this;return new Promise(function(C,k){j.setState({title:y,open:!0,frames:M}),j.promise&&j.promise.reject(),j.promise={resolve:C,reject:k}})}},{key:"render",value:function(){var y=this;return(0,o.jsx)(g.Y,{title:this.state.title,autoFocusFirstInput:!0,width:240,open:this.state.open,onOpenChange:function(j){y.promise&&!j&&y.state.open&&y.promise.reject(),y.setState({open:j})},onFinish:function(){var M=S()(R()().mark(function j(C){return R()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return y.promise.resolve(C.frame),y.promise=null,U.abrupt("return",!0);case 3:case"end":return U.stop()}},j)}));return function(j){return M.apply(this,arguments)}}(),children:(0,o.jsx)(c.Z,{name:"frame",label:"New Frame Name",width:"sm",rules:[{required:!0,message:"Please input frame name!"},function(M){var j=M.getFieldValue,C=y;return{validator:function(U,D){{var q=!0,G=j("frame"),V=u()(C.state.frames),Y;try{for(V.s();!(Y=V.n()).done;){var h=Y.value;if(h===G){q=!1;break}}}catch(le){V.e(le)}finally{V.f()}return q?Promise.resolve():Promise.reject(new Error("Cannot create same name frame!"))}}}}]})})}}]),z}(m.Component);Q.Z=i},79476:function(te,Q,e){var P=e(12444),u=e.n(P),W=e(72004),R=e.n(W),H=e(25098),S=e.n(H),J=e(31996),F=e.n(J),B=e(26037),Z=e.n(B),n=e(9783),p=e.n(n),O=e(67294),T=e(21797),A=e(2487),x=e(42075),a=e(85265),t=e(28058),m=e(18429),g=e(85893),c=function(o){F()(f,o);var i=Z()(f);function f(){var v;u()(this,f);for(var z=arguments.length,I=new Array(z),y=0;y<z;y++)I[y]=arguments[y];return v=i.call.apply(i,[this].concat(I)),p()(S()(v),"state",{show:!1,errors:[]}),v}return R()(f,[{key:"onClose",value:function(){this.setState({show:!1})}},{key:"show",value:function(z){this.setState({show:!0,errors:z})}},{key:"render",value:function(){var z=this,I=this.state.errors.filter(function(j){return j.level==="warn"}),y=this.state.errors.filter(function(j){return j.level==="error"}),M=(0,g.jsx)(T.ZP,{status:"success",title:"0 error, 0 warning!",style:{marginTop:"50px"}});return y.length+I.length>0&&(M=(0,g.jsxs)("div",{style:{color:"var(--ant-color-text)",height:"100%"},children:[(0,g.jsxs)("p",{children:["Logged ",y.length," errors, ",I.length," warnings."]}),(0,g.jsx)("div",{style:{paddingBottom:10},className:"card-body",children:(0,g.jsx)(A.Z,{bordered:!0,dataSource:this.state.errors,renderItem:function(C){return(0,g.jsx)(A.Z.Item,{children:(0,g.jsxs)(x.Z,{size:"middle",children:[C.level==="warn"?(0,g.jsx)(t.Z,{}):(0,g.jsx)(m.Z,{}),"".concat(C.time.toLocaleTimeString(),": ").concat(C.message)]})})}})})]})),(0,g.jsx)(a.Z,{title:"Serial Debug Log",placement:"right",onClose:function(){return z.onClose()},open:this.state.show,size:"large",getContainer:document.getElementById("content-in"),rootStyle:{inset:"25px 0 0 0"},style:{borderTop:"3px var(--ant-line-type) var(--ant-color-split)"},children:(0,g.jsx)("div",{style:{width:"100%",height:"calc(100% - 25px)"},children:M})})}}]),f}(O.Component);Q.Z=c},54349:function(te,Q,e){var P=e(12444),u=e.n(P),W=e(72004),R=e.n(W),H=e(25098),S=e.n(H),J=e(31996),F=e.n(J),B=e(26037),Z=e.n(B),n=e(9783),p=e.n(n),O=e(67294),T=e(85576),A=e(42075),x=e(14726),a=e(96074),t=e(37932),m=e(85893),g=function(c){F()(i,c);var o=Z()(i);function i(){var f;u()(this,i);for(var v=arguments.length,z=new Array(v),I=0;I<v;I++)z[I]=arguments[I];return f=o.call.apply(o,[this].concat(z)),p()(S()(f),"state",{title:"",open:!1,frames:[]}),p()(S()(f),"promise",null),f}return R()(i,[{key:"open",value:function(){var v=this;return new Promise(function(z,I){v.setState({open:!0}),v.promise&&v.promise.reject(),v.promise={resolve:z,reject:I}})}},{key:"onClick",value:function(v){this.setState({open:!1}),this.promise.resolve(v),this.promise=null}},{key:"render",value:function(){var v=this,z=(0,t._)();return(0,m.jsx)(T.Z,{footer:null,maskClosable:!1,closeIcon:null,zIndex:2050,open:this.state.open,children:(0,m.jsxs)(A.Z,{direction:"vertical",size:"middle",style:{width:"100%",padding:15},children:[(0,m.jsx)(x.ZP,{type:"primary",disabled:!z,style:{width:"100%"},size:"large",onClick:function(){return v.onClick("new")},children:"New Project"}),(0,m.jsx)(x.ZP,{type:"primary",disabled:!z,style:{width:"100%"},size:"large",onClick:function(){return v.onClick("open")},children:"Open Exist"}),(0,m.jsx)(a.Z,{}),(0,m.jsx)(x.ZP,{type:"primary",style:{width:"100%"},size:"large",onClick:function(){return v.onClick("use")},children:"Temporary Use"})]})})}}]),i}(O.Component);Q.Z=g},23481:function(te,Q,e){var P=e(15009),u=e.n(P),W=e(99289),R=e.n(W),H=e(12444),S=e.n(H),J=e(72004),F=e.n(J),B=e(25098),Z=e.n(B),n=e(31996),p=e.n(n),O=e(26037),T=e.n(O),A=e(9783),x=e.n(A),a=e(67294),t=e(37476),m=e(64317),g=e(85893),c=[1152e3,1e6,921600,576e3,5e5,460800,230400,115200,74800,57600,38400,19200,9600,4800],o=function(i){p()(v,i);var f=T()(v);function v(){var z;S()(this,v);for(var I=arguments.length,y=new Array(I),M=0;M<I;M++)y[M]=arguments[M];return z=f.call.apply(f,[this].concat(y)),x()(Z()(z),"state",{open:!1,defaultOptions:{}}),x()(Z()(z),"promise",null),z}return F()(v,[{key:"getOptions",value:function(I){var y=this;return new Promise(function(M,j){y.setState({open:!0,defaultOptions:I}),y.promise&&y.promise.reject(),y.promise={resolve:M,reject:j}})}},{key:"onFinish",value:function(){var z=R()(u()().mark(function y(M){return u()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.promise.resolve(M),this.promise=null,C.abrupt("return",!0);case 3:case"end":return C.stop()}},y,this)}));function I(y){return z.apply(this,arguments)}return I}()},{key:"render",value:function(){var I=this;return(0,g.jsxs)(t.Y,{title:"Serial",width:400,open:this.state.open,onOpenChange:function(M){return I.setState({open:M})},onFinish:function(){var y=R()(u()().mark(function M(j){return u()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,I.onFinish(j);case 2:return k.abrupt("return",k.sent);case 3:case"end":return k.stop()}},M)}));return function(M){return y.apply(this,arguments)}}(),children:[(0,g.jsx)(m.Z,{name:"baudRate",label:"Baud Rate",width:"sm",initialValue:this.state.defaultOptions.baudRate,options:c.map(function(y){return{value:y,label:y.toString()}}),rules:[{required:!0}]}),(0,g.jsx)(m.Z,{name:"dataBits",label:"Data Bits",width:"sm",initialValue:this.state.defaultOptions.dataBits,options:[{value:8,label:"8"},{value:7,label:"7"}],rules:[{required:!0}]}),(0,g.jsx)(m.Z,{name:"stopBits",label:"Stop Bits",width:"sm",initialValue:this.state.defaultOptions.stopBits,options:[{value:1,label:"1"},{value:2,label:"2"}],rules:[{required:!0}]}),(0,g.jsx)(m.Z,{name:"parity",label:"Parity",width:"sm",initialValue:this.state.defaultOptions.parity,options:[{value:"none",label:"None"},{value:"even",label:"Even"},{value:"odd",label:"Odd"}],rules:[{required:!0}]}),(0,g.jsx)(m.Z,{name:"flowControl",label:"Flow Control",width:"sm",initialValue:this.state.defaultOptions.flowControl,options:[{value:"none",label:"None"},{value:"hardware",label:"Hardware"}],rules:[{required:!0}]})]})}}]),v}(a.Component);Q.Z=o},4585:function(te,Q,e){e.d(Q,{Z:function(){return be}});var P=e(97857),u=e.n(P),W=e(13769),R=e.n(W),H=e(15009),S=e.n(H),J=e(99289),F=e.n(J),B=e(12444),Z=e.n(B),n=e(72004),p=e.n(n),O=e(25098),T=e.n(O),A=e(31996),x=e.n(A),a=e(26037),t=e.n(a),m=e(9783),g=e.n(m),c=e(67294),o=e(21797),i=e(42075),f=e(75081),v=e(85576),z=e(14726),I=e(92462),y=e(553),M=e(30789);function j(){return C.apply(this,arguments)}function C(){return C=F()(S()().mark(function pe(){var he,se,oe,ve,ie,$,ue,Se,ge,xe,ze,je,ke;return S()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(!(0,M.UP)()){ae.next=14;break}return ae.next=3,(0,I.Py)();case 3:if(he=ae.sent,!he.manifest){ae.next=11;break}return se=he.manifest.version.slice(1).split(".").map(Number),oe=localStorage.getItem("version_ignored"),oe||(oe="nightly 2c7a45e"),ve=oe.slice(1).split(".").map(Number),ie=se[0]>ve[0]||se[1]>ve[1]||se[2]>ve[2],ae.abrupt("return",{shouldUpdate:ie,manifest:he.manifest});case 11:return ae.abrupt("return",he);case 14:return $=Date.now(),ae.next=17,fetch("https://ui.bismarck.xyz/update.json?".concat($));case 17:return ue=ae.sent,ae.next=20,ue.json();case 20:return Se=ae.sent,ge=Se.notes,xe=Se.version.slice(1).split(".").map(Number),ze=localStorage.getItem("version_ignored"),ze||(ze="nightly 2c7a45e"),je=ze.slice(1).split(".").map(Number),ke=xe[0]>je[0]||xe[1]>je[1]||xe[2]>je[2],ae.abrupt("return",{shouldUpdate:ke,manifest:{body:ge,version:Se.version}});case 28:case"end":return ae.stop()}},pe)})),C.apply(this,arguments)}function k(){return U.apply(this,arguments)}function U(){return U=F()(S()().mark(function pe(){return S()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(!(0,M.UP)()){se.next=6;break}return se.next=3,(0,I.F_)();case 3:return se.abrupt("return",se.sent);case 6:window.location.reload();case 7:case"end":return se.stop()}},pe)})),U.apply(this,arguments)}var D={checkUpdate:j,installUpdate:k,relaunch:y.R},q=e(28348),G=e(21798),V=e(85893),Y=["node"],h=D.checkUpdate,le=D.installUpdate,Me=D.relaunch,ye=function(pe){x()(se,pe);var he=t()(se);function se(){var oe;Z()(this,se);for(var ve=arguments.length,ie=new Array(ve),$=0;$<ve;$++)ie[$]=arguments[$];return oe=he.call.apply(he,[this].concat(ie)),g()(T()(oe),"state",{step:0,content:"",version:""}),oe}return p()(se,[{key:"handleClose",value:function(){this.setState({step:0})}},{key:"handleOk",value:function(){var oe=F()(S()().mark(function ie(){return S()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.prev=0,this.setState({step:2}),ue.next=4,le();case 4:if(ue.t0=!(0,M.UP)(),ue.t0){ue.next=9;break}return ue.next=8,Me();case 8:ue.t0=!ue.sent;case 9:if(!ue.t0){ue.next=11;break}this.setState({step:3});case 11:ue.next=16;break;case 13:ue.prev=13,ue.t1=ue.catch(0),this.setState({step:-1});case 16:case"end":return ue.stop()}},ie,this,[[0,13]])}));function ve(){return oe.apply(this,arguments)}return ve}()},{key:"check",value:function(){var ve=this;return;var ie,$}},{key:"ignore",value:function(){localStorage.setItem("version_ignored",this.state.version),this.handleClose()}},{key:"componentDidMount",value:function(){this.check()}},{key:"render",value:function(){var ve=(0,V.jsx)("div",{});return this.state.step===-1?ve=(0,V.jsx)(o.ZP,{status:"error",title:"Update Failed"}):this.state.step===1?ve=(0,V.jsx)(G.U,{components:{a:function($){var ue=$.node,Se=R()($,Y);return(0,V.jsx)("a",u()(u()({},Se),{},{target:"_blank"}))}},children:this.state.content}):this.state.step===2?ve=(0,V.jsx)("div",{style:{padding:40,textAlign:"center",color:"var(--ant-color-text)"},children:(0,V.jsxs)(i.Z,{direction:"vertical",children:[(0,V.jsx)(f.Z,{size:"large"}),(0,V.jsx)("h3",{children:"Updating..."})]})}):this.state.step===3&&(ve=(0,V.jsx)(o.ZP,{status:"success",title:"Update Success",subTitle:"Please restart the app to apply the update."})),(0,V.jsx)(v.Z,{title:"Auto Update",open:this.state.step,closable:this.state.step>1,maskClosable:this.state.step>1,zIndex:2100,footer:this.state.step===1?(0,V.jsxs)(i.Z,{children:[(0,V.jsx)(z.ZP,{onClick:this.ignore.bind(this),children:"Ignore"}),(0,V.jsx)(z.ZP,{onClick:this.handleClose.bind(this),children:"Cancel"}),(0,V.jsx)(z.ZP,{type:"primary",onClick:this.handleOk.bind(this),children:"Update"})]}):null,children:ve})}}]),se}(c.Component),be=ye},87159:function(te,Q,e){e.d(Q,{Z:function(){return Ce}});var P=e(97857),u=e.n(P),W=e(15009),R=e.n(W),H=e(64599),S=e.n(H),J=e(99289),F=e.n(J),B=e(19632),Z=e.n(B),n=e(12444),p=e.n(n),O=e(72004),T=e.n(O),A=e(25098),x=e.n(A),a=e(31996),t=e.n(a),m=e(26037),g=e.n(m),c=e(9783),o=e.n(c),i=e(67294),f=e(63084),v=e(32983),z=e(42075),I=e(14726),y=e(28348),M=e(3909),j=e(84754),C=e(86250),k=e(83159),U=e(27847),D=e(90420),q=e(99611),G=e(94149),V=e(3355),Y=e(80882),h=e(85893),le=function(ee){t()(L,ee);var _=g()(L);function L(){var E;p()(this,L);for(var d=arguments.length,r=new Array(d),l=0;l<d;l++)r[l]=arguments[l];return E=_.call.apply(_,[this].concat(r)),o()(x()(E),"state",{status:E.props.defaultStatus||!1}),E}return T()(L,[{key:"render",value:function(){var d=this;return(0,h.jsx)(I.ZP,{size:"small",type:"text",onClick:function(){d.props.onChange&&d.props.onChange(!d.state.status),d.setState({status:!d.state.status})},children:this.state.status?this.props.onNode||"ON":this.props.offNode||"OFF"})}}]),L}(i.Component),Me=le;function ye(ee){return ee.map(function(_){return _===-2?"window":"E-".concat(_)})}var be=[{key:"D1-group-layer",label:"layer"},{key:"D1-group-group",label:"group"}],pe=function(ee){t()(L,ee);var _=g()(L);function L(){var E;p()(this,L);for(var d=arguments.length,r=new Array(d),l=0;l<d;l++)r[l]=arguments[l];return E=_.call.apply(_,[this].concat(r)),o()(x()(E),"state",{treeData:[],rightClickMenuOpen:!1,groupKey:"layer"}),o()(x()(E),"treeData",[]),E}return T()(L,[{key:"selectKey2id",value:function(d){var r=this,l=[],b=S()(d),w;try{var X=function(){var K=w.value;if(K==="window")l.push(-2);else if(K.startsWith("E-"))l.push(parseInt(K.slice(2)));else{var s=r.treeData.find(function(me){return me.key===K}).children.map(function(me){return parseInt(me.key.slice(2))}),re=S()(s),fe;try{for(re.s();!(fe=re.n()).done;){var ne=fe.value;l.includes(ne)||l.push(ne)}}catch(me){re.e(me)}finally{re.f()}}};for(b.s();!(w=b.n()).done;)X()}catch(N){b.e(N)}finally{b.f()}return l}},{key:"onElementMenuContainerClick",value:function(d){this.setState({rightClickMenuOpen:!1}),(d.target.classList.contains("ant-tree")||!d.ctrlKey&&!d.shiftKey)&&this.props.onSelect([])}},{key:"onElementMenuClick",value:function(d){var r=this;if(this.setState({rightClickMenuOpen:!1}),d.key==="D2-copy"){var l=null;d.target.localName!=="input"&&this.props.selectedId.length!==0&&this.props.selectedId[0]!==-2&&(d.preventDefault(),l=JSON.stringify(this.props.selectedId.map(function(N){return r.props.data[N]})),d.clipboardData.setData("text",l))}else if(d.key==="D2-delete"){var b=S()(this.props.selectedId),w;try{for(b.s();!(w=b.n()).done;){var X=w.value;this.props.onObjectEvent("remove",{id:X})}}catch(N){b.e(N)}finally{b.f()}}}},{key:"onElementRightClick",value:function(d){var r=this.selectKey2id([d.node.key]);r[0]in this.props.selectedId||this.props.onSelect(r)}},{key:"onSelect",value:function(d){if(d.length!==0){var r=this.selectKey2id(d);r.includes(-2)&&(r=[r[r.length-1]]),this.props.onSelect(r)}}},{key:"onMenuOpenChange",value:function(d){if(d){var r=this;setTimeout(function(){r.props.selectedId.length!==0&&r.props.selectedId[0]!==-2?r.setState({rightClickMenuOpen:!0}):r.setState({rightClickMenuOpen:!1})},100)}else this.setState({rightClickMenuOpen:!1})}},{key:"elementsMenuOnClick",value:function(d){var r=this;this.setState({groupKey:d.key.slice(9)},function(){return r.updateTree()})}},{key:"updateTree",value:function(){for(var d=this,r=this.state.groupKey,l=[],b=Object.keys(this.props.data),w=function(){for(var K=d.props.data[b[X]],s=-1,re=0;re<l.length;re++)if(l[re].key==="".concat(r,"-").concat(K[r])){s=re;break}s===-1&&(l.push({title:"".concat(r," ").concat(K[r]),key:"".concat(r,"-").concat(K[r]),children:[],isLeaf:!1}),s=l.length-1),l[s].children.push({title:(0,h.jsxs)(C.Z,{justify:"space-between",style:{width:"100%"},children:[K.name,(0,h.jsxs)(z.Z,{children:[(0,h.jsx)(Me,{onChange:function(ne){return d.props.onObjectEvent("setAttr",{id:K.id,payload:{visible:ne}})},defaultStatus:!0,offNode:(0,h.jsx)(D.Z,{}),onNode:(0,h.jsx)(q.Z,{})}),(0,h.jsx)(Me,{onChange:function(ne){return d.props.onObjectEvent("setAttr",{id:K.id,payload:{selectable:ne}})},defaultStatus:!0,offNode:(0,h.jsx)(G.Z,{}),onNode:(0,h.jsx)(V.Z,{style:{transform:"scaleX(-1)"}})})]})]}),key:"E-".concat(b[X])})},X=0;X<b.length;X++)w();return l=l.sort(function(N,K){return N.key.toString().localeCompare(K.key.toString())}),l.unshift({title:"UI Window",key:"window"}),this.treeData=l,l}},{key:"render",value:function(){var d=this;return(0,h.jsx)(f.Z,{size:"small",title:"Elements",style:{height:"100%"},extra:(0,h.jsx)(k.Z,{menu:{items:be,onClick:function(l){return d.elementsMenuOnClick(l)},selectable:!0,selectedKeys:["D1-group-".concat(this.state.groupKey)]},children:(0,h.jsxs)(z.Z,{style:{fontSize:11},children:["Group by",(0,h.jsx)(Y.Z,{size:"small"})]})}),children:(0,h.jsx)("div",{className:"card-body",onMouseUp:function(l){return d.onElementMenuContainerClick(l)},children:(0,h.jsx)(k.Z,{menu:{items:[{key:"D2-copy",label:"Copy"},{key:"D2-delete",label:"Delete",danger:!0}],onClick:function(l){d.onElementMenuClick(l)}},trigger:["contextMenu"],open:this.state.rightClickMenuOpen,onOpenChange:function(l){d.onMenuOpenChange(l)},children:(0,h.jsx)(U.Z,{className:"full",treeData:this.updateTree(),onSelect:function(l){return d.onSelect(l)},selectedKeys:ye(this.props.selectedId),onRightClick:function(l){return d.onElementRightClick(l)},treeDefaultExpandAll:!0,showLine:!0,blockNode:!0,multiple:!0,selectable:this.props.editable})})})})}}]),L}(i.Component),he=pe,se=e(32777),oe=e(30789),ve=function(ee){t()(L,ee);var _=g()(L);function L(){return p()(this,L),_.apply(this,arguments)}return T()(L,[{key:"render",value:function(){return this.props.color==="Main"?(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{style:{border:"1px solid #aaa",height:16,width:16,borderRadius:"20%",display:"inline-flex"},children:[(0,h.jsx)("div",{style:{backgroundColor:"red",height:12,width:6,margin:"1px 0 1px 1px",borderTopLeftRadius:"20%",borderBottomLeftRadius:"20%",display:"inline-flex"}}),(0,h.jsx)("div",{style:{backgroundColor:"blue",height:12,width:6,margin:"1px 1px 1px 0",borderTopRightRadius:"20%",borderBottomRightRadius:"20%",display:"inline-flex"}})]}),"\xA0 Main"]}):(0,h.jsx)("div",{children:(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{style:{border:"1px solid #aaa",height:16,width:16,borderRadius:"20%",display:"inline-flex"},children:(0,h.jsx)("div",{style:{backgroundColor:oe.E[this.props.color.toLowerCase()],height:12,width:12,margin:1,borderRadius:"20%",display:"inline-flex"}})}),"\xA0 ",this.props.color]})})}}]),L}(i.Component),ie=ve,$={id:{title:"Id",key:"id",dataIndex:"id",valueType:"digit",editable:!1},name:{title:"Name",key:"name",dataIndex:"name"},group:{title:"Group",key:"group",dataIndex:"group"},kind:{title:"Kind",key:"kind",dataIndex:"kind",editable:!1},lineWidth:{title:"Line Width",key:"lineWidth",dataIndex:"lineWidth",valueType:"digit"},layer:{title:"Layer",key:"layer",dataIndex:"layer",valueType:"digit"},x:{title:"X",key:"x",dataIndex:"x",valueType:"digit"},y:{title:"Y",key:"y",dataIndex:"y",valueType:"digit"},x2:{title:"X2",key:"x2",dataIndex:"x2",valueType:"digit"},y2:{title:"Y2",key:"y2",dataIndex:"y2",valueType:"digit"},width:{title:"Width",key:"width",dataIndex:"width",valueType:"digit"},height:{title:"Height",key:"height",dataIndex:"height",valueType:"digit"},rx:{title:"Rx",key:"rx",dataIndex:"rx",valueType:"digit"},ry:{title:"Ry",key:"ry",dataIndex:"ry",valueType:"digit"},r:{title:"R",key:"r",dataIndex:"r",valueType:"digit"},startAngle:{title:"Start Angle",key:"startAngle",dataIndex:"startAngle",valueType:"digit"},endAngle:{title:"End Angle",key:"endAngle",dataIndex:"endAngle",valueType:"digit"},fontSize:{title:"Font Size",key:"fontSize",dataIndex:"fontSize",valueType:"digit"},float:{title:"Number",key:"float",dataIndex:"float",valueType:"digit"},number:{title:"Number",key:"number",dataIndex:"number",valueType:"digit"},text:{title:"Text",key:"text",dataIndex:"text",formItemProps:{rules:[{max:30},{type:"string"}]}},color:{title:"Color",key:"color",dataIndex:"color",valueType:"select",valueEnum:{main:(0,h.jsx)(ie,{color:"Main"}),yellow:(0,h.jsx)(ie,{color:"Yellow"}),green:(0,h.jsx)(ie,{color:"Green"}),orange:(0,h.jsx)(ie,{color:"Orange"}),purple:(0,h.jsx)(ie,{color:"Purple"}),pink:(0,h.jsx)(ie,{color:"Pink"}),cyan:(0,h.jsx)(ie,{color:"Cyan"}),black:(0,h.jsx)(ie,{color:"Black"}),white:(0,h.jsx)(ie,{color:"White"})}},team:{title:"Team",key:"team",dataIndex:"team",valueType:"select",valueEnum:{red:(0,h.jsx)(ie,{color:"Red"}),blue:(0,h.jsx)(ie,{color:"Blue"})}},role:{title:"Role",key:"role",dataIndex:"role",valueType:"select",valueEnum:{1:"Hero",2:"Engineer",3:"No3. Infantry",4:"No4. Infantry",5:"No5. Infantry",6:"Drone"}},backgroundImage:{title:"Background Image",key:"backgroundImage",dataIndex:"backgroundImage",valueType:"switch"}};function ue(ee){for(var _=Object.keys(ee),L=[],E=0;E<_.length;E++)$[_[E]]&&L.push($[_[E]]);return L}var Se=e(62388);function ge(ee,_,L,E){return xe.apply(this,arguments)}function xe(){return xe=F()(R()().mark(function ee(_,L,E,d){var r,l,b,w,X,N,K,s,re,fe;return R()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(_){me.next=2;break}return me.abrupt("return");case 2:if(r=1,_.version&&(r=_.version),r!==1){me.next=10;break}return me.next=7,E("default");case 7:for(l=0,b=Object.keys(_);l<b.length;l++)w=b[l],L("_update",_[w]);me.next=22;break;case 10:if(r!==2){me.next=22;break}X=0,N=Object.keys(_.data);case 12:if(!(X<N.length)){me.next=20;break}return K=N[X],me.next=16,E(K);case 16:for(s=0,re=Object.keys(_.data[K]);s<re.length;s++)fe=re[s],L("_update",_.data[K][fe]);case 17:X++,me.next=12;break;case 20:return me.next=22,E(_.selected);case 22:d();case 23:case"end":return me.stop()}},ee)})),xe.apply(this,arguments)}var ze=e(96486),je=e.n(ze);function ke(ee){return ee.head>0?u()({},ee.data[ee.head-1]):null}function Ae(ee){return ee.head<ee.data.length-1?u()({},ee.data[ee.head+1]):null}var ae=function(){function ee(){p()(this,ee),o()(this,"cacheTimer",null),o()(this,"updateTimer",null),o()(this,"now",null),o()(this,"_previous",null),o()(this,"_next",null),o()(this,"his",null),o()(this,"catchUpdate",!0);var _=localStorage.getItem("history"),L={data:[{}],head:0,version:1};_?L=JSON.parse(_):(_=localStorage.getItem("data"),_?L.data[0]=JSON.parse(_):L.data[0]={version:2,data:{default:{}},selected:"default"},localStorage.setItem("history",JSON.stringify(L))),this.now=L.data[L.head],this._previous=ke(L),this._next=Ae(L)}return T()(ee,[{key:"save",value:function(){var L=this;this.cacheTimer&&clearTimeout(this.cacheTimer),this.cacheTimer=setTimeout(function(){L.his.head>50&&(L.his.data=L.his.data.slice(L.his.head-50),L.his.head=50),L.his.head<L.his.data.length-20&&(L.his.data=L.his.data.slice(0,L.his.head+20)),localStorage.setItem("history",JSON.stringify(L.his)),L.his=null},2e3)}},{key:"read",value:function(){this.his||(this.his=JSON.parse(localStorage.getItem("history")))}},{key:"get",value:function(){return this.catchUpdate?{now:this.now,couldNext:this._next!==null,couldPrevious:this._previous!==null}:{now:this.now,couldNext:!1,couldPrevious:!1}}},{key:"reset",value:function(L){return this._previous=null,this._next=null,this.his={data:[L],head:0,version:1},this.save(),this.get()}},{key:"next",value:function(){return this._next&&(this._previous=this.now,this.now=this._next,this.read(),this.his.head++,this._next=Ae(this.his),this.save()),this.get()}},{key:"previous",value:function(){return this._previous&&(this._next=this.now,this.now=this._previous,this.read(),this.his.head--,this._previous=ke(this.his),this.save()),this.get()}},{key:"cancelUpdate",value:function(){this.updateTimer&&clearTimeout(this.updateTimer)}},{key:"update",value:function(L){var E=this;this.catchUpdate&&(this.updateTimer&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout(function(){je().isEqual(L,E.now)||(E._previous=E.now,E.now=L,E.read(),E.his.data=E.his.data.slice(0,E.his.head+1),E.his.data.push(L),E.his.head++,E._next=null,E.save())},500))}}]),ee}(),ce=ae,Ie=e(30819),de=function(ee){t()(L,ee);var _=g()(L);function L(){var E;p()(this,L);for(var d=arguments.length,r=new Array(d),l=0;l<d;l++)r[l]=arguments[l];return E=_.call.apply(_,[this].concat(r)),o()(x()(E),"objects",{default:{}}),o()(x()(E),"data",{}),o()(x()(E),"state",{properties:null,selectedId:[],frame:"default",uiWindow:{height:1080,width:1920,ratio:1,team:"red",role:1,backgroundImage:!0},infoModalShow:!1,data:{},editable:!0}),o()(x()(E),"canvas",null),o()(x()(E),"canvasRef",(0,i.createRef)()),o()(x()(E),"propertiesRef",(0,i.createRef)()),o()(x()(E),"background",null),o()(x()(E),"his",new ce),o()(x()(E),"moveTimer",null),o()(x()(E),"moveTimeout",null),E}return T()(L,[{key:"getNewDataId",value:function(){return Object.keys(this.state.data).length===0?0:Math.max.apply(Math,Z()(Object.keys(this.state.data)))+1}},{key:"setEditable",value:function(){var E=F()(R()().mark(function r(l){var b,w,X,N,K;return R()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(this.setState({editable:l}),this.his.catchUpdate=l,this.canvas.selection=l,se.fabric.Object.prototype.selectable=l,!l){re.next=9;break}return re.next=7,this.onHistoryEvent("refresh");case 7:re.next=15;break;case 9:return b=this.state.uiWindow.role,re.next=12,this.reset(!0);case 12:this.cancelHistoryUpdate(),this.props.setCouldDo({couldNext:!1,couldPrevious:!1}),this.setRobotId(b);case 15:w=this.canvas.getObjects(),X=S()(w);try{for(X.s();!(N=X.n()).done;)K=N.value,K.set("selectable",l)}catch(fe){X.e(fe)}finally{X.f()}this.select([]);case 19:case"end":return re.stop()}},r,this)}));function d(r){return E.apply(this,arguments)}return d}()},{key:"setRobotId",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;d===0&&(d=this.state.uiWindow.role),this.state.uiWindow.team==="blue"&&(d+=100),(0,y.ue)(d)}},{key:"cancelHistoryUpdate",value:function(){var d=this;this.his.cancelUpdate(),setTimeout(function(){d.his.cancelUpdate(),d.props.setCouldDo(d.his.get())},200)}},{key:"save",value:function(){(0,oe.q7)(this.data,"ui.rmui",this.state.frame)}},{key:"updateHistory",value:function(){var d=this;setTimeout(function(){var r={version:2,data:d.data,selected:d.state.frame};je().isEqual(r,d.his.now)||(d.his.update(r),d.props.setCouldDo({couldNext:!1,couldPrevious:!0}))},100)}},{key:"getData",value:function(){return this.data}},{key:"select",value:function(d,r){var l=this;if(d.length===0)this.setState({properties:null,selectedId:[]}),this.canvas.discardActiveObject(),this.canvas.renderAll();else if(d[0]===-2)this.setState({properties:this.state.uiWindow,selectedId:[-2]}),this.canvas.discardActiveObject(),this.canvas.renderAll();else if(d.length===1)this.setState({properties:this.state.data[d[0]],selectedId:[d[0]]}),this.canvas.setActiveObject(this.objects[this.state.frame][d[0]]),this.canvas.renderAll();else if(this.setState({properties:null,selectedId:d}),!r){var b=d.map(function(X){return l.objects[l.state.frame][X]}),w=new se.fabric.ActiveSelection(b,{canvas:this.canvas});this.canvas.setActiveObject(w),this.canvas.renderAll()}}},{key:"reset",value:function(){var E=F()(R()().mark(function r(){var l,b,w,X=arguments;return R()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(l=X.length>0&&X[0]!==void 0?X[0]:!1,l){b=this.canvas.getObjects();for(w in b)this.canvas.remove(b[w]);this.canvas.renderAll()}else this.canvas.clear(),this.setBackground(e(25665)),this.canvas.backgroundColor="#fff";if(Object.keys(this.objects).includes("default")){K.next=5;break}return K.next=5,this.onFrameEvent("add","default");case 5:return this.objects.default={},K.next=8,this.onFrameEvent("change","default");case 8:this.objects={default:{}},this.props.onFrameChange({frames:["default"],selected:"default"}),this.select([]),this.resetCanvasSize(),this.objectsToData();case 13:case"end":return K.stop()}},r,this)}));function d(){return E.apply(this,arguments)}return d}()},{key:"resetCanvasSize",value:function(){if(this.canvas){var d,r=this.canvasRef.current.clientWidth,l=this.canvasRef.current.clientHeight,b=u()({},this.state.uiWindow);r/l<b.width/b.height?(l=r*b.height/b.width,b.ratio=b.width/r):(r=l*b.width/b.height,b.ratio=b.height/l),this.setState({uiWindow:b}),this.canvas.setHeight(l),this.canvas.setWidth(r),this.canvas.viewportTransform[5]=l,this.canvas.viewportTransform[3]=-1;var w=this.canvasRef.current.clientWidth,X=this.canvasRef.current.clientHeight,N=w-r,K=X-l,s=document.getElementById("coordinateDisplay");s.style.right="".concat(N+12,"px"),s.style.bottom="".concat(K+25,"px");for(var re=0,fe=Object.keys(this.objects[this.state.frame]);re<fe.length;re++){var ne=fe[re];this.objects[this.state.frame][ne].setRatio(b.ratio)}(d=this.background)===null||d===void 0||d.set({scaleX:1/b.ratio,scaleY:1/b.ratio}),this.canvas.renderAll(),this.objectsToData(),this.setState({infoModalShow:!1})}}},{key:"onPropertiesChange",value:function(d,r){var l=this;if(this.state.selectedId[0]===-2){if(r.team!==this.state.uiWindow.team){for(var b=0,w=Object.keys(this.objects[this.state.frame]);b<w.length;b++){var X=w[b];this.objects[this.state.frame][X].setTeam(r.team)}this.canvas.renderAll(),this.objectsToData()}if(this.setState({uiWindow:r,properties:r},function(){l.resetCanvasSize(),l.setRobotId()}),r.backgroundImage!==this.state.uiWindow.backgroundImage)if(r.backgroundImage){var N,K=this.state.uiWindow.ratio;(N=this.background)===null||N===void 0||N.set({scaleX:1/K,scaleY:1/K}),this.canvas.setBackgroundImage(this.background),this.canvas.renderAll()}else this.canvas.setBackgroundImage(null),this.canvas.renderAll();(r.width!==this.state.uiWindow.width||r.height!==this.state.uiWindow.height)&&y.oC.warning({title:"Warning",content:"Modify UI window width and height may cause unknown error."})}else this.state.selectedId.length===1&&(this.objects[this.state.frame][this.state.selectedId[0]].fromObject(r),this.canvas.renderAll(),this.objectsToData(),this.updateHistory())}},{key:"setBackground",value:function(d){var r=this;se.fabric.Image.fromURL(d,function(l,b){var w;r.background=l;var X=r.state.uiWindow.ratio;(w=r.background)===null||w===void 0||w.set({scaleX:1/X,scaleY:-1/X}),r.state.uiWindow.backgroundImage&&(r.canvas.setBackgroundImage(r.background),r.canvas.renderAll())})}},{key:"componentDidMount",value:function(){var d=this,r=this;this.canvas=new se.fabric.Canvas("ui"),this.setBackground(e(25665)),this.canvas.backgroundColor="#fff",window.addEventListener("resize",function(){d.resetCanvasSize()},!1),window.addEventListener("copy",function(l){var b=null;console.log(l.target,(0,oe.jK)(l.target)),!(0,oe.jK)(l.target)&&r.state.selectedId.length!==0&&r.state.selectedId[0]!==-2&&(l.preventDefault(),b=JSON.stringify(r.state.selectedId.map(function(w){return r.state.data[w]})),l.clipboardData.setData("text",b))}),window.addEventListener("paste",function(l){for(var b=!1,w=l.clipboardData.items,X=0;X<w.length;X++)if(w[X].type.indexOf("image")===0){l.preventDefault(),b=!0;var N=w[X].getAsFile(),K=new FileReader;K.onload=function(Te){r.setBackground(Te.target.result)},K.readAsDataURL(N)}if(!b&&!(0,oe.jK)(l.target))try{l.preventDefault();var s=l.clipboardData.getData("text"),re=JSON.parse(s);Array.isArray(re)||(re=[re]);var fe=[],ne=20,me=S()(re),Re;try{var we=function(){var Ue=Re.value;setTimeout(function(){Ue.id=r.getNewDataId(),fe.push(Ue.id),r.onObjectEvent("_update",Ue)},ne),ne+=20};for(me.s();!(Re=me.n()).done;)we()}catch(Te){me.e(Te)}finally{me.f()}setTimeout(function(){r.select(fe),d.updateHistory()},ne)}catch(Te){y.yw.warning("Invalid data")}}),window.addEventListener("keydown",function(l){if(l.key==="Delete"&&r.state.selectedId.length!==0&&r.state.selectedId[0]!==-2){var b=S()(r.state.selectedId),w;try{for(b.s();!(w=b.n()).done;){var X=w.value;r.onObjectEvent("remove",{id:X})}}catch(s){b.e(s)}finally{b.f()}d.updateHistory()}if(l.ctrlKey&&l.key==="z"&&!l.shiftKey?(l.preventDefault(),d.onHistoryEvent("previous")):l.ctrlKey&&(0,Ie.toLower)(l.key)==="z"&&l.shiftKey&&(l.preventDefault(),d.onHistoryEvent("next")),["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(l.key)&&!(0,oe.jK)(l.target)){var N=function(re,fe){switch(fe*=r.state.uiWindow.ratio,re){case"ArrowUp":K.top+=fe;break;case"ArrowDown":K.top-=fe;break;case"ArrowLeft":K.left-=fe;break;case"ArrowRight":K.left+=fe;break}K instanceof se.fabric.ActiveSelection?K.getObjects().forEach(function(ne){ne.setCoords(),ne.resizeScale()}):(K.setCoords(),K.resizeScale()),r.canvas.renderAll(),r.objectsToData(),r.updateHistory()},K=r.canvas.getActiveObject();if(!K)return;l.preventDefault(),N(l.key,2),d.moveTimeout&&clearTimeout(d.moveTimeout),d.moveTimer&&clearInterval(d.moveTimer),d.moveTimeout=setTimeout(function(){d.moveTimer=setInterval(function(){N(l.key,1)},500)},1500)}}),window.addEventListener("keyup",function(l){["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(l.key)&&(clearTimeout(d.moveTimeout),clearInterval(d.moveTimer))}),this.canvas.on({"mouse:up":function(){for(var b=0,w=Object.keys(r.objects[r.state.frame]);b<w.length;b++){var X=w[b];r.objects[r.state.frame][X].resizeScale()}r.canvas.renderAll(),r.objectsToData(),r.updateHistory();var N=r.canvas.getActiveObject();setTimeout(function(){if(N)if(N instanceof se.fabric.ActiveSelection){var K=N.getObjects().map(function(s){return s.id});r.select(K,!0)}else r.select([N.id]);else r.select([])},100)},"mouse:move":function(b){var w=d.canvas.getPointer(b.e),X=d.state.uiWindow.ratio,N=Math.round(w.x*X),K=Math.round(w.y*X),s=document.getElementById("coordinateDisplay");s.style.display="block",s.textContent="x: ".concat(N,", y: ").concat(K)},"mouse:out":function(){var b=document.getElementById("coordinateDisplay");b.style.display="none"}}),setTimeout(function(){var l=d.his.get();d.props.setCouldDo(l),ge(l.now,function(b,w){return d.onObjectEvent(b,w)},function(b){return r.onFrameEvent("change",b)},function(){return d.canvas.renderAll()}).then(function(){d.setRobotId(),d.resetCanvasSize()}),d.cancelHistoryUpdate()},200)}},{key:"upload",value:function(d){var r=this,l=this,b=new FileReader;b.onload=function(){var w=F()(R()().mark(function X(N){return R()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,l.reset();case 2:return s.next=4,ge(JSON.parse(N.target.result),function(re,fe){return l.onObjectEvent(re,fe)},function(re){return l.onFrameEvent("change",re)},function(){return l.canvas.renderAll()}).then(function(){r.setRobotId()});case 4:l.objectsToData(),l.his.reset({version:2,data:r.data,selected:r.state.frame});case 6:case"end":return s.stop()}},X)}));return function(X){return w.apply(this,arguments)}}(),b.readAsText(d)}},{key:"objectsToData",value:function(){for(var d=this,r={},l=0,b=Object.keys(this.objects);l<b.length;l++){var w=b[l];r[w]={};for(var X=0,N=Object.keys(this.objects[w]);X<N.length;X++){var K=N[X],s=this.objects[w][K].toObject();r[w][s.id]=s}}if(this.data=r,this.setState({data:r[this.state.frame]}),this.state.selectedId.length===1){var re;this.state.selectedId[0]===-2?re=this.state.uiWindow:re=r[this.state.frame][this.state.selectedId[0]],this.setState({properties:u()({},re)},function(){var fe;(fe=d.propertiesRef.current)===null||fe===void 0||fe.reload()})}}},{key:"onObjectEvent",value:function(d,r){var l=this;function b(s){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,fe={id:s.id,name:s.name,layer:s.layer,group:s.group,type:s.type,ratio:l.state.uiWindow.ratio,team:l.state.uiWindow.team},ne=(0,Se.R)(fe);l.objects[l.state.frame][s.id]=ne,re&&ne.fromObject(s),ne.setRatio(l.state.uiWindow.ratio);for(var me=l.canvas.getObjects(),Re=!0,we=0,Te=Object.keys(me);we<Te.length;we++){var Ue=Te[we];if(me[Ue].id===ne.id){Re=!1;break}}l.canvas.add(ne)}if(d==="add")typeof r.id=="number"&&r.id>=0&&!this.objects[this.state.frame][r.id]?b(r,!0):console.log("id exists",r.id,this.objects[this.state.frame][r.id]);else if(d==="_add")r.id=this.getNewDataId(),r.ratio=this.state.uiWindow.ratio,r.team=this.state.uiWindow.team,b(r,!1);else if(d==="update")this.objects[this.state.frame][r.id]&&this.objects[this.state.frame][r.id].fromObject(r);else if(d==="_update")r.id>=0&&this.objects[this.state.frame][r.id]?this.objects[this.state.frame][r.id].fromObject(r):b(r);else if(d==="remove"){var w=r.id;this.objects[this.state.frame][w]&&(this.select([]),this.canvas.remove(this.objects[this.state.frame][w]),this.canvas.renderAll(),delete this.objects[this.state.frame][w],this.objectsToData())}else if(d==="setAttr")this.objects[this.state.frame][r.id]&&this.objects[this.state.frame][r.id].set(r.payload);else if(d==="removeLayer")for(var X=0,N=Object.keys(this.objects[this.state.frame]);X<N.length;X++){var K=N[X];this.objects[this.state.frame][K].layer===r.layer&&this.onObjectEvent("remove",{id:K})}else d==="removeAll"&&this.reset(!0);this.objectsToData(),this.canvas.renderAll()}},{key:"setFrame",value:function(d){this.objects[d]||(this.objects[d]={});for(var r=0,l=Object.keys(this.objects[this.state.frame]);r<l.length;r++){var b=l[r];this.canvas.remove(this.objects[this.state.frame][b])}this.canvas.renderAll();var w=this;return new Promise(function(X,N){w.setState({frame:d},function(){for(var K=w.canvas.getObjects(),s=0,re=Object.keys(w.objects[w.state.frame]);s<re.length;s++){for(var fe=re[s],ne=!0,me=0,Re=Object.keys(K);me<Re.length;me++){var we=Re[me];if(K[we].id===w.objects[w.state.frame][fe].id){ne=!1;break}}ne&&w.canvas.add(w.objects[w.state.frame][fe])}w.objectsToData(),w.select([]),w.canvas.renderAll(),X()})})}},{key:"onHistoryEvent",value:function(){var E=F()(R()().mark(function r(l){var b=this,w;return R()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(w=this.his.get(),l!=="update"){N.next=6;break}return this.updateHistory(),N.abrupt("return");case 6:if(l!=="reset"){N.next=12;break}return w=this.his.reset({version:2,data:{default:{}},selected:"default"}),this.props.setCouldDo(w),N.abrupt("return");case 12:if(l!=="resetNow"){N.next=16;break}return w=this.his.reset({version:2,data:this.data,selected:this.state.frame}),this.props.setCouldDo(w),N.abrupt("return");case 16:return l==="previous"?w=this.his.previous():l==="next"&&(w=this.his.next()),this.props.setCouldDo(w),N.next=20,this.reset(!0);case 20:return N.next=22,ge(w.now,function(K,s){return b.onObjectEvent(K,s)},function(K){return b.onFrameEvent("change",K)},function(){return b.canvas.renderAll()}).then(function(){b.setRobotId()});case 22:this.cancelHistoryUpdate(),this.props.setCouldDo(w);case 24:case"end":return N.stop()}},r,this)}));function d(r){return E.apply(this,arguments)}return d}()},{key:"onFrameEvent",value:function(){var E=F()(R()().mark(function r(l,b){var w,X,N,K,s,re;return R()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(l!=="add"){ne.next=6;break}return this.objects[b]={},ne.next=4,this.setFrame(b);case 4:ne.next=40;break;case 6:if(l!=="remove"){ne.next=19;break}if(Object.keys(this.objects).length!==1){ne.next=10;break}return y.yw.error("Cannot remove last frame!"),ne.abrupt("return");case 10:if(w=b,this.state.frame!==b){ne.next=16;break}return b=Object.keys(this.objects)[0],b===w&&(b=Object.keys(this.objects)[1]),ne.next=16,this.setFrame(b);case 16:delete this.objects[w],ne.next=40;break;case 19:if(l!=="change"){ne.next=24;break}return ne.next=22,this.setFrame(b);case 22:ne.next=40;break;case 24:if(l!=="copy"){ne.next=34;break}return this.objects[b]={},X=this.objects[this.state.frame],ne.next=29,this.setFrame(b);case 29:for(N=0,K=Object.keys(X);N<K.length;N++)s=K[N],this.onObjectEvent("_update",X[s].toObject());this.objectsToData(),this.canvas.renderAll(),ne.next=40;break;case 34:if(l!=="rename"){ne.next=40;break}return re=this.state.frame,ne.next=38,this.onFrameEvent("copy",b);case 38:return ne.next=40,this.onFrameEvent("remove",re);case 40:this.props.onFrameChange({frames:Object.keys(this.objects),selected:b}),this.objectsToData(),this.updateHistory();case 43:case"end":return ne.stop()}},r,this)}));function d(r,l){return E.apply(this,arguments)}return d}()},{key:"render",value:function(){var d,r=this;return(d=this.canvas)===null||d===void 0||d.renderAll(),(0,h.jsx)("div",{style:{width:"100vw",height:"calc(100% - 20px)",padding:10},children:(0,h.jsxs)(M.eh,{autoSaveId:"container_h",className:"container",direction:"horizontal",children:[(0,h.jsx)(M.s_,{defaultSize:25,minSize:15,maxSize:45,order:1,children:(0,h.jsxs)(M.eh,{autoSaveId:"card_v",className:"full",direction:"vertical",children:[(0,h.jsx)(M.s_,{defaultSize:50,minSize:25,maxSize:75,children:(0,h.jsx)(he,{onSelect:function(b){return r.select(b)},onObjectEvent:function(b,w){return r.onObjectEvent(b,w)},onReset:function(){return r.reset()},data:this.state.data,editable:this.state.editable,selectedId:this.state.selectedId})}),(0,h.jsx)(M.OT,{className:"panel-resize-handle",style:{height:6}}),(0,h.jsx)(M.s_,{defaultSize:50,children:(0,h.jsx)(f.Z,{size:"small",title:"Properties",style:{height:"100%"},children:(0,h.jsxs)("div",{className:"card-body",children:[this.state.properties?(0,h.jsx)(j.vY,{dataSource:this.state.properties,columns:ue(this.state.properties),ref:this.propertiesRef,editable:this.props.editable?{onSave:function(b,w){return r.onPropertiesChange(b,w)}}:null,column:1,style:{marginTop:4}},this.state.selectedId[0]):(0,h.jsx)(v.Z,{image:v.Z.PRESENTED_IMAGE_SIMPLE}),this.state.selectedId[0]===-2?(0,h.jsxs)(z.Z,{direction:"vertical",size:"middle",style:{display:"flex"},children:[(0,h.jsx)(I.ZP,{onClick:function(){return(0,oe.cT)("image/*").then(function(b){r.setState({imageUploadShow:!1}),r.setBackground((0,oe.lZ)(b))}).catch(function(b){})},children:"Upload Background"}),(0,h.jsx)(I.ZP,{onClick:function(){return r.setBackground(e(25665))},children:"Reset Background"})]}):(0,h.jsx)("div",{})]})})})]})}),(0,h.jsx)(M.OT,{className:"panel-resize-handle",style:{width:6}}),(0,h.jsx)(M.s_,{defaultSize:75,order:2,onResize:function(b){return setTimeout(function(){return r.resetCanvasSize()},100)},children:(0,h.jsxs)("div",{className:"full",ref:this.canvasRef,children:[(0,h.jsx)("canvas",{className:"full",id:"ui"}),(0,h.jsx)("div",{id:"coordinateDisplay",style:{bottom:0,right:0,display:"none",padding:"1px 6px 1px 6px"}})]})})]})})}}]),L}(i.Component),Ce=de},12997:function(te,Q,e){e.a(te,function(P,u){return De(this,null,function*(){try{e.r(Q);var W=e(12444),R=e.n(W),H=e(72004),S=e.n(H),J=e(25098),F=e.n(J),B=e(31996),Z=e.n(B),n=e(26037),p=e.n(n),O=e(9783),T=e.n(O),A=e(67294),x=e(9361),a=e(28459),t=e(62338),m=e(65848),g=e(87159),c=e(4585),o=e(41327),i=e(58377),f=e(54030),v=e(28348),z=e(18253),I=e(85893),y=P([i]);i=(y.then?(yield y)():y)[0];var M=x.Z.darkAlgorithm,j=x.Z.compactAlgorithm,C=function(k){Z()(D,k);var U=p()(D);function D(){var q;R()(this,D);for(var G=arguments.length,V=new Array(G),Y=0;Y<G;Y++)V[Y]=arguments[Y];return q=U.call.apply(U,[this].concat(V)),T()(F()(q),"state",{simulate:!1,darkMode:q.isBrowserDarkMode()}),T()(F()(q),"modal",null),T()(F()(q),"renderRef",A.createRef()),T()(F()(q),"menuRef",A.createRef()),q}return S()(D,[{key:"isBrowserDarkMode",value:function(){try{return window.matchMedia("(prefers-color-scheme: dark)").matches}catch(G){return!1}}},{key:"componentDidMount",value:function(){var G=this,V=0;window.addEventListener("drop",function(le){return le.preventDefault()},!1),window.addEventListener("dragover",function(le){return le.preventDefault()},!1),window.addEventListener("contextmenu",function(le){le.target.tagName.toLowerCase()!=="input"&&le.preventDefault()},!1);function Y(le){!G.modal&&le<880&&le!==V&&(V=le,G.modal=v.oC.warning({title:"Display Aera too Small",content:"Cannot show all contents on this window. Please resize this window or rotate your phone.",footer:null,zIndex:2500})),G.modal&&le>=880&&(G.modal.destroy(),G.modal=null)}setTimeout(function(){return Y(window.innerWidth)},500),window.addEventListener("resize",function(){Y(window.innerWidth)},!1);var h=window.matchMedia("(prefers-color-scheme: dark)");h.addEventListener("change",function(le){G.setState({darkMode:le.matches})})}},{key:"setDarkMode",value:function(G){this.setState({darkMode:G})}},{key:"render",value:function(){var G=this;return(0,I.jsx)(a.ZP,{locale:z.Z,theme:{cssVar:{key:"rmui"},hashed:!1,algorithm:this.state.darkMode?[M,j]:j},children:(0,I.jsxs)(t.Z,{children:[(0,I.jsx)("div",{className:"rmui",children:(0,I.jsxs)("div",{className:"container background-color",style:{height:"100vh",paddingBottom:12,overflow:"hidden"},children:[(0,I.jsx)(i.Z,{save:function(){return G.renderRef.current.save()},onObjectEvent:function(Y,h){return G.renderRef.current.onObjectEvent(Y,h)},onHistoryEvent:function(Y){return G.renderRef.current.onHistoryEvent(Y)},reset:function(){return G.renderRef.current.reset()},setFrame:function(Y,h){return G.renderRef.current.onFrameEvent(Y,h)},upload:function(Y){return G.renderRef.current.upload(Y)},getData:function(){return G.renderRef.current.getData()},setEditable:function(Y){return G.renderRef.current.setEditable(Y)},setDarkMode:function(Y){return G.setDarkMode(Y)},ref:this.menuRef,darkMode:this.state.darkMode}),(0,I.jsx)(m.Z,{content:["RM Ui Designer","nightly 2c7a45e"],zIndex:0,style:{height:"100%"},gap:[30,30],children:(0,I.jsx)("div",{id:"content-in",style:{width:"100vw",height:"100%",zIndex:2,position:"relative"},children:(0,I.jsx)(g.Z,{style:{width:"100vw",height:"100%"},editable:!0,ref:this.renderRef,onFrameChange:function(Y){var h;return(h=G.menuRef.current)===null||h===void 0?void 0:h.setFrames(Y)},setCouldDo:function(Y){var h;(h=G.menuRef.current)===null||h===void 0||h.setCouldDo(Y)},setRobotId:function(Y){var h;(h=G.menuRef.current)===null||h===void 0||h.setRobotId(Y)}})})})]})}),(0,I.jsx)(f.Z,{}),(0,I.jsx)(c.Z,{}),(0,I.jsx)(o.Z,{})]})})}}]),D}(A.Component);Q.default=C,u()}catch(k){u(k)}})})},28348:function(te,Q,e){e.d(Q,{eq:function(){return H},oC:function(){return R},ue:function(){return S},yw:function(){return u}});var P=e(62338),u,W,R,H=1;Q.ZP=function(){var J=P.Z.useApp();return u=J.message,R=J.modal,W=J.notification,null};function S(J){H=parseInt(J)}},37932:function(te,Q,e){e.d(Q,{X:function(){return A},_:function(){return x}});var P=e(15009),u=e.n(P),W=e(5574),R=e.n(W),H=e(99289),S=e.n(H),J=e(12444),F=e.n(J),B=e(72004),Z=e.n(B),n=e(9783),p=e.n(n),O=e(17990),T=e(30789),A=function(){function a(t){F()(this,a),p()(this,"getContentFunc",void 0),p()(this,"fileHandle",void 0),p()(this,"timerId",void 0),p()(this,"updateTimerId",void 0),this.getContentFunc=t,this.fileHandle=null,this.timerId=null,this.updateTimerId=null}return Z()(a,[{key:"open",value:function(){var t=S()(u()().mark(function g(){var c,o,i;return u()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(this.fileHandle=null,v.prev=1,!(0,T.UP)()){v.next=9;break}return v.next=5,O.WZ.open({multiple:!1,directory:!1,filters:[{name:"rmui file",extensions:["json","rmui"]}]});case 5:c=v.sent,c!==null&&c.length>0&&typeof c=="string"&&(this.fileHandle=c.replace(/\\/g,"/")),v.next=14;break;case 9:return v.next=11,window.showOpenFilePicker({types:[{description:"rmui file",accept:{"application/json":[".json",".rmui"]}}]});case 11:o=v.sent,i=R()(o,1),this.fileHandle=i[0];case 14:this.enableAutoSave(),v.next=19;break;case 17:v.prev=17,v.t0=v.catch(1);case 19:return v.abrupt("return",this.fileHandle!==null);case 20:case"end":return v.stop()}},g,this,[[1,17]])}));function m(){return t.apply(this,arguments)}return m}()},{key:"create",value:function(){var t=S()(u()().mark(function g(){var c;return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(this.fileHandle=null,i.prev=1,!(0,T.UP)()){i.next=9;break}return i.next=5,O.WZ.save({filters:[{name:"rmui file",extensions:["rmui"]}]});case 5:c=i.sent,c!==null&&(this.fileHandle=c.replace(/\\/g,"/")),i.next=12;break;case 9:return i.next=11,window.showSaveFilePicker({types:[{description:"rmui file",accept:{"application/json":[".rmui"]}}]});case 11:this.fileHandle=i.sent;case 12:return i.next=14,this.write(JSON.stringify({version:2,data:{default:{}},selected:"default"}));case 14:this.enableAutoSave(),i.next=19;break;case 17:i.prev=17,i.t0=i.catch(1);case 19:return i.abrupt("return",this.fileHandle!==null);case 20:case"end":return i.stop()}},g,this,[[1,17]])}));function m(){return t.apply(this,arguments)}return m}()},{key:"enableAutoSave",value:function(){var m=this;this.timerId=setInterval(S()(u()().mark(function g(){var c;return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return c=m.getContentFunc(),i.next=3,m.write(c);case 3:case"end":return i.stop()}},g)})),6e4)}},{key:"disableAutoSave",value:function(){var t=S()(u()().mark(function g(){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.save();case 2:this.timerId&&(clearInterval(this.timerId),this.timerId=null),this.updateTimerId&&(clearTimeout(this.updateTimerId),this.updateTimerId=null);case 4:case"end":return o.stop()}},g,this)}));function m(){return t.apply(this,arguments)}return m}()},{key:"update",value:function(){var m=this;this.timerId!==null&&(this.updateTimerId!==null&&(clearTimeout(this.updateTimerId),this.updateTimerId=null),this.updateTimerId=setTimeout(S()(u()().mark(function g(){var c;return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return c=m.getContentFunc(),i.next=3,m.write(c);case 3:case"end":return i.stop()}},g)})),2e3))}},{key:"save",value:function(){var t=S()(u()().mark(function g(){var c;return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return c=this.getContentFunc(),i.next=3,this.write(c);case 3:case"end":return i.stop()}},g,this)}));function m(){return t.apply(this,arguments)}return m}()},{key:"write",value:function(){var t=S()(u()().mark(function g(c){var o;return u()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(this.fileHandle){f.next=2;break}throw new Error("File is not open");case 2:if(typeof this.fileHandle!="string"){f.next=7;break}return f.next=5,O.fs.writeTextFile(this.fileHandle,c);case 5:f.next=14;break;case 7:return f.next=9,this.fileHandle.createWritable();case 9:return o=f.sent,f.next=12,o.write(c);case 12:return f.next=14,o.close();case 14:case"end":return f.stop()}},g,this)}));function m(g){return t.apply(this,arguments)}return m}()},{key:"read",value:function(){var t=S()(u()().mark(function g(){var c,o;return u()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(this.fileHandle){f.next=2;break}throw new Error("File is not open");case 2:if(typeof this.fileHandle!="string"){f.next=10;break}return f.next=5,O.fs.readTextFile(this.fileHandle);case 5:return c=f.sent,o=new Blob([c],{type:"text/plain;charset=utf-8"}),f.abrupt("return",new File([o],this.fileHandle));case 10:return f.next=12,this.fileHandle.getFile();case 12:return f.abrupt("return",f.sent);case 13:case"end":return f.stop()}},g,this)}));function m(){return t.apply(this,arguments)}return m}()}]),a}();function x(){return"showOpenFilePicker"in window||(0,T.UP)()}},52880:function(te,Q,e){e.d(Q,{r:function(){return x},h:function(){return A}});var P=e(19632),u=e.n(P),W=e(73676);function R(a){var t=new Uint8Array(15),m=0,g=a.group.split("-");t[m++]=Math.round(Number(g[0])),t[m++]=Math.round(Number(g[1])),t[m++]=Math.round(a.id);var c=Math.round(a.operate_tpyel)|Math.round(a.figure_tpye)<<3|Math.round(a.layer)<<6|Math.round(a.color)<<10|Math.round(a._a)<<14|Math.round(a._b)<<23;t[m++]=c&255,t[m++]=c>>8&255,t[m++]=c>>16&255,t[m++]=c>>24&255;var o=Math.round(a.width)|Math.round(a.start_x)<<10|Math.round(a.start_y)<<21;t[m++]=o&255,t[m++]=o>>8&255,t[m++]=o>>16&255,t[m++]=o>>24&255;var i=Math.round(a._c)|Math.round(a._d)<<10|Math.round(a._e)<<21;return t[m++]=i&255,t[m++]=i>>8&255,t[m++]=i>>16&255,t[m++]=i>>24&255,t}function H(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"add",m=a.group,g=a.id&255,c=W.i_.indexOf(a.type),o=W.JM.indexOf(a.color),i=a.layer,f;a.fontSize?f=Math.round(a.fontSize/10):f=a.lineWidth;var v=a.x,z=a.y,I=0,y=0,M=0,j=0,C=0;switch(a.type.slice(2)){case"Line":j=a.x2||0,C=a.y2||0;break;case"Rect":j=(a.width||0)+v,C=(a.height||0)+z;break;case"Round":M=a.r||0;break;case"Ellipse":j=a.rx||0,C=a.ry||0;break;case"Arc":I=a.startAngle||0,y=a.endAngle||0,j=a.rx||0,C=a.ry||0;break;case"Float":I=a.fontSize||0;var k=(a.float||0)*1e3;M=k&1023,j=k>>10&2047,C=k>>21&2047;break;case"Number":I=a.fontSize||0;var U=a.number||0;M=U&1023,j=U>>10&2047,C=U>>21&2047;break;case"Text":I=a.fontSize||0,y=(a.text||"").length;break}return{group:m,id:g,operate_tpyel:W.$m.indexOf(t),figure_tpye:c,layer:i,color:o,_a:I,_b:y,width:f,start_x:v,start_y:z,_c:M,_d:j,_e:C,number:M}}function S(a){return R(H(a))}var J=e(85378),F=e(28348);function B(a){var t=new Uint8Array(0);if(a.forEach(function(i){t=new Uint8Array([].concat(u()(t),u()(S(i))))}),2<a.length&&a.length<5){for(var m=new Uint8Array(15*(5-a.length)),g=0;g<15*(5-a.length);g++)m[g]=0;t=new Uint8Array([].concat(u()(t),u()(m)))}if(5<a.length&&a.length<7){for(var c=new Uint8Array(15*(7-a.length)),o=0;o<15*(7-a.length);o++)c[o]=0;t=new Uint8Array([].concat(u()(t),u()(c)))}return t}function Z(a){var t=new Uint8Array([].concat(u()(S(a[0])),u()(new Uint8Array(30))));if(a[0].text)for(var m=15;m<a[0].text.length+15;m++)t[m]=a[0].text.charCodeAt(m);return t}function n(a){return a[0].text?Z(a):B(a)}var p=0,O=769;function T(a){var t=new Uint8Array(13),m=new Uint8Array(2);t[0]=165;var g=a.length+6;t[1]=g&255,t[2]=g>>8&255,t[3]=p,t[4]=(0,J.d)(t.subarray(0,4)),t[5]=O&255,t[6]=O>>8&255;var c=0;a.length===2?c=256:a.length===15?c=257:a.length===30?c=258:a.length===75?c=259:a.length===105?c=260:a.length===45&&(c=272),t[7]=c&255,t[8]=c>>8&255,t[9]=F.eq&255,t[10]=F.eq>>8&255,t[11]=F.eq+256&255,t[12]=F.eq+256>>8&255;var o=new Uint8Array([].concat(u()(t),u()(a),u()(m))),i=(0,J.I)(o.subarray(0,o.length-2));return o[o.length-2]=i&255,o[o.length-1]=i>>8&255,p++,p>=256&&(p=0),o}function A(a){var t=n(a);return T(t)}function x(){return T(new Uint8Array([2,0]))}},85378:function(te,Q,e){e.d(Q,{I:function(){return R},d:function(){return u}});var P=[0,94,188,226,97,63,221,131,194,156,126,32,163,253,31,65,157,195,33,127,252,162,64,30,95,1,227,189,62,96,130,220,35,125,159,193,66,28,254,160,225,191,93,3,128,222,60,98,190,224,2,92,223,129,99,61,124,34,192,158,29,67,161,255,70,24,250,164,39,121,155,197,132,218,56,102,229,187,89,7,219,133,103,57,186,228,6,88,25,71,165,251,120,38,196,154,101,59,217,135,4,90,184,230,167,249,27,69,198,152,122,36,248,166,68,26,153,199,37,123,58,100,134,216,91,5,231,185,140,210,48,110,237,179,81,15,78,16,242,172,47,113,147,205,17,79,173,243,112,46,204,146,211,141,111,49,178,236,14,80,175,241,19,77,206,144,114,44,109,51,209,143,12,82,176,238,50,108,142,208,83,13,239,177,240,174,76,18,145,207,45,115,202,148,118,40,171,245,23,73,8,86,180,234,105,55,213,139,87,9,235,181,54,104,138,212,149,203,41,119,244,170,72,22,233,183,85,11,136,214,52,106,43,117,151,201,74,20,246,168,116,42,200,150,21,75,169,247,182,232,10,84,215,137,107,53];function u(H){for(var S=255,J=0,F,B=H.byteLength;B--;)F=S^H[J],S=P[F],J++;return S}var W=[0,4489,8978,12955,17956,22445,25910,29887,35912,40385,44890,48851,51820,56293,59774,63735,4225,264,13203,8730,22181,18220,30135,25662,40137,36160,49115,44626,56045,52068,63999,59510,8450,12427,528,5017,26406,30383,17460,21949,44362,48323,36440,40913,60270,64231,51324,55797,12675,8202,4753,792,30631,26158,21685,17724,48587,44098,40665,36688,64495,60006,55549,51572,16900,21389,24854,28831,1056,5545,10034,14011,52812,57285,60766,64727,34920,39393,43898,47859,21125,17164,29079,24606,5281,1320,14259,9786,57037,53060,64991,60502,39145,35168,48123,43634,25350,29327,16404,20893,9506,13483,1584,6073,61262,65223,52316,56789,43370,47331,35448,39921,29575,25102,20629,16668,13731,9258,5809,1848,65487,60998,56541,52564,47595,43106,39673,35696,33800,38273,42778,46739,49708,54181,57662,61623,2112,6601,11090,15067,20068,24557,28022,31999,38025,34048,47003,42514,53933,49956,61887,57398,6337,2376,15315,10842,24293,20332,32247,27774,42250,46211,34328,38801,58158,62119,49212,53685,10562,14539,2640,7129,28518,32495,19572,24061,46475,41986,38553,34576,62383,57894,53437,49460,14787,10314,6865,2904,32743,28270,23797,19836,50700,55173,58654,62615,32808,37281,41786,45747,19012,23501,26966,30943,3168,7657,12146,16123,54925,50948,62879,58390,37033,33056,46011,41522,23237,19276,31191,26718,7393,3432,16371,11898,59150,63111,50204,54677,41258,45219,33336,37809,27462,31439,18516,23005,11618,15595,3696,8185,63375,58886,54429,50452,45483,40994,37561,33584,31687,27214,22741,18780,15843,11370,7921,3960];function R(H){for(var S=65535,J,F=0,B=H.byteLength;B--;)J=H[F],S=S>>8^W[(S^J)&255],F++;return S}},73676:function(te,Q,e){e.d(Q,{$m:function(){return H},EY:function(){return n},JM:function(){return R},i_:function(){return W}});var P=e(19632),u=e.n(P),W=["UiLine","UiRect","UiRound","UiEllipse","UiArc","UiFloat","UiNumber","UiText"],R=["main","yellow","green","orange","purple","pink","cyan","black","white"],H=["null","add","update","remove"],S={257:1,258:2,259:5,260:7},J=["null","removeLayer","removeAll"];function F(p,O){return p[O]|p[O+1]<<8}function B(p,O){return p[O]|p[O+1]<<8|p[O+2]<<16|p[O+3]<<24}function Z(p){var O=0,T=p[O++],A=p[O++],x="".concat(T,"-").concat(A),a=p[O++]|A<<8|T<<16,t=B(p,O);O+=4;var m=t&7,g=t>>3&7,c=t>>6&15,o=t>>10&15,i=t>>14&511,f=t>>23&511,v=B(p,O);O+=4;var z=v&1023,I=v>>10&2047,y=v>>21&2047,M=B(p,O),j=M&1023,C=M>>10&2047,k=M>>21&2047;return{group:x,id:a,operate_tpyel:m,figure_tpye:g,layer:c,color:o,_a:i,_b:f,width:z,start_x:I,start_y:y,_c:j,_d:C,_e:k,number:M}}function n(p){var O=F(p,0),T=F(p,2),A=F(p,4),x=[];if(O===256)x.push({type:J[p[6]],obj:{layer:p[7]}});else if(O===272){var a=Z(p.subarray(6,21)),t=String.fromCharCode.apply(String,u()(p.subarray(21,21+a._b)));x.push({type:H[a.operate_tpyel],obj:{layer:a.layer,group:a.group,type:W[a.figure_tpye],id:a.id,name:"".concat(W[a.figure_tpye],"_").concat(a.id&255),color:R[a.color],lineWidth:a.width,x:a.start_x,y:a.start_y,fontSize:a._a,text:t}})}else if(O in S)for(var m=S[O],g=0;g<m;g++){var c=Z(p.subarray(6+g*15,6+(g+1)*15)),o={layer:c.layer,group:c.group,type:W[c.figure_tpye],id:c.id,name:"".concat(W[c.figure_tpye],"_").concat(c.id&255),color:R[c.color],lineWidth:c.width,x:c.start_x,y:c.start_y};switch(W[c.figure_tpye].slice(2)){case"Line":o.x2=c._d,o.y2=c._e;break;case"Rect":o.width=c._d-c.start_x,o.height=c._e-c.start_y;break;case"Round":o.r=c._c;break;case"Ellipse":o.rx=c._d,o.ry=c._e;break;case"Arc":o.startAngle=c._a,o.endAngle=c._b,o.rx=c._d,o.ry=c._e;break;case"Float":o.fontSize=c._a,o.float=c.number/1e3;break;case"Number":o.fontSize=c._a,o.number=c.number;break}x.push({type:H[c.operate_tpyel],obj:o})}else console.log("unknown sub_id",O);return{sender:T,receiver:A,events:x}}},13799:function(te,Q,e){e.d(Q,{r:function(){return F}});var P=e(67294),u=Object.defineProperty,W=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,S=(Z,n,p)=>n in Z?u(Z,n,{enumerable:!0,configurable:!0,writable:!0,value:p}):Z[n]=p,J=(Z,n)=>{for(var p in n||(n={}))R.call(n,p)&&S(Z,p,n[p]);if(W)for(var p of W(n))H.call(n,p)&&S(Z,p,n[p]);return Z};const F=Z=>P.createElement("svg",J({className:"moon_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:200,height:200},Z),P.createElement("path",{d:"M472 991.6c-157 0-304.4-77.2-394.3-206.6-6.9-9.9-7.6-22.9-1.8-33.6 5.8-10.7 17.1-17.8 29.2-16.7l7.7.4c2.4.2 4.8.3 7.2.3 229.4 0 416-186.6 416-416 0-85-25.7-167-74.3-236.9-6.9-9.9-7.6-22.9-1.8-33.6 5.8-10.7 17.2-17.6 29.2-16.7C748.7 41.6 952 252.1 952 511.6c0 264.7-215.3 480-480 480zM169.7 797.1c78.1 82.7 187.2 130.6 302.3 130.6 229.4 0 416-186.6 416-416 0-204-144.9-373-339.7-408.6 34 66.9 51.7 140.7 51.7 216.6 0 247.8-188.9 452.4-430.3 477.4z",fill:"#2c2c2c"}));var B="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTQ3MiA5OTEuNmMtMTU3IDAtMzA0LjQtNzcuMi0zOTQuMy0yMDYuNi02LjktOS45LTcuNi0yMi45LTEuOC0zMy42IDUuOC0xMC43IDE3LjEtMTcuOCAyOS4yLTE2LjdsNy43LjRjMi40LjIgNC44LjMgNy4yLjMgMjI5LjQgMCA0MTYtMTg2LjYgNDE2LTQxNiAwLTg1LTI1LjctMTY3LTc0LjMtMjM2LjktNi45LTkuOS03LjYtMjIuOS0xLjgtMzMuNiA1LjgtMTAuNyAxNy4yLTE3LjYgMjkuMi0xNi43Qzc0OC43IDQxLjYgOTUyIDI1Mi4xIDk1MiA1MTEuNmMwIDI2NC43LTIxNS4zIDQ4MC00ODAgNDgwek0xNjkuNyA3OTcuMWM3OC4xIDgyLjcgMTg3LjIgMTMwLjYgMzAyLjMgMTMwLjYgMjI5LjQgMCA0MTYtMTg2LjYgNDE2LTQxNiAwLTIwNC0xNDQuOS0zNzMtMzM5LjctNDA4LjYgMzQgNjYuOSA1MS43IDE0MC43IDUxLjcgMjE2LjYgMCAyNDcuOC0xODguOSA0NTIuNC00MzAuMyA0NzcuNHoiIGZpbGw9IiMyYzJjMmMiLz48L3N2Zz4="},82843:function(te,Q,e){e.d(Q,{r:function(){return F}});var P=e(67294),u=Object.defineProperty,W=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,S=(Z,n,p)=>n in Z?u(Z,n,{enumerable:!0,configurable:!0,writable:!0,value:p}):Z[n]=p,J=(Z,n)=>{for(var p in n||(n={}))R.call(n,p)&&S(Z,p,n[p]);if(W)for(var p of W(n))H.call(n,p)&&S(Z,p,n[p]);return Z};const F=Z=>P.createElement("svg",J({className:"sun_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:200,height:200},Z),P.createElement("path",{d:"M522.88 874.667A21.333 21.333 0 0 1 544.213 896v85.333a21.333 21.333 0 0 1-21.333 21.334h-21.333a21.333 21.333 0 0 1-21.334-21.334V896a21.333 21.333 0 0 1 21.334-21.333h21.333zm268.416-107.52 60.352 60.352a21.333 21.333 0 0 1 0 30.165l-15.083 15.083a21.333 21.333 0 0 1-30.186 0l-60.331-60.352a21.333 21.333 0 0 1 0-30.166l15.083-15.082a21.333 21.333 0 0 1 30.165 0zm-527.957 0 15.082 15.082a21.333 21.333 0 0 1 0 30.166l-60.352 60.352a21.333 21.333 0 0 1-30.165 0l-15.083-15.083a21.333 21.333 0 0 1 0-30.165l60.331-60.352a21.333 21.333 0 0 1 30.187 0zM512 277.333c141.376 0 256 114.624 256 256s-114.624 256-256 256-256-114.624-256-256 114.624-256 256-256zm0 64a192 192 0 1 0 0 384 192 192 0 0 0 0-384zm448.213 160a21.333 21.333 0 0 1 21.334 21.334V544a21.333 21.333 0 0 1-21.334 21.333H874.88A21.333 21.333 0 0 1 853.547 544v-21.333a21.333 21.333 0 0 1 21.333-21.334h85.333zm-810.666 0a21.333 21.333 0 0 1 21.333 21.334V544a21.333 21.333 0 0 1-21.333 21.333H64.213A21.333 21.333 0 0 1 42.88 544v-21.333a21.333 21.333 0 0 1 21.333-21.334h85.334zm687.04-307.413 15.082 15.083a21.333 21.333 0 0 1 0 30.165l-60.352 60.352a21.333 21.333 0 0 1-30.165 0l-15.083-15.083a21.333 21.333 0 0 1 0-30.165L806.4 193.92a21.333 21.333 0 0 1 30.187 0zm-618.496 0 60.352 60.352a21.333 21.333 0 0 1 0 30.165L263.36 299.52a21.333 21.333 0 0 1-30.187 0l-60.352-60.373a21.333 21.333 0 0 1 0-30.166l15.083-15.082a21.333 21.333 0 0 1 30.165 0zM522.9 64a21.333 21.333 0 0 1 21.334 21.333v85.334A21.333 21.333 0 0 1 522.9 192h-21.333a21.333 21.333 0 0 1-21.333-21.333V85.333A21.333 21.333 0 0 1 501.568 64h21.333z",fill:"#ebebeb"}));var B="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTUyMi44OCA4NzQuNjY3QTIxLjMzMyAyMS4zMzMgMCAwIDEgNTQ0LjIxMyA4OTZ2ODUuMzMzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzMzIDIxLjMzNGgtMjEuMzMzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzM0LTIxLjMzNFY4OTZhMjEuMzMzIDIxLjMzMyAwIDAgMSAyMS4zMzQtMjEuMzMzaDIxLjMzM3ptMjY4LjQxNi0xMDcuNTIgNjAuMzUyIDYwLjM1MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDAgMzAuMTY1bC0xNS4wODMgMTUuMDgzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTg2IDBsLTYwLjMzMS02MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NmwxNS4wODMtMTUuMDgyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTY1IDB6bS01MjcuOTU3IDAgMTUuMDgyIDE1LjA4MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDAgMzAuMTY2bC02MC4zNTIgNjAuMzUyYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTY1IDBsLTE1LjA4My0xNS4wODNhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NWw2MC4zMzEtNjAuMzUyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTg3IDB6TTUxMiAyNzcuMzMzYzE0MS4zNzYgMCAyNTYgMTE0LjYyNCAyNTYgMjU2cy0xMTQuNjI0IDI1Ni0yNTYgMjU2LTI1Ni0xMTQuNjI0LTI1Ni0yNTYgMTE0LjYyNC0yNTYgMjU2LTI1NnptMCA2NGExOTIgMTkyIDAgMSAwIDAgMzg0IDE5MiAxOTIgMCAwIDAgMC0zODR6bTQ0OC4yMTMgMTYwYTIxLjMzMyAyMS4zMzMgMCAwIDEgMjEuMzM0IDIxLjMzNFY1NDRhMjEuMzMzIDIxLjMzMyAwIDAgMS0yMS4zMzQgMjEuMzMzSDg3NC44OEEyMS4zMzMgMjEuMzMzIDAgMCAxIDg1My41NDcgNTQ0di0yMS4zMzNhMjEuMzMzIDIxLjMzMyAwIDAgMSAyMS4zMzMtMjEuMzM0aDg1LjMzM3ptLTgxMC42NjYgMGEyMS4zMzMgMjEuMzMzIDAgMCAxIDIxLjMzMyAyMS4zMzRWNTQ0YTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzMzIDIxLjMzM0g2NC4yMTNBMjEuMzMzIDIxLjMzMyAwIDAgMSA0Mi44OCA1NDR2LTIxLjMzM2EyMS4zMzMgMjEuMzMzIDAgMCAxIDIxLjMzMy0yMS4zMzRoODUuMzM0em02ODcuMDQtMzA3LjQxMyAxNS4wODIgMTUuMDgzYTIxLjMzMyAyMS4zMzMgMCAwIDEgMCAzMC4xNjVsLTYwLjM1MiA2MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMS0zMC4xNjUgMGwtMTUuMDgzLTE1LjA4M2EyMS4zMzMgMjEuMzMzIDAgMCAxIDAtMzAuMTY1TDgwNi40IDE5My45MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDMwLjE4NyAwem0tNjE4LjQ5NiAwIDYwLjM1MiA2MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMSAwIDMwLjE2NUwyNjMuMzYgMjk5LjUyYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTg3IDBsLTYwLjM1Mi02MC4zNzNhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NmwxNS4wODMtMTUuMDgyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTY1IDB6TTUyMi45IDY0YTIxLjMzMyAyMS4zMzMgMCAwIDEgMjEuMzM0IDIxLjMzM3Y4NS4zMzRBMjEuMzMzIDIxLjMzMyAwIDAgMSA1MjIuOSAxOTJoLTIxLjMzM2EyMS4zMzMgMjEuMzMzIDAgMCAxLTIxLjMzMy0yMS4zMzNWODUuMzMzQTIxLjMzMyAyMS4zMzMgMCAwIDEgNTAxLjU2OCA2NGgyMS4zMzN6IiBmaWxsPSIjZWJlYmViIi8+PC9zdmc+"},99734:function(te,Q,e){te.exports=e.p+"static/about.6af660a8.md"},8938:function(te,Q,e){te.exports=e.p+"static/ui_interface.1e01ba33.c"},75112:function(te,Q,e){te.exports=e.p+"static/ui_interface.a365dcb1.h"},33562:function(te,Q,e){te.exports=e.p+"static/ui_types.c92a992c.h"},19293:function(te,Q,e){te.exports=e.p+"static/eula.61e7cc28.md"},25665:function(te,Q,e){te.exports=e.p+"static/background.d741a18b.png"}}]);
