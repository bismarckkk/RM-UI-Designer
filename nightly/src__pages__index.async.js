"use strict";var Re=(ee,J,e)=>new Promise((B,v)=>{var W=I=>{try{N(e.next(I))}catch($){v($)}},A=I=>{try{N(e.throw(I))}catch($){v($)}},N=I=>I.done?B(I.value):Promise.resolve(I.value).then(W,A);N((e=e.apply(ee,J)).next())});(self.webpackChunk=self.webpackChunk||[]).push([[858],{62388:function(ee,J,e){e.d(J,{R:function(){return k},t:function(){return D}});var B=e(32777),v=e(30789),W=B.fabric.util.createClass(B.fabric.Rect,{type:"UiRect",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(t){t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.lockRotation=!0,t.lockScalingFlip=!0,t.hasRotatingPoint=!1,t.width||(t.width=50/this.ratio),t.height||(t.height=50/this.ratio),t.left||(t.left=50/this.ratio),t.top||(t.top=50/this.ratio),t.strokeWidth||(t.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?t.stroke=v.E[this._color]:(t.stroke=v.E[t.team],this._color="main"),t.fill=null,this.callSuper("initialize",t),this.moveTo(t.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){this.set("width",Math.round(this.width*this.scaleX*this.ratio)/this.ratio),this.set("height",Math.round(this.height*this.scaleY*this.ratio)/this.ratio),this.set("left",Math.round(this.left*this.ratio)/this.ratio),this.set("top",Math.round(this.top*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,width:this.width*this.ratio,height:this.height*this.ratio,x:this.left*this.ratio,y:this.top*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("width",t.width/this.ratio),this.set("height",t.height/this.ratio),this.set("left",t.x/this.ratio),this.set("top",t.y/this.ratio),this.set("strokeWidth",t.lineWidth/this.ratio),this._color==="main"?this.set("stroke",v.E[this.team]):this.set("stroke",v.E[this._color]),this.moveTo(t.layer)},setRatio:function(t){this.set("width",this.width*this.ratio/t),this.set("height",this.height*this.ratio/t),this.set("left",this.left*this.ratio/t),this.set("top",this.top*this.ratio/t),this.set("strokeWidth",this.strokeWidth*this.ratio/t),this.ratio=t},setTeam:function(t){this.team=t,this._color==="main"&&this.set("stroke",v.E[this.team])}}),A=B.fabric.util.createClass(B.fabric.Line,{type:"UiLine",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(t){t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.lockRotation=!0,t.lockScalingFlip=!0,t.hasRotatingPoint=!1,t.x1||(t.x1=50/this.ratio),t.y1||(t.y1=50/this.ratio),t.x2||(t.x2=100/this.ratio),t.y2||(t.y2=100/this.ratio),t.strokeWidth||(t.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?t.stroke=v.E[this._color]:(t.stroke=v.E[t.team],this._color="main"),t.fill=null,this.callSuper("initialize",[t.x1,t.y1,t.x2,t.y2],t),this.moveTo(t.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){var t=Math.min(this.x1,this.x2),u=Math.min(this.y1,this.y2),M=this.left-t,p=this.top-u;if(this.x1<this.x2){var y=Math.round((this.x2-this.x1)*this.scaleX);this.set("x1",Math.round((this.x1+M)*this.ratio)/this.ratio),this.set("x2",Math.round((this.x1+y)*this.ratio)/this.ratio)}else{var l=Math.round((this.x1-this.x2)*this.scaleX);this.set("x2",Math.round((this.x2+M)*this.ratio)/this.ratio),this.set("x1",Math.round((this.x2+l)*this.ratio)/this.ratio)}if(this.y1<this.y2){var h=Math.round((this.y2-this.y1)*this.scaleY);this.set("y1",Math.round((this.y1+p)*this.ratio)/this.ratio),this.set("y2",Math.round((this.y1+h)*this.ratio)/this.ratio)}else{var m=Math.round((this.y1-this.y2)*this.scaleY);this.set("y2",Math.round((this.y2+p)*this.ratio)/this.ratio),this.set("y1",Math.round((this.y2+m)*this.ratio)/this.ratio)}this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,x:this.x1*this.ratio,y:this.y1*this.ratio,x2:this.x2*this.ratio,y2:this.y2*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("x2",t.x2/this.ratio),this.set("y2",t.y2/this.ratio),this.set("x1",t.x/this.ratio),this.set("y1",t.y/this.ratio),this.set("strokeWidth",t.lineWidth/this.ratio),this._color==="main"?this.set("stroke",v.E[this.team]):this.set("stroke",v.E[this._color]),this.moveTo(t.layer)},setRatio:function(t){this.set("x1",this.x1*this.ratio/t),this.set("y1",this.y1*this.ratio/t),this.set("x2",this.x2*this.ratio/t),this.set("y2",this.y2*this.ratio/t),this.set("strokeWidth",this.strokeWidth*this.ratio/t),this.ratio=t},setTeam:function(t){this.team=t,this._color==="main"&&this.set("stroke",v.E[this.team])}}),N=B.fabric.util.createClass(B.fabric.Ellipse,{type:"UiEllipse",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",initialize:function(t){t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.lockRotation=!0,t.lockScalingFlip=!0,t.hasRotatingPoint=!1,t.rx||(t.rx=50/this.ratio),t.ry||(t.ry=50/this.ratio),t.left||(t.left=50/this.ratio),t.top||(t.top=50/this.ratio),t.strokeWidth||(t.strokeWidth=1/this.ratio),this._color&&this._color!=="main"?t.stroke=v.E[this._color]:(t.stroke=v.E[t.team],this._color="main"),t.fill=null,this.callSuper("initialize",t),this.moveTo(t.layer),this.setControlVisible("mtr",!1),this.transparentCorners=!1},resizeScale:function(){this.set("rx",Math.round(this.rx*this.scaleX*this.ratio)/this.ratio),this.set("ry",Math.round(this.ry*this.scaleY*this.ratio)/this.ratio),this.set("left",Math.round(this.left*this.ratio)/this.ratio),this.set("top",Math.round(this.top*this.ratio)/this.ratio),this.set("scaleX",1),this.set("scaleY",1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,rx:this.rx*this.ratio,ry:this.ry*this.ratio,x:(this.left+this.rx)*this.ratio,y:(this.top+this.ry)*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("rx",t.rx/this.ratio),this.set("ry",t.ry/this.ratio),this.set("left",(t.x-t.rx)/this.ratio),this.set("top",(t.y-t.ry)/this.ratio),this.set("strokeWidth",t.lineWidth/this.ratio),this._color==="main"?this.set("stroke",v.E[this.team]):this.set("stroke",v.E[this._color]),this.moveTo(t.layer)},setRatio:function(t){this.set("rx",this.rx*this.ratio/t),this.set("ry",this.ry*this.ratio/t),this.set("left",this.left*this.ratio/t),this.set("top",this.top*this.ratio/t),this.set("strokeWidth",this.strokeWidth*this.ratio/t),this.ratio=t},setTeam:function(t){this.team=t,this._color==="main"&&this.set("stroke",v.E[this.team])}}),I=B.fabric.util.createClass(N,{type:"UiRound",r:50,initialize:function(t){t||(t={}),t.r||(t.r=50/this.ratio),t.rx=t.r,t.ry=t.r,this.callSuper("initialize",t),this.setControlVisible("ml",!1),this.setControlVisible("mb",!1),this.setControlVisible("mr",!1),this.setControlVisible("mt",!1)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,r:this.rx*this.ratio,x:(this.left+this.rx)*this.ratio,y:(this.top+this.ry)*this.ratio,color:this._color,lineWidth:this.strokeWidth*this.ratio}},fromObject:function(t){t.rx=t.r,t.ry=t.r,this.callSuper("fromObject",t)}}),$=B.fabric.util.createClass(N,{type:"UiArc",startAngle:0,endAngle:90,initialize:function(t){t||(t={}),t.startAngle||(t.startAngle=0),t.endAngle||(t.endAngle=90),this.callSuper("initialize",t),this.startAngle=t.startAngle,this.endAngle=t.endAngle,this.set("dirty",!0)},toObject:function(){return B.fabric.util.object.extend(this.callSuper("toObject"),{startAngle:this.startAngle,endAngle:this.endAngle})},_render:function(t){var u=(this.startAngle-90)*(Math.PI/180),M=(this.endAngle-90)*(Math.PI/180);t.beginPath(),t.ellipse(0,0,this.rx,this.ry,0,u,M,!1),t.strokeStyle=this.stroke,t.lineWidth=this.strokeWidth,t.stroke()},fromObject:function(t){this.set("startAngle",t.startAngle),this.set("endAngle",t.endAngle),this.set("ry",1),this.callSuper("fromObject",t)}}),O=1.25;function P(n,t){var u=P.canvas||(P.canvas=document.createElement("canvas")),M=u.getContext("2d");M.font=t,console.log(M.font);var p=M.measureText(n);return p.width*O}var F=B.fabric.util.createClass(B.fabric.Text,{type:"UiText",id:0,name:"",layer:0,groupName:"",ratio:1,_color:"",team:"red",rawFontSize:0,initialize:function(t){var u=this;t||(t={}),t.color||(t.color="main"),this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.groupName,this.ratio=t.ratio,this._color=t.color,this.team=t.team,t.flipY=!0,t.fontSize||(t.fontSize=20/this.ratio),t.fontSize*=O,t.fontFamily||(t.fontFamily="ds-digitalnormal"),t.text||(t.text="Text"),t.left||(t.left=50/this.ratio),t.top||(t.top=50/this.ratio),t.top-=t.fontSize/this.ratio*2,t.width||(t.width=P(t.text,t.fontSize+"px "+t.fontFamily)*this.ratio),this.rawFontSize=t.fontSize,this._color&&this._color!=="main"?t.fill=v.E[this._color]:(t.fill=v.E[t.team],this._color="main"),this.callSuper("initialize",t.text,t),this.moveTo(t.layer),this.setControlsVisibility({tl:!1,tr:!1,bl:!1,br:!1,ml:!1,mt:!1,mr:!1,mb:!1,mtr:!1}),setTimeout(function(){u.set("width",P(t.text,t.fontSize+"px "+t.fontFamily)/u.ratio)},100)},toObject:function(){return{type:this.type,id:this.id,name:this.name,layer:this.layer,group:this.groupName,fontSize:this.fontSize*this.ratio/O,x:this.left*this.ratio,y:this.top*this.ratio+this.fontSize*2,text:this.text,color:this._color}},fromObject:function(t){var u=this;this._color=t.color,this.id=t.id,this.name=t.name,this.layer=t.layer,this.groupName=t.group,this.set("fontSize",t.fontSize/this.ratio*O),this.set("left",t.x/this.ratio),this.set("top",t.y/this.ratio-this.fontSize/this.ratio*2),this.text=t.text,this.set("width",P(t.text,t.fontSize+"px "+this.fontFamily)/this.ratio),this.rawFontSize=t.fontSize,setTimeout(function(){u.set("width",P(t.text,t.fontSize+"px "+u.fontFamily)/u.ratio)},100),this._color==="main"?this.set("fill",v.E[this.team]):this.set("fill",v.E[this._color]),this.moveTo(t.layer),this.set("fontFamily","ds-digitalnormal")},setRatio:function(t){this.set("width",this.width*this.ratio/t),this.set("left",this.left*this.ratio/t),this.set("top",this.top*this.ratio/t),this.set("fontSize",this.fontSize*this.ratio/t),this.set("width",P(this.text,this.rawFontSize+"px "+this.fontFamily)/t),this.ratio=t},resizeScale:function(){},setTeam:function(t){this.team=t,this._color==="main"&&this.set("fill",v.E[this.team])}}),r=B.fabric.util.createClass(F,{type:"UiNumber",number:12345,initialize:function(t){t||(t={}),this.number=t.number||12345,t.text=this.number.toString(),this.callSuper("initialize",t)},toObject:function(){var t=this.callSuper("toObject");return t.number=this.number,delete t.text,t},fromObject:function(t){this.number=parseInt(t.number),t.text=this.number.toString(),this.callSuper("fromObject",t)}}),b=B.fabric.util.createClass(F,{type:"UiFloat",float:12.345,initialize:function(t){t||(t={}),this.float=t.float||12.345,t.text=this.float.toString(),this.callSuper("initialize",t)},toObject:function(){var t=this.callSuper("toObject");return t.float=this.float,delete t.text,t},fromObject:function(t){this.float=parseFloat(t.float),t.text=this.float.toString(),this.callSuper("fromObject",t)}}),Z={Rect:W,Line:A,Round:I,Ellipse:N,Arc:$,Text:F,Number:r,Float:b};function k(n){var t={id:n.id,name:n.name,layer:n.layer,groupName:n.group,ratio:n.ratio,team:n.team},u=n.type.slice(2);return new Z[u](t)}function D(){for(var n=[],t=0,u=Object.keys(Z);t<u.length;t++){var M=u[t];n.push({key:"Insert-".concat(M),label:M})}return n}},83885:function(ee,J,e){e.a(ee,function(B,v){return Re(this,null,function*(){try{var W=e(64599),A=e.n(W),N=e(12444),I=e.n(N),$=e(72004),O=e.n($),P=e(73070),F=B([P]);P=(F.then?(yield F)():F)[0];var r=function(){function b(Z,k,D){I()(this,b),this.name=Z,this.id=k,this.groups=[];var n={};for(var t in D){var u=D[t];u.group in n?n[u.group].push(u):n[u.group]=[u]}for(var M in n)this.groups.push(new P.Z(this.name,this.id,M,this.groups.length,n[M]))}return O()(b,[{key:"toSerialMsg",value:function(){var k=[],D=A()(this.groups),n;try{for(D.s();!(n=D.n()).done;){var t=n.value;k=k.concat(t.toSerialMsg())}}catch(u){D.e(u)}finally{D.f()}return console.log(k),k}},{key:"check",value:function(){var k=[],D=A()(this.groups),n;try{for(D.s();!(n=D.n()).done;){var t=n.value;k=k.concat(t.check())}}catch(u){D.e(u)}finally{D.f()}return k}}]),b}();J.Z=r,v()}catch(b){v(b)}})})},10622:function(ee,J,e){e.a(ee,function(B,v){return Re(this,null,function*(){try{var W=e(64599),A=e.n(W),N=e(12444),I=e.n(N),$=e(72004),O=e.n($),P=e(5970),F=e(83885),r=B([P,F]);[P,F]=r.then?(yield r)():r;var b=function(){function Z(k){I()(this,Z),this.frames=[];for(var D in k)this.frames.push(new F.Z(D,this.frames.length,k[D]))}return O()(Z,[{key:"toUiH",value:function(){return(0,P.LI)(this.frames)}},{key:"check",value:function(){var D=[],n=A()(this.frames),t;try{for(n.s();!(t=n.n()).done;){var u=t.value;D=D.concat(u.check())}}catch(M){n.e(M)}finally{n.f()}return D}},{key:"toSerialMsg",value:function(){var D={},n=A()(this.frames),t;try{for(n.s();!(t=n.n()).done;){var u=t.value;D[u.name]=u.toSerialMsg()}}catch(M){n.e(M)}finally{n.f()}return D}}]),Z}();J.Z=b,v()}catch(Z){v(Z)}})})},73070:function(ee,J,e){e.a(ee,function(B,v){return Re(this,null,function*(){try{var W=e(64599),A=e.n(W),N=e(12444),I=e.n(N),$=e(72004),O=e.n($),P=e(66978),F=B([P]);P=(F.then?(yield F)():F)[0];var r=function(){function b(Z,k,D,n,t){I()(this,b),this.frame_name=Z,this.frame_id=k,this.group_name=D,this.group_id=n,this.splits=[],this.errors=[];var u=0,M=new Set,p=A()(t),y;try{for(p.s();!(y=p.n()).done;){var l=y.value;/^[a-zA-Z_]+\w+$/.test(l.name)||this.errors.push({level:"error",info:'Name of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Object "').concat(l.name,'" does not compliant.')}),M.has(l.name)?this.errors.push({level:"error",info:'Name of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Object "').concat(l.name,'" is duplicate.')}):M.add(l.name),l.type==="UiText"&&(this.splits.push(new P.Z(this.frame_name,this.frame_id,this.group_name,this.group_id,this.splits.length,u,[l])),u+=1)}}catch(g){p.e(g)}finally{p.f()}for(var h=t.filter(function(g){return g.type!=="UiText"}),m=Math.ceil(h.length/7),c=0;c<m;c++)this.splits.push(new P.Z(this.frame_name,this.frame_id,this.group_name,this.group_id,this.splits.length,u,h.slice(c*7,(c+1)*7))),u+=7}return O()(b,[{key:"toSerialMsg",value:function(){var k=[],D=A()(this.splits),n;try{for(D.s();!(n=D.n()).done;){var t=n.value;k.push(t.toSerialMsg())}}catch(u){D.e(u)}finally{D.f()}return k}},{key:"check",value:function(){var k=this.errors,D=A()(this.splits),n;try{for(D.s();!(n=D.n()).done;){var t=n.value;k=k.concat(t.check())}}catch(u){D.e(u)}finally{D.f()}return k}}]),b}();J.Z=r,v()}catch(b){v(b)}})})},66978:function(ee,J,e){e.a(ee,function(B,v){return Re(this,null,function*(){try{var W=e(97857),A=e.n(W),N=e(64599),I=e.n(N),$=e(12444),O=e.n($),P=e(72004),F=e.n(P),r=e(5970),b=e(52880),Z=B([r]);r=(Z.then?(yield Z)():Z)[0];var k=function(){function D(n,t,u,M,p,y,l){var h=this;if(O()(this,D),this.frame_name=n,this.frame_id=t,this.group_name=u,this.group_id=M,this.split_id=p,this.start_id=y,this.objs=l,l[0].type==="UiText")this.toSplitC=function(){return(0,r.c0)(h.frame_name,h.frame_id,h.group_name,h.group_id,h.split_id,h.start_id,h.objs)};else{var m=7;l.length===1?m=1:l.length<=2?m=2:l.length<=5&&(m=5),this.toSplitC=function(){return(0,r.JP)(h.frame_name,h.frame_id,h.group_name,h.group_id,h.split_id,h.start_id,h.objs,m)}}this.toSplitH=function(){return(0,r.pj)(h.frame_name,h.group_name,h.split_id,h.objs)}}return F()(D,[{key:"toSerialMsg",value:function(){var t=[],u=I()(this.objs),M;try{for(u.s();!(M=u.n()).done;){var p=M.value,y=A()({},p);y.group="".concat(this.frame_name,"-").concat(this.split_id),t.push(y)}}catch(l){u.e(l)}finally{u.f()}return(0,b.h)(t)}},{key:"check",value:function(){return this.objs.length!==1&&this.objs.length!==2&&this.objs.length!==5&&this.objs.length!==7?[{level:"warning",info:'Length of Frame "'.concat(this.frame_name,'" Group "').concat(this.group_name,'" Split "').concat(this.split_id,'" is not 1 or 2 or 5 or 7.')}]:[]}}]),D}();J.Z=k,v()}catch(D){v(D)}})})},5970:function(ee,J,e){e.a(ee,function(B,v){return Re(this,null,function*(){try{let l=function(z,R,E){for(var T="",q=0;q<E;q++)T=T+`
#include "ui_`.concat(z,"_").concat(R,"_").concat(q,'.h"');for(var _=`
#define ui_init_`.concat(z,"_").concat(R,`() \\
`),Q=`
#define ui_update_`.concat(z,"_").concat(R,`() \\
`),G=`
#define ui_remove_`.concat(z,"_").concat(R,`() \\
`),f=0;f<E;f++)_+="_ui_init_".concat(z,"_").concat(R,"_").concat(f,`(); \\
`),Q+="_ui_update_".concat(z,"_").concat(R,"_").concat(f,`(); \\
`),G+="_ui_remove_".concat(z,"_").concat(R,"_").concat(f,`(); \\
`);return T+="".concat(r).concat(_.slice(0,-4)).concat(r).concat(Q.slice(0,-4)).concat(r).concat(G.slice(0,-4),`
    `),"".concat(T,`
`)},h=function(z,R){var E="",T=F()(R),q;try{for(T.s();!(q=T.n()).done;){var _=q.value;E+=l(z,_.group_name,_.splits.length)}}catch(Q){T.e(Q)}finally{T.f()}return E},m=function(z){var R="//".concat(r,"// Created by RM UI Designer").concat(r,"//").concat(r).concat(r,"#ifndef UI_H").concat(r,"#define UI_H").concat(r,"#ifdef __cplusplus").concat(r,'extern "C" {').concat(r,"#endif").concat(r).concat(r,'#include "ui_interface.h"').concat(r),E=F()(z),T;try{for(E.s();!(T=E.n()).done;){var q=T.value;R+=h(q.name,q.groups)}}catch(_){E.e(_)}finally{E.f()}return"".concat(R).concat(r).concat(r,"#ifdef __cplusplus").concat(r,"}").concat(r,"#endif").concat(r).concat(r,`#endif //UI_H
`)},c=function(z,R,E,T){var q="//".concat(r,"// Created by RM UI Designer").concat(r,"//").concat(r).concat(r,"#ifndef UI_").concat(z,"_").concat(R,"_").concat(E,"_H").concat(r,"#define UI_").concat(z,"_").concat(R,"_").concat(E,"_H").concat(r).concat(r,'#include "ui_interface.h"').concat(r).concat(r),_=F()(T),Q;try{for(_.s();!(Q=_.n()).done;){var G=Q.value;q+="extern ui_interface_".concat(b[G.type],"_t *ui_").concat(z,"_").concat(R,"_").concat(G.name,`;
`)}}catch(f){_.e(f)}finally{_.f()}return q+="".concat(r,"void _ui_init_").concat(z,"_").concat(R,"_").concat(E,"();").concat(r,"void _ui_update_").concat(z,"_").concat(R,"_").concat(E,"();").concat(r,"void _ui_remove_").concat(z,"_").concat(R,"_").concat(E,"();").concat(r).concat(r,"#endif //UI_").concat(z,"_").concat(R,"_").concat(E,"_H").concat(r),q},g=function(z,R,E){var T=O()({},E),q=Z[T.type],_=T.name;T.type==="UiFloat"&&(T.number=Math.round(T.float*1e3),delete T.float),T.type==="UiRect"&&(T.x2=T.x+T.width,T.y2=T.y+T.height,delete T.width,delete T.height),(T.type==="UiFloat"||T.type==="UiNumber")&&(T.lineWidth=Math.round(T.fontSize/10)),T.color=D[T.color],delete T.type,delete T.id,delete T.name,delete T.group;var Q="ui_".concat(z,"_").concat(R,"_").concat(_),G="    ".concat(Q,"->figure_tpye = ").concat(q,`;
`);for(var f in T){var ne=T[f];typeof ne=="number"&&(ne=Math.round(ne)),G+="    ".concat(Q,"->").concat(k[f]," = ").concat(ne,`;
`)}return"".concat(G,`
`)},C=function(z,R,E,T,q,_,Q,G){for(var f="".concat(z,"_").concat(E,"_").concat(q),ne="//".concat(r,"// Created by RM UI Designer").concat(r,"//").concat(r).concat(r,'#include "ui_').concat(f,'.h"').concat(r).concat(r,"#define FRAME_ID ").concat(R).concat(r,"#define GROUP_ID ").concat(T).concat(r,"#define START_ID ").concat(_).concat(r,"#define OBJ_NUM ").concat(Q.length).concat(r,"#define FRAME_OBJ_NUM ").concat(G).concat(r).concat(r,"CAT(ui_, CAT(FRAME_OBJ_NUM, _frame_t)) ui_").concat(f,";").concat(r),Me=0;Me<Q.length;Me++){var ce=b[Q[Me].type],je=Q[Me].name;ne+="ui_interface_".concat(ce,"_t *ui_").concat(z,"_").concat(E,"_").concat(je," = ")+"(ui_interface_".concat(ce,"_t *)&(ui_").concat(f,".data[").concat(Me,`]);
`)}ne+="".concat(r,"void _ui_init_").concat(f,"() {").concat(r,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(r,"        ui_").concat(f,".data[i].figure_name[0] = FRAME_ID;").concat(r,"        ui_").concat(f,".data[i].figure_name[1] = GROUP_ID;").concat(r,"        ui_").concat(f,".data[i].figure_name[2] = i + START_ID;").concat(r,"        ui_").concat(f,".data[i].operate_tpyel = 1;").concat(r,"    }").concat(r,"    for (int i = OBJ_NUM; i < FRAME_OBJ_NUM; i++) {").concat(r,"        ui_").concat(f,".data[i].operate_tpyel = 0;").concat(r,"    }").concat(r).concat(r);var ve=F()(Q),he;try{for(ve.s();!(he=ve.n()).done;){var se=he.value;ne+=g(z,E,se)}}catch(ie){ve.e(ie)}finally{ve.f()}return ne+="".concat(r,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(f,");").concat(r,"    SEND_MESSAGE((uint8_t *) &ui_").concat(f,", sizeof(ui_").concat(f,"));").concat(r,"}").concat(r).concat(r,"void _ui_update_").concat(f,"() {").concat(r,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(r,"        ui_").concat(f,".data[i].operate_tpyel = 2;").concat(r,"    }").concat(r).concat(r,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(f,");").concat(r,"    SEND_MESSAGE((uint8_t *) &ui_").concat(f,", sizeof(ui_").concat(f,"));").concat(r,"}").concat(r).concat(r,"void _ui_remove_").concat(f,"() {").concat(r,"    for (int i = 0; i < OBJ_NUM; i++) {").concat(r,"        ui_").concat(f,".data[i].operate_tpyel = 3;").concat(r,"    }").concat(r).concat(r,"    CAT(ui_proc_, CAT(FRAME_OBJ_NUM, _frame))(&ui_").concat(f,");").concat(r,"    SEND_MESSAGE((uint8_t *) &ui_").concat(f,", sizeof(ui_").concat(f,"));").concat(r,"}").concat(r),ne},o=function(z,R,E,T,q,_,Q){var G="".concat(z,"_").concat(E,"_").concat(q),f=O()({},Q[0]),ne=f.name,Me=f.text;f.color=D[f.color],f.strLength=Me.length,f.lineWidth=Math.round(f.fontSize/10),delete f.text,delete f.type,delete f.id,delete f.name,delete f.group;var ce="//".concat(r,"// Created by RM UI Designer").concat(r,"//").concat(r).concat(r,'#include "ui_').concat(G,'.h"').concat(r,'#include "string.h"').concat(r).concat(r,"#define FRAME_ID ").concat(R).concat(r,"#define GROUP_ID ").concat(T).concat(r,"#define START_ID ").concat(_).concat(r).concat(r,"ui_string_frame_t ui_").concat(G,";").concat(r).concat(r,"ui_interface_string_t* ui_").concat(z,"_").concat(E,"_").concat(ne," = &ui_").concat(G,".option;").concat(r).concat(r,"void _ui_init_").concat(G,"() {").concat(r,"    ui_").concat(G,".option.figure_name[0] = FRAME_ID;").concat(r,"    ui_").concat(G,".option.figure_name[1] = GROUP_ID;").concat(r,"    ui_").concat(G,".option.figure_name[2] = START_ID;").concat(r,"    ui_").concat(G,".option.operate_tpyel = 1;").concat(r);ce+="    ui_".concat(G,".option.figure_tpye = ").concat(Z.UiText,`;
`);for(var je in f){var ve=f[je];typeof ve=="number"&&(ve=Math.round(ve)),ce+="    ui_".concat(G,".option.").concat(k[je]," = ").concat(ve,`;
`)}return ce+="    strcpy(ui_".concat(z,"_").concat(E,"_").concat(ne,'->string, "').concat(Me,'");').concat(r).concat(r,"    ui_proc_string_frame(&ui_").concat(G,");").concat(r,"    SEND_MESSAGE((uint8_t *) &ui_").concat(G,", sizeof(ui_").concat(G,"));").concat(r,"}").concat(r).concat(r,"void _ui_update_").concat(G,"() {").concat(r,"    ui_").concat(G,".option.operate_tpyel = 2;").concat(r).concat(r,"    ui_proc_string_frame(&ui_").concat(G,");").concat(r,"    SEND_MESSAGE((uint8_t *) &ui_").concat(G,", sizeof(ui_").concat(G,"));").concat(r,"}").concat(r).concat(r,"void _ui_remove_").concat(G,"() {").concat(r,"    ui_").concat(G,".option.operate_tpyel = 3;").concat(r).concat(r,"    ui_proc_string_frame(&ui_").concat(G,");").concat(r,"    SEND_MESSAGE((uint8_t *) &ui_").concat(G,", sizeof(ui_").concat(G,"));").concat(r,"}"),ce},x=function(){return S.apply(this,arguments)},S=function(){return S=I()(A()().mark(function z(){return A()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",{ui_interface:{h:M,c:p},ui_types:{h:y}});case 1:case"end":return E.stop()}},z)})),S.apply(this,arguments)};e.d(J,{HC:function(){return x},JP:function(){return C},LI:function(){return m},c0:function(){return o},pj:function(){return c}});var W=e(15009),A=e.n(W),N=e(99289),I=e.n(N),$=e(97857),O=e.n($),P=e(64599),F=e.n(P),r=`
`,b={UiArc:"arc",UiRound:"round",UiRect:"rect",UiLine:"line",UiEllipse:"ellipse",UiText:"string",UiNumber:"number",UiFloat:"number"},Z={UiLine:0,UiRect:1,UiRound:2,UiEllipse:3,UiArc:4,UiFloat:5,UiNumber:6,UiText:7},k={lineWidth:"width",layer:"layer",x:"start_x",y:"start_y",x2:"end_x",y2:"end_y",rx:"rx",ry:"ry",r:"r",startAngle:"start_angle",endAngle:"end_angle",number:"number",color:"color",fontSize:"font_size",strLength:"str_length"},D={main:0,yellow:1,green:2,orange:3,purple:4,pink:5,cyan:6,black:7,white:8},n=e(75112),t=e(8938),u=e(33562),M=yield(yield fetch(n)).text(),p=yield(yield fetch(t)).text(),y=yield(yield fetch(u)).text();v()}catch(l){v(l)}})},1)},44740:function(ee,J,e){e.d(J,{Z:function(){return h}});var B=e(15009),v=e.n(B),W=e(99289),A=e.n(W),N=e(12444),I=e.n(N),$=e(72004),O=e.n($),P=e(9783),F=e.n(P),r=e(19632),b=e.n(r),Z=e(85378),k=function(){function m(){I()(this,m),F()(this,"messages",[]),F()(this,"enabled",!1),F()(this,"log",[]),F()(this,"rx",0)}return O()(m,[{key:"warn",value:function(g){this.enabled&&(this.messages.push({level:"warn",message:g,time:new Date}),console.warn(g)),this.messages.length>100&&(this.messages=this.messages.slice(-100))}},{key:"error",value:function(g){this.enabled&&(this.messages.push({level:"error",message:g,time:new Date}),console.error(g)),this.messages.length>100&&(this.messages=this.messages.slice(-100))}},{key:"clear",value:function(){this.messages=[]}},{key:"logHistory",value:function(g){this.log.push(Uint8Array.from(b()(g))),this.rx+=g.length,this.log.length>100&&this.log.shift()}},{key:"get",value:function(){return this.messages}},{key:"getHistory",value:function(){return{log:this.log,rx:this.rx}}}]),m}(),D=new k,n=D,t=[8,21,36,81,111,51],u=function(){function m(){I()(this,m),F()(this,"buffer",void 0),this.buffer=new Uint8Array(0)}return O()(m,[{key:"transform",value:function(g,C){for(this.buffer=Uint8Array.from([].concat(b()(this.buffer),b()(g))),n.logHistory(g);this.buffer.length>7;){if(this.buffer[0]!==165){this.buffer=this.buffer.subarray(1);continue}if(this.buffer.length<7)break;var o=this.buffer[1]|this.buffer[2]<<8,x=this.buffer[3],S=this.buffer[4],z=this.buffer[5]|this.buffer[6]<<8,R=this.buffer.subarray(0,4);if((0,Z.d)(R)!==S){this.buffer=this.buffer.subarray(1),n.warn("crc8 error, calc: 0x".concat((0,Z.d)(R).toString(16),", msg: 0x").concat(S.toString(16)));continue}if(z!==769){this.buffer=this.buffer.subarray(1),n.warn("cmd_id 0x".concat(z.toString(16)," not match"));continue}if(!t.includes(o)){this.buffer=this.buffer.subarray(1),n.warn("length error, length: ".concat(o));continue}if(this.buffer.length<6+o+2)break;var E=this.buffer.subarray(7,7+o),T=this.buffer[7+o]|this.buffer[8+o]<<8;if((0,Z.I)(this.buffer.subarray(0,7+o))!==T){this.buffer=this.buffer.subarray(1),n.error("crc16 error, calc: 0x".concat((0,Z.I)(this.buffer.subarray(0,7+o)).toString(16),", msg: 0x").concat(T.toString(16)));continue}C.enqueue(E),this.buffer=this.buffer.subarray(7+o+2)}}}]),m}(),M=u,p=e(73676),y=e(28348),l=function(){function m(c,g){I()(this,m),F()(this,"options",{baudRate:115200,dataBits:8,stopBits:1,flowControl:"none",parity:"none"}),this.onEvent=c,this.onError=g,this.reader=null,this.transformer=new TransformStream(new M)}return O()(m,[{key:"connect",value:function(){var c=A()(v()().mark(function C(){return v()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if("serial"in navigator){x.next=3;break}return y.yw.error("Web Serial API not supported."),x.abrupt("return");case 3:return x.next=5,navigator.serial.requestPort();case 5:return this.port=x.sent,x.next=8,this.port.open(this.options);case 8:this.readableStreamClosed=this.port.readable.pipeTo(this.transformer.writable),this.reader=this.transformer.readable.getReader(),n.enabled=!0,n.clear(),this.readLoop();case 13:case"end":return x.stop()}},C,this)}));function g(){return c.apply(this,arguments)}return g}()},{key:"stop",value:function(){var c=A()(v()().mark(function C(){var o,x,S;return v()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return o=new TextEncoderStream,x=o.writable.getWriter(),S=o.readable.pipeTo(this.port.writable),this.reader.cancel(),R.next=6,this.readableStreamClosed.catch(function(){});case 6:return x.close(),R.next=9,S;case 9:return R.next=11,this.port.close();case 11:this.reader=null,this.transformer=new TransformStream(new M),n.enabled=!1;case 14:case"end":return R.stop()}},C,this)}));function g(){return c.apply(this,arguments)}return g}()},{key:"readLoop",value:function(){var c=A()(v()().mark(function C(){var o,x,S,z;return v()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:E.prev=0;case 1:return E.next=4,this.reader.read();case 4:if(o=E.sent,x=o.value,S=o.done,!S){E.next=10;break}return this.reader.releaseLock(),E.abrupt("break",20);case 10:if(z=(0,p.EY)(x),z.sender===y.eq){E.next=14;break}return n.error("Sender ".concat(z.sender," not match self ").concat(y.eq)),E.abrupt("continue",1);case 14:if(z.receiver===y.eq+256){E.next=17;break}return n.error("Receiver ".concat(z.receiver," not match self ").concat(y.eq)),E.abrupt("continue",1);case 17:this===null||this===void 0||this.onEvent(z),E.next=1;break;case 20:E.next=36;break;case 22:return E.prev=22,E.t0=E.catch(0),E.prev=24,E.next=27,this.stop();case 27:E.next=31;break;case 29:E.prev=29,E.t1=E.catch(24);case 31:this.reader=null,this.transformer=new TransformStream(new M),n.enabled=!1,n.clear(),this.onError(E.t0);case 36:case"end":return E.stop()}},C,this,[[0,22],[24,29]])}));function g(){return c.apply(this,arguments)}return g}()},{key:"getLog",value:function(){return n.get()}},{key:"getHistory",value:function(){return n.getHistory()}}]),m}(),h=l},56134:function(ee,J,e){e.a(ee,function(B,v){return Re(this,null,function*(){try{var W=e(64599),A=e.n(W),N=e(15009),I=e.n(N),$=e(99289),O=e.n($),P=e(12444),F=e.n(P),r=e(72004),b=e.n(r),Z=e(9783),k=e.n(Z),D=e(10622),n=e(52880),t=e(28348),u=B([D]);D=(u.then?(yield u)():u)[0];var M=function(){function p(){F()(this,p),k()(this,"options",{baudRate:115200,dataBits:8,stopBits:1,flowControl:"none",parity:"none"}),k()(this,"writer",null)}return b()(p,[{key:"connect",value:function(){var y=O()(I()().mark(function h(){return I()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if("serial"in navigator){c.next=3;break}return t.yw.error("Web Serial API not supported."),c.abrupt("return");case 3:return c.next=5,navigator.serial.requestPort();case 5:return this.port=c.sent,c.next=8,this.port.open(this.options);case 8:this.writer=this.port.writable.getWriter();case 9:case"end":return c.stop()}},h,this)}));function l(){return y.apply(this,arguments)}return l}()},{key:"stop",value:function(){var y=O()(I()().mark(function h(){return I()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.writer.releaseLock();case 2:return this.writer=null,c.next=5,this.port.close();case 5:case"end":return c.stop()}},h,this)}));function l(){return y.apply(this,arguments)}return l}()},{key:"write",value:function(){var y=O()(I()().mark(function h(m){var c=this,g,C,o,x,S,z,R;return I()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(this.writer){T.next=3;break}return t.yw.error("Serial port is not open."),T.abrupt("return");case 3:g=0,setTimeout(function(){c.writer.write((0,n.r)())},g),g+=50,C=new D.Z(m.data),o=C.toSerialMsg(),x=o[m.selected],console.log(m),S=A()(x),T.prev=11,R=I()().mark(function q(){var _;return I()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:_=z.value,setTimeout(function(){c.writer.write(_)},g),g+=50;case 3:case"end":return G.stop()}},q)}),S.s();case 14:if((z=S.n()).done){T.next=18;break}return T.delegateYield(R(),"t0",16);case 16:T.next=14;break;case 18:T.next=23;break;case 20:T.prev=20,T.t1=T.catch(11),S.e(T.t1);case 23:return T.prev=23,S.f(),T.finish(23);case 26:case"end":return T.stop()}},h,this,[[11,20,23,26]])}));function l(h){return y.apply(this,arguments)}return l}()}]),p}();J.Z=M,v()}catch(p){v(p)}})})},30789:function(ee,J,e){e.d(J,{E:function(){return F},E4:function(){return b},GM:function(){return M},Gj:function(){return Z},UP:function(){return n},cT:function(){return y},jK:function(){return l},lZ:function(){return D},q7:function(){return k}});var B=e(15009),v=e.n(B),W=e(99289),A=e.n(W),N=e(17990),I=e(55733),$=e.n(I),O=document.createElement("a"),P=document.createElement("input");P.type="file";var F={yellow:"rgb(255, 238, 70)",green:"rgb(168, 255, 45)",orange:"rgb(255, 163, 8)",purple:"rgb(240, 41, 246)",pink:"rgb(255, 100, 142)",cyan:"rgb(69, 255, 242)",white:"#fff",black:"#000",blue:"rgb(47, 168, 223)",red:"rgb(255, 69, 70)"};function r(h){var m=h.split(".").pop();return{name:m+" file",extensions:[m]}}function b(h,m){if(n())A()(v()().mark(function C(){var o;return v()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,N.WZ.save({filters:[r(m)],defaultPath:m});case 2:if(o=S.sent,!(o!==null&&o.length>0)){S.next=6;break}return S.next=6,N.fs.writeTextFile(o,h);case 6:case"end":return S.stop()}},C)}))();else{var c=new Blob([h],{type:"text/plain;charset=utf-8"}),g=URL.createObjectURL(c);O.href=g,O.download=m,O.click(),URL.revokeObjectURL(g)}}function Z(h,m){if(n())A()(v()().mark(function g(){var C,o;return v()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,N.WZ.save({filters:[r(m)],defaultPath:m});case 2:if(C=S.sent,!(C!==null&&C.length>0)){S.next=9;break}return S.next=6,h.arrayBuffer();case 6:return o=S.sent,S.next=9,N.fs.writeBinaryFile(C,o);case 9:case"end":return S.stop()}},g)}))();else{var c=URL.createObjectURL(h);O.href=c,O.download=m,O.click(),URL.revokeObjectURL(c)}}function k(h,m,c){var g={version:2,data:h,selected:c},C=JSON.stringify(g);b(C,m)}function D(h){var m=null;return window.createObjcectURL!==void 0?m=window.createOjcectURL(h):window.URL!==void 0?m=window.URL.createObjectURL(h):window.webkitURL!==void 0&&(m=window.webkitURL.createObjectURL(h)),m}function n(){return window!==void 0&&window.__TAURI__!==void 0}function t(h){return u.apply(this,arguments)}function u(){return u=A()(v()().mark(function h(m){var c;return v()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return c=new($()),m.forEach(function(o){c.file(o.fileName,o.content)}),C.next=4,c.generateAsync({type:"blob"});case 4:return C.abrupt("return",C.sent);case 5:case"end":return C.stop()}},h)})),u.apply(this,arguments)}function M(h){return p.apply(this,arguments)}function p(){return p=A()(v()().mark(function h(m){var c,g,C;return v()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:c=[];for(g in m)for(C in m[g])c.push({fileName:"".concat(g,".").concat(C),content:m[g][C]});return x.next=4,t(c);case 4:return x.abrupt("return",x.sent);case 5:case"end":return x.stop()}},h)})),p.apply(this,arguments)}function y(h){return new Promise(function(m,c){if(n()){var g=[h.slice(1)],C="".concat(g," file");h==="image/*"&&(g=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],C="image"),A()(v()().mark(function o(){var x,S,z,R,E;return v()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,N.WZ.open({multiple:!1,directory:!1,filters:[{name:C,extensions:g}]});case 2:if(x=q.sent,!(x!==null&&x.length>0)){q.next=16;break}return S=x.replace(/\\/g,"/"),z=S.split("/").pop(),q.t0=Blob,q.next=9,N.fs.readBinaryFile(x);case 9:q.t1=q.sent,q.t2=[q.t1],R=new q.t0(q.t2),E=new File([R],z),m(E),q.next=17;break;case 16:c();case 17:case"end":return q.stop()}},o)}))()}else P.accept=h,P.value="",P.onchange=function(){if(P.files.length>0){var o=P.files[0];m(o)}else c(new Error("No file selected"))},P.click()})}function l(h){return document.getElementById("content-in").contains(h)||h.getAttribute("contentEditable")==="true"?!0:h.tagName==="INPUT"||h.tagName==="TEXTAREA"}},54030:function(ee,J,e){var B=e(67294),v=e(28348),W=e(85893);function A(N){return(0,v.ZP)(),(0,W.jsx)("div",{})}J.Z=A},7427:function(ee,J,e){var B=e(12444),v=e.n(B),W=e(72004),A=e.n(W),N=e(31996),I=e.n(N),$=e(26037),O=e.n($),P=e(67294),F=e(22997),r=e(2487),b=e(42075),Z=e(78977),k=e(97309),D=e(85893),n=function(t){I()(M,t);var u=O()(M);function M(){return v()(this,M),u.apply(this,arguments)}return A()(M,[{key:"render",value:function(){var y=this.props.errors.filter(function(m){return m.level==="warning"}),l=this.props.errors.filter(function(m){return m.level==="error"}),h=(0,D.jsx)(F.ZP,{status:"success",title:"Check Passed!",subTitle:"0 error, 0 warning!",style:{marginTop:"50px"}});return l.length+y.length>0&&(h=(0,D.jsxs)("div",{style:{color:"var(--ant-color-text)",height:"100%"},children:[(0,D.jsxs)("p",{children:["Found ",l.length," errors, ",y.length," warnings."]}),(0,D.jsx)("div",{style:{paddingBottom:10},className:"card-body",children:(0,D.jsx)(r.Z,{bordered:!0,dataSource:this.props.errors,renderItem:function(c){return(0,D.jsx)(r.Z.Item,{children:(0,D.jsxs)(b.Z,{size:"middle",children:[c.level==="warning"?(0,D.jsx)(Z.Z,{}):(0,D.jsx)(k.Z,{}),c.info]})})}})})]})),(0,D.jsxs)("div",{style:{width:"100%",height:"calc(100% - 50px)"},children:[(0,D.jsx)("h3",{style:{color:"var(--ant-color-text)"},children:"Check Data"}),h]})}}]),M}(P.Component);J.Z=n},56296:function(ee,J,e){e.a(ee,function(B,v){return Re(this,null,function*(){try{let f=function(Me){var ce="";return Me.h&&(ce+=".h"),Me.h&&Me.c&&(ce+=" and "),Me.c&&(ce+=".c"),ce},ne=function(){var Me=document.querySelector(".rmui"),ce=getComputedStyle(Me),je=ce.getPropertyValue("--ant-color-text-base");return je==="#fff"};var W=e(19632),A=e.n(W),N=e(15009),I=e.n(N),$=e(64599),O=e.n($),P=e(97857),F=e.n(P),r=e(99289),b=e.n(r),Z=e(12444),k=e.n(Z),D=e(72004),n=e.n(D),t=e(25098),u=e.n(t),M=e(31996),p=e.n(M),y=e(26037),l=e.n(y),h=e(9783),m=e.n(h),c=e(67294),g=e(69615),C=e(42075),o=e(28036),x=e(42477),S=e(42308),z=e(28348),R=e(24389),E=e(51376),T=e(30789),q=e(5970),_=e(85893),Q=B([q]);q=(Q.then?(yield Q)():Q)[0];var G=function(Me){p()(je,Me);var ce=l()(je);function je(){var ve;k()(this,je);for(var he=arguments.length,se=new Array(he),ie=0;ie<he;ie++)se[ie]=arguments[ie];return ve=ce.call.apply(ce,[this].concat(se)),m()(u()(ve),"state",{preview:null,fileName:""}),m()(u()(ve),"checked",[]),ve}return n()(je,[{key:"review",value:function(he,se){this.setState({preview:this.props.code[he][se],fileName:"".concat(he,".").concat(se)})}},{key:"download",value:function(he,se){(0,T.E4)(this.props.code[he][se],"".concat(he,".").concat(se)),console.log(this.props.code[he][se])}},{key:"downloadChecked",value:function(){var ve=b()(I()().mark(function se(){var ie,ye,le,de,H;return I()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(this.checked.length!==0){me.next=3;break}return z.yw.error("Please select at least one file."),me.abrupt("return");case 3:return ie={},me.t0=F(),me.t1=F()({},this.props.code),me.next=8,(0,q.HC)();case 8:me.t2=me.sent,ye=(0,me.t0)(me.t1,me.t2),le=O()(this.checked);try{for(le.s();!(de=le.n()).done;)H=de.value,ie[H]=ye[H]}catch(Se){le.e(Se)}finally{le.f()}(0,T.GM)(ie).then(function(Se){(0,T.Gj)(Se,"codes.zip")});case 13:case"end":return me.stop()}},se,this)}));function he(){return ve.apply(this,arguments)}return he}()},{key:"render",value:function(){var he=this,se=[{file:"ui base .h and .c",key:"_base"}];for(var ie in this.props.code)se.push({file:"".concat(ie," ").concat(f(this.props.code[ie])),key:ie,h:this.props.code[ie].h!==void 0,c:this.props.code[ie].c!==void 0});return(0,_.jsxs)("div",{className:"full",style:{overflow:"hidden"},children:[(0,_.jsx)("h3",{style:{color:"var(--ant-color-text)",marginBottom:20},children:"Download Data"}),(0,_.jsx)("div",{style:{paddingBottom:36},className:"card-body",children:(0,_.jsx)(g.Z,{columns:[{title:"File",dataIndex:"file",key:"file"},{title:"Preview",dataIndex:"key",key:"preview",render:function(le,de){return(0,_.jsxs)(C.Z,{children:[de.h&&(0,_.jsx)(o.ZP,{type:"link",onClick:function(){he.review(le,"h")},children:"Preview .h"}),de.c&&(0,_.jsx)(o.ZP,{type:"link",onClick:function(){he.review(le,"c")},children:"Preview .c"})]})}},{title:"Download",dataIndex:"key",key:"download",render:function(le,de){return le!=="_base"?(0,_.jsxs)(C.Z,{children:[de.h&&(0,_.jsx)(o.ZP,{type:"link",onClick:function(){he.download(le,"h")},children:"Download .h"}),de.c&&(0,_.jsx)(o.ZP,{type:"link",onClick:function(){he.download(le,"c")},children:"Download .c"})]}):(0,_.jsx)(o.ZP,{type:"link",onClick:b()(I()().mark(function H(){var Ce,me;return I()().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.next=2,(0,q.HC)();case 2:return Ce=be.sent,be.next=5,(0,T.GM)(Ce);case 5:me=be.sent,(0,T.Gj)(me,"ui_base.zip");case 7:case"end":return be.stop()}},H)})),children:"Download .zip"})}}],dataSource:se,rowSelection:{type:"checkbox",onChange:function(le){var de=A()(le);de.includes("_base")&&(de=de.filter(function(H){return H!=="_base"}),de.push("ui_types"),de.push("ui_interface")),he.checked=de},getCheckboxProps:function(le){return{name:le.key}}},pagination:!1})}),(0,_.jsx)(x.Z,{onClose:function(){return he.setState({preview:null})},open:this.state.preview!==null,title:this.state.fileName,size:"large",getContainer:document.getElementById("content-in"),rootStyle:{inset:"25px 0 0 0"},children:(0,_.jsx)("div",{style:{height:"100%",overflow:"auto"},children:(0,_.jsx)(S.ZP,{value:this.state.preview||"",theme:ne()?R.ub:R.tR,extensions:[(0,E.N)()],onContextMenu:function(le){le.stopPropagation()}})})})]})}}]),je}(c.Component);J.Z=G,v()}catch(f){v(f)}})})},22312:function(ee,J,e){e.a(ee,function(B,v){return Re(this,null,function*(){try{var W=e(64599),A=e.n(W),N=e(12444),I=e.n(N),$=e(72004),O=e.n($),P=e(25098),F=e.n(P),r=e(31996),b=e.n(r),Z=e(26037),k=e.n(Z),D=e(9783),n=e.n(D),t=e(67294),u=e(28036),M=e(42477),p=e(7427),y=e(56296),l=e(10622),h=e(85893),m=B([y,l]);[y,l]=m.then?(yield m)():m;var c=function(g){b()(o,g);var C=k()(o);function o(){var x;I()(this,o);for(var S=arguments.length,z=new Array(S),R=0;R<S;R++)z[R]=arguments[R];return x=C.call.apply(C,[this].concat(z)),n()(F()(x),"state",{show:!1,step:"check"}),n()(F()(x),"downloadRef",(0,t.createRef)()),n()(F()(x),"data",{}),n()(F()(x),"errors",[]),x}return O()(o,[{key:"gen",value:function(S){this.helper=new l.Z(S),this.data=S,this.code={ui:{h:this.helper.toUiH()}};var z=A()(this.helper.frames),R;try{for(z.s();!(R=z.n()).done;){var E=R.value,T=A()(E.groups),q;try{for(T.s();!(q=T.n()).done;){var _=q.value,Q=A()(_.splits),G;try{for(Q.s();!(G=Q.n()).done;){var f=G.value;this.code["ui_".concat(E.name,"_").concat(_.group_name,"_").concat(f.split_id)]={c:f.toSplitC(),h:f.toSplitH()}}}catch(ne){Q.e(ne)}finally{Q.f()}}}catch(ne){T.e(ne)}finally{T.f()}}}catch(ne){z.e(ne)}finally{z.f()}this.errors=this.helper.check(),this.setState({show:!0,step:"check"})}},{key:"onClose",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var S=this,z=(0,h.jsx)(u.ZP,{type:"primary",onClick:function(){return S.setState({step:"generate"})},disabled:this.errors.filter(function(E){return E.level==="error"}).length>0,children:"Generate"}),R=(0,h.jsx)(u.ZP,{type:"primary",onClick:function(){var T;return(T=S.downloadRef)===null||T===void 0||(T=T.current)===null||T===void 0?void 0:T.downloadChecked()},children:"Download"});return(0,h.jsx)("div",{children:(0,h.jsx)(M.Z,{title:"C Code Generator",placement:"right",onClose:function(){return S.onClose()},open:this.state.show,size:"large",getContainer:document.getElementById("content-in"),rootStyle:{inset:"25px 0 0 0"},style:{borderTop:"3px var(--ant-line-type) var(--ant-color-split)"},footer:(0,h.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",padding:5},children:this.state.step==="check"?z:R}),children:this.state.step==="check"?(0,h.jsx)(p.Z,{errors:this.errors}):(0,h.jsx)(y.Z,{code:this.code,ref:this.downloadRef})})})}}]),o}(t.Component);J.Z=c,v()}catch(g){v(g)}})})},54433:function(ee,J,e){var B=e(12444),v=e.n(B),W=e(72004),A=e.n(W),N=e(31996),I=e.n(N),$=e(26037),O=e.n($),P=e(67294),F=e(86250),r=e(18299),b=e(85893),Z=function(k){I()(n,k);var D=O()(n);function n(){return v()(this,n),D.apply(this,arguments)}return A()(n,[{key:"render",value:function(){return(0,b.jsxs)(F.Z,{style:{width:"100%"},justify:"space-between",children:[this.props.children,(0,b.jsx)("div",{children:this.props.checked&&(0,b.jsx)(r.Z,{})})]})}}]),n}(P.Component);J.Z=Z},58377:function(ee,J,e){e.a(ee,function(B,v){return Re(this,null,function*(){try{var W=e(15009),A=e.n(W),N=e(99289),I=e.n(N),$=e(64599),O=e.n($),P=e(12444),F=e.n(P),r=e(72004),b=e.n(r),Z=e(25098),k=e.n(Z),D=e(31996),n=e.n(D),t=e(26037),u=e.n(t),M=e(9783),p=e.n(M),y=e(67294),l=e(28036),h=e(86250),m=e(83159),c=e(40411),g=e(8791),C=e(28100),o=e(1944),x=e(39104),S=e(37388),z=e(73475),R=e(16165),E=e(48268),T=e(62388),q=e(3213),_=e(54349),Q=e(13799),G=e(82843),f=e(23481),ne=e(79476),Me=e(61024),ce=e(54433),je=e(28348),ve=e(73344),he=e(553),se=e(30789),ie=e(22312),ye=e(44740),le=e(56134),de=e(37932),H=e(85893),Ce=B([ie,le]);[ie,le]=Ce.then?(yield Ce)():Ce;var me=[{key:"File-new",label:"New"},{key:"File-open",label:"Open"},{key:"File-save",label:"Save"},{key:"File-saveAs",label:"Save as"},{key:"File-autoSave",label:"Auto Save"},{type:"divider"},{key:"File-generate",label:"Generate Code",icon:(0,H.jsx)(g.Z,{})}],Se=[{key:"Edit-undo",label:"Undo"},{key:"Edit-redo",label:"Redo"},{key:"Edit-reset",label:"Reset History"}],be=[{key:"Simulate-from",label:"From Robot",children:[{key:"Simulate-from-start",label:"Start"},{key:"Simulate-from-stop",label:"Stop"},{key:"Simulate-from-log",label:"Debug Log"},{key:"Simulate-from-rx",label:"Rx History"}]},{key:"Simulate-to",label:"To Referee",children:[{key:"Simulate-to-start",label:"Start"},{key:"Simulate-to-stop",label:"Stop"},{key:"Simulate-to-update",label:"Update"}]},{key:"Simulate-settings",label:"Settings"}],ze=function(De){n()(xe,De);var Ae=u()(xe);function xe(){var pe;F()(this,xe);for(var ue=arguments.length,Ie=new Array(ue),fe=0;fe<ue;fe++)Ie[fe]=arguments[fe];return pe=Ae.call.apply(Ae,[this].concat(Ie)),p()(k()(pe),"state",{fullscreen:!1,frames:["default"],selectedFrame:"default",darkMode:!1,couldUndo:!1,couldRedo:!1,serialStart:!1,serialToStart:!1,autoSave:!0}),p()(k()(pe),"formRef",(0,y.createRef)()),p()(k()(pe),"aboutRef",(0,y.createRef)()),p()(k()(pe),"generatorRef",(0,y.createRef)()),p()(k()(pe),"logDrawerRef",(0,y.createRef)()),p()(k()(pe),"rxDrawerRef",(0,y.createRef)()),p()(k()(pe),"serialModalRef",(0,y.createRef)()),p()(k()(pe),"modeModalRef",(0,y.createRef)()),p()(k()(pe),"tauri",(0,se.UP)()),p()(k()(pe),"serial",new ye.Z(function(oe){return pe.onSerialEvent(oe)},function(oe){return pe.onSerialError(oe)})),p()(k()(pe),"serialTo",new le.Z),p()(k()(pe),"fileHandler",null),pe}return b()(xe,[{key:"onSerialEvent",value:function(ue){var Ie=O()(ue.events),fe;try{for(Ie.s();!(fe=Ie.n()).done;){var oe=fe.value;this.props.onObjectEvent(oe.type,oe.obj)}}catch(X){Ie.e(X)}finally{Ie.f()}}},{key:"onSerialError",value:function(ue){this.props.setEditable(!0),this.setState({serialStart:!1}),je.yw.error(ue.text)}},{key:"componentDidMount",value:function(){var pe=I()(A()().mark(function Ie(){var fe=this,oe,X,Y,U,d;return A()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(Y=function(){return Y=I()(A()().mark(function w(){var V;return A()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,ve.G.isMaximized();case 2:V=L.sent,oe.setState({fullscreen:V});case 4:case"end":return L.stop()}},w)})),Y.apply(this,arguments)},X=function(){return Y.apply(this,arguments)},oe=this,!this.tauri){a.next=8;break}return a.next=6,X();case 6:return a.next=8,ve.G.onResized(function(j){return X()});case 8:return a.next=11,(U=this.modeModalRef.current)===null||U===void 0?void 0:U.open();case 11:if(d=a.sent,d!=="new"){a.next=25;break}return this.fileHandler=new de.X(function(){return JSON.stringify({version:2,data:fe.props.getData(),selected:fe.state.selectedFrame})}),a.next=16,this.fileHandler.create();case 16:if(!a.sent){a.next=23;break}return a.t0=this.props,a.next=20,this.fileHandler.read();case 20:return a.t1=a.sent,a.t0.upload.call(a.t0,a.t1),a.abrupt("break",42);case 23:a.next=40;break;case 25:if(d!=="open"){a.next=38;break}return this.fileHandler=new de.X(function(){return JSON.stringify({version:2,data:fe.props.getData(),selected:fe.state.selectedFrame})}),a.next=29,this.fileHandler.open();case 29:if(!a.sent){a.next=36;break}return a.t2=this.props,a.next=33,this.fileHandler.read();case 33:return a.t3=a.sent,a.t2.upload.call(a.t2,a.t3),a.abrupt("break",42);case 36:a.next=40;break;case 38:return this.setState({autoSave:!1}),a.abrupt("break",42);case 40:a.next=8;break;case 42:window.addEventListener("keydown",function(){var j=I()(A()().mark(function w(V){return A()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(!(V.ctrlKey&&V.key==="s")){L.next=8;break}if(V.preventDefault(),!fe.fileHandler){L.next=7;break}return L.next=5,fe.fileHandler.save();case 5:L.next=8;break;case 7:(0,se.q7)(fe.props.getData(),"ui.rmui",fe.state.selectedFrame);case 8:case"end":return L.stop()}},w)}));return function(w){return j.apply(this,arguments)}}());case 43:case"end":return a.stop()}},Ie,this)}));function ue(){return pe.apply(this,arguments)}return ue}()},{key:"setCouldDo",value:function(ue){this.setState({couldUndo:ue.couldPrevious,couldRedo:ue.couldNext}),this.fileHandler&&this.state.autoSave&&this.fileHandler.update()}},{key:"fullScreen",value:function(){if(this.tauri)ve.G.maximize();else{var ue=document.documentElement;ue.requestFullscreen?ue.requestFullscreen():ue.msRequestFullscreen?ue.msRequestFullscreen():ue.mozRequestFullScreen?ue.mozRequestFullScreen():ue.webkitRequestFullscreen&&ue.webkitRequestFullscreen()}this.setState({fullscreen:!0})}},{key:"exitFullscreen",value:function(){this.tauri?ve.G.unmaximize():document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),this.setState({fullscreen:!1})}},{key:"setFrames",value:function(ue){this.setState({frames:ue.frames,selectedFrame:ue.selected})}},{key:"onMenuClick",value:function(){var pe=I()(A()().mark(function Ie(fe){var oe=this,X,Y,U,d,s,a,j,w,V,K,L,te;return A()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(X=fe.keyPath[fe.keyPath.length-1],X.slice(0,6)!=="Insert"){i.next=7;break}Y=fe.key.slice(7),U={id:-1,name:"New".concat(Y),layer:0,group:"Ungroup",type:"Ui".concat(Y)},this.props.onObjectEvent("_add",U),i.next=203;break;case 7:if(X!=="Edit-reset"){i.next=11;break}this.props.onHistoryEvent("resetNow"),i.next=203;break;case 11:if(X!=="Edit-undo"){i.next=15;break}this.props.onHistoryEvent("previous"),i.next=203;break;case 15:if(X!=="Edit-redo"){i.next=19;break}this.props.onHistoryEvent("next"),i.next=203;break;case 19:if(X!=="File-new"){i.next=40;break}if(!this.fileHandler){i.next=36;break}return i.next=23,this.fileHandler.disableAutoSave();case 23:return this.setState({autoSave:!1}),i.next=26,this.fileHandler.create();case 26:if(!i.sent){i.next=34;break}return i.t0=this.props,i.next=30,this.fileHandler.read();case 30:i.t1=i.sent,i.t0.upload.call(i.t0,i.t1),this.fileHandler.enableAutoSave(),this.setState({autoSave:!0});case 34:i.next=38;break;case 36:this.props.reset(),this.props.onHistoryEvent("reset");case 38:i.next=203;break;case 40:if(X!=="File-save"){i.next=49;break}if(!this.fileHandler){i.next=46;break}return i.next=44,this.fileHandler.save();case 44:i.next=47;break;case 46:(0,se.q7)(this.props.getData(),"ui.rmui",this.state.selectedFrame);case 47:i.next=203;break;case 49:if(X!=="File-saveAs"){i.next=63;break}if(!this.fileHandler){i.next=61;break}return i.next=53,this.fileHandler.disableAutoSave();case 53:return this.setState({autoSave:!1}),i.next=56,this.fileHandler.create();case 56:if(!i.sent){i.next=61;break}return i.next=59,this.fileHandler.save();case 59:this.fileHandler.enableAutoSave(),this.setState({autoSave:!0});case 61:i.next=203;break;case 63:if(X!=="File-autoSave"){i.next=74;break}if(!this.fileHandler){i.next=72;break}if(!this.state.autoSave){i.next=70;break}return i.next=68,this.fileHandler.disableAutoSave();case 68:i.next=71;break;case 70:this.fileHandler.enableAutoSave();case 71:this.setState({autoSave:!this.state.autoSave});case 72:i.next=203;break;case 74:if(X!=="File-open"){i.next=94;break}if(!this.fileHandler){i.next=91;break}return i.next=78,this.fileHandler.disableAutoSave();case 78:return this.setState({autoSave:!1}),i.next=81,this.fileHandler.open();case 81:if(!i.sent){i.next=89;break}return i.t2=this.props,i.next=85,this.fileHandler.read();case 85:i.t3=i.sent,i.t2.upload.call(i.t2,i.t3),this.fileHandler.enableAutoSave(),this.setState({autoSave:!0});case 89:i.next=92;break;case 91:(0,se.cT)(".rmui").then(function(ae){oe.props.upload(ae)}).catch(function(){});case 92:i.next=203;break;case 94:if(X!=="File-generate"){i.next=98;break}(d=this.generatorRef.current)===null||d===void 0||d.gen(this.props.getData()),i.next=203;break;case 98:if(X!=="FrameOp-add"){i.next=105;break}return i.next=101,this.formRef.current.open("New Frame",this.state.frames);case 101:s=i.sent,this.props.setFrame("add",s),i.next=203;break;case 105:if(X!=="FrameOp-remove"){i.next=109;break}this.props.setFrame("remove",this.state.selectedFrame),i.next=203;break;case 109:if(X!=="FrameOp-copy"){i.next=116;break}return i.next=112,this.formRef.current.open("Copy Frame To",this.state.frames);case 112:a=i.sent,this.props.setFrame("copy",a),i.next=203;break;case 116:if(X!=="FrameOp-rename"){i.next=123;break}return i.next=119,this.formRef.current.open("Rename Frame To",this.state.frames);case 119:j=i.sent,this.props.setFrame("rename",j),i.next=203;break;case 123:if(X!=="FrameOp-change"){i.next=128;break}w=fe.key.slice(7),this.props.setFrame("change",w),i.next=203;break;case 128:if(fe.key!=="Simulate-from-start"){i.next=141;break}return i.prev=129,i.next=132,this.serial.connect();case 132:this.props.setEditable(!1),this.setState({serialStart:!0}),i.next=139;break;case 136:i.prev=136,i.t4=i.catch(129),je.yw.error(i.t4.text);case 139:i.next=203;break;case 141:if(fe.key!=="Simulate-from-stop"){i.next=154;break}return i.prev=142,i.next=145,this.serial.stop();case 145:this.props.setEditable(!0),this.setState({serialStart:!1}),i.next=152;break;case 149:i.prev=149,i.t5=i.catch(142),je.yw.error(i.t5.text);case 152:i.next=203;break;case 154:if(fe.key!=="Simulate-from-log"){i.next=158;break}(V=this.logDrawerRef.current)===null||V===void 0||V.show(this.serial.getLog()),i.next=203;break;case 158:if(fe.key!=="Simulate-from-rx"){i.next=162;break}(K=this.rxDrawerRef.current)===null||K===void 0||K.show(this.serial.getHistory()),i.next=203;break;case 162:if(fe.key!=="Simulate-to-start"){i.next=175;break}return i.prev=163,i.next=166,this.serialTo.connect();case 166:je.yw.warning("This Module is beta now, maybe not work!"),this.setState({serialToStart:!0}),i.next=173;break;case 170:i.prev=170,i.t6=i.catch(163),je.yw.error(i.t6.text);case 173:i.next=203;break;case 175:if(fe.key!=="Simulate-to-stop"){i.next=187;break}return i.prev=176,i.next=179,this.serialTo.stop();case 179:this.setState({serialToStart:!1}),i.next=185;break;case 182:i.prev=182,i.t7=i.catch(176),je.yw.error(i.t7.text);case 185:i.next=203;break;case 187:if(fe.key!=="Simulate-to-update"){i.next=198;break}return i.prev=188,i.next=191,this.serialTo.write({data:this.props.getData(),selected:this.state.selectedFrame});case 191:i.next=196;break;case 193:i.prev=193,i.t8=i.catch(188),je.yw.error(i.t8.text);case 196:i.next=203;break;case 198:if(X!=="Simulate-settings"){i.next=203;break}return i.next=201,(L=this.serialModalRef.current)===null||L===void 0?void 0:L.getOptions(this.serial.options);case 201:te=i.sent,te&&(this.serial.options=te);case 203:case"end":return i.stop()}},Ie,this,[[129,136],[142,149],[163,170],[176,182],[188,193]])}));function ue(Ie){return pe.apply(this,arguments)}return ue}()},{key:"getFramesMenu",value:function(){var ue=[{key:"FrameOp-add",label:"New Frame"},{key:"FrameOp-copy",label:"Copy This Frame"},{key:"FrameOp-rename",label:"Rename This Frame"},{key:"FrameOp-remove",label:"Remove This Frame"},{key:"FrameOp-change",label:"Change to",selectable:"true",children:[]}],Ie=O()(this.state.frames),fe;try{for(Ie.s();!(fe=Ie.n()).done;){var oe=fe.value;ue[4].children.push({key:"Frames-".concat(oe),label:oe})}}catch(X){Ie.e(X)}finally{Ie.f()}return ue}},{key:"render",value:function(){var ue=this,Ie=(0,H.jsx)(l.ZP,{type:"text",onClick:function(){return ue.fullScreen()},size:"small",children:(0,H.jsx)(C.Z,{style:{color:"var(--ant-color-text)"}})}),fe=(0,H.jsx)(l.ZP,{type:"text",onClick:function(){return ue.exitFullscreen()},size:"small",children:(0,H.jsx)(o.Z,{style:{color:"var(--ant-color-text)"}})}),oe=(0,H.jsx)(l.ZP,{type:"text",onClick:function(){return ue.props.setDarkMode(!0)},size:"small",children:(0,H.jsx)(R.Z,{component:Q.r})}),X=(0,H.jsx)(l.ZP,{type:"text",onClick:function(){return ue.props.setDarkMode(!1)},size:"small",children:(0,H.jsx)(R.Z,{component:G.r})});return Se[0].disabled=!this.state.couldUndo,Se[1].disabled=!this.state.couldRedo,be[0].disabled=this.state.serialToStart,be[1].disabled=this.state.serialStart,be[2].disabled=this.state.serialStart||this.state.serialToStart,be[0].children[0].disabled=this.state.serialStart,be[0].children[1].disabled=!this.state.serialStart,be[1].children[0].disabled=this.state.serialToStart,be[1].children[1].disabled=!this.state.serialToStart,be[1].children[2].disabled=!this.state.serialToStart,me[3].disabled=!this.fileHandler,me[4].disabled=!this.fileHandler,me[4].label=(0,H.jsx)(ce.Z,{checked:this.state.autoSave,children:"Auto Save"}),(0,H.jsxs)("div",{style:{width:"100%",height:32,marginTop:-5,zIndex:2e3,position:"relative"},className:"solid-color","data-tauri-drag-region":!0,children:[(0,H.jsxs)(h.Z,{style:{width:"100vw",display:"flex",paddingTop:-5},justify:"flex-start",align:"center","data-tauri-drag-region":!0,children:[(0,H.jsx)("div",{style:{fontFamily:"YouSheBiaoTiHei",fontSize:20,paddingLeft:6,paddingRight:6,paddingTop:3,display:"flex",color:"var(--ant-color-text)",cursor:"default"},"data-tauri-drag-region":!0,children:"RoboMaster UI Designer"}),(0,H.jsx)(m.Z,{menu:{items:[].concat(me),onClick:function(U){return ue.onMenuClick(U)}},children:(0,H.jsx)(l.ZP,{type:"text",size:"small",children:"File"})}),(0,H.jsx)(m.Z,{menu:{items:[].concat(Se),onClick:function(U){return ue.onMenuClick(U)}},children:(0,H.jsx)(l.ZP,{type:"text",size:"small",children:"Edit"})}),(0,H.jsx)(m.Z,{menu:{items:(0,T.t)(),onClick:function(U){return ue.onMenuClick(U)}},children:(0,H.jsx)(l.ZP,{type:"text",size:"small",children:"Insert"})}),(0,H.jsx)(m.Z,{menu:{items:this.getFramesMenu(),onClick:function(U){return ue.onMenuClick(U)},selectedKeys:["Frames-".concat(this.state.selectedFrame)]},children:(0,H.jsx)(l.ZP,{type:"text",size:"small",children:"Frames"})}),(0,H.jsx)(m.Z,{menu:{items:[].concat(be),onClick:function(U){return ue.onMenuClick(U)}},children:(0,H.jsxs)(l.ZP,{type:"text",size:"small",children:["Simulate\xA0",(0,H.jsx)(c.Z,{color:this.state.serialStart||this.state.serialToStart?"green":"red"})]})}),(0,H.jsx)(l.ZP,{type:"text",size:"small",onClick:function(){var U;(U=ue.aboutRef.current)===null||U===void 0||U.show()},children:"About"}),(0,H.jsxs)("div",{style:{marginRight:5,justifyContent:"flex-end",marginLeft:"auto",marginTop:2},"data-tauri-drag-region":!0,children:[(0,H.jsxs)("div",{style:{display:"inline",marginRight:15,fontSize:10,cursor:"default",color:"var(--ant-color-text)"},"data-tauri-drag-region":!0,children:["Created by\xA0",(0,H.jsx)("a",{href:"https://github.com/bismarckkk",target:"_blank",children:(0,H.jsx)(l.ZP,{type:"link",style:{padding:0},size:"small","data-tauri-drag-region":!0,children:"Bismarckkk"})})]}),this.props.darkMode?X:oe,(0,H.jsx)("a",{href:"https://github.com/bismarckkk/RM-UI-Designer",target:"_blank",children:(0,H.jsx)(l.ZP,{type:"text",size:"small",children:(0,H.jsx)(x.Z,{style:{color:"var(--ant-color-text)"}})})}),(0,H.jsx)(l.ZP,{type:"text",size:"small",onClick:function(){return ve.G.minimize()},style:{display:this.tauri?"inline":"none"},children:(0,H.jsx)(S.Z,{style:{color:"var(--ant-color-text)"}})}),this.state.fullscreen?fe:Ie,(0,H.jsx)(l.ZP,{type:"text",size:"small",onClick:function(){return(0,he.J)()},style:{display:this.tauri?"inline":"none"},children:(0,H.jsx)(z.Z,{style:{color:"var(--ant-color-text)"}})})]})]}),(0,H.jsx)(E.Z,{ref:this.formRef}),(0,H.jsx)(q.Z,{ref:this.aboutRef}),(0,H.jsx)(ie.Z,{ref:this.generatorRef}),(0,H.jsx)(ne.Z,{ref:this.logDrawerRef}),(0,H.jsx)(Me.Z,{ref:this.rxDrawerRef}),(0,H.jsx)(f.Z,{ref:this.serialModalRef}),(0,H.jsx)(_.Z,{ref:this.modeModalRef})]})}}]),xe}(y.Component);J.Z=ze,v()}catch(De){v(De)}})})},3213:function(ee,J,e){var B=e(97857),v=e.n(B),W=e(13769),A=e.n(W),N=e(12444),I=e.n(N),$=e(72004),O=e.n($),P=e(25098),F=e.n(P),r=e(31996),b=e.n(r),Z=e(26037),k=e.n(Z),D=e(9783),n=e.n(D),t=e(67294),u=e(85576),M=e(40249),p=e(21798),y=e(85893),l=["node"],h=function(m){b()(g,m);var c=k()(g);function g(){var C;I()(this,g);for(var o=arguments.length,x=new Array(o),S=0;S<o;S++)x[S]=arguments[S];return C=c.call.apply(c,[this].concat(x)),n()(F()(C),"state",{open:!1,content:null}),C}return O()(g,[{key:"show",value:function(){this.setState({open:!0})}},{key:"componentDidMount",value:function(){var o=this;fetch(e(99734)).then(function(x){return x.text()}).then(function(x){o.setState({content:x})})}},{key:"render",value:function(){var o=this;return(0,y.jsx)(u.Z,{title:"About",onOk:function(){return o.setState({open:!1})},onCancel:function(){return o.setState({open:!1})},footer:null,open:this.state.open,children:this.state.content?(0,y.jsx)(p.U,{components:{a:function(S){var z=S.node,R=A()(S,l);return(0,y.jsx)("a",v()(v()({},R),{},{target:"_blank"}))}},children:this.state.content}):(0,y.jsx)(M.Z,{})})}}]),g}(t.Component);J.Z=h},41327:function(ee,J,e){var B=e(97857),v=e.n(B),W=e(13769),A=e.n(W),N=e(12444),I=e.n(N),$=e(72004),O=e.n($),P=e(25098),F=e.n(P),r=e(31996),b=e.n(r),Z=e(26037),k=e.n(Z),D=e(9783),n=e.n(D),t=e(67294),u=e(85576),M=e(42075),p=e(28036),y=e(40249),l=e(21798),h=e(85893),m=["node"],c=function(g){b()(o,g);var C=k()(o);function o(){var x;I()(this,o);for(var S=arguments.length,z=new Array(S),R=0;R<S;R++)z[R]=arguments[R];return x=C.call.apply(C,[this].concat(z)),n()(F()(x),"state",{open:!1,content:null}),x}return O()(o,[{key:"componentDidMount",value:function(){var S=this,z=localStorage.getItem("eula");(!z||!JSON.parse(z))&&(this.setState({open:!0}),fetch(e(19293)).then(function(R){return R.text()}).then(function(R){S.setState({content:R})}))}},{key:"dontShow",value:function(){localStorage.setItem("eula","true"),this.setState({open:!1})}},{key:"render",value:function(){var S=this;return(0,h.jsx)(u.Z,{title:"Welcome to RM UI Designer!",onOk:function(){return S.setState({open:!1})},onCancel:function(){return S.setState({open:!1})},footer:(0,h.jsxs)(M.Z,{children:[(0,h.jsx)(p.ZP,{onClick:this.dontShow.bind(this),children:"Don't show"}),(0,h.jsx)(p.ZP,{type:"primary",onClick:function(){return S.setState({open:!1})},children:"OK"})]}),open:this.state.open,zIndex:2200,children:this.state.content?(0,h.jsx)(l.U,{components:{a:function(R){var E=R.node,T=A()(R,m);return(0,h.jsx)("a",v()(v()({},T),{},{target:"_blank"}))}},children:this.state.content}):(0,h.jsx)(y.Z,{})})}}]),o}(t.Component);J.Z=c},48268:function(ee,J,e){var B=e(64599),v=e.n(B),W=e(15009),A=e.n(W),N=e(99289),I=e.n(N),$=e(12444),O=e.n($),P=e(72004),F=e.n(P),r=e(25098),b=e.n(r),Z=e(31996),k=e.n(Z),D=e(26037),n=e.n(D),t=e(9783),u=e.n(t),M=e(67294),p=e(49333),y=e(47745),l=e(85893),h=function(m){k()(g,m);var c=n()(g);function g(){var C;O()(this,g);for(var o=arguments.length,x=new Array(o),S=0;S<o;S++)x[S]=arguments[S];return C=c.call.apply(c,[this].concat(x)),u()(b()(C),"state",{title:"",open:!1,frames:[]}),u()(b()(C),"promise",null),C}return F()(g,[{key:"open",value:function(o,x){var S=this;return new Promise(function(z,R){S.setState({title:o,open:!0,frames:x}),S.promise&&S.promise.reject(),S.promise={resolve:z,reject:R}})}},{key:"render",value:function(){var o=this;return(0,l.jsx)(p.Y,{title:this.state.title,autoFocusFirstInput:!0,width:240,open:this.state.open,onOpenChange:function(S){o.promise&&!S&&o.state.open&&o.promise.reject(),o.setState({open:S})},onFinish:function(){var x=I()(A()().mark(function S(z){return A()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return o.promise.resolve(z.frame),o.promise=null,E.abrupt("return",!0);case 3:case"end":return E.stop()}},S)}));return function(S){return x.apply(this,arguments)}}(),children:(0,l.jsx)(y.Z,{name:"frame",label:"New Frame Name",width:"sm",rules:[{required:!0,message:"Please input frame name!"},function(x){var S=x.getFieldValue,z=o;return{validator:function(E,T){{var q=!0,_=S("frame"),Q=v()(z.state.frames),G;try{for(Q.s();!(G=Q.n()).done;){var f=G.value;if(f===_){q=!1;break}}}catch(ne){Q.e(ne)}finally{Q.f()}return q?Promise.resolve():Promise.reject(new Error("Cannot create same name frame!"))}}}}]})})}}]),g}(M.Component);J.Z=h},79476:function(ee,J,e){var B=e(12444),v=e.n(B),W=e(72004),A=e.n(W),N=e(25098),I=e.n(N),$=e(31996),O=e.n($),P=e(26037),F=e.n(P),r=e(9783),b=e.n(r),Z=e(67294),k=e(22997),D=e(2487),n=e(42075),t=e(42477),u=e(78977),M=e(97309),p=e(85893),y=function(l){O()(m,l);var h=F()(m);function m(){var c;v()(this,m);for(var g=arguments.length,C=new Array(g),o=0;o<g;o++)C[o]=arguments[o];return c=h.call.apply(h,[this].concat(C)),b()(I()(c),"state",{show:!1,errors:[]}),c}return A()(m,[{key:"onClose",value:function(){this.setState({show:!1})}},{key:"show",value:function(g){this.setState({show:!0,errors:g})}},{key:"render",value:function(){var g=this,C=this.state.errors.filter(function(S){return S.level==="warn"}),o=this.state.errors.filter(function(S){return S.level==="error"}),x=(0,p.jsx)(k.ZP,{status:"success",title:"0 error, 0 warning!",style:{marginTop:"50px"}});return o.length+C.length>0&&(x=(0,p.jsxs)("div",{style:{color:"var(--ant-color-text)",height:"100%"},children:[(0,p.jsxs)("p",{children:["Logged ",o.length," errors, ",C.length," warnings."]}),(0,p.jsx)("div",{style:{paddingBottom:10},className:"card-body",children:(0,p.jsx)(D.Z,{bordered:!0,dataSource:this.state.errors,renderItem:function(z){return(0,p.jsx)(D.Z.Item,{children:(0,p.jsxs)(n.Z,{size:"middle",children:[z.level==="warn"?(0,p.jsx)(u.Z,{}):(0,p.jsx)(M.Z,{}),"".concat(z.time.toLocaleTimeString(),": ").concat(z.message)]})})}})})]})),(0,p.jsx)(t.Z,{title:"Serial Debug Log",placement:"right",onClose:function(){return g.onClose()},open:this.state.show,size:"large",getContainer:document.getElementById("content-in"),rootStyle:{inset:"25px 0 0 0"},style:{borderTop:"3px var(--ant-line-type) var(--ant-color-split)"},children:(0,p.jsx)("div",{style:{width:"100%",height:"calc(100% - 25px)"},children:x})})}}]),m}(Z.Component);J.Z=y},54349:function(ee,J,e){var B=e(12444),v=e.n(B),W=e(72004),A=e.n(W),N=e(25098),I=e.n(N),$=e(31996),O=e.n($),P=e(26037),F=e.n(P),r=e(9783),b=e.n(r),Z=e(67294),k=e(85576),D=e(42075),n=e(28036),t=e(96074),u=e(37932),M=e(85893),p=function(y){O()(h,y);var l=F()(h);function h(){var m;v()(this,h);for(var c=arguments.length,g=new Array(c),C=0;C<c;C++)g[C]=arguments[C];return m=l.call.apply(l,[this].concat(g)),b()(I()(m),"state",{title:"",open:!1,frames:[]}),b()(I()(m),"promise",null),m}return A()(h,[{key:"open",value:function(){var c=this;return new Promise(function(g,C){c.setState({open:!0}),c.promise&&c.promise.reject(),c.promise={resolve:g,reject:C}})}},{key:"onClick",value:function(c){this.setState({open:!1}),this.promise.resolve(c),this.promise=null}},{key:"render",value:function(){var c=this,g=(0,u._)();return(0,M.jsx)(k.Z,{footer:null,maskClosable:!1,closeIcon:null,zIndex:2050,open:this.state.open,children:(0,M.jsxs)(D.Z,{direction:"vertical",size:"middle",style:{width:"100%",padding:15},children:[(0,M.jsx)(n.ZP,{type:"primary",disabled:!g,style:{width:"100%"},size:"large",onClick:function(){return c.onClick("new")},children:"New Project"}),(0,M.jsx)(n.ZP,{type:"primary",disabled:!g,style:{width:"100%"},size:"large",onClick:function(){return c.onClick("open")},children:"Open Exist"}),(0,M.jsx)(t.Z,{}),(0,M.jsx)(n.ZP,{type:"primary",style:{width:"100%"},size:"large",onClick:function(){return c.onClick("use")},children:"Temporary Use"})]})})}}]),h}(Z.Component);J.Z=p},61024:function(ee,J,e){var B=e(64599),v=e.n(B),W=e(12444),A=e.n(W),N=e(72004),I=e.n(N),$=e(25098),O=e.n($),P=e(31996),F=e.n(P),r=e(26037),b=e.n(r),Z=e(9783),k=e.n(Z),D=e(67294),n=e(32983),t=e(96074),u=e(66309),M=e(42477),p=e(85893),y=function(l){F()(m,l);var h=b()(m);function m(){var c;A()(this,m);for(var g=arguments.length,C=new Array(g),o=0;o<g;o++)C[o]=arguments[o];return c=h.call.apply(h,[this].concat(C)),k()(O()(c),"state",{show:!1,history:{rx:0,log:[]}}),c}return I()(m,[{key:"onClose",value:function(){this.setState({show:!1})}},{key:"show",value:function(g){this.setState({show:!0,history:g})}},{key:"render",value:function(){var g=this,C=this.state.history,o;if(C.log.length===0)o=(0,p.jsx)(n.Z,{image:n.Z.PRESENTED_IMAGE_SIMPLE,description:"No log yet."});else{o=[];var x=v()(C.log),S;try{for(x.s();!(S=x.n()).done;){var z=S.value;o.push((0,p.jsx)(t.Z,{})),o.push(Array.from(z).map(function(R){return R.toString(16).padStart(2,"0").toUpperCase()}).map(function(R){return(0,p.jsx)(u.Z,{children:R})}))}}catch(R){x.e(R)}finally{x.f()}}return(0,p.jsx)(M.Z,{title:"Serial Rx History",placement:"right",onClose:function(){return g.onClose()},open:this.state.show,size:"large",getContainer:document.getElementById("content-in"),rootStyle:{inset:"25px 0 0 0"},style:{borderTop:"3px var(--ant-line-type) var(--ant-color-split)"},children:(0,p.jsx)("div",{style:{width:"100%",height:"calc(100% - 25px)"},children:(0,p.jsxs)("div",{style:{color:"var(--ant-color-text)",height:"100%"},children:[(0,p.jsxs)("p",{children:["RX: ",C.rx]}),(0,p.jsx)("div",{style:{paddingBottom:10},className:"card-body",children:o})]})})})}}]),m}(D.Component);J.Z=y},23481:function(ee,J,e){var B=e(15009),v=e.n(B),W=e(99289),A=e.n(W),N=e(12444),I=e.n(N),$=e(72004),O=e.n($),P=e(25098),F=e.n(P),r=e(31996),b=e.n(r),Z=e(26037),k=e.n(Z),D=e(9783),n=e.n(D),t=e(67294),u=e(49333),M=e(25641),p=e(85893),y=[1152e3,1e6,921600,576e3,5e5,460800,230400,115200,74800,57600,38400,19200,9600,4800],l=function(h){b()(c,h);var m=k()(c);function c(){var g;I()(this,c);for(var C=arguments.length,o=new Array(C),x=0;x<C;x++)o[x]=arguments[x];return g=m.call.apply(m,[this].concat(o)),n()(F()(g),"state",{open:!1,defaultOptions:{}}),n()(F()(g),"promise",null),g}return O()(c,[{key:"getOptions",value:function(C){var o=this;return new Promise(function(x,S){o.setState({open:!0,defaultOptions:C}),o.promise&&o.promise.reject(),o.promise={resolve:x,reject:S}})}},{key:"onFinish",value:function(){var g=A()(v()().mark(function o(x){return v()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return this.promise.resolve(x),this.promise=null,z.abrupt("return",!0);case 3:case"end":return z.stop()}},o,this)}));function C(o){return g.apply(this,arguments)}return C}()},{key:"render",value:function(){var C=this;return(0,p.jsxs)(u.Y,{title:"Serial",width:400,open:this.state.open,onOpenChange:function(x){return C.setState({open:x})},onFinish:function(){var o=A()(v()().mark(function x(S){return v()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,C.onFinish(S);case 2:return R.abrupt("return",R.sent);case 3:case"end":return R.stop()}},x)}));return function(x){return o.apply(this,arguments)}}(),children:[(0,p.jsx)(M.Z,{name:"baudRate",label:"Baud Rate",width:"sm",initialValue:this.state.defaultOptions.baudRate,options:y.map(function(o){return{value:o,label:o.toString()}}),rules:[{required:!0}]}),(0,p.jsx)(M.Z,{name:"dataBits",label:"Data Bits",width:"sm",initialValue:this.state.defaultOptions.dataBits,options:[{value:8,label:"8"},{value:7,label:"7"}],rules:[{required:!0}]}),(0,p.jsx)(M.Z,{name:"stopBits",label:"Stop Bits",width:"sm",initialValue:this.state.defaultOptions.stopBits,options:[{value:1,label:"1"},{value:2,label:"2"}],rules:[{required:!0}]}),(0,p.jsx)(M.Z,{name:"parity",label:"Parity",width:"sm",initialValue:this.state.defaultOptions.parity,options:[{value:"none",label:"None"},{value:"even",label:"Even"},{value:"odd",label:"Odd"}],rules:[{required:!0}]}),(0,p.jsx)(M.Z,{name:"flowControl",label:"Flow Control",width:"sm",initialValue:this.state.defaultOptions.flowControl,options:[{value:"none",label:"None"},{value:"hardware",label:"Hardware"}],rules:[{required:!0}]})]})}}]),c}(t.Component);J.Z=l},4585:function(ee,J,e){e.d(J,{Z:function(){return je}});var B=e(97857),v=e.n(B),W=e(13769),A=e.n(W),N=e(15009),I=e.n(N),$=e(99289),O=e.n($),P=e(12444),F=e.n(P),r=e(72004),b=e.n(r),Z=e(25098),k=e.n(Z),D=e(31996),n=e.n(D),t=e(26037),u=e.n(t),M=e(9783),p=e.n(M),y=e(67294),l=e(22997),h=e(42075),m=e(74330),c=e(85576),g=e(28036),C=e(92462),o=e(553),x=e(30789);function S(){return z.apply(this,arguments)}function z(){return z=O()(I()().mark(function ve(){var he,se,ie,ye,le,de,H,Ce,me,Se,be,ze,De;return I()().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(!(0,x.UP)()){xe.next=14;break}return xe.next=3,(0,C.Py)();case 3:if(he=xe.sent,!he.manifest){xe.next=11;break}return se=he.manifest.version.slice(1).split(".").map(Number),ie=localStorage.getItem("version_ignored"),ie||(ie="nightly 2f81d31"),ye=ie.slice(1).split(".").map(Number),le=se[0]>ye[0]||se[1]>ye[1]||se[2]>ye[2],xe.abrupt("return",{shouldUpdate:le,manifest:he.manifest});case 11:return xe.abrupt("return",he);case 14:return de=Date.now(),xe.next=17,fetch("https://ui.bismarck.xyz/update.json?".concat(de));case 17:return H=xe.sent,xe.next=20,H.json();case 20:return Ce=xe.sent,me=Ce.notes,Se=Ce.version.slice(1).split(".").map(Number),be=localStorage.getItem("version_ignored"),be||(be="nightly 2f81d31"),ze=be.slice(1).split(".").map(Number),De=Se[0]>ze[0]||Se[1]>ze[1]||Se[2]>ze[2],xe.abrupt("return",{shouldUpdate:De,manifest:{body:me,version:Ce.version}});case 28:case"end":return xe.stop()}},ve)})),z.apply(this,arguments)}function R(){return E.apply(this,arguments)}function E(){return E=O()(I()().mark(function ve(){return I()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(!(0,x.UP)()){se.next=6;break}return se.next=3,(0,C.F_)();case 3:return se.abrupt("return",se.sent);case 6:window.location.reload();case 7:case"end":return se.stop()}},ve)})),E.apply(this,arguments)}var T={checkUpdate:S,installUpdate:R,relaunch:o.R},q=e(28348),_=e(21798),Q=e(85893),G=["node"],f=T.checkUpdate,ne=T.installUpdate,Me=T.relaunch,ce=function(ve){n()(se,ve);var he=u()(se);function se(){var ie;F()(this,se);for(var ye=arguments.length,le=new Array(ye),de=0;de<ye;de++)le[de]=arguments[de];return ie=he.call.apply(he,[this].concat(le)),p()(k()(ie),"state",{step:0,content:"",version:""}),ie}return b()(se,[{key:"handleClose",value:function(){this.setState({step:0})}},{key:"handleOk",value:function(){var ie=O()(I()().mark(function le(){return I()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.prev=0,this.setState({step:2}),H.next=4,ne();case 4:if(H.t0=!(0,x.UP)(),H.t0){H.next=9;break}return H.next=8,Me();case 8:H.t0=!H.sent;case 9:if(!H.t0){H.next=11;break}this.setState({step:3});case 11:H.next=16;break;case 13:H.prev=13,H.t1=H.catch(0),this.setState({step:-1});case 16:case"end":return H.stop()}},le,this,[[0,13]])}));function ye(){return ie.apply(this,arguments)}return ye}()},{key:"check",value:function(){var ye=this;return;var le,de}},{key:"ignore",value:function(){localStorage.setItem("version_ignored",this.state.version),this.handleClose()}},{key:"componentDidMount",value:function(){this.check()}},{key:"render",value:function(){var ye=(0,Q.jsx)("div",{});return this.state.step===-1?ye=(0,Q.jsx)(l.ZP,{status:"error",title:"Update Failed"}):this.state.step===1?ye=(0,Q.jsx)(_.U,{components:{a:function(de){var H=de.node,Ce=A()(de,G);return(0,Q.jsx)("a",v()(v()({},Ce),{},{target:"_blank"}))}},children:this.state.content}):this.state.step===2?ye=(0,Q.jsx)("div",{style:{padding:40,textAlign:"center",color:"var(--ant-color-text)"},children:(0,Q.jsxs)(h.Z,{direction:"vertical",children:[(0,Q.jsx)(m.Z,{size:"large"}),(0,Q.jsx)("h3",{children:"Updating..."})]})}):this.state.step===3&&(ye=(0,Q.jsx)(l.ZP,{status:"success",title:"Update Success",subTitle:"Please restart the app to apply the update."})),(0,Q.jsx)(c.Z,{title:"Auto Update",open:this.state.step,closable:this.state.step>1,maskClosable:this.state.step>1,zIndex:2100,footer:this.state.step===1?(0,Q.jsxs)(h.Z,{children:[(0,Q.jsx)(g.ZP,{onClick:this.ignore.bind(this),children:"Ignore"}),(0,Q.jsx)(g.ZP,{onClick:this.handleClose.bind(this),children:"Cancel"}),(0,Q.jsx)(g.ZP,{type:"primary",onClick:this.handleOk.bind(this),children:"Update"})]}):null,children:ye})}}]),se}(y.Component),je=ce},87159:function(ee,J,e){e.d(J,{Z:function(){return fe}});var B=e(97857),v=e.n(B),W=e(15009),A=e.n(W),N=e(64599),I=e.n(N),$=e(99289),O=e.n($),P=e(19632),F=e.n(P),r=e(12444),b=e.n(r),Z=e(72004),k=e.n(Z),D=e(25098),n=e.n(D),t=e(31996),u=e.n(t),M=e(26037),p=e.n(M),y=e(9783),l=e.n(y),h=e(67294),m=e(327),c=e(32983),g=e(42075),C=e(28036),o=e(28348),x=e(3909),S=e(66227),z=e(86250),R=e(83159),E=e(98668),T=e(63237),q=e(99569),_=e(36810),Q=e(19893),G=e(42922),f=e(85893),ne=function(oe){u()(Y,oe);var X=p()(Y);function Y(){var U;b()(this,Y);for(var d=arguments.length,s=new Array(d),a=0;a<d;a++)s[a]=arguments[a];return U=X.call.apply(X,[this].concat(s)),l()(n()(U),"state",{status:U.props.defaultStatus||!1}),U}return k()(Y,[{key:"render",value:function(){var d=this;return(0,f.jsx)(C.ZP,{size:"small",type:"text",onClick:function(){d.props.onChange&&d.props.onChange(!d.state.status),d.setState({status:!d.state.status})},children:this.state.status?this.props.onNode||"ON":this.props.offNode||"OFF"})}}]),Y}(h.Component),Me=ne;function ce(oe){return oe.map(function(X){return X===-2?"window":"E-".concat(X)})}var je=[{key:"D1-group-layer",label:"layer"},{key:"D1-group-group",label:"group"}],ve=function(oe){u()(Y,oe);var X=p()(Y);function Y(){var U;b()(this,Y);for(var d=arguments.length,s=new Array(d),a=0;a<d;a++)s[a]=arguments[a];return U=X.call.apply(X,[this].concat(s)),l()(n()(U),"state",{treeData:[],rightClickMenuOpen:!1,groupKey:"layer"}),l()(n()(U),"treeData",[]),U}return k()(Y,[{key:"selectKey2id",value:function(d){var s=this,a=[],j=I()(d),w;try{var V=function(){var L=w.value;if(L==="window")a.push(-2);else if(L.startsWith("E-"))a.push(parseInt(L.slice(2)));else{var te=s.treeData.find(function(ge){return ge.key===L}).children.map(function(ge){return parseInt(ge.key.slice(2))}),re=I()(te),i;try{for(re.s();!(i=re.n()).done;){var ae=i.value;a.includes(ae)||a.push(ae)}}catch(ge){re.e(ge)}finally{re.f()}}};for(j.s();!(w=j.n()).done;)V()}catch(K){j.e(K)}finally{j.f()}return a}},{key:"onElementMenuContainerClick",value:function(d){this.setState({rightClickMenuOpen:!1}),(d.target.classList.contains("ant-tree")||!d.ctrlKey&&!d.shiftKey)&&this.props.onSelect([])}},{key:"onElementMenuClick",value:function(d){var s=this;if(this.setState({rightClickMenuOpen:!1}),d.key==="D2-copy"){var a=null;d.target.localName!=="input"&&this.props.selectedId.length!==0&&this.props.selectedId[0]!==-2&&(d.preventDefault(),a=JSON.stringify(this.props.selectedId.map(function(K){return s.props.data[K]})),d.clipboardData.setData("text",a))}else if(d.key==="D2-delete"){var j=I()(this.props.selectedId),w;try{for(j.s();!(w=j.n()).done;){var V=w.value;this.props.onObjectEvent("remove",{id:V})}}catch(K){j.e(K)}finally{j.f()}}}},{key:"onElementRightClick",value:function(d){var s=this.selectKey2id([d.node.key]);s[0]in this.props.selectedId||this.props.onSelect(s)}},{key:"onSelect",value:function(d){if(d.length!==0){var s=this.selectKey2id(d);s.includes(-2)&&(s=[s[s.length-1]]),this.props.onSelect(s)}}},{key:"onMenuOpenChange",value:function(d){if(d){var s=this;setTimeout(function(){s.props.selectedId.length!==0&&s.props.selectedId[0]!==-2?s.setState({rightClickMenuOpen:!0}):s.setState({rightClickMenuOpen:!1})},100)}else this.setState({rightClickMenuOpen:!1})}},{key:"elementsMenuOnClick",value:function(d){var s=this;this.setState({groupKey:d.key.slice(9)},function(){return s.updateTree()})}},{key:"updateTree",value:function(){for(var d=this,s=this.state.groupKey,a=[],j=Object.keys(this.props.data),w=function(){for(var L=d.props.data[j[V]],te=-1,re=0;re<a.length;re++)if(a[re].key==="".concat(s,"-").concat(L[s])){te=re;break}te===-1&&(a.push({title:"".concat(s," ").concat(L[s]),key:"".concat(s,"-").concat(L[s]),children:[],isLeaf:!1}),te=a.length-1),a[te].children.push({title:(0,f.jsxs)(z.Z,{justify:"space-between",style:{width:"100%"},children:[L.name,(0,f.jsxs)(g.Z,{children:[(0,f.jsx)(Me,{onChange:function(ae){return d.props.onObjectEvent("setAttr",{id:L.id,payload:{visible:ae}})},defaultStatus:!0,offNode:(0,f.jsx)(T.Z,{}),onNode:(0,f.jsx)(q.Z,{})}),(0,f.jsx)(Me,{onChange:function(ae){return d.props.onObjectEvent("setAttr",{id:L.id,payload:{selectable:ae}})},defaultStatus:!0,offNode:(0,f.jsx)(_.Z,{}),onNode:(0,f.jsx)(Q.Z,{style:{transform:"scaleX(-1)"}})})]})]}),key:"E-".concat(j[V])})},V=0;V<j.length;V++)w();return a=a.sort(function(K,L){return K.key.toString().localeCompare(L.key.toString())}),a.unshift({title:"UI Window",key:"window"}),this.treeData=a,a}},{key:"render",value:function(){var d=this;return(0,f.jsx)(m.Z,{size:"small",title:"Elements",style:{height:"100%"},extra:(0,f.jsx)(R.Z,{menu:{items:je,onClick:function(a){return d.elementsMenuOnClick(a)},selectable:!0,selectedKeys:["D1-group-".concat(this.state.groupKey)]},children:(0,f.jsxs)(g.Z,{style:{fontSize:11},children:["Group by",(0,f.jsx)(G.Z,{size:"small"})]})}),children:(0,f.jsx)("div",{className:"card-body",onMouseUp:function(a){return d.onElementMenuContainerClick(a)},children:(0,f.jsx)(R.Z,{menu:{items:[{key:"D2-copy",label:"Copy"},{key:"D2-delete",label:"Delete",danger:!0}],onClick:function(a){d.onElementMenuClick(a)}},trigger:["contextMenu"],open:this.state.rightClickMenuOpen,onOpenChange:function(a){d.onMenuOpenChange(a)},children:(0,f.jsx)(E.Z,{className:"full",treeData:this.updateTree(),onSelect:function(a){return d.onSelect(a)},selectedKeys:ce(this.props.selectedId),onRightClick:function(a){return d.onElementRightClick(a)},treeDefaultExpandAll:!0,showLine:!0,blockNode:!0,multiple:!0,selectable:this.props.editable})})})})}}]),Y}(h.Component),he=ve,se=e(32777),ie=e(30789),ye=function(oe){u()(Y,oe);var X=p()(Y);function Y(){return b()(this,Y),X.apply(this,arguments)}return k()(Y,[{key:"render",value:function(){return this.props.color==="Main"?(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{style:{border:"1px solid #aaa",height:16,width:16,borderRadius:"20%",display:"inline-flex"},children:[(0,f.jsx)("div",{style:{backgroundColor:"red",height:12,width:6,margin:"1px 0 1px 1px",borderTopLeftRadius:"20%",borderBottomLeftRadius:"20%",display:"inline-flex"}}),(0,f.jsx)("div",{style:{backgroundColor:"blue",height:12,width:6,margin:"1px 1px 1px 0",borderTopRightRadius:"20%",borderBottomRightRadius:"20%",display:"inline-flex"}})]}),"\xA0 Main"]}):(0,f.jsx)("div",{children:(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{style:{border:"1px solid #aaa",height:16,width:16,borderRadius:"20%",display:"inline-flex"},children:(0,f.jsx)("div",{style:{backgroundColor:ie.E[this.props.color.toLowerCase()],height:12,width:12,margin:1,borderRadius:"20%",display:"inline-flex"}})}),"\xA0 ",this.props.color]})})}}]),Y}(h.Component),le=ye,de={id:{title:"Id",key:"id",dataIndex:"id",valueType:"digit",editable:!1},name:{title:"Name",key:"name",dataIndex:"name"},group:{title:"Group",key:"group",dataIndex:"group"},kind:{title:"Kind",key:"kind",dataIndex:"kind",editable:!1},lineWidth:{title:"Line Width",key:"lineWidth",dataIndex:"lineWidth",valueType:"digit"},layer:{title:"Layer",key:"layer",dataIndex:"layer",valueType:"digit"},x:{title:"X",key:"x",dataIndex:"x",valueType:"digit"},y:{title:"Y",key:"y",dataIndex:"y",valueType:"digit"},x2:{title:"X2",key:"x2",dataIndex:"x2",valueType:"digit"},y2:{title:"Y2",key:"y2",dataIndex:"y2",valueType:"digit"},width:{title:"Width",key:"width",dataIndex:"width",valueType:"digit"},height:{title:"Height",key:"height",dataIndex:"height",valueType:"digit"},rx:{title:"Rx",key:"rx",dataIndex:"rx",valueType:"digit"},ry:{title:"Ry",key:"ry",dataIndex:"ry",valueType:"digit"},r:{title:"R",key:"r",dataIndex:"r",valueType:"digit"},startAngle:{title:"Start Angle",key:"startAngle",dataIndex:"startAngle",valueType:"digit"},endAngle:{title:"End Angle",key:"endAngle",dataIndex:"endAngle",valueType:"digit"},fontSize:{title:"Font Size",key:"fontSize",dataIndex:"fontSize",valueType:"digit"},float:{title:"Number",key:"float",dataIndex:"float",valueType:"digit"},number:{title:"Number",key:"number",dataIndex:"number",valueType:"digit"},text:{title:"Text",key:"text",dataIndex:"text",formItemProps:{rules:[{max:30},{type:"string"}]}},color:{title:"Color",key:"color",dataIndex:"color",valueType:"select",valueEnum:{main:(0,f.jsx)(le,{color:"Main"}),yellow:(0,f.jsx)(le,{color:"Yellow"}),green:(0,f.jsx)(le,{color:"Green"}),orange:(0,f.jsx)(le,{color:"Orange"}),purple:(0,f.jsx)(le,{color:"Purple"}),pink:(0,f.jsx)(le,{color:"Pink"}),cyan:(0,f.jsx)(le,{color:"Cyan"}),black:(0,f.jsx)(le,{color:"Black"}),white:(0,f.jsx)(le,{color:"White"})}},team:{title:"Team",key:"team",dataIndex:"team",valueType:"select",valueEnum:{red:(0,f.jsx)(le,{color:"Red"}),blue:(0,f.jsx)(le,{color:"Blue"})}},role:{title:"Role",key:"role",dataIndex:"role",valueType:"select",valueEnum:{1:"Hero",2:"Engineer",3:"No3. Infantry",4:"No4. Infantry",5:"No5. Infantry",6:"Drone"}},backgroundImage:{title:"Background Image",key:"backgroundImage",dataIndex:"backgroundImage",valueType:"switch"}};function H(oe){for(var X=Object.keys(oe),Y=[],U=0;U<X.length;U++)de[X[U]]&&Y.push(de[X[U]]);return Y}var Ce=e(62388);function me(oe,X,Y,U){return Se.apply(this,arguments)}function Se(){return Se=O()(A()().mark(function oe(X,Y,U,d){var s,a,j,w,V,K,L,te,re,i;return A()().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:if(X){ge.next=2;break}return ge.abrupt("return");case 2:if(s=1,X.version&&(s=X.version),s!==1){ge.next=10;break}return ge.next=7,U("default");case 7:for(a=0,j=Object.keys(X);a<j.length;a++)w=j[a],Y("_update",X[w]);ge.next=22;break;case 10:if(s!==2){ge.next=22;break}V=0,K=Object.keys(X.data);case 12:if(!(V<K.length)){ge.next=20;break}return L=K[V],ge.next=16,U(L);case 16:for(te=0,re=Object.keys(X.data[L]);te<re.length;te++)i=re[te],Y("_update",X.data[L][i]);case 17:V++,ge.next=12;break;case 20:return ge.next=22,U(X.selected);case 22:d();case 23:case"end":return ge.stop()}},oe)})),Se.apply(this,arguments)}var be=e(96486),ze=e.n(be);function De(oe){return oe.head>0?v()({},oe.data[oe.head-1]):null}function Ae(oe){return oe.head<oe.data.length-1?v()({},oe.data[oe.head+1]):null}var xe=function(){function oe(){b()(this,oe),l()(this,"cacheTimer",null),l()(this,"updateTimer",null),l()(this,"now",null),l()(this,"_previous",null),l()(this,"_next",null),l()(this,"his",null),l()(this,"catchUpdate",!0);var X=localStorage.getItem("history"),Y={data:[{}],head:0,version:1};X?Y=JSON.parse(X):(X=localStorage.getItem("data"),X?Y.data[0]=JSON.parse(X):Y.data[0]={version:2,data:{default:{}},selected:"default"},localStorage.setItem("history",JSON.stringify(Y))),this.now=Y.data[Y.head],this._previous=De(Y),this._next=Ae(Y)}return k()(oe,[{key:"save",value:function(){var Y=this;this.cacheTimer&&clearTimeout(this.cacheTimer),this.cacheTimer=setTimeout(function(){Y.his.head>50&&(Y.his.data=Y.his.data.slice(Y.his.head-50),Y.his.head=50),Y.his.head<Y.his.data.length-20&&(Y.his.data=Y.his.data.slice(0,Y.his.head+20)),localStorage.setItem("history",JSON.stringify(Y.his)),Y.his=null},2e3)}},{key:"read",value:function(){this.his||(this.his=JSON.parse(localStorage.getItem("history")))}},{key:"get",value:function(){return this.catchUpdate?{now:this.now,couldNext:this._next!==null,couldPrevious:this._previous!==null}:{now:this.now,couldNext:!1,couldPrevious:!1}}},{key:"reset",value:function(Y){return this._previous=null,this._next=null,this.his={data:[Y],head:0,version:1},this.save(),this.get()}},{key:"next",value:function(){return this._next&&(this._previous=this.now,this.now=this._next,this.read(),this.his.head++,this._next=Ae(this.his),this.save()),this.get()}},{key:"previous",value:function(){return this._previous&&(this._next=this.now,this.now=this._previous,this.read(),this.his.head--,this._previous=De(this.his),this.save()),this.get()}},{key:"cancelUpdate",value:function(){this.updateTimer&&clearTimeout(this.updateTimer)}},{key:"update",value:function(Y){var U=this;this.catchUpdate&&(this.updateTimer&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout(function(){ze().isEqual(Y,U.now)||(U._previous=U.now,U.now=Y,U.read(),U.his.data=U.his.data.slice(0,U.his.head+1),U.his.data.push(Y),U.his.head++,U._next=null,U.save())},500))}}]),oe}(),pe=xe,ue=e(30819),Ie=function(oe){u()(Y,oe);var X=p()(Y);function Y(){var U;b()(this,Y);for(var d=arguments.length,s=new Array(d),a=0;a<d;a++)s[a]=arguments[a];return U=X.call.apply(X,[this].concat(s)),l()(n()(U),"objects",{default:{}}),l()(n()(U),"data",{}),l()(n()(U),"state",{properties:null,selectedId:[],frame:"default",uiWindow:{height:1080,width:1920,ratio:1,team:"red",role:1,backgroundImage:!0},infoModalShow:!1,data:{},editable:!0}),l()(n()(U),"canvas",null),l()(n()(U),"canvasRef",(0,h.createRef)()),l()(n()(U),"propertiesRef",(0,h.createRef)()),l()(n()(U),"background",null),l()(n()(U),"his",new pe),l()(n()(U),"moveTimer",null),l()(n()(U),"moveTimeout",null),U}return k()(Y,[{key:"getNewDataId",value:function(){return Object.keys(this.state.data).length===0?0:Math.max.apply(Math,F()(Object.keys(this.state.data)))+1}},{key:"setEditable",value:function(){var U=O()(A()().mark(function s(a){var j,w,V,K,L;return A()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(this.setState({editable:a}),this.his.catchUpdate=a,this.canvas.selection=a,se.fabric.Object.prototype.selectable=a,!a){re.next=9;break}return re.next=7,this.onHistoryEvent("refresh");case 7:re.next=15;break;case 9:return j=this.state.uiWindow.role,re.next=12,this.reset(!0);case 12:this.cancelHistoryUpdate(),this.props.setCouldDo({couldNext:!1,couldPrevious:!1}),this.setRobotId(j);case 15:w=this.canvas.getObjects(),V=I()(w);try{for(V.s();!(K=V.n()).done;)L=K.value,L.set("selectable",a)}catch(i){V.e(i)}finally{V.f()}this.select([]);case 19:case"end":return re.stop()}},s,this)}));function d(s){return U.apply(this,arguments)}return d}()},{key:"setRobotId",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;d===0&&(d=this.state.uiWindow.role),this.state.uiWindow.team==="blue"&&(d+=100),(0,o.ue)(d)}},{key:"cancelHistoryUpdate",value:function(){var d=this;this.his.cancelUpdate(),setTimeout(function(){d.his.cancelUpdate(),d.props.setCouldDo(d.his.get())},200)}},{key:"save",value:function(){(0,ie.q7)(this.data,"ui.rmui",this.state.frame)}},{key:"updateHistory",value:function(){var d=this;setTimeout(function(){var s={version:2,data:d.data,selected:d.state.frame};ze().isEqual(s,d.his.now)||(d.his.update(s),d.props.setCouldDo({couldNext:!1,couldPrevious:!0}))},100)}},{key:"getData",value:function(){return this.data}},{key:"select",value:function(d,s){var a=this;if(d.length===0)this.setState({properties:null,selectedId:[]}),this.canvas.discardActiveObject(),this.canvas.renderAll();else if(d[0]===-2)this.setState({properties:this.state.uiWindow,selectedId:[-2]}),this.canvas.discardActiveObject(),this.canvas.renderAll();else if(d.length===1)this.setState({properties:this.state.data[d[0]],selectedId:[d[0]]}),this.canvas.setActiveObject(this.objects[this.state.frame][d[0]]),this.canvas.renderAll();else if(this.setState({properties:null,selectedId:d}),!s){var j=d.map(function(V){return a.objects[a.state.frame][V]}),w=new se.fabric.ActiveSelection(j,{canvas:this.canvas});this.canvas.setActiveObject(w),this.canvas.renderAll()}}},{key:"reset",value:function(){var U=O()(A()().mark(function s(){var a,j,w,V=arguments;return A()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(a=V.length>0&&V[0]!==void 0?V[0]:!1,a){j=this.canvas.getObjects();for(w in j)this.canvas.remove(j[w]);this.canvas.renderAll()}else this.canvas.clear(),this.setBackground(e(25665)),this.canvas.backgroundColor="#fff";if(Object.keys(this.objects).includes("default")){L.next=5;break}return L.next=5,this.onFrameEvent("add","default");case 5:return this.objects.default={},L.next=8,this.onFrameEvent("change","default");case 8:this.objects={default:{}},this.props.onFrameChange({frames:["default"],selected:"default"}),this.select([]),this.resetCanvasSize(),this.objectsToData();case 13:case"end":return L.stop()}},s,this)}));function d(){return U.apply(this,arguments)}return d}()},{key:"resetCanvasSize",value:function(){if(this.canvas){var d,s=this.canvasRef.current.clientWidth,a=this.canvasRef.current.clientHeight,j=v()({},this.state.uiWindow);s/a<j.width/j.height?(a=s*j.height/j.width,j.ratio=j.width/s):(s=a*j.width/j.height,j.ratio=j.height/a),this.setState({uiWindow:j}),this.canvas.setHeight(a),this.canvas.setWidth(s),this.canvas.viewportTransform[5]=a,this.canvas.viewportTransform[3]=-1;var w=this.canvasRef.current.clientWidth,V=this.canvasRef.current.clientHeight,K=w-s,L=V-a,te=document.getElementById("coordinateDisplay");te.style.right="".concat(K+12,"px"),te.style.bottom="".concat(L+25,"px");for(var re=0,i=Object.keys(this.objects[this.state.frame]);re<i.length;re++){var ae=i[re];this.objects[this.state.frame][ae].setRatio(j.ratio)}(d=this.background)===null||d===void 0||d.set({scaleX:1/j.ratio,scaleY:1/j.ratio}),this.canvas.renderAll(),this.objectsToData(),this.setState({infoModalShow:!1})}}},{key:"onPropertiesChange",value:function(d,s){var a=this;if(this.state.selectedId[0]===-2){if(s.team!==this.state.uiWindow.team){for(var j=0,w=Object.keys(this.objects[this.state.frame]);j<w.length;j++){var V=w[j];this.objects[this.state.frame][V].setTeam(s.team)}this.canvas.renderAll(),this.objectsToData()}if(this.setState({uiWindow:s,properties:s},function(){a.resetCanvasSize(),a.setRobotId()}),s.backgroundImage!==this.state.uiWindow.backgroundImage)if(s.backgroundImage){var K,L=this.state.uiWindow.ratio;(K=this.background)===null||K===void 0||K.set({scaleX:1/L,scaleY:1/L}),this.canvas.setBackgroundImage(this.background),this.canvas.renderAll()}else this.canvas.setBackgroundImage(null),this.canvas.renderAll();(s.width!==this.state.uiWindow.width||s.height!==this.state.uiWindow.height)&&o.oC.warning({title:"Warning",content:"Modify UI window width and height may cause unknown error."})}else this.state.selectedId.length===1&&(this.objects[this.state.frame][this.state.selectedId[0]].fromObject(s),this.canvas.renderAll(),this.objectsToData(),this.updateHistory())}},{key:"setBackground",value:function(d){var s=this;se.fabric.Image.fromURL(d,function(a,j){var w;s.background=a;var V=s.state.uiWindow.ratio;(w=s.background)===null||w===void 0||w.set({scaleX:1/V,scaleY:-1/V}),s.state.uiWindow.backgroundImage&&(s.canvas.setBackgroundImage(s.background),s.canvas.renderAll())})}},{key:"componentDidMount",value:function(){var d=this,s=this;this.canvas=new se.fabric.Canvas("ui"),this.setBackground(e(25665)),this.canvas.backgroundColor="#fff",window.addEventListener("resize",function(){d.resetCanvasSize()},!1),window.addEventListener("copy",function(a){var j=null;console.log(a.target,(0,ie.jK)(a.target)),!(0,ie.jK)(a.target)&&s.state.selectedId.length!==0&&s.state.selectedId[0]!==-2&&(a.preventDefault(),j=JSON.stringify(s.state.selectedId.map(function(w){return s.state.data[w]})),a.clipboardData.setData("text",j))}),window.addEventListener("paste",function(a){for(var j=!1,w=a.clipboardData.items,V=0;V<w.length;V++)if(w[V].type.indexOf("image")===0){a.preventDefault(),j=!0;var K=w[V].getAsFile(),L=new FileReader;L.onload=function(Te){s.setBackground(Te.target.result)},L.readAsDataURL(K)}if(!j&&!(0,ie.jK)(a.target))try{a.preventDefault();var te=a.clipboardData.getData("text"),re=JSON.parse(te);Array.isArray(re)||(re=[re]);var i=[],ae=20,ge=I()(re),Ue;try{var ke=function(){var we=Ue.value;setTimeout(function(){we.id=s.getNewDataId(),i.push(we.id),s.onObjectEvent("_update",we)},ae),ae+=20};for(ge.s();!(Ue=ge.n()).done;)ke()}catch(Te){ge.e(Te)}finally{ge.f()}setTimeout(function(){s.select(i),d.updateHistory()},ae)}catch(Te){o.yw.warning("Invalid data")}}),window.addEventListener("keydown",function(a){if(a.key==="Delete"&&s.state.selectedId.length!==0&&s.state.selectedId[0]!==-2){var j=I()(s.state.selectedId),w;try{for(j.s();!(w=j.n()).done;){var V=w.value;s.onObjectEvent("remove",{id:V})}}catch(te){j.e(te)}finally{j.f()}d.updateHistory()}if(a.ctrlKey&&a.key==="z"&&!a.shiftKey?(a.preventDefault(),d.onHistoryEvent("previous")):a.ctrlKey&&(0,ue.toLower)(a.key)==="z"&&a.shiftKey&&(a.preventDefault(),d.onHistoryEvent("next")),["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(a.key)&&!(0,ie.jK)(a.target)){var K=function(re,i){switch(i*=s.state.uiWindow.ratio,re){case"ArrowUp":L.top+=i;break;case"ArrowDown":L.top-=i;break;case"ArrowLeft":L.left-=i;break;case"ArrowRight":L.left+=i;break}L instanceof se.fabric.ActiveSelection?L.getObjects().forEach(function(ae){ae.setCoords(),ae.resizeScale()}):(L.setCoords(),L.resizeScale()),s.canvas.renderAll(),s.objectsToData(),s.updateHistory()},L=s.canvas.getActiveObject();if(!L)return;a.preventDefault(),K(a.key,2),d.moveTimeout&&clearTimeout(d.moveTimeout),d.moveTimer&&clearInterval(d.moveTimer),d.moveTimeout=setTimeout(function(){d.moveTimer=setInterval(function(){K(a.key,1)},500)},1500)}}),window.addEventListener("keyup",function(a){["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(a.key)&&(clearTimeout(d.moveTimeout),clearInterval(d.moveTimer))}),this.canvas.on({"mouse:up":function(){for(var j=0,w=Object.keys(s.objects[s.state.frame]);j<w.length;j++){var V=w[j];s.objects[s.state.frame][V].resizeScale()}s.canvas.renderAll(),s.objectsToData(),s.updateHistory();var K=s.canvas.getActiveObject();setTimeout(function(){if(K)if(K instanceof se.fabric.ActiveSelection){var L=K.getObjects().map(function(te){return te.id});s.select(L,!0)}else s.select([K.id]);else s.select([])},100)},"mouse:move":function(j){var w=d.canvas.getPointer(j.e),V=d.state.uiWindow.ratio,K=Math.round(w.x*V),L=Math.round(w.y*V),te=document.getElementById("coordinateDisplay");te.style.display="block",te.textContent="x: ".concat(K,", y: ").concat(L)},"mouse:out":function(){var j=document.getElementById("coordinateDisplay");j.style.display="none"}}),setTimeout(function(){var a=d.his.get();d.props.setCouldDo(a),me(a.now,function(j,w){return d.onObjectEvent(j,w)},function(j){return s.onFrameEvent("change",j)},function(){return d.canvas.renderAll()}).then(function(){d.setRobotId(),d.resetCanvasSize()}),d.cancelHistoryUpdate()},50),setTimeout(function(){var a=d.his.get();d.props.setCouldDo(a),me(a.now,function(j,w){return d.onObjectEvent(j,w)},function(j){return s.onFrameEvent("change",j)},function(){return d.canvas.renderAll()}).then(function(){d.setRobotId(),d.resetCanvasSize()}),d.cancelHistoryUpdate()},200)}},{key:"upload",value:function(d){var s=this,a=this,j=new FileReader;j.onload=function(){var w=O()(A()().mark(function V(K){return A()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,a.reset();case 2:return te.next=4,me(JSON.parse(K.target.result),function(re,i){return a.onObjectEvent(re,i)},function(re){return a.onFrameEvent("change",re)},function(){return a.canvas.renderAll()}).then(function(){s.setRobotId()});case 4:a.objectsToData(),a.his.reset({version:2,data:s.data,selected:s.state.frame});case 6:case"end":return te.stop()}},V)}));return function(V){return w.apply(this,arguments)}}(),j.readAsText(d)}},{key:"objectsToData",value:function(){for(var d=this,s={},a=0,j=Object.keys(this.objects);a<j.length;a++){var w=j[a];s[w]={};for(var V=0,K=Object.keys(this.objects[w]);V<K.length;V++){var L=K[V],te=this.objects[w][L].toObject();s[w][te.id]=te}}if(this.data=s,this.setState({data:s[this.state.frame]}),this.state.selectedId.length===1){var re;this.state.selectedId[0]===-2?re=this.state.uiWindow:re=s[this.state.frame][this.state.selectedId[0]],this.setState({properties:v()({},re)},function(){var i;(i=d.propertiesRef.current)===null||i===void 0||i.reload()})}}},{key:"onObjectEvent",value:function(d,s){var a=this;function j(te){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i={id:te.id,name:te.name,layer:te.layer,group:te.group,type:te.type,ratio:a.state.uiWindow.ratio,team:a.state.uiWindow.team},ae=(0,Ce.R)(i);a.objects[a.state.frame][te.id]=ae,re&&ae.fromObject(te),ae.setRatio(a.state.uiWindow.ratio);for(var ge=a.canvas.getObjects(),Ue=!0,ke=0,Te=Object.keys(ge);ke<Te.length;ke++){var we=Te[ke];if(ge[we].id===ae.id){Ue=!1;break}}a.canvas.add(ae)}if(d==="add")typeof s.id=="number"&&s.id>=0&&!this.objects[this.state.frame][s.id]?j(s,!0):console.log("id exists",s.id,this.objects[this.state.frame][s.id]);else if(d==="_add")s.id=this.getNewDataId(),s.ratio=this.state.uiWindow.ratio,s.team=this.state.uiWindow.team,j(s,!1);else if(d==="update")this.objects[this.state.frame][s.id]&&this.objects[this.state.frame][s.id].fromObject(s);else if(d==="_update")s.id>=0&&this.objects[this.state.frame][s.id]?this.objects[this.state.frame][s.id].fromObject(s):j(s);else if(d==="remove"){var w=s.id;this.objects[this.state.frame][w]&&(this.select([]),this.canvas.remove(this.objects[this.state.frame][w]),this.canvas.renderAll(),delete this.objects[this.state.frame][w],this.objectsToData())}else if(d==="setAttr")this.objects[this.state.frame][s.id]&&this.objects[this.state.frame][s.id].set(s.payload);else if(d==="removeLayer")for(var V=0,K=Object.keys(this.objects[this.state.frame]);V<K.length;V++){var L=K[V];this.objects[this.state.frame][L].layer===s.layer&&this.onObjectEvent("remove",{id:L})}else d==="removeAll"&&this.reset(!0);this.objectsToData(),this.canvas.renderAll()}},{key:"setFrame",value:function(d){this.objects[d]||(this.objects[d]={});for(var s=0,a=Object.keys(this.objects[this.state.frame]);s<a.length;s++){var j=a[s];this.canvas.remove(this.objects[this.state.frame][j])}this.canvas.renderAll();var w=this;return new Promise(function(V,K){w.setState({frame:d},function(){for(var L=w.canvas.getObjects(),te=0,re=Object.keys(w.objects[w.state.frame]);te<re.length;te++){for(var i=re[te],ae=!0,ge=0,Ue=Object.keys(L);ge<Ue.length;ge++){var ke=Ue[ge];if(L[ke].id===w.objects[w.state.frame][i].id){ae=!1;break}}ae&&w.canvas.add(w.objects[w.state.frame][i])}w.objectsToData(),w.select([]),w.canvas.renderAll(),V()})})}},{key:"onHistoryEvent",value:function(){var U=O()(A()().mark(function s(a){var j=this,w;return A()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(w=this.his.get(),a!=="update"){K.next=6;break}return this.updateHistory(),K.abrupt("return");case 6:if(a!=="reset"){K.next=12;break}return w=this.his.reset({version:2,data:{default:{}},selected:"default"}),this.props.setCouldDo(w),K.abrupt("return");case 12:if(a!=="resetNow"){K.next=16;break}return w=this.his.reset({version:2,data:this.data,selected:this.state.frame}),this.props.setCouldDo(w),K.abrupt("return");case 16:return a==="previous"?w=this.his.previous():a==="next"&&(w=this.his.next()),this.props.setCouldDo(w),K.next=20,this.reset(!0);case 20:return K.next=22,me(w.now,function(L,te){return j.onObjectEvent(L,te)},function(L){return j.onFrameEvent("change",L)},function(){return j.canvas.renderAll()}).then(function(){j.setRobotId()});case 22:this.cancelHistoryUpdate(),this.props.setCouldDo(w);case 24:case"end":return K.stop()}},s,this)}));function d(s){return U.apply(this,arguments)}return d}()},{key:"onFrameEvent",value:function(){var U=O()(A()().mark(function s(a,j){var w,V,K,L,te,re;return A()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(a!=="add"){ae.next=6;break}return this.objects[j]={},ae.next=4,this.setFrame(j);case 4:ae.next=40;break;case 6:if(a!=="remove"){ae.next=19;break}if(Object.keys(this.objects).length!==1){ae.next=10;break}return o.yw.error("Cannot remove last frame!"),ae.abrupt("return");case 10:if(w=j,this.state.frame!==j){ae.next=16;break}return j=Object.keys(this.objects)[0],j===w&&(j=Object.keys(this.objects)[1]),ae.next=16,this.setFrame(j);case 16:delete this.objects[w],ae.next=40;break;case 19:if(a!=="change"){ae.next=24;break}return ae.next=22,this.setFrame(j);case 22:ae.next=40;break;case 24:if(a!=="copy"){ae.next=34;break}return this.objects[j]={},V=this.objects[this.state.frame],ae.next=29,this.setFrame(j);case 29:for(K=0,L=Object.keys(V);K<L.length;K++)te=L[K],this.onObjectEvent("_update",V[te].toObject());this.objectsToData(),this.canvas.renderAll(),ae.next=40;break;case 34:if(a!=="rename"){ae.next=40;break}return re=this.state.frame,ae.next=38,this.onFrameEvent("copy",j);case 38:return ae.next=40,this.onFrameEvent("remove",re);case 40:this.props.onFrameChange({frames:Object.keys(this.objects),selected:j}),this.objectsToData(),this.updateHistory();case 43:case"end":return ae.stop()}},s,this)}));function d(s,a){return U.apply(this,arguments)}return d}()},{key:"render",value:function(){var d,s=this;return(d=this.canvas)===null||d===void 0||d.renderAll(),(0,f.jsx)("div",{style:{width:"100vw",height:"calc(100% - 20px)",padding:10},children:(0,f.jsxs)(x.eh,{autoSaveId:"container_h",className:"container",direction:"horizontal",children:[(0,f.jsx)(x.s_,{defaultSize:25,minSize:15,maxSize:45,order:1,children:(0,f.jsxs)(x.eh,{autoSaveId:"card_v",className:"full",direction:"vertical",children:[(0,f.jsx)(x.s_,{defaultSize:50,minSize:25,maxSize:75,children:(0,f.jsx)(he,{onSelect:function(j){return s.select(j)},onObjectEvent:function(j,w){return s.onObjectEvent(j,w)},onReset:function(){return s.reset()},data:this.state.data,editable:this.state.editable,selectedId:this.state.selectedId})}),(0,f.jsx)(x.OT,{className:"panel-resize-handle",style:{height:6}}),(0,f.jsx)(x.s_,{defaultSize:50,children:(0,f.jsx)(m.Z,{size:"small",title:"Properties",style:{height:"100%"},children:(0,f.jsxs)("div",{className:"card-body",children:[this.state.properties?(0,f.jsx)(S.vY,{dataSource:this.state.properties,columns:H(this.state.properties),ref:this.propertiesRef,editable:this.props.editable?{onSave:function(j,w){return s.onPropertiesChange(j,w)}}:null,column:1,style:{marginTop:4}},this.state.selectedId[0]):(0,f.jsx)(c.Z,{image:c.Z.PRESENTED_IMAGE_SIMPLE}),this.state.selectedId[0]===-2?(0,f.jsxs)(g.Z,{direction:"vertical",size:"middle",style:{display:"flex"},children:[(0,f.jsx)(C.ZP,{onClick:function(){return(0,ie.cT)("image/*").then(function(j){s.setState({imageUploadShow:!1}),s.setBackground((0,ie.lZ)(j))}).catch(function(j){})},children:"Upload Background"}),(0,f.jsx)(C.ZP,{onClick:function(){return s.setBackground(e(25665))},children:"Reset Background"})]}):(0,f.jsx)("div",{})]})})})]})}),(0,f.jsx)(x.OT,{className:"panel-resize-handle",style:{width:6}}),(0,f.jsx)(x.s_,{defaultSize:75,order:2,onResize:function(j){return setTimeout(function(){return s.resetCanvasSize()},100)},children:(0,f.jsxs)("div",{className:"full",ref:this.canvasRef,children:[(0,f.jsx)("canvas",{className:"full",id:"ui"}),(0,f.jsx)("div",{id:"coordinateDisplay",style:{bottom:0,right:0,display:"none",padding:"1px 6px 1px 6px"}})]})})]})})}}]),Y}(h.Component),fe=Ie},12997:function(ee,J,e){e.a(ee,function(B,v){return Re(this,null,function*(){try{e.r(J);var W=e(12444),A=e.n(W),N=e(72004),I=e.n(N),$=e(25098),O=e.n($),P=e(31996),F=e.n(P),r=e(26037),b=e.n(r),Z=e(9783),k=e.n(Z),D=e(67294),n=e(9361),t=e(31282),u=e(62338),M=e(65848),p=e(87159),y=e(4585),l=e(41327),h=e(40249),m=e(58377),c=e(54030),g=e(28348),C=e(18253),o=e(85893),x=B([m]);m=(x.then?(yield x)():x)[0];var S=n.Z.darkAlgorithm,z=n.Z.compactAlgorithm,R=function(E){F()(q,E);var T=b()(q);function q(){var _;A()(this,q);for(var Q=arguments.length,G=new Array(Q),f=0;f<Q;f++)G[f]=arguments[f];return _=T.call.apply(T,[this].concat(G)),k()(O()(_),"state",{simulate:!1,darkMode:_.isBrowserDarkMode(),isMounted:!1}),k()(O()(_),"modal",null),k()(O()(_),"renderRef",D.createRef()),k()(O()(_),"menuRef",D.createRef()),_}return I()(q,[{key:"isBrowserDarkMode",value:function(){try{return window.matchMedia("(prefers-color-scheme: dark)").matches}catch(Q){return!1}}},{key:"componentDidMount",value:function(){var Q=this,G=this,f=0;window.addEventListener("drop",function(ce){return ce.preventDefault()},!1),window.addEventListener("dragover",function(ce){return ce.preventDefault()},!1),window.addEventListener("contextmenu",function(ce){ce.target.tagName.toLowerCase()!=="input"&&ce.preventDefault()},!1);function ne(ce){!G.modal&&ce<880&&ce!==f&&(f=ce,G.modal=g.oC.warning({title:"Display Aera too Small",content:"Cannot show all contents on this window. Please resize this window or rotate your phone.",footer:null,zIndex:2500})),G.modal&&ce>=880&&(G.modal.destroy(),G.modal=null)}setTimeout(function(){return ne(window.innerWidth)},500),window.addEventListener("resize",function(){ne(window.innerWidth)},!1);var Me=window.matchMedia("(prefers-color-scheme: dark)");Me.addEventListener("change",function(ce){G.setState({darkMode:ce.matches})}),setTimeout(function(){Q.setState({isMounted:!0})},500)}},{key:"setDarkMode",value:function(Q){this.setState({darkMode:Q})}},{key:"render",value:function(){var Q=this;return this.state.isMounted?(0,o.jsx)(t.ZP,{locale:C.Z,theme:{cssVar:{key:"rmui"},hashed:!1,algorithm:this.state.darkMode?[S,z]:z},children:(0,o.jsxs)(u.Z,{children:[(0,o.jsx)("div",{className:"rmui",children:(0,o.jsxs)("div",{className:"container background-color",style:{height:"100vh",paddingBottom:12,overflow:"hidden"},children:[(0,o.jsx)(m.Z,{save:function(){return Q.renderRef.current.save()},onObjectEvent:function(f,ne){return Q.renderRef.current.onObjectEvent(f,ne)},onHistoryEvent:function(f){return Q.renderRef.current.onHistoryEvent(f)},reset:function(){return Q.renderRef.current.reset()},setFrame:function(f,ne){return Q.renderRef.current.onFrameEvent(f,ne)},upload:function(f){return Q.renderRef.current.upload(f)},getData:function(){return Q.renderRef.current.getData()},setEditable:function(f){return Q.renderRef.current.setEditable(f)},setDarkMode:function(f){return Q.setDarkMode(f)},ref:this.menuRef,darkMode:this.state.darkMode}),(0,o.jsx)(M.Z,{content:["RM Ui Designer","nightly 2f81d31"],zIndex:0,style:{height:"100%"},gap:[30,30],children:(0,o.jsx)("div",{id:"content-in",style:{width:"100vw",height:"100%",zIndex:2,position:"relative"},children:(0,o.jsx)(p.Z,{style:{width:"100vw",height:"100%"},editable:!0,ref:this.renderRef,onFrameChange:function(f){var ne;return(ne=Q.menuRef.current)===null||ne===void 0?void 0:ne.setFrames(f)},setCouldDo:function(f){var ne;(ne=Q.menuRef.current)===null||ne===void 0||ne.setCouldDo(f)},setRobotId:function(f){var ne;(ne=Q.menuRef.current)===null||ne===void 0||ne.setRobotId(f)}})})})]})}),(0,o.jsx)(c.Z,{}),(0,o.jsx)(y.Z,{}),(0,o.jsx)(l.Z,{})]})}):(0,o.jsx)(h.Z,{})}}]),q}(D.Component);J.default=R,v()}catch(E){v(E)}})})},28348:function(ee,J,e){e.d(J,{eq:function(){return N},oC:function(){return A},ue:function(){return I},yw:function(){return v}});var B=e(62338),v,W,A,N=1;J.ZP=function(){var $=B.Z.useApp();return v=$.message,A=$.modal,W=$.notification,null};function I($){N=parseInt($)}},37932:function(ee,J,e){e.d(J,{X:function(){return n},_:function(){return t}});var B=e(15009),v=e.n(B),W=e(5574),A=e.n(W),N=e(99289),I=e.n(N),$=e(12444),O=e.n($),P=e(72004),F=e.n(P),r=e(9783),b=e.n(r),Z=e(17990),k=e(28348),D=e(30789),n=function(){function u(M){O()(this,u),b()(this,"getContentFunc",void 0),b()(this,"fileHandle",void 0),b()(this,"timerId",void 0),b()(this,"updateTimerId",void 0),this.getContentFunc=M,this.fileHandle=null,this.timerId=null,this.updateTimerId=null}return F()(u,[{key:"open",value:function(){var M=I()(v()().mark(function y(){var l,h,m,c,g;return v()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(this.fileHandle=null,o.prev=1,!(0,D.UP)()){o.next=9;break}return o.next=5,Z.WZ.open({multiple:!1,directory:!1,filters:[{name:"rmui file",extensions:["json","rmui"]}]});case 5:l=o.sent,l!==null&&l.length>0&&typeof l=="string"&&(this.fileHandle=l.replace(/\\/g,"/"),h=this.fileHandle.split("/").pop(),document.title="".concat(h," - RM UI Designer")),o.next=18;break;case 9:return o.next=11,window.showOpenFilePicker({types:[{description:"rmui file",accept:{"application/json":[".json",".rmui"]}}]});case 11:return m=o.sent,c=A()(m,1),this.fileHandle=c[0],o.next=16,this.fileHandle.getFile();case 16:g=o.sent.name,document.title="".concat(g," - RM UI Designer");case 18:this.enableAutoSave(),o.next=23;break;case 21:o.prev=21,o.t0=o.catch(1);case 23:return o.abrupt("return",this.fileHandle!==null);case 24:case"end":return o.stop()}},y,this,[[1,21]])}));function p(){return M.apply(this,arguments)}return p}()},{key:"create",value:function(){var M=I()(v()().mark(function y(){var l,h,m;return v()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(this.fileHandle=null,g.prev=1,!(0,D.UP)()){g.next=9;break}return g.next=5,Z.WZ.save({filters:[{name:"rmui file",extensions:["rmui"]}]});case 5:l=g.sent,l!==null&&(this.fileHandle=l.replace(/\\/g,"/"),h=this.fileHandle.split("/").pop(),document.title="".concat(h," - RM UI Designer")),g.next=16;break;case 9:return g.next=11,window.showSaveFilePicker({types:[{description:"rmui file",accept:{"application/json":[".rmui"]}}]});case 11:return this.fileHandle=g.sent,g.next=14,this.fileHandle.getFile();case 14:m=g.sent.name,document.title="".concat(m," - RM UI Designer");case 16:return g.next=18,this.write(JSON.stringify({version:2,data:{default:{}},selected:"default"}));case 18:this.enableAutoSave(),g.next=23;break;case 21:g.prev=21,g.t0=g.catch(1);case 23:return g.abrupt("return",this.fileHandle!==null);case 24:case"end":return g.stop()}},y,this,[[1,21]])}));function p(){return M.apply(this,arguments)}return p}()},{key:"enableAutoSave",value:function(){var p=this;this.timerId=setInterval(I()(v()().mark(function y(){var l;return v()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return l=p.getContentFunc(),m.next=3,p.write(l);case 3:case"end":return m.stop()}},y)})),6e4),k.yw.success("Auto save enabled")}},{key:"disableAutoSave",value:function(){var M=I()(v()().mark(function y(){return v()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,this.save();case 2:this.timerId&&(clearInterval(this.timerId),this.timerId=null),this.updateTimerId&&(clearTimeout(this.updateTimerId),this.updateTimerId=null),k.yw.warning("Auto save disabled");case 5:case"end":return h.stop()}},y,this)}));function p(){return M.apply(this,arguments)}return p}()},{key:"update",value:function(){var p=this;this.timerId!==null&&(this.updateTimerId!==null&&(clearTimeout(this.updateTimerId),this.updateTimerId=null),this.updateTimerId=setTimeout(I()(v()().mark(function y(){var l;return v()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return l=p.getContentFunc(),m.next=3,p.write(l);case 3:case"end":return m.stop()}},y)})),2e3))}},{key:"save",value:function(){var M=I()(v()().mark(function y(){var l;return v()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return l=this.getContentFunc(),m.next=3,this.write(l);case 3:case"end":return m.stop()}},y,this)}));function p(){return M.apply(this,arguments)}return p}()},{key:"write",value:function(){var M=I()(v()().mark(function y(l){var h;return v()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.fileHandle){c.next=2;break}throw new Error("File is not open");case 2:if(typeof this.fileHandle!="string"){c.next=7;break}return c.next=5,Z.fs.writeTextFile(this.fileHandle,l);case 5:c.next=14;break;case 7:return c.next=9,this.fileHandle.createWritable();case 9:return h=c.sent,c.next=12,h.write(l);case 12:return c.next=14,h.close();case 14:case"end":return c.stop()}},y,this)}));function p(y){return M.apply(this,arguments)}return p}()},{key:"read",value:function(){var M=I()(v()().mark(function y(){var l,h;return v()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.fileHandle){c.next=2;break}throw new Error("File is not open");case 2:if(typeof this.fileHandle!="string"){c.next=10;break}return c.next=5,Z.fs.readTextFile(this.fileHandle);case 5:return l=c.sent,h=new Blob([l],{type:"text/plain;charset=utf-8"}),c.abrupt("return",new File([h],this.fileHandle));case 10:return c.next=12,this.fileHandle.getFile();case 12:return c.abrupt("return",c.sent);case 13:case"end":return c.stop()}},y,this)}));function p(){return M.apply(this,arguments)}return p}()}]),u}();function t(){return"showOpenFilePicker"in window||(0,D.UP)()}},52880:function(ee,J,e){e.d(J,{r:function(){return n},h:function(){return D}});var B=e(19632),v=e.n(B),W=e(73676);function A(t){var u=new Uint8Array(15),M=0,p=t.group.split("-");u[M++]=Math.round(Number(p[0])),u[M++]=Math.round(Number(p[1])),u[M++]=Math.round(t.id);var y=Math.round(t.operate_tpyel)|Math.round(t.figure_tpye)<<3|Math.round(t.layer)<<6|Math.round(t.color)<<10|Math.round(t._a)<<14|Math.round(t._b)<<23;u[M++]=y&255,u[M++]=y>>8&255,u[M++]=y>>16&255,u[M++]=y>>24&255;var l=Math.round(t.width)|Math.round(t.start_x)<<10|Math.round(t.start_y)<<21;u[M++]=l&255,u[M++]=l>>8&255,u[M++]=l>>16&255,u[M++]=l>>24&255;var h=Math.round(t._c)|Math.round(t._d)<<10|Math.round(t._e)<<21;return u[M++]=h&255,u[M++]=h>>8&255,u[M++]=h>>16&255,u[M++]=h>>24&255,u}function N(t){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"add",M=t.group,p=t.id&255,y=W.i_.indexOf(t.type),l=W.JM.indexOf(t.color),h=t.layer,m;t.fontSize?m=Math.round(t.fontSize/10):m=t.lineWidth;var c=t.x,g=t.y,C=0,o=0,x=0,S=0,z=0;switch(t.type.slice(2)){case"Line":S=t.x2||0,z=t.y2||0;break;case"Rect":S=(t.width||0)+c,z=(t.height||0)+g;break;case"Round":x=t.r||0;break;case"Ellipse":S=t.rx||0,z=t.ry||0;break;case"Arc":C=t.startAngle||0,o=t.endAngle||0,S=t.rx||0,z=t.ry||0;break;case"Float":C=t.fontSize||0;var R=(t.float||0)*1e3;x=R&1023,S=R>>10&2047,z=R>>21&2047;break;case"Number":C=t.fontSize||0;var E=t.number||0;x=E&1023,S=E>>10&2047,z=E>>21&2047;break;case"Text":C=t.fontSize||0,o=(t.text||"").length;break}return{group:M,id:p,operate_tpyel:W.$m.indexOf(u),figure_tpye:y,layer:h,color:l,_a:C,_b:o,width:m,start_x:c,start_y:g,_c:x,_d:S,_e:z,number:x}}function I(t){return A(N(t))}var $=e(85378),O=e(28348);function P(t){var u=new Uint8Array(0);if(t.forEach(function(h){u=new Uint8Array([].concat(v()(u),v()(I(h))))}),2<t.length&&t.length<5){for(var M=new Uint8Array(15*(5-t.length)),p=0;p<15*(5-t.length);p++)M[p]=0;u=new Uint8Array([].concat(v()(u),v()(M)))}if(5<t.length&&t.length<7){for(var y=new Uint8Array(15*(7-t.length)),l=0;l<15*(7-t.length);l++)y[l]=0;u=new Uint8Array([].concat(v()(u),v()(y)))}return u}function F(t){var u=new Uint8Array([].concat(v()(I(t[0])),v()(new Uint8Array(30))));if(t[0].text)for(var M=15;M<t[0].text.length+15;M++)u[M]=t[0].text.charCodeAt(M);return u}function r(t){return t[0].text?F(t):P(t)}var b=0,Z=769;function k(t){var u=new Uint8Array(13),M=new Uint8Array(2);u[0]=165;var p=t.length+6;u[1]=p&255,u[2]=p>>8&255,u[3]=b,u[4]=(0,$.d)(u.subarray(0,4)),u[5]=Z&255,u[6]=Z>>8&255;var y=0;t.length===2?y=256:t.length===15?y=257:t.length===30?y=258:t.length===75?y=259:t.length===105?y=260:t.length===45&&(y=272),u[7]=y&255,u[8]=y>>8&255,u[9]=O.eq&255,u[10]=O.eq>>8&255,u[11]=O.eq+256&255,u[12]=O.eq+256>>8&255;var l=new Uint8Array([].concat(v()(u),v()(t),v()(M))),h=(0,$.I)(l.subarray(0,l.length-2));return l[l.length-2]=h&255,l[l.length-1]=h>>8&255,b++,b>=256&&(b=0),l}function D(t){var u=r(t);return k(u)}function n(){return k(new Uint8Array([2,0]))}},85378:function(ee,J,e){e.d(J,{I:function(){return A},d:function(){return v}});var B=[0,94,188,226,97,63,221,131,194,156,126,32,163,253,31,65,157,195,33,127,252,162,64,30,95,1,227,189,62,96,130,220,35,125,159,193,66,28,254,160,225,191,93,3,128,222,60,98,190,224,2,92,223,129,99,61,124,34,192,158,29,67,161,255,70,24,250,164,39,121,155,197,132,218,56,102,229,187,89,7,219,133,103,57,186,228,6,88,25,71,165,251,120,38,196,154,101,59,217,135,4,90,184,230,167,249,27,69,198,152,122,36,248,166,68,26,153,199,37,123,58,100,134,216,91,5,231,185,140,210,48,110,237,179,81,15,78,16,242,172,47,113,147,205,17,79,173,243,112,46,204,146,211,141,111,49,178,236,14,80,175,241,19,77,206,144,114,44,109,51,209,143,12,82,176,238,50,108,142,208,83,13,239,177,240,174,76,18,145,207,45,115,202,148,118,40,171,245,23,73,8,86,180,234,105,55,213,139,87,9,235,181,54,104,138,212,149,203,41,119,244,170,72,22,233,183,85,11,136,214,52,106,43,117,151,201,74,20,246,168,116,42,200,150,21,75,169,247,182,232,10,84,215,137,107,53];function v(N){for(var I=255,$=0,O,P=N.byteLength;P--;)O=I^N[$],I=B[O],$++;return I}var W=[0,4489,8978,12955,17956,22445,25910,29887,35912,40385,44890,48851,51820,56293,59774,63735,4225,264,13203,8730,22181,18220,30135,25662,40137,36160,49115,44626,56045,52068,63999,59510,8450,12427,528,5017,26406,30383,17460,21949,44362,48323,36440,40913,60270,64231,51324,55797,12675,8202,4753,792,30631,26158,21685,17724,48587,44098,40665,36688,64495,60006,55549,51572,16900,21389,24854,28831,1056,5545,10034,14011,52812,57285,60766,64727,34920,39393,43898,47859,21125,17164,29079,24606,5281,1320,14259,9786,57037,53060,64991,60502,39145,35168,48123,43634,25350,29327,16404,20893,9506,13483,1584,6073,61262,65223,52316,56789,43370,47331,35448,39921,29575,25102,20629,16668,13731,9258,5809,1848,65487,60998,56541,52564,47595,43106,39673,35696,33800,38273,42778,46739,49708,54181,57662,61623,2112,6601,11090,15067,20068,24557,28022,31999,38025,34048,47003,42514,53933,49956,61887,57398,6337,2376,15315,10842,24293,20332,32247,27774,42250,46211,34328,38801,58158,62119,49212,53685,10562,14539,2640,7129,28518,32495,19572,24061,46475,41986,38553,34576,62383,57894,53437,49460,14787,10314,6865,2904,32743,28270,23797,19836,50700,55173,58654,62615,32808,37281,41786,45747,19012,23501,26966,30943,3168,7657,12146,16123,54925,50948,62879,58390,37033,33056,46011,41522,23237,19276,31191,26718,7393,3432,16371,11898,59150,63111,50204,54677,41258,45219,33336,37809,27462,31439,18516,23005,11618,15595,3696,8185,63375,58886,54429,50452,45483,40994,37561,33584,31687,27214,22741,18780,15843,11370,7921,3960];function A(N){for(var I=65535,$,O=0,P=N.byteLength;P--;)$=N[O],I=I>>8^W[(I^$)&255],O++;return I}},73676:function(ee,J,e){e.d(J,{$m:function(){return N},EY:function(){return r},JM:function(){return A},i_:function(){return W}});var B=e(19632),v=e.n(B),W=["UiLine","UiRect","UiRound","UiEllipse","UiArc","UiFloat","UiNumber","UiText"],A=["main","yellow","green","orange","purple","pink","cyan","black","white"],N=["null","add","update","remove"],I={257:1,258:2,259:5,260:7},$=["null","removeLayer","removeAll"];function O(b,Z){return b[Z]|b[Z+1]<<8}function P(b,Z){return b[Z]|b[Z+1]<<8|b[Z+2]<<16|b[Z+3]<<24}function F(b){var Z=0,k=b[Z++],D=b[Z++],n="".concat(k,"-").concat(D),t=b[Z++]|D<<8|k<<16,u=P(b,Z);Z+=4;var M=u&7,p=u>>3&7,y=u>>6&15,l=u>>10&15,h=u>>14&511,m=u>>23&511,c=P(b,Z);Z+=4;var g=c&1023,C=c>>10&2047,o=c>>21&2047,x=P(b,Z),S=x&1023,z=x>>10&2047,R=x>>21&2047;return{group:n,id:t,operate_tpyel:M,figure_tpye:p,layer:y,color:l,_a:h,_b:m,width:g,start_x:C,start_y:o,_c:S,_d:z,_e:R,number:x}}function r(b){var Z=O(b,0),k=O(b,2),D=O(b,4),n=[];if(Z===256)n.push({type:$[b[6]],obj:{layer:b[7]}});else if(Z===272){var t=F(b.subarray(6,21)),u=String.fromCharCode.apply(String,v()(b.subarray(21,21+t._b)));n.push({type:N[t.operate_tpyel],obj:{layer:t.layer,group:t.group,type:W[t.figure_tpye],id:t.id,name:"".concat(W[t.figure_tpye],"_").concat(t.id&255),color:A[t.color],lineWidth:t.width,x:t.start_x,y:t.start_y,fontSize:t._a,text:u}})}else if(Z in I)for(var M=I[Z],p=0;p<M;p++){var y=F(b.subarray(6+p*15,6+(p+1)*15)),l={layer:y.layer,group:y.group,type:W[y.figure_tpye],id:y.id,name:"".concat(W[y.figure_tpye],"_").concat(y.id&255),color:A[y.color],lineWidth:y.width,x:y.start_x,y:y.start_y};switch(W[y.figure_tpye].slice(2)){case"Line":l.x2=y._d,l.y2=y._e;break;case"Rect":l.width=y._d-y.start_x,l.height=y._e-y.start_y;break;case"Round":l.r=y._c;break;case"Ellipse":l.rx=y._d,l.ry=y._e;break;case"Arc":l.startAngle=y._a,l.endAngle=y._b,l.rx=y._d,l.ry=y._e;break;case"Float":l.fontSize=y._a,l.float=y.number/1e3;break;case"Number":l.fontSize=y._a,l.number=y.number;break}n.push({type:N[y.operate_tpyel],obj:l})}else console.log("unknown sub_id",Z);return{sender:k,receiver:D,events:n}}},13799:function(ee,J,e){e.d(J,{r:function(){return O}});var B=e(67294),v=Object.defineProperty,W=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,I=(F,r,b)=>r in F?v(F,r,{enumerable:!0,configurable:!0,writable:!0,value:b}):F[r]=b,$=(F,r)=>{for(var b in r||(r={}))A.call(r,b)&&I(F,b,r[b]);if(W)for(var b of W(r))N.call(r,b)&&I(F,b,r[b]);return F};const O=F=>B.createElement("svg",$({className:"moon_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:200,height:200},F),B.createElement("path",{d:"M472 991.6c-157 0-304.4-77.2-394.3-206.6-6.9-9.9-7.6-22.9-1.8-33.6 5.8-10.7 17.1-17.8 29.2-16.7l7.7.4c2.4.2 4.8.3 7.2.3 229.4 0 416-186.6 416-416 0-85-25.7-167-74.3-236.9-6.9-9.9-7.6-22.9-1.8-33.6 5.8-10.7 17.2-17.6 29.2-16.7C748.7 41.6 952 252.1 952 511.6c0 264.7-215.3 480-480 480zM169.7 797.1c78.1 82.7 187.2 130.6 302.3 130.6 229.4 0 416-186.6 416-416 0-204-144.9-373-339.7-408.6 34 66.9 51.7 140.7 51.7 216.6 0 247.8-188.9 452.4-430.3 477.4z",fill:"#2c2c2c"}));var P="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTQ3MiA5OTEuNmMtMTU3IDAtMzA0LjQtNzcuMi0zOTQuMy0yMDYuNi02LjktOS45LTcuNi0yMi45LTEuOC0zMy42IDUuOC0xMC43IDE3LjEtMTcuOCAyOS4yLTE2LjdsNy43LjRjMi40LjIgNC44LjMgNy4yLjMgMjI5LjQgMCA0MTYtMTg2LjYgNDE2LTQxNiAwLTg1LTI1LjctMTY3LTc0LjMtMjM2LjktNi45LTkuOS03LjYtMjIuOS0xLjgtMzMuNiA1LjgtMTAuNyAxNy4yLTE3LjYgMjkuMi0xNi43Qzc0OC43IDQxLjYgOTUyIDI1Mi4xIDk1MiA1MTEuNmMwIDI2NC43LTIxNS4zIDQ4MC00ODAgNDgwek0xNjkuNyA3OTcuMWM3OC4xIDgyLjcgMTg3LjIgMTMwLjYgMzAyLjMgMTMwLjYgMjI5LjQgMCA0MTYtMTg2LjYgNDE2LTQxNiAwLTIwNC0xNDQuOS0zNzMtMzM5LjctNDA4LjYgMzQgNjYuOSA1MS43IDE0MC43IDUxLjcgMjE2LjYgMCAyNDcuOC0xODguOSA0NTIuNC00MzAuMyA0NzcuNHoiIGZpbGw9IiMyYzJjMmMiLz48L3N2Zz4="},82843:function(ee,J,e){e.d(J,{r:function(){return O}});var B=e(67294),v=Object.defineProperty,W=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,I=(F,r,b)=>r in F?v(F,r,{enumerable:!0,configurable:!0,writable:!0,value:b}):F[r]=b,$=(F,r)=>{for(var b in r||(r={}))A.call(r,b)&&I(F,b,r[b]);if(W)for(var b of W(r))N.call(r,b)&&I(F,b,r[b]);return F};const O=F=>B.createElement("svg",$({className:"sun_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:200,height:200},F),B.createElement("path",{d:"M522.88 874.667A21.333 21.333 0 0 1 544.213 896v85.333a21.333 21.333 0 0 1-21.333 21.334h-21.333a21.333 21.333 0 0 1-21.334-21.334V896a21.333 21.333 0 0 1 21.334-21.333h21.333zm268.416-107.52 60.352 60.352a21.333 21.333 0 0 1 0 30.165l-15.083 15.083a21.333 21.333 0 0 1-30.186 0l-60.331-60.352a21.333 21.333 0 0 1 0-30.166l15.083-15.082a21.333 21.333 0 0 1 30.165 0zm-527.957 0 15.082 15.082a21.333 21.333 0 0 1 0 30.166l-60.352 60.352a21.333 21.333 0 0 1-30.165 0l-15.083-15.083a21.333 21.333 0 0 1 0-30.165l60.331-60.352a21.333 21.333 0 0 1 30.187 0zM512 277.333c141.376 0 256 114.624 256 256s-114.624 256-256 256-256-114.624-256-256 114.624-256 256-256zm0 64a192 192 0 1 0 0 384 192 192 0 0 0 0-384zm448.213 160a21.333 21.333 0 0 1 21.334 21.334V544a21.333 21.333 0 0 1-21.334 21.333H874.88A21.333 21.333 0 0 1 853.547 544v-21.333a21.333 21.333 0 0 1 21.333-21.334h85.333zm-810.666 0a21.333 21.333 0 0 1 21.333 21.334V544a21.333 21.333 0 0 1-21.333 21.333H64.213A21.333 21.333 0 0 1 42.88 544v-21.333a21.333 21.333 0 0 1 21.333-21.334h85.334zm687.04-307.413 15.082 15.083a21.333 21.333 0 0 1 0 30.165l-60.352 60.352a21.333 21.333 0 0 1-30.165 0l-15.083-15.083a21.333 21.333 0 0 1 0-30.165L806.4 193.92a21.333 21.333 0 0 1 30.187 0zm-618.496 0 60.352 60.352a21.333 21.333 0 0 1 0 30.165L263.36 299.52a21.333 21.333 0 0 1-30.187 0l-60.352-60.373a21.333 21.333 0 0 1 0-30.166l15.083-15.082a21.333 21.333 0 0 1 30.165 0zM522.9 64a21.333 21.333 0 0 1 21.334 21.333v85.334A21.333 21.333 0 0 1 522.9 192h-21.333a21.333 21.333 0 0 1-21.333-21.333V85.333A21.333 21.333 0 0 1 501.568 64h21.333z",fill:"#ebebeb"}));var P="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTUyMi44OCA4NzQuNjY3QTIxLjMzMyAyMS4zMzMgMCAwIDEgNTQ0LjIxMyA4OTZ2ODUuMzMzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzMzIDIxLjMzNGgtMjEuMzMzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzM0LTIxLjMzNFY4OTZhMjEuMzMzIDIxLjMzMyAwIDAgMSAyMS4zMzQtMjEuMzMzaDIxLjMzM3ptMjY4LjQxNi0xMDcuNTIgNjAuMzUyIDYwLjM1MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDAgMzAuMTY1bC0xNS4wODMgMTUuMDgzYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTg2IDBsLTYwLjMzMS02MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NmwxNS4wODMtMTUuMDgyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTY1IDB6bS01MjcuOTU3IDAgMTUuMDgyIDE1LjA4MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDAgMzAuMTY2bC02MC4zNTIgNjAuMzUyYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTY1IDBsLTE1LjA4My0xNS4wODNhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NWw2MC4zMzEtNjAuMzUyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTg3IDB6TTUxMiAyNzcuMzMzYzE0MS4zNzYgMCAyNTYgMTE0LjYyNCAyNTYgMjU2cy0xMTQuNjI0IDI1Ni0yNTYgMjU2LTI1Ni0xMTQuNjI0LTI1Ni0yNTYgMTE0LjYyNC0yNTYgMjU2LTI1NnptMCA2NGExOTIgMTkyIDAgMSAwIDAgMzg0IDE5MiAxOTIgMCAwIDAgMC0zODR6bTQ0OC4yMTMgMTYwYTIxLjMzMyAyMS4zMzMgMCAwIDEgMjEuMzM0IDIxLjMzNFY1NDRhMjEuMzMzIDIxLjMzMyAwIDAgMS0yMS4zMzQgMjEuMzMzSDg3NC44OEEyMS4zMzMgMjEuMzMzIDAgMCAxIDg1My41NDcgNTQ0di0yMS4zMzNhMjEuMzMzIDIxLjMzMyAwIDAgMSAyMS4zMzMtMjEuMzM0aDg1LjMzM3ptLTgxMC42NjYgMGEyMS4zMzMgMjEuMzMzIDAgMCAxIDIxLjMzMyAyMS4zMzRWNTQ0YTIxLjMzMyAyMS4zMzMgMCAwIDEtMjEuMzMzIDIxLjMzM0g2NC4yMTNBMjEuMzMzIDIxLjMzMyAwIDAgMSA0Mi44OCA1NDR2LTIxLjMzM2EyMS4zMzMgMjEuMzMzIDAgMCAxIDIxLjMzMy0yMS4zMzRoODUuMzM0em02ODcuMDQtMzA3LjQxMyAxNS4wODIgMTUuMDgzYTIxLjMzMyAyMS4zMzMgMCAwIDEgMCAzMC4xNjVsLTYwLjM1MiA2MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMS0zMC4xNjUgMGwtMTUuMDgzLTE1LjA4M2EyMS4zMzMgMjEuMzMzIDAgMCAxIDAtMzAuMTY1TDgwNi40IDE5My45MmEyMS4zMzMgMjEuMzMzIDAgMCAxIDMwLjE4NyAwem0tNjE4LjQ5NiAwIDYwLjM1MiA2MC4zNTJhMjEuMzMzIDIxLjMzMyAwIDAgMSAwIDMwLjE2NUwyNjMuMzYgMjk5LjUyYTIxLjMzMyAyMS4zMzMgMCAwIDEtMzAuMTg3IDBsLTYwLjM1Mi02MC4zNzNhMjEuMzMzIDIxLjMzMyAwIDAgMSAwLTMwLjE2NmwxNS4wODMtMTUuMDgyYTIxLjMzMyAyMS4zMzMgMCAwIDEgMzAuMTY1IDB6TTUyMi45IDY0YTIxLjMzMyAyMS4zMzMgMCAwIDEgMjEuMzM0IDIxLjMzM3Y4NS4zMzRBMjEuMzMzIDIxLjMzMyAwIDAgMSA1MjIuOSAxOTJoLTIxLjMzM2EyMS4zMzMgMjEuMzMzIDAgMCAxLTIxLjMzMy0yMS4zMzNWODUuMzMzQTIxLjMzMyAyMS4zMzMgMCAwIDEgNTAxLjU2OCA2NGgyMS4zMzN6IiBmaWxsPSIjZWJlYmViIi8+PC9zdmc+"},99734:function(ee,J,e){ee.exports=e.p+"static/about.6af660a8.md"},8938:function(ee,J,e){ee.exports=e.p+"static/ui_interface.1e01ba33.c"},75112:function(ee,J,e){ee.exports=e.p+"static/ui_interface.a365dcb1.h"},33562:function(ee,J,e){ee.exports=e.p+"static/ui_types.c92a992c.h"},19293:function(ee,J,e){ee.exports=e.p+"static/eula.84c08b78.md"},25665:function(ee,J,e){ee.exports=e.p+"static/background.d741a18b.png"}}]);
